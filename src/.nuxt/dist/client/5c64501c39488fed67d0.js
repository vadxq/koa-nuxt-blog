/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],[,,function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"e",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"i",function(){return x}),n.d(t,"f",function(){return w}),n.d(t,"a",function(){return C}),n.d(t,"j",function(){return S}),n.d(t,"k",function(){return k}),n.d(t,"m",function(){return T}),n.d(t,"l",function(){return E}),n.d(t,"n",function(){return N}),n.d(t,"h",function(){return _});n(57),n(222),n(20),n(23),n(60),n(116),n(32),n(27),n(15),n(56),n(224),n(28);var r=n(12),o=(n(30),n(31),n(0)),c=("function"==typeof Symbol&&Object(r.a)(Symbol.iterator),Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e});function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments[2];return o.a.extend({name:n||e.replace(/__/g,"-"),functional:!0,render:function(n,r){var data=r.data,o=r.children;return data.staticClass=(e+" "+(data.staticClass||"")).trim(),n(t,data,o)}})}function f(e,t){return Array.isArray(e)?e.concat(t):(e&&t.push(e),t)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top center 0",n=arguments[2];return{name:e,functional:!0,props:{group:{type:Boolean,default:!1},hideOnLeave:{type:Boolean,default:!1},leaveAbsolute:{type:Boolean,default:!1},mode:{type:String,default:n},origin:{type:String,default:t}},render:function(t,n){var r="transition"+(n.props.group?"-group":"");n.data=n.data||{},n.data.props={name:e,mode:n.props.mode},n.data.on=n.data.on||{},Object.isExtensible(n.data.on)||(n.data.on=c({},n.data.on));var o=[],l=[];o.push(function(e){e.style.transformOrigin=n.props.origin,e.style.webkitTransformOrigin=n.props.origin}),n.props.leaveAbsolute&&l.push(function(e){return e.style.position="absolute"}),n.props.hideOnLeave&&l.push(function(e){return e.style.display="none"});var d=n.data.on,m=d.beforeEnter,h=d.leave;return n.data.on.beforeEnter=function(){return f(m,o)},n.data.on.leave=f(h,l),t(r,n.data,n.children)}}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return{name:e,functional:!0,props:{mode:{type:String,default:n}},render:function(n,r){return n("transition",{props:c({},r.props,{name:e}),on:t},r.children)}}}function h(e,path,t){var n=path.length-1;if(n<0)return void 0===e?t:e;for(var i=0;i<n;i++){if(null==e)return t;e=e[path[i]]}return null==e?t:void 0===e[path[n]]?t:e[path[n]]}function v(a,b){if(a===b)return!0;if(a instanceof Date&&b instanceof Date&&a.getTime()!==b.getTime())return!1;if(a!==Object(a)||b!==Object(b))return!1;var e=Object.keys(a);return e.length===Object.keys(b).length&&e.every(function(p){return v(a[p],b[p])})}function y(e,path,t){return path&&path.constructor===String?h(e,(path=(path=path.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),t):t}function x(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return 0;var t=+window.getComputedStyle(e).getPropertyValue("z-index");return isNaN(t)?x(e.parentNode):t}function w(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];void 0!==e[r]&&(n[r]=e[r])}return n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return null==e||""===e?void 0:isNaN(+e)?String(e):""+Number(e)+t}function S(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var k=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34}),O="$vuetify.icons.";function T(e,t){return t.startsWith(O)?y(e,t,t):t}function E(e){return Object.keys(e)}function N(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e,t,n){return e.$slots[t]&&e.$scopedSlots[t]&&e.$scopedSlots[t].name?n?"v-slot":"scoped":e.$slots[t]?"normal":e.$scopedSlots[t]?"scoped":void 0}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var content=function(e,t){var content=e[1]||"",n=e[3];if(!n)return content;if(t&&"function"==typeof btoa){var r=(c=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+" */"),o=n.sources.map(function(source){return"/*# sourceURL="+n.sourceRoot+source+" */"});return[content].concat(o).concat([r]).join("\n")}var c;return[content].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+content+"}":content}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var c=e[i];null!=c[0]&&r[c[0]]||(n&&!c[2]?c[2]=n:n&&(c[2]="("+c[2]+") and ("+n+")"),t.push(c))}},t}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],c=o[0],l={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(t),n.d(t,"default",function(){return x});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,f=0,d=!1,m=function(){},h=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function x(e,t,n,o){d=n,h=o||{};var l=r(e,t);return w(l),function(t){for(var n=[],i=0;i<l.length;i++){var o=l[i];(f=c[o.id]).refs--,n.push(f)}t?w(l=r(e,t)):l=[];for(i=0;i<n.length;i++){var f;if(0===(f=n[i]).refs){for(var d=0;d<f.parts.length;d++)f.parts[d]();delete c[f.id]}}}}function w(e){for(var i=0;i<e.length;i++){var t=e[i],n=c[t.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](t.parts[r]);for(;r<t.parts.length;r++)n.parts.push(S(t.parts[r]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{var o=[];for(r=0;r<t.parts.length;r++)o.push(S(t.parts[r]));c[t.id]={id:t.id,refs:1,parts:o}}}}function C(){var e=document.createElement("style");return e.type="text/css",head.appendChild(e),e}function S(e){var t,n,r=document.querySelector("style["+v+'~="'+e.id+'"]');if(r){if(d)return m;r.parentNode.removeChild(r)}if(y){var o=f++;r=l||(l=C()),t=T.bind(null,r,o,!1),n=T.bind(null,r,o,!0)}else r=C(),t=function(e,t){var n=t.css,r=t.media,o=t.sourceMap;r&&e.setAttribute("media",r);h.ssrId&&e.setAttribute(v,t.id);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var k,O=(k=[],function(e,t){return k[e]=t,k.filter(Boolean).join("\n")});function T(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=O(t,o);else{var c=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(c,l[t]):e.appendChild(c)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return f});n(98),n(85),n(23),n(28),n(39),n(45);function r(e,t,n){if(n&&(t={_isVue:!0,$parent:n,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return"[Vuetify] "+e+(t?function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,i){return""+(0===i?"---\x3e ":" ".repeat(5+2*i))+(Array.isArray(e)?h(e[0])+"... ("+e[1]+" recursive calls)":h(e))}).join("\n")}return"\n\n(found in "+h(e)+")"}(t):"")}function o(e,t,n){var o=r(e,t,n);null!=o&&console.info(o)}function c(e,t,n){var o=r(e,t,n);null!=o&&console.warn(o)}function l(e,t,n){var o=r(e,t,n);null!=o&&console.error(o)}function f(e,t,n,r){c("'"+e+"' is deprecated, use '"+t+"' instead",n,r)}var d=/(?:^|[-_])(\w)/g,m=function(e){return e.replace(d,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")};function h(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},r=n.name||n._componentTag,o=n.__file;if(!r&&o){var c=o.match(/([^\/\\]+)\.vue$/);r=c&&c[1]}return(r?"<"+m(r)+">":"<Anonymous>")+(o&&!1!==t?" at "+o:"")}},function(e,t,n){"use strict";function r(e,t,n,r,o,c,l){try{var f=e[c](l),d=f.value}catch(e){return void n(e)}f.done?t(d):Promise.resolve(d).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,c){var l=e.apply(t,n);function f(e){r(l,o,c,f,d,"next",e)}function d(e){r(l,o,c,f,d,"throw",e)}f(void 0)})}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"b",function(){return c});var r=n(0),o=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function c(e){var t=o({},e.props,e.injections),n=l.options.computed.isDark.call(t);return l.options.computed.themeClasses.call({isDark:n})}var l=r.a.extend().extend({name:"themeable",provide:function(){return{theme:this.themeableProvide}},inject:{theme:{default:{isDark:!1}}},props:{dark:{type:Boolean,default:null},light:{type:Boolean,default:null}},data:function(){return{themeableProvide:{isDark:!1}}},computed:{isDark:function(){return!0===this.dark||!0!==this.light&&this.theme.isDark},themeClasses:function(){return{"theme--dark":this.isDark,"theme--light":!this.isDark}},rootIsDark:function(){return!0===this.dark||!0!==this.light&&this.$vuetify.dark},rootThemeClasses:function(){return{"theme--dark":this.rootIsDark,"theme--light":!this.rootIsDark}}},watch:{isDark:{handler:function(e,t){e!==t&&(this.themeableProvide.isDark=this.isDark)},immediate:!0}}});t.a=l},,function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"linear",function(){return B}),n.d(r,"easeInQuad",function(){return M}),n.d(r,"easeOutQuad",function(){return I}),n.d(r,"easeInOutQuad",function(){return z}),n.d(r,"easeInCubic",function(){return P}),n.d(r,"easeOutCubic",function(){return L}),n.d(r,"easeInOutCubic",function(){return H}),n.d(r,"easeInQuart",function(){return F}),n.d(r,"easeOutQuart",function(){return V}),n.d(r,"easeInOutQuart",function(){return j}),n.d(r,"easeInQuint",function(){return U}),n.d(r,"easeOutQuint",function(){return W}),n.d(r,"easeInOutQuint",function(){return $});n(20),n(28),n(32),n(23);var o=n(0);n(27),n(15),n(163);var c={bar:0,bottom:0,footer:0,insetFooter:0,left:0,right:0,top:0,components:{bar:{},bottom:{},footer:{},insetFooter:{},left:{},right:{},top:{}},bind:function(e,t,n){this.components[t]&&(this.components[t]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n),this.update(t))},unbind:function(e,t){null!=this.components[t][e]&&(delete this.components[t][e],this.update(t))},update:function(e){this[e]=Object.values(this.components[e]).reduce(function(e,t){return e+t},0)}},l=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},f={thresholds:{xs:600,sm:960,md:1280,lg:1920},scrollbarWidth:16};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),o.a.extend({data:function(){return l({clientHeight:h(),clientWidth:m(),resizeTimeout:void 0},f,e)},computed:{breakpoint:function(){var e=this.clientWidth<this.thresholds.xs,t=this.clientWidth<this.thresholds.sm&&!e,n=this.clientWidth<this.thresholds.md-this.scrollbarWidth&&!(t||e),r=this.clientWidth<this.thresholds.lg-this.scrollbarWidth&&!(n||t||e),o=this.clientWidth>=this.thresholds.lg-this.scrollbarWidth,c=e,l=t,f=(e||t)&&!(n||r||o),d=!e&&(t||n||r||o),m=n,h=(e||t||n)&&!(r||o),v=!(e||t)&&(n||r||o),y=r,x=(e||t||n||r)&&!o,w=!(e||t||n)&&(r||o),C=o,S=void 0;switch(!0){case e:S="xs";break;case t:S="sm";break;case n:S="md";break;case r:S="lg";break;default:S="xl"}return{xs:e,sm:t,md:n,lg:r,xl:o,name:S,xsOnly:c,smOnly:l,smAndDown:f,smAndUp:d,mdOnly:m,mdAndDown:h,mdAndUp:v,lgOnly:y,lgAndDown:x,lgAndUp:w,xlOnly:C,width:this.clientWidth,height:this.clientHeight,thresholds:this.thresholds,scrollbarWidth:this.scrollbarWidth}}},created:function(){"undefined"!=typeof window&&window.addEventListener("resize",this.onResize,{passive:!0})},beforeDestroy:function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.setDimensions,200)},setDimensions:function(){this.clientHeight=h(),this.clientWidth=m()}}})}function m(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}function h(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var v=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},y={primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!1!==e&&v({},y,e)}var w={complete:"fas fa-check",cancel:"fas fa-times-circle",close:"fas fa-times",delete:"fas fa-times-circle",clear:"fas fa-times-circle",success:"fas fa-check-circle",info:"fas fa-info-circle",warning:"fas fa-exclamation",error:"fas fa-exclamation-triangle",prev:"fas fa-chevron-left",next:"fas fa-chevron-right",checkboxOn:"fas fa-check-square",checkboxOff:"far fa-square",checkboxIndeterminate:"fas fa-minus-square",delimiter:"fas fa-circle",sort:"fas fa-sort-up",expand:"fas fa-chevron-down",menu:"fas fa-bars",subgroup:"fas fa-caret-down",dropdown:"fas fa-caret-down",radioOn:"far fa-dot-circle",radioOff:"far fa-circle",edit:"fas fa-edit",ratingEmpty:"far fa-star",ratingFull:"fas fa-star",ratingHalf:"fas fa-star-half"};var C={md:{complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"clear",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached"},mdi:{complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-exclamation",error:"mdi-alert",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half"},fa:w,fa4:{complete:"fa fa-check",cancel:"fa fa-times-circle",close:"fa fa-times",delete:"fa fa-times-circle",clear:"fa fa-times-circle",success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation",error:"fa fa-exclamation-triangle",prev:"fa fa-chevron-left",next:"fa fa-chevron-right",checkboxOn:"fa fa-check-square",checkboxOff:"fa fa-square-o",checkboxIndeterminate:"fa fa-minus-square",delimiter:"fa fa-circle",sort:"fa fa-sort-up",expand:"fa fa-chevron-down",menu:"fa fa-bars",subgroup:"fa fa-caret-down",dropdown:"fa fa-caret-down",radioOn:"fa fa-dot-circle",radioOff:"fa fa-circle-o",edit:"fa fa-pencil",ratingEmpty:"fa fa-star-o",ratingFull:"fa fa-star",ratingHalf:"fa fa-star-half-o"},faSvg:function(component,e){var t={};for(var n in e)t[n]={component:component,props:{icon:e[n].split(" fa-")}};return t}("font-awesome-icon",w)};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"md",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},C[e]||C.md,t)}var k=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},O={minifyTheme:null,themeCache:null,customProperties:!1,cspNonce:null};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k({},O,e)}n(57),n(30),n(31),n(60),n(116);var E={dataIterator:{rowsPerPageText:"Items per page:",rowsPerPageAll:"All",pageText:"{0}-{1} of {2}",noResultsText:"No matching records found",nextPage:"Next page",prevPage:"Previous page"},dataTable:{rowsPerPageText:"Rows per page:"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual"}},N=n(2),_=n(5);var A="$vuetify.",D=Symbol("Lang fallback");function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{locales:Object.assign({en:E},e.locales),current:e.current||"en",t:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.startsWith(A)?e.t?e.t.apply(e,[t].concat(function(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}(r))):function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.replace(A,""),c=Object(N.g)(t,o,D);return c===D&&(r?(Object(_.a)('Translation key "'+o+'" not found in fallback'),c=n):(Object(_.c)('Translation key "'+o+'" not found, falling back to default'),c=e(E,n,!0))),c}(this.locales[this.current],t).replace(/\{(\d+)\}/g,function(e,t){return String(r[+t])}):t}}}var B=function(e){return e},M=function(e){return e*e},I=function(e){return e*(2-e)},z=function(e){return e<.5?2*e*e:(4-2*e)*e-1},P=function(e){return e*e*e},L=function(e){return--e*e*e+1},H=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},F=function(e){return e*e*e*e},V=function(e){return 1- --e*e*e*e},j=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},U=function(e){return e*e*e*e*e},W=function(e){return 1+--e*e*e*e*e},$=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e};function G(e){return null==e?e:e.constructor.name}function Y(e){return"string"==typeof e?document.querySelector(e):e&&e._isVue?e.$el:e instanceof HTMLElement?e:null}var X=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=X({container:document.scrollingElement||document.body||document.documentElement,duration:500,offset:0,easing:"easeInOutCubic",appOffset:!0},t),c=function(e){var t=Y(e);if(t)return t;throw"string"==typeof e?new Error('Container element "'+e+'" not found.'):new TypeError("Container must be a Selector/HTMLElement/VueComponent, received "+G(e)+" instead.")}(n.container);if(n.appOffset){var l=c.classList.contains("v-navigation-drawer"),f=c.classList.contains("v-navigation-drawer--clipped");n.offset+=o.a.prototype.$vuetify.application.bar,l&&!f||(n.offset+=o.a.prototype.$vuetify.application.top)}var d=performance.now(),m=function(e){if("number"==typeof e)return e;var t=Y(e);if(!t)throw"string"==typeof e?new Error('Target element "'+e+'" not found.'):new TypeError("Target must be a Number/Selector/HTMLElement/VueComponent, received "+G(e)+" instead.");for(var n=0;t;)n+=t.offsetTop,t=t.offsetParent;return n}(e)-n.offset,h=c.scrollTop;if(m===h)return Promise.resolve(m);var v="function"==typeof n.easing?n.easing:r[n.easing];if(!v)throw new TypeError('Easing function "'+n.easing+'" not found.');return new Promise(function(e){return requestAnimationFrame(function t(r){var o=r-d,progress=Math.abs(n.duration?Math.min(o/n.duration,1):1);if(c.scrollTop=Math.floor(h+(m-h)*v(progress)),1===progress||c.clientHeight+c.scrollTop===c.scrollHeight)return e(m);requestAnimationFrame(t)})})}var J={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.installed){this.installed=!0,o.a!==e&&Object(_.a)("Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this"),function(e,t){var n=t||"^2.5.18",r=n.split(".",3).map(function(e){return e.replace(/\D/g,"")}).map(Number),o=e.version.split(".",3).map(function(e){return parseInt(e,10)});o[0]===r[0]&&(o[1]>r[1]||o[1]===r[1]&&o[2]>=r[2])||Object(_.c)("Vuetify requires Vue version "+n)}(e);var n=R(t.lang);if(e.prototype.$vuetify=new e({mixins:[d(t.breakpoint)],data:{application:c,dark:!1,icons:S(t.iconfont,t.icons),lang:n,options:T(t.options),rtl:t.rtl,theme:x(t.theme)},methods:{goTo:K,t:n.t.bind(n)}}),t.directives)for(var r in t.directives)e.directive(r,t.directives[r]);!function t(n){if(n){for(var r in n){var component=n[r];component&&!t(component.$_vuetify_subcomponents)&&e.component(r,component)}return!0}return!1}(t.components)}},version:"1.5.7"};t.a=J},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.a.extend({mixins:t})}},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}n.d(t,"a",function(){return o})},,,,function(e,t,n){"use strict";n(61),n(62),n(15),n(32),n(85),n(30),n(31),n(27);var r=n(0),o=function(){return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return!!e&&!!e.match(/^(#|(rgb|hsl)a?\()/)}t.a=r.a.extend({name:"colorable",props:{color:String},methods:{setBackgroundColor:function(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(e)?data.style=c({},data.style,{"background-color":""+e,"border-color":""+e}):e&&(data.class=c({},data.class,l({},e,!0))),data},setTextColor:function(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f(e))data.style=c({},data.style,{color:""+e,"caret-color":""+e});else if(e){var t=e.toString().trim().split(" ",2),n=o(t,2),r=n[0],d=n[1];data.class=c({},data.class,l({},r+"--text",!0)),d&&(data.class["text--"+d]=!0)}return data}}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},t=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(source).filter(function(e){return Object.getOwnPropertyDescriptor(source,e).enumerable}))),t.forEach(function(t){r(e,t,source[t])})}return e}n.d(t,"a",function(){return o})},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.freeze({base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"}),o=Object.freeze({base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"}),c=Object.freeze({base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"}),l=Object.freeze({base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"}),f=Object.freeze({base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"}),d=Object.freeze({base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"}),m=Object.freeze({base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"}),h=Object.freeze({base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"}),v=Object.freeze({base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"}),y=Object.freeze({base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"}),x=Object.freeze({base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"}),w=Object.freeze({base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"}),C=Object.freeze({base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"}),S=Object.freeze({base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"}),k=Object.freeze({base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"}),O=Object.freeze({base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"}),T=Object.freeze({base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"}),E=Object.freeze({base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"}),N=Object.freeze({base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"}),_=Object.freeze({black:"#000000",white:"#ffffff",transparent:"transparent"});t.default=Object.freeze({red:r,pink:o,purple:c,deepPurple:l,indigo:f,blue:d,lightBlue:m,cyan:h,teal:v,green:y,lightGreen:x,lime:w,yellow:C,amber:S,orange:k,deepOrange:O,brown:T,blueGrey:E,grey:N,shades:_})},,,,,,,,,function(e,t,n){"use strict";n(28);var r=n(0),o=n(118),c=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=r.a.extend({name:"routable",directives:{Ripple:o.a},props:{activeClass:String,append:Boolean,disabled:Boolean,exact:{type:Boolean,default:void 0},exactActiveClass:String,href:[String,Object],to:[String,Object],nuxt:Boolean,replace:Boolean,ripple:[Boolean,Object],tag:String,target:String},computed:{computedRipple:function(){return!(!this.ripple||this.disabled)&&this.ripple}},methods:{click:function(e){this.$emit("click",e)},generateRouteLink:function(e){var t,n,r,o=this.exact,l=void 0,data=(t={attrs:{disabled:this.disabled},class:e,props:{},directives:[{name:"ripple",value:this.computedRipple}]},n=this.to?"nativeOn":"on",r=c({},this.$listeners,{click:this.click}),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t);if(void 0===this.exact&&(o="/"===this.to||this.to===Object(this.to)&&"/"===this.to.path),this.to){var f=this.activeClass,d=this.exactActiveClass||f;this.proxyClass&&(f+=" "+this.proxyClass,d+=" "+this.proxyClass),l=this.nuxt?"nuxt-link":"router-link",Object.assign(data.props,{to:this.to,exact:o,activeClass:f,exactActiveClass:d,append:this.append,replace:this.replace})}else"a"===(l=(this.href?"a":this.tag)||"a")&&this.href&&(data.attrs.href=this.href);return this.target&&(data.attrs.target=this.target),{tag:l,data:data}}}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(57),n(27),n(15),n(56);function r(e){return{name:"v-"+e,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,n){var r=n.props,data=n.data,o=n.children;data.staticClass=(e+" "+(data.staticClass||"")).trim();var c=data.attrs;if(c){data.attrs={};var l=Object.keys(c).filter(function(e){if("slot"===e)return!1;var t=c[e];return e.startsWith("data-")?(data.attrs[e]=t,!1):t||"string"==typeof t});l.length&&(data.staticClass+=" "+l.join(" "))}return r.id&&(data.domProps=data.domProps||{},data.domProps.id=r.id),t(r.tag,data,o)}}}},,,,,,,,,,function(e,t,n){"use strict";n(120),n(256);var r=n(79),o=n(78);t.a=r.a.extend({name:"v-window",provide:function(){return{windowGroup:this}},directives:{Touch:o.a},props:{mandatory:{type:Boolean,default:!0},reverse:{type:Boolean,default:void 0},touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data:function(){return{internalHeight:void 0,isActive:!1,isBooted:!1,isReverse:!1}},computed:{computedTransition:function(){return this.isBooted?"v-window-"+(this.vertical?"y":"x")+(this.internalReverse===!this.$vuetify.rtl?"-reverse":"")+"-transition":""},internalIndex:function(){var e=this;return this.items.findIndex(function(t,i){return e.internalValue===e.getValue(t,i)})},internalReverse:function(){return void 0!==this.reverse?this.reverse:this.isReverse}},watch:{internalIndex:"updateReverse"},mounted:function(){var e=this;this.$nextTick(function(){return e.isBooted=!0})},methods:{genContainer:function(){return this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight}},this.$slots.default)},next:function(){this.isReverse=!1;var e=(this.internalIndex+1)%this.items.length,t=this.items[e];this.internalValue=this.getValue(t,e)},prev:function(){this.isReverse=!0;var e=(this.internalIndex+this.items.length-1)%this.items.length,t=this.items[e];this.internalValue=this.getValue(t,e)},updateReverse:function(e,t){this.isReverse=e<t}},render:function(e){var data={staticClass:"v-window",directives:[]};if(!this.touchless){var t=this.touch||{left:this.next,right:this.prev};data.directives.push({name:"touch",value:t})}return e("div",data,[this.genContainer()])}})},function(e,t){e.exports=function(component,e){var t="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(t.components=component.exports.options.components),t.components=t.components||{},e)t.components[i]=t.components[i]||e[i]}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(115);function o(e,t,n){return Object(r.a)(e,t,n).extend({name:"groupable",props:{activeClass:{type:String,default:function(){if(this[e])return this[e].activeClass}},disabled:Boolean},data:function(){return{isActive:!1}},computed:{groupClasses:function(){return this.activeClass?(e={},t=this.activeClass,n=this.isActive,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e):{};var e,t,n}},created:function(){this[e]&&this[e].register(this)},beforeDestroy:function(){this[e]&&this[e].unregister(this)},methods:{toggle:function(){this.$emit("change")}}})}o("itemGroup")},,function(e,t,n){"use strict";var r=n(2),o=function(e){var t=e.touchstartX,n=e.touchendX,r=e.touchstartY,o=e.touchendY;e.offsetX=n-t,e.offsetY=o-r,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&o<r-16&&e.up(e),e.down&&o>r+16&&e.down(e))};function c(e){var t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:function(e){return function(e,t){var n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start&&t.start(Object.assign(e,t))}(e,t)},touchend:function(e){return function(e,t){var n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end&&t.end(Object.assign(e,t)),o(t)}(e,t)},touchmove:function(e){return function(e,t){var n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move&&t.move(Object.assign(e,t))}(e,t)}}}t.a={inserted:function(e,t,n){var o=t.value,l=o.parent?e.parentElement:e,f=o.options||{passive:!0};if(l){var d=c(t.value);l._touchHandlers=Object(l._touchHandlers),l._touchHandlers[n.context._uid]=d,Object(r.l)(d).forEach(function(e){l.addEventListener(e,d[e],f)})}},unbind:function(e,t,n){var o=t.value.parent?e.parentElement:e;if(o&&o._touchHandlers){var c=o._touchHandlers[n.context._uid];Object(r.l)(c).forEach(function(e){o.removeEventListener(e,c[e])}),delete o._touchHandlers[n.context._uid]}}}},function(e,t,n){"use strict";n(120),n(39),n(45),n(20),n(254);var r=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change";return r.a.extend({name:"proxyable",model:{prop:e,event:t},props:o({},e,{required:!1}),data:function(){return{internalLazyValue:this[e]}},computed:{internalValue:{get:function(){return this.internalLazyValue},set:function(e){e!==this.internalLazyValue&&(this.internalLazyValue=e,this.$emit(t,e))}}},watch:o({},e,function(e){this.internalLazyValue=e})})}(),l=n(7),f=n(10),d=n(5);n.d(t,"a",function(){return h});var m=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},h=Object(f.a)(c,l.a).extend({name:"base-item-group",props:{activeClass:{type:String,default:"v-item--active"},mandatory:Boolean,max:{type:[Number,String],default:null},multiple:Boolean},data:function(){return{internalLazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,items:[]}},computed:{classes:function(){return m({},this.themeClasses)},selectedItems:function(){var e=this;return this.items.filter(function(t,n){return e.toggleMethod(e.getValue(t,n))})},selectedValues:function(){return Array.isArray(this.internalValue)?this.internalValue:[this.internalValue]},toggleMethod:function(){var e=this;if(!this.multiple)return function(t){return e.internalValue===t};var t=this.internalValue;return Array.isArray(t)?function(e){return t.includes(e)}:function(){return!1}}},watch:{internalValue:function(){this.$nextTick(this.updateItemsState)}},created:function(){this.multiple&&!Array.isArray(this.internalValue)&&Object(d.c)("Model must be bound to an array if the multiple property is true.",this)},methods:{getValue:function(e,i){return null==e.value||""===e.value?i:e.value},onClick:function(e,t){this.updateInternalValue(this.getValue(e,t))},register:function(e){var t=this,n=this.items.push(e)-1;e.$on("change",function(){return t.onClick(e,n)}),this.mandatory&&null==this.internalLazyValue&&this.updateMandatory(),this.updateItem(e,n)},unregister:function(e){if(!this._isDestroyed){var t=this.items.indexOf(e),n=this.getValue(e,t);if(this.items.splice(t,1),!(this.selectedValues.indexOf(n)<0)){if(!this.mandatory)return this.updateInternalValue(n);this.multiple&&Array.isArray(this.internalValue)?this.internalValue=this.internalValue.filter(function(e){return e!==n}):this.internalValue=void 0,this.selectedItems.length||this.updateMandatory(!0)}}},updateItem:function(e,t){var n=this.getValue(e,t);e.isActive=this.toggleMethod(n)},updateItemsState:function(){if(this.mandatory&&!this.selectedItems.length)return this.updateMandatory();this.items.forEach(this.updateItem)},updateInternalValue:function(e){this.multiple?this.updateMultiple(e):this.updateSingle(e)},updateMandatory:function(e){if(this.items.length){var t=e?this.items.length-1:0;this.updateInternalValue(this.getValue(this.items[t],t))}},updateMultiple:function(e){var t=(Array.isArray(this.internalValue)?this.internalValue:[]).slice(),n=t.findIndex(function(t){return t===e});this.mandatory&&n>-1&&t.length-1<1||null!=this.max&&n<0&&t.length+1>this.max||(n>-1?t.splice(n,1):t.push(e),this.internalValue=t)},updateSingle:function(e){var t=e===this.internalValue;this.mandatory&&t||(this.internalValue=t?void 0:e)}},render:function(e){return e("div",{staticClass:"v-item-group",class:this.classes},this.$slots.default)}});h.extend({name:"v-item-group",provide:function(){return{itemGroup:this}}})},function(e,t,n){"use strict";n.d(t,"b",function(){return l});var r=n(0),o=n(2),c={absolute:Boolean,bottom:Boolean,fixed:Boolean,left:Boolean,right:Boolean,top:Boolean};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.extend({name:"positionable",props:e.length?Object(o.f)(c,e):c})}t.a=l()},function(e,t,n){"use strict";n(20);var r=n(2),o=n(0);t.a=o.a.extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles:function(){var e={},t=Object(r.a)(this.height),n=Object(r.a)(this.minHeight),o=Object(r.a)(this.minWidth),c=Object(r.a)(this.maxHeight),l=Object(r.a)(this.maxWidth),f=Object(r.a)(this.width);return t&&(e.height=t),n&&(e.minHeight=n),o&&(e.minWidth=o),c&&(e.maxHeight=c),l&&(e.maxWidth=l),f&&(e.width=f),e}}})},function(e,t,n){"use strict";var r=n(0);t.a=r.a.extend({name:"ssr-bootable",data:function(){return{isBooted:!1}},mounted:function(){var e=this;window.requestAnimationFrame(function(){e.$el.setAttribute("data-booted","true"),e.isBooted=!0})}})},function(e,t,n){"use strict";t.a={inserted:function(e,t){var n=t.value,r=t.options||{passive:!0};window.addEventListener("resize",n,r),e._onResize={callback:n,options:r},t.modifiers&&t.modifiers.quiet||n()},unbind:function(e){if(e._onResize){var t=e._onResize,n=t.callback,r=t.options;window.removeEventListener("resize",n,r),delete e._onResize}}}},,,,,,,,,,,,,,,,,,function(e,t,n){var content=n(241);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("056ab49e",content,!0,{sourceMap:!1})},,function(e,t,n){"use strict";var r=n(0);t.a=r.a.extend({name:"v-card-title",functional:!0,props:{primaryTitle:Boolean},render:function(e,t){var data=t.data,n=t.props,r=t.children;return data.staticClass=("v-card__title "+(data.staticClass||"")).trim(),n.primaryTitle&&(data.staticClass+=" v-card__title--primary"),e("div",data,r)}})},function(e,t,n){"use strict";n(101);var r=n(48);t.a=Object(r.a)("container")},function(e,t,n){"use strict";n(242);var r=n(82);t.a={name:"v-content",mixins:[r.a],props:{tag:{type:String,default:"main"}},computed:{styles:function(){var e=this.$vuetify.application,t=e.bar;return{paddingTop:e.top+t+"px",paddingRight:e.right+"px",paddingBottom:e.footer+e.insetFooter+e.bottom+"px",paddingLeft:e.left+"px"}}},render:function(e){var data={staticClass:"v-content",style:this.styles,ref:"content"};return e(this.tag,data,[e("div",{staticClass:"v-content__wrap"},this.$slots.default)])}}},function(e,t,n){"use strict";n(101);var r=n(48);t.a=Object(r.a)("flex")},function(e,t,n){"use strict";n(101);var r=n(48);t.a=Object(r.a)("layout")},function(e,t,n){"use strict";n(227),n(229);var r=n(16);n(20);var o=n(0).a.extend({name:"elevatable",props:{elevation:[Number,String]},computed:{computedElevation:function(){return this.elevation},elevationClasses:function(){return this.computedElevation?(e={},t="elevation-"+this.computedElevation,n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e):{};var e,t,n}}}),c=n(81),l=n(7),f=n(10),d=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},m=Object(f.a)(r.a,o,c.a,l.a).extend({name:"v-sheet",props:{tag:{type:String,default:"div"},tile:Boolean},computed:{classes:function(){return d({"v-sheet":!0,"v-sheet--tile":this.tile},this.themeClasses,this.elevationClasses)},styles:function(){return this.measurableStyles}},render:function(e){var data={class:this.classes,style:this.styles,on:this.$listeners};return e(this.tag,this.setBackgroundColor(this.color,data),this.$slots.default)}}),h=n(47),v=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(f.a)(h.a,m).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,raised:Boolean},computed:{classes:function(){return v({"v-card":!0,"v-card--flat":this.flat,"v-card--hover":this.hover},m.options.computed.classes.call(this))},styles:function(){var style=v({},m.options.computed.styles.call(this));return this.img&&(style.background='url("'+this.img+'") center center / cover no-repeat'),style}},render:function(e){var t=this.generateRouteLink(this.classes),n=t.tag,data=t.data;return data.style=this.styles,e(n,this.setBackgroundColor(this.color,data),this.$slots.default)}})},function(e,t,n){"use strict";n(119),n(39),n(45),n(144),n(239);var r,o=n(16),c=(n(20),n(0)),l=c.a.extend({name:"sizeable",props:{large:Boolean,medium:Boolean,size:{type:[Number,String]},small:Boolean,xLarge:Boolean}}),f=n(7),d=n(2),m=n(10),h=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};!function(e){e.small="16px",e.default="24px",e.medium="28px",e.large="36px",e.xLarge="40px"}(r||(r={}));var v=Object(m.a)(o.a,l,f.a).extend({name:"v-icon",props:{disabled:Boolean,left:Boolean,right:Boolean},methods:{getIcon:function(){var e="";return this.$slots.default&&(e=this.$slots.default[0].text.trim()),Object(d.m)(this,e)},getSize:function(){var e={small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},t=Object(d.l)(e).find(function(t){return e[t]});return t&&r[t]||Object(d.a)(this.size)},getDefaultData:function(){return{staticClass:"v-icon",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.$listeners.click||this.$listeners["!click"],"v-icon--right":this.right},attrs:h({"aria-hidden":!0},this.$attrs),on:this.$listeners}},applyColors:function(data){data.class=h({},data.class,this.themeClasses),this.setTextColor(this.color,data)},renderFontIcon:function(e,t){var n=[],data=this.getDefaultData(),r="material-icons",o=e.indexOf("-"),c=o<=-1;c?n.push(e):function(e){return["fas","far","fal","fab"].some(function(t){return e.includes(t)})}(r=e.slice(0,o))&&(r=""),data.class[r]=!0,data.class[e]=!c;var l=this.getSize();return l&&(data.style={fontSize:l}),this.applyColors(data),t("i",data,n)},renderSvgIcon:function(e,t){var data=this.getDefaultData();data.class["v-icon--is-component"]=!0;var n=this.getSize();n&&(data.style={fontSize:n,height:n}),this.applyColors(data);var component=e.component;return data.props=e.props,data.nativeOn=data.on,t(component,data)}},render:function(e){var t=this.getIcon();return"string"==typeof t?this.renderFontIcon(t,e):this.renderSvgIcon(t,e)}});t.a=c.a.extend({name:"v-icon",$_wrapperFor:v,functional:!0,render:function(e,t){var data=t.data,n=t.children,r="";return data.domProps&&(r=data.domProps.textContent||data.domProps.innerHTML||r,delete data.domProps.textContent,delete data.domProps.innerHTML),e(v,data,r?[r]:n)}})},,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return c});var r=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";return r.a.extend({name:"toggleable",model:{prop:t,event:n},props:o({},t,{required:!1}),data:function(){return{isActive:!!this[t]}},watch:(e={},o(e,t,function(e){this.isActive=!!e}),o(e,"isActive",function(e){!!e!==this[t]&&this.$emit(n,e)}),e)})}var l=c();t.a=l},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return d});var r=n(0),o=n(5);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(){return Object(o.c)("The "+e+" component must be used inside a "+t)}}function f(e,t,n){var o=t&&n?{register:l(t,n),unregister:l(t,n)}:null;return r.a.extend({name:"registrable-inject",inject:c({},e,{default:o})})}function d(e){return r.a.extend({name:"registrable-provide",methods:{register:null,unregister:null},provide:function(){return c({},e,{register:this.register,unregister:this.unregister})}})}},,function(e,t,n){"use strict";var r=n(109);t.a=r.a},function(e,t,n){"use strict";n(20),n(23),n(61),n(62),n(15);var r=n(5);function o(e,t){e.style.transform=t,e.style.webkitTransform=t}function c(e,t){e.style.opacity=t.toString()}function l(e){return"TouchEvent"===e.constructor.name}var f={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t._ripple&&t._ripple.enabled){var r=document.createElement("span"),f=document.createElement("span");r.appendChild(f),r.className="v-ripple__container",n.class&&(r.className+=" "+n.class);var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getBoundingClientRect(),o=l(e)?e.touches[e.touches.length-1]:e,c=o.clientX-r.left,f=o.clientY-r.top,d=0,m=.3;t._ripple&&t._ripple.circle?(m=.15,d=t.clientWidth/2,d=n.center?d:d+Math.sqrt(Math.pow(c-d,2)+Math.pow(f-d,2))/4):d=Math.sqrt(Math.pow(t.clientWidth,2)+Math.pow(t.clientHeight,2))/2;var h=(t.clientWidth-2*d)/2+"px",v=(t.clientHeight-2*d)/2+"px";return{radius:d,scale:m,x:n.center?h:c-d+"px",y:n.center?v:f-d+"px",centerX:h,centerY:v}}(e,t,n),m=d.radius,h=d.scale,v=d.x,y=d.y,x=d.centerX,w=d.centerY,C=2*m+"px";f.className="v-ripple__animation",f.style.width=C,f.style.height=C,t.appendChild(r);var S=window.getComputedStyle(t);S&&"static"===S.position&&(t.style.position="relative",t.dataset.previousPosition="static"),f.classList.add("v-ripple__animation--enter"),f.classList.add("v-ripple__animation--visible"),o(f,"translate("+v+", "+y+") scale3d("+h+","+h+","+h+")"),c(f,0),f.dataset.activated=String(performance.now()),setTimeout(function(){f.classList.remove("v-ripple__animation--enter"),f.classList.add("v-ripple__animation--in"),o(f,"translate("+x+", "+w+") scale3d(1,1,1)"),c(f,.25)},0)}},hide:function(e){if(e&&e._ripple&&e._ripple.enabled){var t=e.getElementsByClassName("v-ripple__animation");if(0!==t.length){var n=t[t.length-1];if(!n.dataset.isHiding){n.dataset.isHiding="true";var r=performance.now()-Number(n.dataset.activated),o=Math.max(250-r,0);setTimeout(function(){n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),c(n,0),setTimeout(function(){1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode&&e.removeChild(n.parentNode)},300)},o)}}}}};function d(e){return void 0===e||!!e}function m(e){var t={},element=e.currentTarget;element&&element._ripple&&!element._ripple.touched&&(l(e)&&(element._ripple.touched=!0),t.center=element._ripple.centered,element._ripple.class&&(t.class=element._ripple.class),f.show(e,element,t))}function h(e){var element=e.currentTarget;element&&(window.setTimeout(function(){element._ripple&&(element._ripple.touched=!1)}),f.hide(element))}function v(e,t,n){var r=d(t.value);r||f.hide(e),e._ripple=e._ripple||{},e._ripple.enabled=r;var o=t.value||{};o.center&&(e._ripple.centered=!0),o.class&&(e._ripple.class=t.value.class),o.circle&&(e._ripple.circle=o.circle),r&&!n?(e.addEventListener("touchstart",m,{passive:!0}),e.addEventListener("touchend",h,{passive:!0}),e.addEventListener("touchcancel",h),e.addEventListener("mousedown",m),e.addEventListener("mouseup",h),e.addEventListener("mouseleave",h),e.addEventListener("dragstart",h,{passive:!0})):!r&&n&&y(e)}function y(e){e.removeEventListener("mousedown",m),e.removeEventListener("touchstart",h),e.removeEventListener("touchend",h),e.removeEventListener("touchcancel",h),e.removeEventListener("mouseup",h),e.removeEventListener("mouseleave",h),e.removeEventListener("dragstart",h)}t.a={bind:function(e,t,n){v(e,t,!1),n.context&&n.context.$nextTick(function(){var t=window.getComputedStyle(e);if(t&&"inline"===t.display){var o=n.fnOptions?[n.fnOptions,n.context]:[n.componentInstance];r.c.apply(void 0,["v-ripple can only be used on block-level elements"].concat(o))}})},unbind:function(e){delete e._ripple,y(e)},update:function(e,t){t.value!==t.oldValue&&v(e,t,d(t.oldValue))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(119);var r=n(7),o=n(10);t.a=Object(o.a)(r.a).extend({name:"theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:r.a.options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find(function(e){return!e.isComment&&" "!==e.text})}})},,,,,,function(e,t,n){"use strict";t.a=function(e,t){return t=t||{},new Promise(function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var c in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){o.push(t=t.toLowerCase()),u.push([t,n]),i[t]=i[t]?i[t]+","+n:n}),n(a())},s.onerror=r,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(c,t.headers[c]);s.send(t.body||null)})}},,function(e,t,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var f=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",function(){n.$forceUpdate()}),o.placeholderTag&&(o.placeholder||f)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||f):l.length>0?l.map(function(){return e(!1)}):e(!1))}};e.exports=r},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){!function u(e,t){return Object.keys(t).forEach(function(n){var r=e[n]&&Object.prototype.toString.call(e[n]);"[object Object]"!==r&&"[object Array]"!==r?e[n]=t[n]:u(e[n],t[n])}),e}(w,e)}function o(){return w.id?[].concat(w.id):[]}function i(){}function s(){return!(C.checkDuplicatedScript&&Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(e){return-1!==e.src.indexOf("analytics")||-1!==e.src.indexOf("gtag")}).length>0)}function c(e){return e.name||e.replace(/-/gi,"")}function p(e,t){return o().length>1?c(t)+"."+e:e}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];"undefined"!=typeof window&&o().forEach(function(t){var r,o={m:p(e,t),a:n};window.ga?C.batch.enabled?(O.push(o),k||(k=setInterval(function(){O.length?O.splice(0,C.batch.amount).forEach(function(e){var t;(t=window).ga.apply(t,[e.m].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.a)))}):(clearInterval(k),k=null)},C.batch.delay))):(r=window).ga.apply(r,[p(e,t)].concat(n)):C.untracked.push(o)})}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];"object"!=typeof t[0]||t[0].constructor!==Object?l("set",t[0],t[1]):l("set",t[0])}function f(){var e=o();C.debug.enabled&&(window.ga_debug={trace:C.debug.trace}),e.forEach(function(t){var n=c(t),r=C.customIdFields[t]||{},o=e.length>1?T({},C.fields,r,{name:n}):C.fields;window.ga("create",t.id||t,"auto",o)}),C.beforeFirstHit();var t=C.ecommerce;if(t.enabled){var n=t.enhanced?"ec":"ecommerce";t.options?l("require",n,t.options):l("require",n)}C.linkers.length>0&&(l("require","linker"),l("linker:autoLink",C.linkers)),C.debug.sendHitTask||b("sendHitTask",null)}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(1===t.length&&"string"==typeof r)return l("send","screenview",{screenName:r});l.apply(void 0,["send","screenview"].concat(t))}function m(){for(var e=void 0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.length&&function(e){return e.currentRoute}(n[0])&&(e=n[0].currentRoute),n.length&&function(e){return e.query&&e.params}(n[0])&&(e=n[0]),e?h(e):(b("page","object"==typeof n[0]?n[0].page:n[0]),l.apply(void 0,["send","pageview"].concat(n)))}function h(e){if(!function(e){return[e.name,e.path].filter(Boolean).find(function(e){return-1!==C.ignoreRoutes.indexOf(e)})}(e)){var t=C.autoTracking,n=e.meta.analytics,r=void 0===n?{}:n,o=r.pageviewTemplate||t.pageviewTemplate;if(t.screenview&&!e.name)throw new Error("[vue-analytics] Route name is mandatory when using screenview.");if(t.screenview)return void d(e.name);if(o)m(o(e));else{var i=C.router,a=C.autoTracking,u=a.transformQueryString,c=a.prependBase,s=function(e){var t=Object.keys(e).reduce(function(t,n,r,o){var i=r===o.length-1;return t+=n+"="+e[n]+(i?"":"&")},"");return""!==t?"?"+t:""}(e.query),l=i&&i.options.base,f=c&&l,p=e.path+(u?s:"");m(p=f?function(e,t){var n=t.split("/"),r=e.split("/");return""===n[0]&&"/"===e[e.length-1]&&n.shift(),r.join("/")+n.join("/")}(l,p):p)}}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x={$vue:null,id:null,router:null,fields:{},customIdFields:{},ignoreRoutes:[],linkers:[],commands:{},disabled:!1,customResourceURL:null,set:[],require:[],ecommerce:{enabled:!1,options:null,enhanced:!1},autoTracking:{screenview:!1,shouldRouterUpdate:null,skipSamePath:!1,exception:!1,exceptionLogs:!0,page:!0,transformQueryString:!0,pageviewOnLoad:!0,pageviewTemplate:null,untracked:!0,prependBase:!0},debug:{enabled:!1,trace:!1,sendHitTask:!0},batch:{enabled:!1,delay:500,amount:2},checkDuplicatedScript:!1,disableScriptLoader:!1,beforeFirstHit:i,ready:i,untracked:[]},w=y({},x),C=w,S=function(e){if(e.then)return e;if("function"==typeof e){var t=e();return t.then?t:Promise.resolve(t)}return Promise.resolve(e)},k=void 0,O=[],T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){2!=arguments.length?l("require",arguments.length<=0?void 0:arguments[0]):l("require",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},N=function(){var e;C.set.forEach(function(e){var t=e.field,n=e.value;if(void 0===t||void 0===n)throw new Error('[vue-analytics] Wrong configuration in the plugin options.\nThe "set" array requires each item to have a "field" and a "value" property.');b(t,n)}),e=["ec","ecommerce"],C.require.forEach(function(t){if(-1!==e.indexOf(t)||-1!==e.indexOf(t.name))throw new Error("[vue-analytics] The ecommerce features are built-in in the plugin. \nFollow the ecommerce instructions available in the documentation.");if("string"!=typeof t&&"object"!=typeof t)throw new Error('[vue-analytics] Wrong configuration in the plugin options. \nThe "require" array requires each item to be a string or to have a "name" and an "options" property.');var n=t.name||t;t.options?E(n,t.options):E(n)})},_=function(){C.untracked.forEach(function(e){l.apply(void 0,[e.m].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.a)))})},A=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"undefined"!=typeof window&&o().forEach(function(t){window["ga-disable-"+t]=e})},D=function(){if("undefined"!=typeof document&&"undefined"!=typeof window){var e=C.disableScriptLoader,t=C.ready,n=C.debug.enabled?"analytics_debug":"analytics",o=C.customResourceURL||"https://www.google-analytics.com/"+n+".js";if(!C.id)throw new Error('[vue-analytics] Missing the "id" parameter. Add at least one tracking domain ID');var i=[S(C.id),S(C.disabled)];return!s()||window.ga&&e||i.push(function(e){return new Promise(function(t,n){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");o.async=!0,o.src=e,o.charset="utf-8",r.appendChild(o),o.onload=t,o.onerror=n})}(o).catch(function(){throw new Error("[vue-analytics] An error occured! Please check your connection, if you have any Google Analytics blocker installed in your browser or check your custom resource URL if you have added any.")})),Promise.all(i).then(function(e){r({id:e[0],disabled:e[1]}),A(C.disabled),f(),N(),_(),function(){var e=C.router,t=C.autoTracking;t.page&&e&&(t.pageviewOnLoad&&h(e.currentRoute),C.router.afterEach(function(n,r){var o=t.skipSamePath,i=t.shouldRouterUpdate;o&&n.path===r.path||("function"!=typeof i||i(n,r))&&C.$vue.nextTick().then(function(){h(e.currentRoute)})}))}(),t()}).catch(function(e){console.error(e.message)})}},R=this,B=function(e){l("send","exception",{exDescription:e,exFatal:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})},M=function(e){if(C.autoTracking.exception){window.addEventListener("error",function(e){B(e.message)});var t=e.config.errorHandler;e.config.errorHandler=function(e,n,r){B(e.message),C.autoTracking.exceptionLogs&&(console.error("[vue-analytics] Error in "+r+": "+e.message),console.error(e)),"function"==typeof t&&t.call(R,e,n,r)}}},I=B,z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(e){return(C.ecommerce.enhanced?"ec":"ecommerce")+":"+e},L=["addItem","addTransaction","addProduct","addImpression","setAction","addPromo","send"].reduce(function(e,t){return z({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];l.apply(void 0,[P(t)].concat(n))}))},{}),H={event:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.apply(void 0,["send","event"].concat(t))},exception:I,page:m,query:l,require:E,set:b,social:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.apply(void 0,["send","social"].concat(t))},time:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.apply(void 0,["send","timing"].concat(t))},screenview:d,ecommerce:L,disable:function(){return A(!0)},enable:function(){return A(!1)},commands:C.commands},F={inserted:function(e,t,n){var r=Object.keys(t.modifiers);0===r.length&&r.push("click"),r.forEach(function(r){e.addEventListener(r,function(){var e="string"==typeof t.value?C.commands[t.value]:t.value;if(!e)throw new Error("[vue-analytics] The value passed to v-ga is not defined in the commands list.");e.apply(n.context)})})}},V=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(j({},t,{$vue:e})),e.directive("ga",F),e.prototype.$ga=e.$ga=H,M(e),D()},n.d(t,"analyticsMiddleware",function(){return U}),n.d(t,"onAnalyticsReady",function(){return W}),n.d(t,"event",function(){return $}),n.d(t,"ecommerce",function(){return G}),n.d(t,"set",function(){return Y}),n.d(t,"page",function(){return X}),n.d(t,"query",function(){return K}),n.d(t,"screenview",function(){return J}),n.d(t,"time",function(){return Q}),n.d(t,"require",function(){return Z}),n.d(t,"exception",function(){return ee}),n.d(t,"social",function(){return te});var j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(e){e.subscribe(function(e){var t=e.payload;if(t&&t.meta&&t.meta.analytics){var n=t.meta.analytics;if(!Array.isArray(n))throw new Error('The "analytics" property needs to be an array');n.forEach(function(e){var a,t=void 0,n=e.shift(),r=e;if(n.includes(":")){var o=n.split(":"),i=V(o,2);n=i[0],t=i[1]}if(!(n in H))throw new Error('[vue-analytics:vuex] The type "'+n+"\" doesn't exist.");if(t&&!(t in H[n]))throw new Error('[vue-analytics:vuex] The type "'+n+'" has not method "'+t+'".');if("ecommerce"===n&&!t)throw new Error('[vue-analytics:vuex] The type "'+n+'" needs to call a method. Check documentation.');t?(a=H[n])[t].apply(a,v(r)):H[n].apply(H,v(r))})}})},W=function(){return new Promise(function(e,t){var n=setInterval(function(){"undefined"!=typeof window&&window.ga&&(e(),clearInterval(n))},10)})},$=H.event,G=H.ecommerce,Y=H.set,X=H.page,K=H.query,J=H.screenview,Q=H.time,Z=H.require,ee=H.exception,te=H.social}])},,function(e,t,n){n(313)},function(e,t,n){"use strict";var r=n(17),o={name:"tiny-mce",props:{id:{type:String,default:"editor"},value:{type:String,default:""},toolbar:{default:""},menubar:{default:""},otherProps:{default:""},baseURL:{type:String,default:""}},mounted:function(){var e=this;tinymce.baseURL=this.baseURL,tinymce.init(Object(r.a)({selector:"#".concat(this.id),toolbar:this.toolbar,menubar:this.menubar,init_instance_callback:function(t){t.on("KeyUp",function(n){e.$emit("input",t.getContent())}),t.on("Change",function(n){e.$emit("input",t.getContent())}),t.setContent(e.value)}},this.otherProps))},destroyed:function(){tinymce.get(this.id).destroy()}},c=n(26),l=Object(c.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("textarea",{attrs:{id:this.id},domProps:{value:this.value}})])},[],!1,null,null,null).exports;t.a=l},function(e,t,n){"use strict";function r(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n(20),n(231),n(233);var r=n(81),o=n(10),c=Object(o.a)(r.a).extend({name:"v-responsive",props:{aspectRatio:[String,Number]},computed:{computedAspectRatio:function(){return Number(this.aspectRatio)},aspectStyle:function(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer:function(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-responsive__content"},this.$slots.default)}},render:function(e){return e("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),l=n(5);t.a=c.extend({name:"v-img",props:{alt:String,contain:Boolean,src:{type:[String,Object],default:""},gradient:String,lazySrc:String,srcset:String,sizes:String,position:{type:String,default:"center center"},transition:{type:[Boolean,String],default:"fade-transition"}},data:function(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0}},computed:{computedAspectRatio:function(){return this.normalisedSrc.aspect},normalisedSrc:function(){return"string"==typeof this.src?{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||this.calculatedAspectRatio)}:{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect||this.calculatedAspectRatio)}},__cachedImage:function(){if(!this.normalisedSrc.src&&!this.normalisedSrc.lazySrc)return[];var e=[],t=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&e.push("linear-gradient("+this.gradient+")"),t&&e.push('url("'+t+'")');var image=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:e.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[image]):image}},watch:{src:function(){this.isLoading?this.loadImage():this.init()},"$vuetify.breakpoint.width":"getSrc"},mounted:function(){this.init()},methods:{init:function(){if(this.normalisedSrc.lazySrc){var e=new Image;e.src=this.normalisedSrc.lazySrc,this.pollForSize(e,null)}this.normalisedSrc.src&&this.loadImage()},onLoad:function(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src)},onError:function(){Object(l.a)("Image load failed\n\nsrc: "+this.normalisedSrc.src,this),this.$emit("error",this.src)},getSrc:function(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage:function(){var e=this,image=new Image;this.image=image,image.onload=function(){image.decode?image.decode().catch(function(t){Object(l.c)("Failed to decode image, trying to render anyway\n\nsrc: "+e.normalisedSrc.src+(t.message?"\nOriginal error: "+t.message:""),e)}).then(e.onLoad):e.onLoad()},image.onerror=this.onError,image.src=this.normalisedSrc.src,this.sizes&&(image.sizes=this.sizes),this.normalisedSrc.srcset&&(image.srcset=this.normalisedSrc.srcset),this.aspectRatio||this.pollForSize(image),this.getSrc()},pollForSize:function(img){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;!function n(){var r=img.naturalHeight,o=img.naturalWidth;r||o?e.calculatedAspectRatio=o/r:null!=t&&setTimeout(n,t)}()},__genPlaceholder:function(){if(this.$slots.placeholder){var e=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},this.$slots.placeholder)]:[];return this.transition?this.$createElement("transition",{attrs:{name:this.transition}},e):e[0]}}},render:function(e){var t=c.options.render.call(this,e);return t.data.staticClass+=" v-image",t.data.attrs={role:this.alt?"img":void 0,"aria-label":this.alt},t.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],e(t.tag,t.data,t.children)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var content=n(219);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("13b1285a",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.v-ripple__container{border-radius:inherit;width:100%;height:100%;z-index:0;contain:strict}.v-ripple__animation,.v-ripple__container{color:inherit;position:absolute;left:0;top:0;overflow:hidden;pointer-events:none}.v-ripple__animation{border-radius:50%;background:currentColor;opacity:0;will-change:transform,opacity}.v-ripple__animation--enter{transition:none}.v-ripple__animation--in{transition:opacity .1s cubic-bezier(.4,0,.2,1),-webkit-transform .25s cubic-bezier(.4,0,.2,1);transition:transform .25s cubic-bezier(.4,0,.2,1),opacity .1s cubic-bezier(.4,0,.2,1);transition:transform .25s cubic-bezier(.4,0,.2,1),opacity .1s cubic-bezier(.4,0,.2,1),-webkit-transform .25s cubic-bezier(.4,0,.2,1)}.v-ripple__animation--out{transition:opacity .3s cubic-bezier(.4,0,.2,1)}.theme--light.v-btn{color:rgba(0,0,0,.87)}.theme--light.v-btn.v-btn--disabled,.theme--light.v-btn.v-btn--disabled .v-btn__loading,.theme--light.v-btn.v-btn--disabled .v-icon{color:rgba(0,0,0,.26)!important}.theme--light.v-btn.v-btn--disabled:not(.v-btn--icon):not(.v-btn--flat):not(.v-btn--outline){background-color:rgba(0,0,0,.12)!important}.theme--light.v-btn:not(.v-btn--icon):not(.v-btn--flat){background-color:#f5f5f5}.theme--dark.v-btn{color:#fff}.theme--dark.v-btn.v-btn--disabled,.theme--dark.v-btn.v-btn--disabled .v-btn__loading,.theme--dark.v-btn.v-btn--disabled .v-icon{color:hsla(0,0%,100%,.3)!important}.theme--dark.v-btn.v-btn--disabled:not(.v-btn--icon):not(.v-btn--flat):not(.v-btn--outline){background-color:hsla(0,0%,100%,.12)!important}.theme--dark.v-btn:not(.v-btn--icon):not(.v-btn--flat){background-color:#212121}.v-btn{align-items:center;border-radius:2px;display:inline-flex;height:36px;flex:0 0 auto;font-size:14px;font-weight:500;justify-content:center;margin:6px 8px;min-width:88px;outline:0;text-transform:uppercase;text-decoration:none;transition:.3s cubic-bezier(.25,.8,.5,1),color 1ms;position:relative;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-btn:before{border-radius:inherit;color:inherit;content:"";position:absolute;left:0;top:0;height:100%;opacity:.12;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-btn{padding:0 16px}.v-btn--active,.v-btn:focus,.v-btn:hover{position:relative}.v-btn--active:before,.v-btn:focus:before,.v-btn:hover:before{background-color:currentColor}@media (hover:none){.v-btn:hover:before{background-color:transparent}}.v-btn__content{align-items:center;border-radius:inherit;color:inherit;display:flex;flex:1 0 auto;justify-content:center;margin:0 auto;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1);white-space:nowrap;width:inherit}.v-btn--small{font-size:13px;height:28px;padding:0 8px}.v-btn--large{font-size:15px;height:44px;padding:0 32px}.v-btn .v-btn__content .v-icon{color:inherit}.v-btn:not(.v-btn--depressed):not(.v-btn--flat){will-change:box-shadow;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-btn:not(.v-btn--depressed):not(.v-btn--flat):active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.v-btn--icon{background:transparent;box-shadow:none!important;border-radius:50%;justify-content:center;min-width:0;width:36px}.v-btn--icon.v-btn--small{width:28px}.v-btn--icon.v-btn--large{width:44px}.v-btn--floating,.v-btn--icon:before{border-radius:50%}.v-btn--floating{min-width:0;height:56px;width:56px;padding:0}.v-btn--floating.v-btn--absolute,.v-btn--floating.v-btn--fixed{z-index:4}.v-btn--floating:not(.v-btn--depressed):not(.v-btn--flat){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.v-btn--floating:not(.v-btn--depressed):not(.v-btn--flat):active{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.v-btn--floating .v-btn__content{flex:1 1 auto;margin:0;height:100%}.v-btn--floating:after{border-radius:50%}.v-btn--floating .v-btn__content :not(:only-child){transition:.3s cubic-bezier(.25,.8,.5,1)}.v-btn--floating .v-btn__content :not(:only-child):first-child{opacity:1}.v-btn--floating .v-btn__content :not(:only-child):last-child{opacity:0;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.v-btn--floating .v-btn__content :not(:only-child):first-child,.v-btn--floating .v-btn__content :not(:only-child):last-child{-webkit-backface-visibility:hidden;position:absolute;left:0;top:0}.v-btn--floating.v-btn--active .v-btn__content :not(:only-child):first-child{opacity:0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.v-btn--floating.v-btn--active .v-btn__content :not(:only-child):last-child{opacity:1;-webkit-transform:rotate(0);transform:rotate(0)}.v-btn--floating .v-icon{height:inherit;width:inherit}.v-btn--floating.v-btn--small{height:40px;width:40px}.v-btn--floating.v-btn--small .v-icon{font-size:18px}.v-btn--floating.v-btn--large{height:72px;width:72px}.v-btn--floating.v-btn--large .v-icon{font-size:30px}.v-btn--reverse .v-btn__content{flex-direction:row-reverse}.v-btn--reverse.v-btn--column .v-btn__content{flex-direction:column-reverse}.v-btn--absolute,.v-btn--fixed{margin:0}.v-btn.v-btn--absolute{position:absolute}.v-btn.v-btn--fixed{position:fixed}.v-btn--top:not(.v-btn--absolute){top:16px}.v-btn--top.v-btn--absolute{top:-28px}.v-btn--top.v-btn--absolute.v-btn--small{top:-20px}.v-btn--top.v-btn--absolute.v-btn--large{top:-36px}.v-btn--bottom:not(.v-btn--absolute){bottom:16px}.v-btn--bottom.v-btn--absolute{bottom:-28px}.v-btn--bottom.v-btn--absolute.v-btn--small{bottom:-20px}.v-btn--bottom.v-btn--absolute.v-btn--large{bottom:-36px}.v-btn--left{left:16px}.v-btn--right{right:16px}.v-btn.v-btn--disabled{box-shadow:none!important;pointer-events:none}.v-btn:not(.v-btn--disabled):not(.v-btn--floating):not(.v-btn--icon) .v-btn__content .v-icon{transition:none}.v-btn--icon{padding:0}.v-btn--loader{pointer-events:none}.v-btn--loader .v-btn__content{opacity:0}.v-btn__loading{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%}.v-btn__loading .v-icon--left{margin-right:1rem;line-height:inherit}.v-btn__loading .v-icon--right{margin-left:1rem;line-height:inherit}.v-btn.v-btn--outline{border:1px solid;background:transparent!important;box-shadow:none}.v-btn.v-btn--outline:hover{box-shadow:none}.v-btn--block{display:flex;flex:1;margin:6px 0;width:100%}.v-btn--round,.v-btn--round:after{border-radius:28px}.v-btn:not(.v-btn--outline).accent,.v-btn:not(.v-btn--outline).error,.v-btn:not(.v-btn--outline).info,.v-btn:not(.v-btn--outline).primary,.v-btn:not(.v-btn--outline).secondary,.v-btn:not(.v-btn--outline).success,.v-btn:not(.v-btn--outline).warning{color:#fff}',""])},,,,,,function(e,t,n){var content=n(226);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("7418a75a",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-progress-circular{position:relative;display:inline-flex;vertical-align:middle}.v-progress-circular svg{width:100%;height:100%;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0;z-index:0}.v-progress-circular--indeterminate svg{-webkit-animation:progress-circular-rotate 1.4s linear infinite;animation:progress-circular-rotate 1.4s linear infinite;-webkit-transform-origin:center center;transform-origin:center center;transition:all .2s ease-in-out}.v-progress-circular--indeterminate .v-progress-circular__overlay{-webkit-animation:progress-circular-dash 1.4s ease-in-out infinite;animation:progress-circular-dash 1.4s ease-in-out infinite;stroke-linecap:round;stroke-dasharray:80,200;stroke-dashoffset:0px}.v-progress-circular__underlay{stroke:rgba(0,0,0,.1);z-index:1}.v-progress-circular__overlay{stroke:currentColor;z-index:2;transition:all .6s ease-in-out}.v-progress-circular__info{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}@-webkit-keyframes progress-circular-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0px}50%{stroke-dasharray:100,200;stroke-dashoffset:-15px}to{stroke-dasharray:100,200;stroke-dashoffset:-125px}}@keyframes progress-circular-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0px}50%{stroke-dasharray:100,200;stroke-dashoffset:-15px}to{stroke-dasharray:100,200;stroke-dashoffset:-125px}}@-webkit-keyframes progress-circular-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes progress-circular-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},function(e,t,n){var content=n(228);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("be70614c",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".theme--light.v-card{background-color:#fff;border-color:#fff;color:rgba(0,0,0,.87)}.theme--dark.v-card{background-color:#424242;border-color:#424242;color:#fff}.v-card{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);text-decoration:none}.v-card>:first-child:not(.v-btn):not(.v-chip){border-top-left-radius:inherit;border-top-right-radius:inherit}.v-card>:last-child:not(.v-btn):not(.v-chip){border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.v-card--flat{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-card--hover{cursor:pointer;transition:all .4s cubic-bezier(.25,.8,.25,1);transition-property:box-shadow}.v-card--hover:hover{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.v-card__title{align-items:center;display:flex;flex-wrap:wrap;padding:16px}.v-card__title--primary{padding-top:24px}.v-card__text{padding:16px;width:100%}.v-card__actions{align-items:center;display:flex;padding:8px}.v-card__actions .v-btn,.v-card__actions>*{margin:0}.v-card__actions .v-btn+.v-btn{margin-left:8px}",""])},function(e,t,n){var content=n(230);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("74d835da",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".theme--light.v-sheet{background-color:#fff;border-color:#fff;color:rgba(0,0,0,.87)}.theme--dark.v-sheet{background-color:#424242;border-color:#424242;color:#fff}.v-sheet{display:block;border-radius:2px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-sheet--tile{border-radius:0}",""])},function(e,t,n){var content=n(232);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("5470a08c",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-image{z-index:0}.v-image__image,.v-image__placeholder{z-index:-1;position:absolute;top:0;left:0;width:100%;height:100%}.v-image__image{background-repeat:no-repeat}.v-image__image--preload{-webkit-filter:blur(2px);filter:blur(2px)}.v-image__image--contain{background-size:contain}.v-image__image--cover{background-size:cover}",""])},function(e,t,n){var content=n(234);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("27f0eb42",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-responsive{position:relative;overflow:hidden;flex:1 0 auto;display:flex}.v-responsive__content{flex:1 0 0px}.v-responsive__sizer{transition:padding-bottom .2s cubic-bezier(.25,.8,.5,1);flex:0 0 0px}",""])},function(e,t,n){var content=n(236);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("59ff0274",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".theme--light.v-footer{background:#f5f5f5;color:rgba(0,0,0,.87)}.theme--dark.v-footer{background:#212121;color:#fff}.v-footer{align-items:center;display:flex;flex:0 1 auto!important;min-height:36px;transition:.2s cubic-bezier(.4,0,.2,1)}.v-footer--absolute,.v-footer--fixed{bottom:0;left:0;width:100%;z-index:3}.v-footer--inset{z-index:2}.v-footer--absolute{position:absolute}.v-footer--fixed{position:fixed}",""])},,,function(e,t,n){var content=n(240);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("a949e40c",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.theme--light.v-icon{color:rgba(0,0,0,.54)}.theme--light.v-icon.v-icon--disabled{color:rgba(0,0,0,.38)!important}.theme--dark.v-icon{color:#fff}.theme--dark.v-icon.v-icon--disabled{color:hsla(0,0%,100%,.5)!important}.v-icon{align-items:center;display:inline-flex;-webkit-font-feature-settings:"liga";font-feature-settings:"liga";font-size:24px;justify-content:center;line-height:1;transition:.3s cubic-bezier(.25,.8,.5,1);vertical-align:text-bottom}.v-icon--right{margin-left:16px}.v-icon--left{margin-right:16px}.v-icon.v-icon.v-icon--link{cursor:pointer}.v-icon--disabled{pointer-events:none;opacity:.6}.v-icon--is-component{height:24px}',""])},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".container{flex:1 1 100%;margin:auto;padding:24px;width:100%}@media only screen and (min-width:960px){.container{max-width:900px}}@media only screen and (min-width:1264px){.container{max-width:1185px}}@media only screen and (min-width:1904px){.container{max-width:1785px}}@media only screen and (max-width:959px){.container{padding:16px}}.container.fluid{max-width:100%}.container.fill-height{align-items:center;display:flex}.container.fill-height>.layout{height:100%;flex:1 1 auto}.container.grid-list-xs .layout .flex{padding:1px}.container.grid-list-xs .layout:only-child{margin:-1px}.container.grid-list-xs .layout:not(:only-child){margin:auto -1px}.container.grid-list-xs :not(:only-child) .layout:first-child{margin-top:-1px}.container.grid-list-xs :not(:only-child) .layout:last-child{margin-bottom:-1px}.container.grid-list-sm .layout .flex{padding:2px}.container.grid-list-sm .layout:only-child{margin:-2px}.container.grid-list-sm .layout:not(:only-child){margin:auto -2px}.container.grid-list-sm :not(:only-child) .layout:first-child{margin-top:-2px}.container.grid-list-sm :not(:only-child) .layout:last-child{margin-bottom:-2px}.container.grid-list-md .layout .flex{padding:4px}.container.grid-list-md .layout:only-child{margin:-4px}.container.grid-list-md .layout:not(:only-child){margin:auto -4px}.container.grid-list-md :not(:only-child) .layout:first-child{margin-top:-4px}.container.grid-list-md :not(:only-child) .layout:last-child{margin-bottom:-4px}.container.grid-list-lg .layout .flex{padding:8px}.container.grid-list-lg .layout:only-child{margin:-8px}.container.grid-list-lg .layout:not(:only-child){margin:auto -8px}.container.grid-list-lg :not(:only-child) .layout:first-child{margin-top:-8px}.container.grid-list-lg :not(:only-child) .layout:last-child{margin-bottom:-8px}.container.grid-list-xl .layout .flex{padding:12px}.container.grid-list-xl .layout:only-child{margin:-12px}.container.grid-list-xl .layout:not(:only-child){margin:auto -12px}.container.grid-list-xl :not(:only-child) .layout:first-child{margin-top:-12px}.container.grid-list-xl :not(:only-child) .layout:last-child{margin-bottom:-12px}.layout{display:flex;flex:1 1 auto;flex-wrap:nowrap;min-width:0}.layout.row{flex-direction:row}.layout.row.reverse{flex-direction:row-reverse}.layout.column{flex-direction:column}.layout.column.reverse{flex-direction:column-reverse}.layout.column>.flex{max-width:100%}.layout.wrap{flex-wrap:wrap}@media (min-width:0){.flex.xs1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-xs1{order:1}.flex.xs2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-xs2{order:2}.flex.xs3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xs3{order:3}.flex.xs4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-xs4{order:4}.flex.xs5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-xs5{order:5}.flex.xs6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xs6{order:6}.flex.xs7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-xs7{order:7}.flex.xs8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-xs8{order:8}.flex.xs9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xs9{order:9}.flex.xs10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-xs10{order:10}.flex.xs11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-xs11{order:11}.flex.xs12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xs12{order:12}.flex.offset-xs0{margin-left:0}.flex.offset-xs1{margin-left:8.333333333333332%}.flex.offset-xs2{margin-left:16.666666666666664%}.flex.offset-xs3{margin-left:25%}.flex.offset-xs4{margin-left:33.33333333333333%}.flex.offset-xs5{margin-left:41.66666666666667%}.flex.offset-xs6{margin-left:50%}.flex.offset-xs7{margin-left:58.333333333333336%}.flex.offset-xs8{margin-left:66.66666666666666%}.flex.offset-xs9{margin-left:75%}.flex.offset-xs10{margin-left:83.33333333333334%}.flex.offset-xs11{margin-left:91.66666666666666%}.flex.offset-xs12{margin-left:100%}}@media (min-width:600px){.flex.sm1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-sm1{order:1}.flex.sm2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-sm2{order:2}.flex.sm3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-sm3{order:3}.flex.sm4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-sm4{order:4}.flex.sm5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-sm5{order:5}.flex.sm6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-sm6{order:6}.flex.sm7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-sm7{order:7}.flex.sm8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-sm8{order:8}.flex.sm9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-sm9{order:9}.flex.sm10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-sm10{order:10}.flex.sm11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-sm11{order:11}.flex.sm12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-sm12{order:12}.flex.offset-sm0{margin-left:0}.flex.offset-sm1{margin-left:8.333333333333332%}.flex.offset-sm2{margin-left:16.666666666666664%}.flex.offset-sm3{margin-left:25%}.flex.offset-sm4{margin-left:33.33333333333333%}.flex.offset-sm5{margin-left:41.66666666666667%}.flex.offset-sm6{margin-left:50%}.flex.offset-sm7{margin-left:58.333333333333336%}.flex.offset-sm8{margin-left:66.66666666666666%}.flex.offset-sm9{margin-left:75%}.flex.offset-sm10{margin-left:83.33333333333334%}.flex.offset-sm11{margin-left:91.66666666666666%}.flex.offset-sm12{margin-left:100%}}@media (min-width:960px){.flex.md1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-md1{order:1}.flex.md2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-md2{order:2}.flex.md3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-md3{order:3}.flex.md4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-md4{order:4}.flex.md5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-md5{order:5}.flex.md6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-md6{order:6}.flex.md7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-md7{order:7}.flex.md8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-md8{order:8}.flex.md9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-md9{order:9}.flex.md10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-md10{order:10}.flex.md11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-md11{order:11}.flex.md12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-md12{order:12}.flex.offset-md0{margin-left:0}.flex.offset-md1{margin-left:8.333333333333332%}.flex.offset-md2{margin-left:16.666666666666664%}.flex.offset-md3{margin-left:25%}.flex.offset-md4{margin-left:33.33333333333333%}.flex.offset-md5{margin-left:41.66666666666667%}.flex.offset-md6{margin-left:50%}.flex.offset-md7{margin-left:58.333333333333336%}.flex.offset-md8{margin-left:66.66666666666666%}.flex.offset-md9{margin-left:75%}.flex.offset-md10{margin-left:83.33333333333334%}.flex.offset-md11{margin-left:91.66666666666666%}.flex.offset-md12{margin-left:100%}}@media (min-width:1264px){.flex.lg1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-lg1{order:1}.flex.lg2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-lg2{order:2}.flex.lg3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-lg3{order:3}.flex.lg4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-lg4{order:4}.flex.lg5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-lg5{order:5}.flex.lg6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-lg6{order:6}.flex.lg7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-lg7{order:7}.flex.lg8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-lg8{order:8}.flex.lg9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-lg9{order:9}.flex.lg10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-lg10{order:10}.flex.lg11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-lg11{order:11}.flex.lg12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-lg12{order:12}.flex.offset-lg0{margin-left:0}.flex.offset-lg1{margin-left:8.333333333333332%}.flex.offset-lg2{margin-left:16.666666666666664%}.flex.offset-lg3{margin-left:25%}.flex.offset-lg4{margin-left:33.33333333333333%}.flex.offset-lg5{margin-left:41.66666666666667%}.flex.offset-lg6{margin-left:50%}.flex.offset-lg7{margin-left:58.333333333333336%}.flex.offset-lg8{margin-left:66.66666666666666%}.flex.offset-lg9{margin-left:75%}.flex.offset-lg10{margin-left:83.33333333333334%}.flex.offset-lg11{margin-left:91.66666666666666%}.flex.offset-lg12{margin-left:100%}}@media (min-width:1904px){.flex.xl1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-xl1{order:1}.flex.xl2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-xl2{order:2}.flex.xl3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xl3{order:3}.flex.xl4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-xl4{order:4}.flex.xl5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-xl5{order:5}.flex.xl6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xl6{order:6}.flex.xl7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-xl7{order:7}.flex.xl8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-xl8{order:8}.flex.xl9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xl9{order:9}.flex.xl10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-xl10{order:10}.flex.xl11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-xl11{order:11}.flex.xl12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xl12{order:12}.flex.offset-xl0{margin-left:0}.flex.offset-xl1{margin-left:8.333333333333332%}.flex.offset-xl2{margin-left:16.666666666666664%}.flex.offset-xl3{margin-left:25%}.flex.offset-xl4{margin-left:33.33333333333333%}.flex.offset-xl5{margin-left:41.66666666666667%}.flex.offset-xl6{margin-left:50%}.flex.offset-xl7{margin-left:58.333333333333336%}.flex.offset-xl8{margin-left:66.66666666666666%}.flex.offset-xl9{margin-left:75%}.flex.offset-xl10{margin-left:83.33333333333334%}.flex.offset-xl11{margin-left:91.66666666666666%}.flex.offset-xl12{margin-left:100%}}.child-flex>*,.flex{flex:1 1 auto;max-width:100%}.align-start{align-items:flex-start}.align-end{align-items:flex-end}.align-center{align-items:center}.align-baseline{align-items:baseline}.align-self-start{align-self:flex-start}.align-self-end{align-self:flex-end}.align-self-center{align-self:center}.align-self-baseline{align-self:baseline}.align-content-start{align-content:flex-start}.align-content-end{align-content:flex-end}.align-content-center{align-content:center}.align-content-space-between{align-content:space-between}.align-content-space-around{align-content:space-around}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.justify-self-start{justify-self:flex-start}.justify-self-end{justify-self:flex-end}.justify-self-center{justify-self:center}.justify-self-baseline{justify-self:baseline}.grow,.spacer{flex-grow:1!important}.grow{flex-shrink:0!important}.shrink{flex-grow:0!important;flex-shrink:1!important}.scroll-y{overflow-y:auto}.fill-height{height:100%}.hide-overflow{overflow:hidden!important}.show-overflow{overflow:visible!important}.ellipsis,.no-wrap{white-space:nowrap}.ellipsis{overflow:hidden;text-overflow:ellipsis}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}.d-flex>*,.d-inline-flex>*{flex:1 1 auto!important}.d-block{display:block!important}.d-inline-block{display:inline-block!important}.d-inline{display:inline!important}.d-none{display:none!important}",""])},function(e,t,n){var content=n(243);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("ae55114c",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-content{transition:none;display:flex;flex:1 0 auto;max-width:100%}.v-content[data-booted=true]{transition:.2s cubic-bezier(.4,0,.2,1)}.v-content__wrap{flex:1 1 auto;max-width:100%;position:relative}@-moz-document url-prefix(){@media print{.v-content{display:block}}}",""])},,,function(e,t,n){var content=n(247);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("1e0ca8da",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".application{display:flex}.application a{cursor:pointer}.application--is-rtl{direction:rtl}.application--wrap{flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;flex-direction:column;min-height:100vh;max-width:100%;position:relative}.theme--light.application{background:#fafafa;color:rgba(0,0,0,.87)}.theme--light.application .text--primary{color:rgba(0,0,0,.87)!important}.theme--light.application .text--secondary{color:rgba(0,0,0,.54)!important}.theme--light.application .text--disabled{color:rgba(0,0,0,.38)!important}.theme--dark.application{background:#303030;color:#fff}.theme--dark.application .text--primary{color:#fff!important}.theme--dark.application .text--secondary{color:hsla(0,0%,100%,.7)!important}.theme--dark.application .text--disabled{color:hsla(0,0%,100%,.5)!important}@-moz-document url-prefix(){@media print{.application,.application--wrap{display:block}}}",""])},,,function(e,t,n){var content=n(251);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("e521ab94",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".theme--light.v-divider{border-color:rgba(0,0,0,.12)}.theme--dark.v-divider{border-color:hsla(0,0%,100%,.12)}.v-divider{display:block;flex:1 1 0px;max-width:100%;height:0;max-height:0;border:solid;border-width:thin 0 0;transition:inherit}.v-divider--inset:not(.v-divider--vertical){margin-left:72px;max-width:calc(100% - 72px)}.v-divider--vertical{align-self:stretch;border:solid;border-width:0 thin 0 0;display:inline-flex;height:inherit;min-height:100%;max-height:100%;max-width:0;width:0;vertical-align:text-bottom}.v-divider--vertical.v-divider--inset{margin-top:8px;min-height:0;max-height:calc(100% - 16px)}",""])},function(e,t,n){var content=n(253);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("820dc3a4",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".theme--light.v-tabs__bar{background-color:#fff}.theme--light.v-tabs__bar .v-tabs__div{color:rgba(0,0,0,.87)}.theme--light.v-tabs__bar .v-tabs__item--disabled{color:rgba(0,0,0,.26)}.theme--dark.v-tabs__bar{background-color:#424242}.theme--dark.v-tabs__bar .v-tabs__div{color:#fff}.theme--dark.v-tabs__bar .v-tabs__item--disabled{color:hsla(0,0%,100%,.3)}.v-tabs,.v-tabs__bar{position:relative}.v-tabs__bar{border-radius:inherit}.v-tabs__icon{align-items:center;cursor:pointer;display:inline-flex;height:100%;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:32px}.v-tabs__icon--prev{left:4px}.v-tabs__icon--next{right:4px}.v-tabs__wrapper{overflow:hidden;contain:content;display:flex}.v-tabs__wrapper--show-arrows{margin-left:40px;margin-right:40px}.v-tabs__wrapper--show-arrows .v-tabs__container--align-with-title{padding-left:16px}@media only screen and (max-width:599px){.v-tabs__wrapper--show-arrows .v-tabs__container--align-with-title{padding-left:24px}}.v-tabs__container{flex:1 0 auto;display:flex;height:48px;list-style-type:none;transition:-webkit-transform .6s cubic-bezier(.86,0,.07,1);transition:transform .6s cubic-bezier(.86,0,.07,1);transition:transform .6s cubic-bezier(.86,0,.07,1),-webkit-transform .6s cubic-bezier(.86,0,.07,1);white-space:nowrap;position:relative}.v-tabs__container--overflow .v-tabs__div{flex:1 0 auto}.v-tabs__container--grow .v-tabs__div{flex:1 0 auto;max-width:none}.v-tabs__container--icons-and-text{height:72px}.v-tabs__container--align-with-title{padding-left:56px}.v-tabs__container--fixed-tabs .v-tabs__div,.v-tabs__container--icons-and-text .v-tabs__div{min-width:72px}@media only screen and (min-width:600px){.v-tabs__container--fixed-tabs .v-tabs__div,.v-tabs__container--icons-and-text .v-tabs__div{min-width:160px}}@media only screen and (max-width:599px){.v-tabs__container--fixed-tabs .v-tabs__div{flex:1 0 auto}}.v-tabs__container--centered .v-tabs__slider-wrapper+.v-tabs__div,.v-tabs__container--centered>.v-tabs__div:first-child,.v-tabs__container--fixed-tabs .v-tabs__slider-wrapper+.v-tabs__div,.v-tabs__container--fixed-tabs>.v-tabs__div:first-child,.v-tabs__container--right .v-tabs__slider-wrapper+.v-tabs__div,.v-tabs__container--right>.v-tabs__div:first-child{margin-left:auto}.v-tabs__container--centered>.v-tabs__div:last-child,.v-tabs__container--fixed-tabs>.v-tabs__div:last-child{margin-right:auto}.v-tabs__container--icons-and-text .v-tabs__item{flex-direction:column-reverse}.v-tabs__container--icons-and-text .v-tabs__item .v-icon{margin-bottom:6px}.v-tabs__div{align-items:center;display:inline-flex;flex:0 1 auto;font-size:14px;font-weight:500;line-height:normal;height:inherit;max-width:264px;text-align:center;text-transform:uppercase;vertical-align:middle}.v-tabs__item{align-items:center;color:inherit;display:flex;flex:1 1 auto;height:100%;justify-content:center;max-width:inherit;padding:6px 12px;text-decoration:none;transition:.3s cubic-bezier(.25,.8,.5,1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:normal}.v-tabs__item:not(.v-tabs__item--active){opacity:.7}.v-tabs__item--disabled{pointer-events:none}.v-tabs__slider{height:2px;width:100%}.v-tabs__slider-wrapper{bottom:0;margin:0!important;position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1)}",""])},function(e,t,n){var content=n(255);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("466f03a0",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-item-group{flex:0 1 auto;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-item-group>*{cursor:pointer;flex:1 1 auto}",""])},function(e,t,n){var content=n(257);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(4).default)("528a9c9a",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".v-window__container{position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-window__container--is-active{overflow:hidden}.v-window-x-reverse-transition-enter-active,.v-window-x-reverse-transition-leave-active,.v-window-x-transition-enter-active,.v-window-x-transition-leave-active,.v-window-y-reverse-transition-enter-active,.v-window-y-reverse-transition-leave-active,.v-window-y-transition-enter-active,.v-window-y-transition-leave-active{transition:.3s cubic-bezier(.25,.8,.5,1)}.v-window-x-reverse-transition-leave,.v-window-x-reverse-transition-leave-to,.v-window-x-transition-leave,.v-window-x-transition-leave-to,.v-window-y-reverse-transition-leave,.v-window-y-reverse-transition-leave-to,.v-window-y-transition-leave,.v-window-y-transition-leave-to{position:absolute!important;top:0;width:100%}.v-window-x-transition-enter{-webkit-transform:translateX(100%);transform:translateX(100%)}.v-window-x-reverse-transition-enter,.v-window-x-transition-leave-to{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.v-window-x-reverse-transition-leave-to{-webkit-transform:translateX(100%);transform:translateX(100%)}.v-window-y-transition-enter{-webkit-transform:translateY(100%);transform:translateY(100%)}.v-window-y-reverse-transition-enter,.v-window-y-transition-leave-to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.v-window-y-reverse-transition-leave-to{-webkit-transform:translateY(100%);transform:translateY(100%)}",""])},,function(e,t,n){"use strict";function r(){}e.exports=r,r.maxLength=4096,r.parse=function(e){var t=r.maxLength;if("string"!=typeof e)throw new TypeError("str must be a string");if(e.length>t)throw new RangeError("str is too large (CookieParser.maxLength="+t+")");var n=new r;if(arguments.length>1){var o=arguments[1];if("object"==typeof o&&null!==o&&"function"==typeof o.decode)return n.slowParse(e,o.decode)}return n.parse(e)},r.prototype.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}},r.prototype.extract=function(e,t,n){return t===n+1?"":e.slice(this.trimForward(e,t),this.trimBackward(e,n)+1)},r.prototype.trimForward=function(e,i){for(var t=e.charCodeAt(i);this.isWhiteSpace(t);)t=e.charCodeAt(++i);return i},r.prototype.trimBackward=function(e,i){for(var t=e.charCodeAt(i);this.isWhiteSpace(t);)t=e.charCodeAt(--i);return i},r.prototype.isWhiteSpace=function(e){return e<=32},r.prototype.parse=function(e){var t={},n=0,r=0,o=0,c=0,l=!1,f=!1,i=0,d=e.length;e:for(;i<d;++i){var m=e.charCodeAt(i);if(m>127)return this.slowParse(e,this.decode);if(61===m){r=i-1;var h=i+1;for(m=e.charCodeAt(h);32===m;)h++,m=e.charCodeAt(h);for(34===m&&(h++,f=!0),o=h;h<d;++h)if(37===(m=e.charCodeAt(h)))l=!0;else if(59===m||44===m){if(f)(c=this.trimBackward(e,h-1)-1)<o&&(o=c);else c=h-1;var v=this.extract(e,n,r),y=this.extract(e,o,c);for(t[v]=l?this.decode(y):y,i=h;h<d;++h)if(32!==e.charCodeAt(h)){i=h-1;break}r=n=i+1,f=!1,l=!1;continue e}if(f)(c=this.trimBackward(e,h-1)-1)<o&&(o=c);else c=h-1;v=this.extract(e,n,r),y=this.extract(e,o,c);t[v]=l?this.decode(y):y,i=h}else 59!==m&&44!==m||(n=i+1)}return t},r.serialize=function(e,t,n){var r=[e+"="+((n=n||{}).encode||encodeURIComponent)(t)];return n.maxAge&&r.push("Max-Age="+n.maxAge),n.domain&&r.push("Domain="+n.domain),n.path&&r.push("Path="+n.path),n.expires&&r.push("Expires="+n.expires.toUTCString()),n.httpOnly&&r.push("HttpOnly"),n.secure&&r.push("Secure"),r.join("; ")},r.prototype.slowParse=function(e,t){var n={};return e.split(/[;,] */).forEach(function(e){var r=e.indexOf("=");if(!(r<0)){var o=e.substr(0,r).trim(),c=e.substr(++r,e.length).trim();if('"'==c[0]&&(c=c.slice(1,-1)),null==n[o])try{n[o]=t(c)}catch(e){n[o]=c}}}),n}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){!function(t){"use strict";var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},o=function(e){return function(){return e}},c=function(e){return e};function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var f,d,m,h,v,y,x,w,C,S,k,O,T,E=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},N=o(!1),_=o(!0),A=N,D=_,R=function(){return B},B=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,s){return e()},is:A,isSome:A,isNone:D,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:R,ap:R,each:function(){},bind:R,flatten:R,exists:A,forall:D,filter:R,equals:e,equals_:e,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(r),r}(),M=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:D,isNone:A,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return M(e(a))},ap:function(e){return e.fold(R,function(e){return M(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:B},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(A,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},I={some:M,none:R,from:function(e){return null==e?B:M(e)}},z=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},P=z("string"),L=z("object"),H=z("array"),F=z("null"),V=z("boolean"),j=z("function"),U=z("number"),W=void 0===(f=Array.prototype.indexOf)?function(e,t){return Q(e,t)}:function(e,t){return f.call(e,t)},$=function(e,t){return W(e,t)>-1},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},G=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},Y=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var c=e[i];(t(c,i,e)?n:r).push(c)}return{pass:n,fail:r}},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},X=function(e,t,n){return G(e,function(e){n=t(n,e)}),n},K=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return I.some(r)}return I.none()},J=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return I.some(i);return I.none()},Q=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return i;return-1},Z=Array.prototype.push,ee=function(e,t){return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);Z.apply(t,e[i])}return t}(map(e,t))},te=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i,e))return!1;return!0},ne=Array.prototype.slice,re=function(e,t){return filter(e,function(e){return!$(t,e)})},head=function(e){return 0===e.length?I.none():I.some(e[0])},oe=function(e){return 0===e.length?I.none():I.some(e[e.length-1])},ie=j(Array.from)?Array.from:function(e){return ne.call(e)},ae=void 0!==t.window?t.window:Function("return this;")(),ue=function(p,e){return function(e,t){for(var n=null!=t?t:ae,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},ce={getOrDie:function(e,t){var n=function(e,t){return ue(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}},se=function(){return ce.getOrDie("URL")},le={createObjectURL:function(e){return se().createObjectURL(e)},revokeObjectURL:function(u){se().revokeObjectURL(u)}},nav=t.navigator,fe=nav.userAgent,de=function(e){return"matchMedia"in t.window&&t.matchMedia(e).matches};C=/Android/.test(fe),m=(m=!(d=/WebKit/.test(fe))&&/MSIE/gi.test(fe)&&/Explorer/gi.test(nav.appName))&&/MSIE (\w+)\./.exec(fe)[1],h=-1!==fe.indexOf("Trident/")&&(-1!==fe.indexOf("rv:")||-1!==nav.appName.indexOf("Netscape"))&&11,v=-1!==fe.indexOf("Edge/")&&!m&&!h&&12,m=m||h||v,y=!d&&!h&&/Gecko/.test(fe),x=-1!==fe.indexOf("Mac"),w=/(iPad|iPhone)/.test(fe),S="FormData"in t.window&&"FileReader"in t.window&&"URL"in t.window&&!!le.createObjectURL,k=de("only screen and (max-device-width: 480px)")&&(C||w),O=de("only screen and (min-width: 800px)")&&(C||w),T=-1!==fe.indexOf("Windows Phone"),v&&(d=!1);var me,ge={opera:!1,webkit:d,ie:m,gecko:y,mac:x,iOS:w,android:C,contentEditable:!w||S||parseInt(fe.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==m,range:t.window.getSelection&&"Range"in t.window,documentMode:m&&!v?t.document.documentMode||7:10,fileApi:S,ceFalse:!1===m||m>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===m||m>11,desktop:!k&&!O,windowsPhone:T},he=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(t,e(l,this),e(f,this))},o=r.immediateFn||"function"==typeof t.setImmediate&&t.setImmediate||function(e){t.setTimeout(e,1)};function c(e){var t=this;null!==this._state?o(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function l(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void h(e(n,t),e(l,this),e(f,this))}this._state=!0,this._value=t,d.call(this)}catch(e){f.call(this,e)}}function f(e){this._state=!1,this._value=e,d.call(this)}function d(){for(var i=0,e=this._deferreds.length;i<e;i++)c.call(this,this._deferreds[i]);this._deferreds=null}function m(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function h(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r(function(r,o){c.call(n,new m(e,t,r,o))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new r(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,function(e){o(i,e)},n)}e[i]=c,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},r}(),pe=function(e,time){return"number"!=typeof time&&(time=0),t.setTimeout(e,time)},ve=function(e,time){return"number"!=typeof time&&(time=1),t.setInterval(e,time)},be=function(e,time){var n,r;return(r=function(){var r=arguments;t.clearTimeout(n),n=pe(function(){e.apply(this,r)},time)}).stop=function(){t.clearTimeout(n)},r},ye={requestAnimationFrame:function(e,element){me?me.then(e):me=new he(function(e){element||(element=t.document.body),function(e,element){var i,n=t.window.requestAnimationFrame,r=["ms","moz","webkit"];for(i=0;i<r.length&&!n;i++)n=t.window[r[i]+"RequestAnimationFrame"];n||(n=function(e){t.window.setTimeout(e,0)}),n(e,element)}(e,element)}).then(e)},setTimeout:pe,setInterval:ve,setEditorTimeout:function(e,t,time){return pe(function(){e.removed||t()},time)},setEditorInterval:function(e,n,time){var r;return r=ve(function(){e.removed?t.clearInterval(r):n()},time)},debounce:be,throttle:be,clearInterval:function(e){return t.clearInterval(e)},clearTimeout:function(e){return t.clearTimeout(e)}},xe=/^(?:mouse|contextmenu)|click/,we={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Ce=function(){return!1},Se=function(){return!0},ke=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Oe=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Te=function(e,data){var n,r=data||{};for(n in e)we[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||t.document),ge.experimentalShadowDom&&(r.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t}(e,r.target)),e&&xe.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var o=r.target.ownerDocument||t.document,c=o.documentElement,body=o.body;r.pageX=e.clientX+(c&&c.scrollLeft||body&&body.scrollLeft||0)-(c&&c.clientLeft||body&&body.clientLeft||0),r.pageY=e.clientY+(c&&c.scrollTop||body&&body.scrollTop||0)-(c&&c.clientTop||body&&body.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Se,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=Se,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Se,r.stopPropagation()},!1===function(e){return e.isDefaultPrevented===Se||e.isDefaultPrevented===Ce}(r)&&(r.isDefaultPrevented=Ce,r.isPropagationStopped=Ce,r.isImmediatePropagationStopped=Ce),void 0===r.metaKey&&(r.metaKey=!1),r},Ee=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var c=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},l=function(){Oe(e,"DOMContentLoaded",l),Oe(e,"load",l),n.domLoaded||(n.domLoaded=!0,t(o))},f=function(){c()&&(Oe(r,"readystatechange",f),l())},d=function(){try{r.documentElement.doScroll("left")}catch(e){return void ye.setTimeout(d)}l()};!r.addEventListener||ge.ie&&ge.ie<11?(ke(r,"readystatechange",f),r.documentElement.doScroll&&e.self===e.top&&d()):c()?l():ke(e,"DOMContentLoaded",l),ke(e,"load",l)}},Ne=function(){var e,n,r,o,c,l=this,f={};n="mce-data-"+(+new Date).toString(32),o="onmouseenter"in t.document.documentElement,r="onfocusin"in t.document.documentElement,c={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,l.domLoaded=!1,l.events=f;var d=function(e,t){var n,i,r,o,c=f[t];if(n=c&&c[e.type])for(i=0,r=n.length;i<r;i++)if((o=n[i])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};l.bind=function(m,h,v,y){var x,w,i,C,S,k,O,T=t.window,E=function(e){d(Te(e||T.event),x)};if(m&&3!==m.nodeType&&8!==m.nodeType){for(m[n]?x=m[n]:(x=e++,m[n]=x,f[x]={}),y=y||m,i=(h=h.split(" ")).length;i--;)k=E,S=O=!1,"DOMContentLoaded"===(C=h[i])&&(C="ready"),l.domLoaded&&"ready"===C&&"complete"===m.readyState?v.call(y,Te({type:C})):(o||(S=c[C])&&(k=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Te(e||T.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d(e,x))}),r||"focusin"!==C&&"focusout"!==C||(O=!0,S="focusin"===C?"focus":"blur",k=function(e){(e=Te(e||T.event)).type="focus"===e.type?"focusin":"focusout",d(e,x)}),(w=f[x][C])?"ready"===C&&l.domLoaded?v({type:C}):w.push({func:v,scope:y}):(f[x][C]=w=[{func:v,scope:y}],w.fakeName=S,w.capture=O,w.nativeHandler=k,"ready"===C?Ee(m,k,l):ke(m,S||C,k,O)));return m=w=0,v}},l.unbind=function(e,t,r){var o,c,i,d,m,h;if(!e||3===e.nodeType||8===e.nodeType)return l;if(o=e[n]){if(h=f[o],t){for(i=(t=t.split(" ")).length;i--;)if(c=h[m=t[i]]){if(r)for(d=c.length;d--;)if(c[d].func===r){var v=c.nativeHandler,y=c.fakeName,x=c.capture;(c=c.slice(0,d).concat(c.slice(d+1))).nativeHandler=v,c.fakeName=y,c.capture=x,h[m]=c}r&&0!==c.length||(delete h[m],Oe(e,c.fakeName||m,c.nativeHandler,c.capture))}}else{for(m in h)c=h[m],Oe(e,c.fakeName||m,c.nativeHandler,c.capture);h={}}for(m in h)return l;delete f[o];try{delete e[n]}catch(t){e[n]=null}}return l},l.fire=function(e,t,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return l;(r=Te(null,r)).type=t,r.target=e;do{(o=e[n])&&d(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return l},l.clean=function(e){var i,t,r=l.unbind;if(!e||3===e.nodeType||8===e.nodeType)return l;if(e[n]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),i=(t=e.getElementsByTagName("*")).length;i--;)(e=t[i])[n]&&r(e);return l},l.destroy=function(){f={}},l.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Ne.Event=new Ne,Ne.Event.bind(t.window,"ready",function(){});var i,_e,Ae,De,Re,Be,Me,select,Ie,ze,Pe,Le,He,Fe,Ve,je,Ue,We,$e="sizzle"+-new Date,qe=t.window.document,Ge=0,Ye=0,Xe=At(),Ke=At(),Je=At(),Qe=function(a,b){return a===b&&(Pe=!0),0},Ze="undefined",et=1<<31,tt={}.hasOwnProperty,nt=[],ot=nt.pop,it=nt.push,at=nt.push,ut=nt.slice,ct=nt.indexOf||function(e){for(var i=0,t=this.length;i<t;i++)if(this[i]===e)return i;return-1},st="[\\x20\\t\\r\\n\\f]",lt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ft="\\["+st+"*("+lt+")(?:"+st+"*([*^$|!~]?=)"+st+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+lt+"))|)"+st+"*\\]",mt=":("+lt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ft+")*)|.*)\\)|)",gt=new RegExp("^"+st+"+|((?:^|[^\\\\])(?:\\\\.)*)"+st+"+$","g"),ht=new RegExp("^"+st+"*,"+st+"*"),pt=new RegExp("^"+st+"*([>+~]|"+st+")"+st+"*"),vt=new RegExp("="+st+"*([^\\]'\"]*?)"+st+"*\\]","g"),bt=new RegExp(mt),yt=new RegExp("^"+lt+"$"),xt={ID:new RegExp("^#("+lt+")"),CLASS:new RegExp("^\\.("+lt+")"),TAG:new RegExp("^("+lt+"|[*])"),ATTR:new RegExp("^"+ft),PSEUDO:new RegExp("^"+mt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+st+"*(even|odd|(([+-]|)(\\d*)n|)"+st+"*(?:([+-]|)"+st+"*(\\d+)|))"+st+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+st+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+st+"*((?:-\\d)?\\d*)"+st+"*\\)|)(?=[^-]|$)","i")},wt=/^(?:input|select|textarea|button)$/i,Ct=/^h\d$/i,St=/^[^{]+\{\s*\[native \w/,kt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ot=/[+~]/,Tt=/'|\\/g,Et=new RegExp("\\\\([\\da-f]{1,6}"+st+"?|("+st+")|.)","ig"),Nt=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{at.apply(nt=ut.call(qe.childNodes),qe.childNodes),nt[qe.childNodes.length].nodeType}catch(e){at={apply:nt.length?function(e,t){it.apply(e,ut.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var _t=function(e,t,n,r){var o,c,l,f,i,d,m,h,v,y;if((t?t.ownerDocument||t:qe)!==He&&Le(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(f=(t=t||He).nodeType)&&9!==f)return[];if(Ve&&!r){if(o=kt.exec(e))if(l=o[1]){if(9===f){if(!(c=t.getElementById(l))||!c.parentNode)return n;if(c.id===l)return n.push(c),n}else if(t.ownerDocument&&(c=t.ownerDocument.getElementById(l))&&We(t,c)&&c.id===l)return n.push(c),n}else{if(o[2])return at.apply(n,t.getElementsByTagName(e)),n;if((l=o[3])&&_e.getElementsByClassName)return at.apply(n,t.getElementsByClassName(l)),n}if(_e.qsa&&(!je||!je.test(e))){if(h=m=$e,v=t,y=9===f&&e,1===f&&"object"!==t.nodeName.toLowerCase()){for(d=Be(e),(m=t.getAttribute("id"))?h=m.replace(Tt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",i=d.length;i--;)d[i]=h+Lt(d[i]);v=Ot.test(e)&&zt(t.parentNode)||t,y=d.join(",")}if(y)try{return at.apply(n,v.querySelectorAll(y)),n}catch(e){}finally{m||t.removeAttribute("id")}}}return select(e.replace(gt,"$1"),t,n,r)};function At(){var e=[];return function t(n,r){return e.push(n+" ")>Ae.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function Dt(e){return e[$e]=!0,e}function Rt(a,b){var e=b&&a,t=e&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||et)-(~a.sourceIndex||et);if(t)return t;if(e)for(;e=e.nextSibling;)if(e===b)return-1;return a?1:-1}function Bt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Mt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function It(e){return Dt(function(t){return t=+t,Dt(function(n,r){for(var o,c=e([],n.length,t),i=c.length;i--;)n[o=c[i]]&&(n[o]=!(r[o]=n[o]))})})}function zt(e){return e&&typeof e.getElementsByTagName!==Ze&&e}for(i in _e=_t.support={},Re=_t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Le=_t.setDocument=function(e){var t,n=e?e.ownerDocument||e:qe,r=n.defaultView;return n!==He&&9===n.nodeType&&n.documentElement?(He=n,Fe=n.documentElement,Ve=!Re(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){Le()},!1):r.attachEvent&&r.attachEvent("onunload",function(){Le()})),_e.attributes=!0,_e.getElementsByTagName=!0,_e.getElementsByClassName=St.test(n.getElementsByClassName),_e.getById=!0,Ae.find.ID=function(e,t){if(typeof t.getElementById!==Ze&&Ve){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Ae.filter.ID=function(e){var t=e.replace(Et,Nt);return function(e){return e.getAttribute("id")===t}},Ae.find.TAG=_e.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Ze)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},Ae.find.CLASS=_e.getElementsByClassName&&function(e,t){if(Ve)return t.getElementsByClassName(e)},Ue=[],je=[],_e.disconnectedMatch=!0,je=je.length&&new RegExp(je.join("|")),Ue=Ue.length&&new RegExp(Ue.join("|")),t=St.test(Fe.compareDocumentPosition),We=t||St.test(Fe.contains)?function(a,b){var e=9===a.nodeType?a.documentElement:a,t=b&&b.parentNode;return a===t||!(!t||1!==t.nodeType||!(e.contains?e.contains(t):a.compareDocumentPosition&&16&a.compareDocumentPosition(t)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},Qe=t?function(a,b){if(a===b)return Pe=!0,0;var e=!a.compareDocumentPosition-!b.compareDocumentPosition;return e||(1&(e=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!_e.sortDetached&&b.compareDocumentPosition(a)===e?a===n||a.ownerDocument===qe&&We(qe,a)?-1:b===n||b.ownerDocument===qe&&We(qe,b)?1:ze?ct.call(ze,a)-ct.call(ze,b):0:4&e?-1:1)}:function(a,b){if(a===b)return Pe=!0,0;var e,i=0,t=a.parentNode,r=b.parentNode,o=[a],c=[b];if(!t||!r)return a===n?-1:b===n?1:t?-1:r?1:ze?ct.call(ze,a)-ct.call(ze,b):0;if(t===r)return Rt(a,b);for(e=a;e=e.parentNode;)o.unshift(e);for(e=b;e=e.parentNode;)c.unshift(e);for(;o[i]===c[i];)i++;return i?Rt(o[i],c[i]):o[i]===qe?-1:c[i]===qe?1:0},n):He},_t.matches=function(e,t){return _t(e,null,null,t)},_t.matchesSelector=function(e,t){if((e.ownerDocument||e)!==He&&Le(e),t=t.replace(vt,"='$1']"),_e.matchesSelector&&Ve&&(!Ue||!Ue.test(t))&&(!je||!je.test(t)))try{var n=(void 0).call(e,t);if(n||_e.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return _t(t,He,null,[e]).length>0},_t.contains=function(e,t){return(e.ownerDocument||e)!==He&&Le(e),We(e,t)},_t.attr=function(e,t){(e.ownerDocument||e)!==He&&Le(e);var n=Ae.attrHandle[t.toLowerCase()],r=n&&tt.call(Ae.attrHandle,t.toLowerCase())?n(e,t,!Ve):void 0;return void 0!==r?r:_e.attributes||!Ve?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},_t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},_t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(Pe=!_e.detectDuplicates,ze=!_e.sortStable&&e.slice(0),e.sort(Qe),Pe){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return ze=null,e},De=_t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=De(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=De(t);return n},(Ae=_t.selectors={cacheLength:50,createPseudo:Dt,match:xt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Et,Nt),e[3]=(e[3]||e[4]||e[5]||"").replace(Et,Nt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||_t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&_t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return xt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&bt.test(n)&&(t=Be(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Et,Nt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var pattern=Xe[e+" "];return pattern||(pattern=new RegExp("(^|"+st+")"+e+"("+st+"|$)"))&&Xe(e,function(e){return pattern.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Ze&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=_t.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var c="nth"!==e.slice(0,3),l="last"!==e.slice(-4),f="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,d){var m,h,v,y,x,w,C=c!==l?"nextSibling":"previousSibling",S=t.parentNode,k=f&&t.nodeName.toLowerCase(),O=!d&&!f;if(S){if(c){for(;C;){for(v=t;v=v[C];)if(f?v.nodeName.toLowerCase()===k:1===v.nodeType)return!1;w=C="only"===e&&!w&&"nextSibling"}return!0}if(w=[l?S.firstChild:S.lastChild],l&&O){for(x=(m=(h=S[$e]||(S[$e]={}))[e]||[])[0]===Ge&&m[1],y=m[0]===Ge&&m[2],v=x&&S.childNodes[x];v=++x&&v&&v[C]||(y=x=0)||w.pop();)if(1===v.nodeType&&++y&&v===t){h[e]=[Ge,x,y];break}}else if(O&&(m=(t[$e]||(t[$e]={}))[e])&&m[0]===Ge)y=m[1];else for(;(v=++x&&v&&v[C]||(y=x=0)||w.pop())&&((f?v.nodeName.toLowerCase()!==k:1!==v.nodeType)||!++y||(O&&((v[$e]||(v[$e]={}))[e]=[Ge,y]),v!==t)););return(y-=o)===r||y%r==0&&y/r>=0}}},PSEUDO:function(e,t){var n,r=Ae.pseudos[e]||Ae.setFilters[e.toLowerCase()]||_t.error("unsupported pseudo: "+e);return r[$e]?r(t):r.length>1?(n=[e,e,"",t],Ae.setFilters.hasOwnProperty(e.toLowerCase())?Dt(function(e,n){for(var o,c=r(e,t),i=c.length;i--;)e[o=ct.call(e,c[i])]=!(n[o]=c[i])}):function(e){return r(e,0,n)}):r}},pseudos:{not:Dt(function(e){var input=[],t=[],n=Me(e.replace(gt,"$1"));return n[$e]?Dt(function(e,t,r,o){for(var c,l=n(e,null,o,[]),i=e.length;i--;)(c=l[i])&&(e[i]=!(t[i]=c))}):function(e,r,o){return input[0]=e,n(input,null,o,t),!t.pop()}}),has:Dt(function(e){return function(t){return _t(e,t).length>0}}),contains:Dt(function(text){return text=text.replace(Et,Nt),function(e){return(e.textContent||e.innerText||De(e)).indexOf(text)>-1}}),lang:Dt(function(e){return yt.test(e||"")||_t.error("unsupported lang: "+e),e=e.replace(Et,Nt).toLowerCase(),function(t){var n;do{if(n=Ve?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var n=t.window.location&&t.window.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===Fe},focus:function(e){return e===He.activeElement&&(!He.hasFocus||He.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Ae.pseudos.empty(e)},header:function(e){return Ct.test(e.nodeName)},input:function(e){return wt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:It(function(){return[0]}),last:It(function(e,t){return[t-1]}),eq:It(function(e,t,n){return[n<0?n+t:n]}),even:It(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:It(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:It(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:It(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=Ae.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Ae.pseudos[i]=Bt(i);for(i in{submit:!0,reset:!0})Ae.pseudos[i]=Mt(i);function Pt(){}function Lt(e){for(var i=0,t=e.length,n="";i<t;i++)n+=e[i].value;return n}function Ht(e,t,base){var n=t.dir,r=base&&"parentNode"===n,o=Ye++;return t.first?function(t,o,c){for(;t=t[n];)if(1===t.nodeType||r)return e(t,o,c)}:function(t,c,l){var f,d,m=[Ge,o];if(l){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,c,l))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if((f=(d=t[$e]||(t[$e]={}))[n])&&f[0]===Ge&&f[1]===o)return m[2]=f[2];if(d[n]=m,m[2]=e(t,c,l))return!0}}}function Ft(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Vt(e,map,filter,t,n){for(var r,o=[],i=0,c=e.length,l=null!=map;i<c;i++)(r=e[i])&&(filter&&!filter(r,t,n)||(o.push(r),l&&map.push(i)));return o}function jt(e,t,n,r,o,c){return r&&!r[$e]&&(r=jt(r)),o&&!o[$e]&&(o=jt(o,c)),Dt(function(c,l,f,d){var m,i,h,v=[],y=[],x=l.length,w=c||function(e,t,n){for(var i=0,r=t.length;i<r;i++)_t(e,t[i],n);return n}(t||"*",f.nodeType?[f]:f,[]),C=!e||!c&&t?w:Vt(w,v,e,f,d),S=n?o||(c?e:x||r)?[]:l:C;if(n&&n(C,S,f,d),r)for(m=Vt(S,y),r(m,[],f,d),i=m.length;i--;)(h=m[i])&&(S[y[i]]=!(C[y[i]]=h));if(c){if(o||e){if(o){for(m=[],i=S.length;i--;)(h=S[i])&&m.push(C[i]=h);o(null,S=[],m,d)}for(i=S.length;i--;)(h=S[i])&&(m=o?ct.call(c,h):v[i])>-1&&(c[m]=!(l[m]=h))}}else S=Vt(S===l?S.splice(x,S.length):S),o?o(null,l,S,d):at.apply(l,S)})}function Ut(e){for(var t,n,r,o=e.length,c=Ae.relative[e[0].type],l=c||Ae.relative[" "],i=c?1:0,f=Ht(function(e){return e===t},l,!0),d=Ht(function(e){return ct.call(t,e)>-1},l,!0),m=[function(e,n,r){return!c&&(r||n!==Ie)||((t=n).nodeType?f(e,n,r):d(e,n,r))}];i<o;i++)if(n=Ae.relative[e[i].type])m=[Ht(Ft(m),n)];else{if((n=Ae.filter[e[i].type].apply(null,e[i].matches))[$e]){for(r=++i;r<o&&!Ae.relative[e[r].type];r++);return jt(i>1&&Ft(m),i>1&&Lt(e.slice(0,i-1).concat({value:" "===e[i-2].type?"*":""})).replace(gt,"$1"),n,i<r&&Ut(e.slice(i,r)),r<o&&Ut(e=e.slice(r)),r<o&&Lt(e))}m.push(n)}return Ft(m)}Pt.prototype=Ae.filters=Ae.pseudos,Ae.setFilters=new Pt,Be=_t.tokenize=function(e,t){var n,r,o,c,l,f,d,m=Ke[e+" "];if(m)return t?0:m.slice(0);for(l=e,f=[],d=Ae.preFilter;l;){for(c in n&&!(r=ht.exec(l))||(r&&(l=l.slice(r[0].length)||l),f.push(o=[])),n=!1,(r=pt.exec(l))&&(n=r.shift(),o.push({value:n,type:r[0].replace(gt," ")}),l=l.slice(n.length)),Ae.filter)!(r=xt[c].exec(l))||d[c]&&!(r=d[c](r))||(n=r.shift(),o.push({value:n,type:c,matches:r}),l=l.slice(n.length));if(!n)break}return t?l.length:l?_t.error(e):Ke(e,f).slice(0)},Me=_t.compile=function(e,t){var i,n=[],r=[],o=Je[e+" "];if(!o){for(t||(t=Be(e)),i=t.length;i--;)(o=Ut(t[i]))[$e]?n.push(o):r.push(o);(o=Je(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,c,l,f,d){var m,h,v,y=0,i="0",x=o&&[],w=[],C=Ie,S=o||r&&Ae.find.TAG("*",d),k=Ge+=null==C?1:Math.random()||.1,O=S.length;for(d&&(Ie=c!==He&&c);i!==O&&null!=(m=S[i]);i++){if(r&&m){for(h=0;v=e[h++];)if(v(m,c,l)){f.push(m);break}d&&(Ge=k)}n&&((m=!v&&m)&&y--,o&&x.push(m))}if(y+=i,n&&i!==y){for(h=0;v=t[h++];)v(x,w,c,l);if(o){if(y>0)for(;i--;)x[i]||w[i]||(w[i]=ot.call(f));w=Vt(w)}at.apply(f,w),d&&!o&&w.length>0&&y+t.length>1&&_t.uniqueSort(f)}return d&&(Ge=k,Ie=C),x};return n?Dt(o):o}(r,n))).selector=e}return o},select=_t.select=function(e,t,n,r){var i,o,c,l,f,d="function"==typeof e&&e,m=!r&&Be(e=d.selector||e);if(n=n||[],1===m.length){if((o=m[0]=m[0].slice(0)).length>2&&"ID"===(c=o[0]).type&&_e.getById&&9===t.nodeType&&Ve&&Ae.relative[o[1].type]){if(!(t=(Ae.find.ID(c.matches[0].replace(Et,Nt),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=xt.needsContext.test(e)?0:o.length;i--&&(c=o[i],!Ae.relative[l=c.type]);)if((f=Ae.find[l])&&(r=f(c.matches[0].replace(Et,Nt),Ot.test(o[0].type)&&zt(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Lt(o)))return at.apply(n,r),n;break}}return(d||Me(e,m))(r,t,!Ve,n,Ot.test(e)&&zt(t.parentNode)||t),n},_e.sortStable=$e.split("").sort(Qe).join("")===$e,_e.detectDuplicates=!!Pe,Le(),_e.sortDetached=!0;var Wt=Array.isArray,$t=function(e,t,s){var n,r;if(!e)return 0;if(s=s||e,void 0!==e.length){for(n=0,r=e.length;n<r;n++)if(!1===t.call(s,e[n],n,e))return 0}else for(n in e)if(e.hasOwnProperty(n)&&!1===t.call(s,e[n],n,e))return 0;return 1},qt=function(e,t,n){var i,r;for(i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1},Gt={isArray:Wt,toArray:function(e){var i,t,n=e;if(!Wt(e))for(n=[],i=0,t=e.length;i<t;i++)n[i]=e[i];return n},each:$t,map:function(e,t){var n=[];return $t(e,function(r,o){n.push(t(r,o,e))}),n},filter:function(a,e){var t=[];return $t(a,function(n,r){e&&!e(n,r,a)||t.push(n)}),t},indexOf:function(a,e){var i,t;if(a)for(i=0,t=a.length;i<t;i++)if(a[i]===e)return i;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:qt,find:function(e,t,n){var r=qt(e,t,n);if(-1!==r)return e[r]},last:function(e){return e[e.length-1]}},Yt=/^\s*|\s*$/g,Xt=function(e){return null==e?"":(""+e).replace(Yt,"")},Kt=function(e,t){return t?!("array"!==t||!Gt.isArray(e))||typeof e===t:void 0!==e},Jt=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Gt.each(e,function(e,i){if(!1===t.call(s,e,i,n))return!1;Jt(e,t,n,s)}))},Qt={trim:Xt,isArray:Gt.isArray,is:Kt,toArray:Gt.toArray,makeMap:function(e,t,map){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),map=map||{},i=e.length;i--;)map[e[i]]={};return map},each:Gt.each,map:Gt.map,grep:Gt.filter,inArray:Gt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var i,n,r,o=[],c=2;c<arguments.length;c++)o[c-2]=arguments[c];var l,f=arguments;for(i=1,n=f.length;i<n;i++)for(r in t=f[i])t.hasOwnProperty(r)&&void 0!==(l=t[r])&&(e[r]=l);return e},create:function(s,p,e){var t,n,r,o,c,l=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),r=s[3].match(/(^|\.)(\w+)$/i)[2],!(n=this.createNS(s[3].replace(/\.\w+$/,""),e))[r]){if("static"===s[2])return n[r]=p,void(this.onCreate&&this.onCreate(s[2],s[3],n[r]));p[r]||(p[r]=function(){},l=1),n[r]=p[r],this.extend(n[r].prototype,p),s[5]&&(t=this.resolve(s[5]).prototype,o=s[5].match(/\.(\w+)$/i)[1],c=n[r],n[r]=l?function(){return t[o].apply(this,arguments)}:function(){return this.parent=t[o],c.apply(this,arguments)},n[r].prototype[r]=n[r],this.each(t,function(e,o){n[r].prototype[o]=t[o]}),this.each(p,function(e,o){t[o]?n[r].prototype[o]=function(){return this.parent=t[o],e.apply(this,arguments)}:o!==r&&(n[r].prototype[o]=e)})),this.each(p.static,function(e,t){n[r][t]=e})}},walk:Jt,createNS:function(e,n){var i,r;for(n=n||t.window,e=e.split("."),i=0;i<e.length;i++)n[r=e[i]]||(n[r]={}),n=n[r];return n},resolve:function(e,n){var i,r;for(n=n||t.window,i=0,r=(e=e.split(".")).length;i<r&&(n=n[e[i]]);i++);return n},explode:function(s,e){return!s||Kt(s,"array")?s:Gt.map(s.split(e||","),Xt)},_addCacheSuffix:function(e){var t=ge.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Zt=t.document,en=Array.prototype.push,tn=Array.prototype.slice,nn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rn=Ne.Event,on=Qt.makeMap("children,contents,next,prev"),an=function(e){return void 0!==e},un=function(e){return"string"==typeof e},cn=function(html,e){var t,n,r;for(r=(e=e||Zt).createElement("div"),t=e.createDocumentFragment(),r.innerHTML=html;n=r.firstChild;)t.appendChild(n);return t},sn=function(e,t,n,r){var i;if(un(t))t=cn(t,Sn(e[0]));else if(t.length&&!t.nodeType){if(t=bn.makeArray(t),r)for(i=t.length-1;i>=0;i--)sn(e,t[i],n,r);else for(i=0;i<t.length;i++)sn(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},ln=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},fn=function(e,t,n){var r,o;return t=bn(t)[0],e.each(function(){n&&r===this.parentNode?o.appendChild(this):(r=this.parentNode,o=t.cloneNode(!1),this.parentNode.insertBefore(o,this),o.appendChild(this))}),e},dn=Qt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),mn=Qt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),gn={for:"htmlFor",class:"className",readonly:"readOnly"},hn={float:"cssFloat"},pn={},vn={},bn=function(e,t){return new bn.fn.init(e,t)},yn=/^\s*|\s*$/g,xn=function(e){return null==e?"":(""+e).replace(yn,"")},wn=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},Cn=function(e,t){var n=[];return wn(e,function(i,e){t(e,i)&&n.push(e)}),n},Sn=function(element){return element?9===element.nodeType?element:element.ownerDocument:Zt};bn.fn=bn.prototype={constructor:bn,selector:"",context:null,length:0,init:function(e,n){var r,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(n&&n.nodeType)this.context=n;else{if(n)return bn(e).attr(n);this.context=n=t.document}if(un(e)){if(this.selector=e,!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:nn.exec(e)))return bn(n).find(e);if(r[1])for(o=cn(e,Sn(n)).firstChild;o;)en.call(this,o),o=o.nextSibling;else{if(!(o=Sn(n).getElementById(r[2])))return this;if(o.id!==r[2])return this.find(e);this.length=1,this[0]=o}}else this.add(e,!1);return this},toArray:function(){return Qt.toArray(this)},add:function(e,t){var n,i;if(un(e))return this.add(bn(e));if(!1!==t)for(n=bn.unique(this.toArray().concat(bn.makeArray(e))),this.length=n.length,i=0;i<n.length;i++)this[i]=n[i];else en.apply(this,bn.makeArray(e));return this},attr:function(e,t){var n,r=this;if("object"==typeof e)wn(e,function(e,t){r.attr(e,t)});else{if(!an(t)){if(r[0]&&1===r[0].nodeType){if((n=pn[e])&&n.get)return n.get(r[0],e);if(mn[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=pn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=gn[e]||e))wn(e,function(e,t){n.prop(e,t)});else{if(!an(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,o=this,c=function(e){return e.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},l=function(e){return e.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof e)wn(e,function(e,t){o.css(e,t)});else if(an(t))e=c(e),"number"!=typeof t||dn[e]||(t=t.toString()+"px"),o.each(function(){var style=this.style;if((r=vn[e])&&r.set)r.set(this,t);else{try{this.style[hn[e]||e]=t}catch(e){}null!==t&&""!==t||(style.removeProperty?style.removeProperty(l(e)):style.removeAttribute(e))}});else{if(n=o[0],(r=vn[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[c(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(l(e))}catch(e){return}}return o},remove:function(){for(var e,i=this.length;i--;)e=this[i],rn.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,i=this.length;i--;)for(e=this[i];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var i;if(an(e)){i=this.length;try{for(;i--;)this[i].innerHTML=e}catch(t){bn(this[i]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var i;if(an(e)){for(i=this.length;i--;)"innerText"in this[i]?this[i].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return bn(e).append(this),this},prependTo:function(e){return bn(e).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return fn(this,content)},wrapAll:function(content){return fn(this,content,!0)},wrapInner:function(content){return this.each(function(){bn(this).contents().wrapAll(content)}),this},unwrap:function(){return this.parent().each(function(){bn(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),bn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?wn(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var o,c;(c=ln(r,e))!==t&&(o=r.className,c?r.className=xn((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}),n)},hasClass:function(e){return ln(this[0],e)},each:function(e){return wn(this,e)},on:function(e,t){return this.each(function(){rn.bind(this,e,t)})},off:function(e,t){return this.each(function(){rn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?rn.fire(this,e.type,e):rn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new bn(tn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var i,t,n=[];for(i=0,t=this.length;i<t;i++)bn.find(e,this[i],n);return bn(n)},filter:function(e){return bn("function"==typeof e?Cn(this.toArray(),function(t,i){return e(i,t)}):bn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof bn&&(e=e[0]),this.each(function(i,n){for(;n;){if("string"==typeof e&&bn(n).is(e)){t.push(n);break}if(n===e){t.push(n);break}n=n.parentNode}}),bn(t)},offset:function(e){var t,n,r,o,c=0,l=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(c=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,l=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:c,top:l})},push:en,sort:[].sort,splice:[].splice},Qt.extend(bn,{extend:Qt.extend,makeArray:function(object){return(e=object)&&e===e.window||object.nodeType?[object]:Qt.toArray(object);var e},inArray:function(e,t){var i;if(t.indexOf)return t.indexOf(e);for(i=t.length;i--;)if(t[i]===e)return i;return-1},isArray:Qt.isArray,each:wn,trim:xn,grep:Cn,find:_t,expr:_t.selectors,unique:_t.uniqueSort,text:_t.getText,contains:_t.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return t=1===t.length?bn.find.matchesSelector(t[0],e)?[t[0]]:[]:bn.find.matches(e,t)}});var kn=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof bn&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&bn(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},On=function(e,t,n,r){var o=[];for(r instanceof bn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&bn(e).is(r))break}o.push(e)}return o},Tn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};wn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return kn(e,"parentNode")},next:function(e){return Tn(e,"nextSibling",1)},prev:function(e){return Tn(e,"previousSibling",1)},children:function(e){return On(e.firstChild,"nextSibling",1)},contents:function(e){return Qt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){bn.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(bn.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(on[e]||(r=bn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=bn(r),n?r.filter(n):r}}),wn({parentsUntil:function(e,t){return kn(e,"parentNode",t)},nextUntil:function(e,t){return On(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return On(e,"previousSibling",1,t).slice(1)}},function(e,t){bn.fn[e]=function(n,filter){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(bn.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(r=bn.unique(r),0!==e.indexOf("parents")&&"prevUntil"!==e||(r=r.reverse())),r=bn(r),filter?r.filter(filter):r}}),bn.fn.is=function(e){return!!e&&this.filter(e).length>0},bn.fn.init.prototype=bn.fn,bn.overrideDefaults=function(e){var t,sub=function(n,r){return t=t||e(),0===arguments.length&&(n=t.element),r||(r=t.context),new sub.fn.init(n,r)};return bn.extend(sub,this),sub};var En=function(e,t,n){wn(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};ge.ie&&ge.ie<8&&(En(pn,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),En(pn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),ge.ie&&ge.ie<9&&(hn.float="styleFloat",En(vn,"set",{opacity:function(e,t){var style=e.style;null===t||""===t?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*t+")")}})),bn.attrHooks=pn,bn.cssHooks=vn;var Nn,_n,An,Dn=function(){return Rn(0,0)},Rn=function(e,t){return{major:e,minor:t}},Bn={nu:Rn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Dn():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Rn(r(1),r(2))}(e,n)},unknown:Dn},Mn=function(e,t){return function(){return t===e}},In=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Mn("Edge",t),isChrome:Mn("Chrome",t),isIE:Mn("IE",t),isOpera:Mn("Opera",t),isFirefox:Mn("Firefox",t),isSafari:Mn("Safari",t)}},zn={unknown:function(){return In({current:void 0,version:Bn.unknown()})},nu:In,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o("Firefox"),safari:o("Safari")},Pn=function(e,t){return function(){return t===e}},Ln=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Pn("Windows",t),isiOS:Pn("iOS",t),isAndroid:Pn("Android",t),isOSX:Pn("OSX",t),isLinux:Pn("Linux",t),isSolaris:Pn("Solaris",t),isFreeBSD:Pn("FreeBSD",t)}},Hn={unknown:function(){return Ln({current:void 0,version:Bn.unknown()})},nu:Ln,windows:o("Windows"),ios:o("iOS"),android:o("Android"),linux:o("Linux"),osx:o("OSX"),solaris:o("Solaris"),freebsd:o("FreeBSD")},Fn=function(e,t){var n=String(t).toLowerCase();return K(e,function(e){return e.search(n)})},Vn=function(e,t){return Fn(e,t).map(function(e){var n=Bn.detect(e.versionRegexes,t);return{current:e.name,version:n}})},jn=function(e,t){return Fn(e,t).map(function(e){var n=Bn.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Un=function(e,t){return-1!==e.indexOf(t)},Wn=function(e){return e.replace(/^\s+|\s+$/g,"")},$n=function(e){return e.replace(/\s+$/g,"")},qn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gn=function(e){return function(t){return Un(t,e)}},Yn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Un(e,"edge/")&&Un(e,"chrome")&&Un(e,"safari")&&Un(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qn],search:function(e){return Un(e,"chrome")&&!Un(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Un(e,"msie")||Un(e,"trident")}},{name:"Opera",versionRegexes:[qn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gn("firefox")},{name:"Safari",versionRegexes:[qn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Un(e,"safari")||Un(e,"mobile/"))&&Un(e,"applewebkit")}}],Xn=[{name:"Windows",search:Gn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Un(e,"iphone")||Un(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Gn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gn("linux"),versionRegexes:[]},{name:"Solaris",search:Gn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gn("freebsd"),versionRegexes:[]}],Kn={browsers:o(Yn),oses:o(Xn)},Jn=function(e){var t=Kn.browsers(),n=Kn.oses(),r=Vn(t,e).fold(zn.unknown,zn.nu),c=jn(n,e).fold(Hn.unknown,Hn.nu),l=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),c=e.isiOS()&&!r,l=e.isAndroid()&&3===e.version.major,f=e.isAndroid()&&4===e.version.major,d=r||l||f&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:o(r),isiPhone:o(c),isTablet:o(d),isPhone:o(h),isTouch:o(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:o(v)}}(c,r,e);return{browser:r,os:c,deviceType:l}},Qn={detect:(Nn=function(){var e=t.navigator.userAgent;return Jn(e)},An=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return An||(An=!0,_n=Nn.apply(null,e)),_n})},Zn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},er={fromHtml:function(html,e){var div=(e||t.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw t.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return Zn(div.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return Zn(r)},fromText:function(text,e){var n=(e||t.document).createTextNode(text);return Zn(n)},fromDom:Zn,fromPoint:function(e,t,n){var r=e.dom();return I.from(r.elementFromPoint(t,n)).map(Zn)}},nr=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE),rr=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),or=t.Node.TEXT_NODE,ir=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,function(element){return element.dom().nodeName.toLowerCase()}),ar=function(e){return function(element){return function(element){return element.dom().nodeType}(element)===e}},ur=ar(rr),cr=ar(or),sr=Object.keys,lr=Object.hasOwnProperty,fr=function(e,t){for(var n=sr(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},dr=function(e,t){return mr(e,function(e,i,n){return{k:i,v:t(e,i,n)}})},mr=function(e,t){var n={};return fr(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},gr=function(e,t){var n={},r={};return fr(e,function(e,i){(t(e,i)?n:r)[i]=e}),{t:n,f:r}},pr=function(e,t){return vr(e,t)?I.from(e[t]):I.none()},vr=function(e,t){return lr.call(e,t)},yr=function(e,n,r){if(!(P(r)||V(r)||U(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")},xr=function(element,e,t){yr(element.dom(),e,t)},wr=function(element,e){var t=element.dom();fr(e,function(e,n){yr(t,n,e)})},Cr=function(element,e){var t=element.dom().getAttribute(e);return null===t?void 0:t},Sr=function(element,e){element.dom().removeAttribute(e)},kr=function(element,e){var n=element.dom(),r=t.window.getComputedStyle(n).getPropertyValue(e),o=""!==r||function(element){var e=cr(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)}(element)?r:Or(n,e);return null===o?void 0:o},Or=function(e,t){return function(e){return void 0!==e.style}(e)?e.style.getPropertyValue(t):""},Tr=function(element,e){var t=element.dom(),n=Or(t,e);return I.from(n).filter(function(e){return e.length>0})},Er=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return G(e,function(e,i){r[e]=o(t[i])}),r}},Nr=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},_r=function(){return ce.getOrDie("Node")},Ar=function(a,b,e){return 0!=(a.compareDocumentPosition(b)&e)},Dr=function(a,b){return Ar(a,b,_r().DOCUMENT_POSITION_CONTAINED_BY)},Rr=rr,Br=nr,Mr=function(element,e){var t=element.dom();if(t.nodeType!==Rr)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Ir=function(e){return e.nodeType!==Rr&&e.nodeType!==Br||0===e.childElementCount},zr=function(e,t){return e.dom()===t.dom()},Pr=Qn.detect().browser.isIE()?function(e,t){return Dr(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Lr=function(element){return er.fromDom(element.dom().ownerDocument)},Hr=function(element){var e=element.dom();return I.from(e.parentNode).map(er.fromDom)},Fr=function(element){var e=element.dom();return I.from(e.previousSibling).map(er.fromDom)},Vr=function(element){var e=element.dom();return I.from(e.nextSibling).map(er.fromDom)},jr=function(element){return e=Nr(element,Fr),(t=ne.call(e,0)).reverse(),t;var e,t},Ur=function(element){return Nr(element,Vr)},Wr=function(element){var e=element.dom();return map(e.childNodes,er.fromDom)},$r=function(element,e){var t=element.dom().childNodes;return I.from(t[e]).map(er.fromDom)},qr=function(element){return $r(element,0)},Gr=function(element){return $r(element,element.dom().childNodes.length-1)},Yr=(Er("element","offset"),Qn.detect().browser),Xr=function(e){return K(e,ur)},Kr={getPos:function(body,e,t){var n,r,o=0,c=0,l=body.ownerDocument;if(t=t||body,e){if(t===body&&e.getBoundingClientRect&&"static"===kr(er.fromDom(body),"position"))return{x:o=(r=e.getBoundingClientRect()).left+(l.documentElement.scrollLeft||body.scrollLeft)-l.documentElement.clientLeft,y:c=r.top+(l.documentElement.scrollTop||body.scrollTop)-l.documentElement.clientTop};for(n=e;n&&n!==t&&n.nodeType;)o+=n.offsetLeft||0,c+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!==t&&n.nodeType;)o-=n.scrollLeft||0,c-=n.scrollTop||0,n=n.parentNode;c+=function(e){return Yr.isFirefox()&&"table"===ir(e)?Xr(Wr(e)).filter(function(e){return"caption"===ir(e)}).bind(function(caption){return Xr(Ur(caption)).map(function(body){var e=body.dom().offsetTop,t=caption.dom().offsetTop,n=caption.dom().offsetHeight;return e<=t?-n:0})}).getOr(0):0}(er.fromDom(e))}return{x:o,y:c}}},Jr=function(e){var data=I.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){G(e,l)},l=function(e){data.each(function(n){t.setTimeout(function(){e(n)},0)})};return e(function(e){data=I.some(e),c(n),n=[]}),{get:r,map:function(e){return Jr(function(t){r(function(data){t(e(data))})})},isReady:o}},Qr={nu:Jr,pure:function(a){return Jr(function(e){e(a)})}},Zr=function(e){var n=function(n){var r;e((r=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this;t.setTimeout(function(){r.apply(o,e)},0)}))},r=function(){return Qr.nu(n)};return{map:function(e){return Zr(function(t){n(function(a){var n=e(a);t(n)})})},bind:function(e){return Zr(function(t){n(function(a){e(a).get(t)})})},anonBind:function(e){return Zr(function(t){n(function(a){e.get(t)})})},toLazy:r,toCached:function(){var e=null;return Zr(function(t){null===e&&(e=r()),e.get(t)})},get:n}},eo={nu:Zr,pure:function(a){return Zr(function(e){e(a)})}},to=function(e,t){return t(function(t){var n=[],r=0;0===e.length?t([]):G(e,function(o,i){o.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(i))})})},no=function(e){return to(e,eo.nu)},ro=function(e){return{is:function(t){return e===t},isValue:_,isError:N,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return ro(e)},orThunk:function(t){return ro(e)},fold:function(t,n){return n(e)},map:function(t){return ro(t(e))},mapError:function(t){return ro(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return I.some(e)}}},oo=function(e){return{is:N,isValue:N,isError:_,getOr:c,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return oo(e)},mapError:function(t){return oo(t(e))},each:n,bind:function(t){return oo(e)},exists:N,forall:_,toOption:I.none}},io={value:ro,error:oo};function ao(e,t){var n=e,r=function(e,n,r,o){var c,l;if(e){if(!o&&e[n])return e[n];if(e!==t){if(c=e[r])return c;for(l=e.parentNode;l&&l!==t;l=l.parentNode)if(c=l[r])return c}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,o){var c,l,f;if(e){if(c=e[r],t&&c===t)return;if(c){if(!o)for(f=c[n];f;f=f[n])if(!f[n])return f;return c}if((l=e.parentNode)&&l!==t)return l}}(n,"lastChild","previousSibling",e)}}var uo,co,so,lo=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];n[String(o)]=t(o,i)}return n}(e,o(!0))).hasOwnProperty(ir(n))}},fo=lo(["h1","h2","h3","h4","h5","h6"]),mo=lo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),go=function(e){return ur(e)&&!mo(e)},ho=function(e){return ur(e)&&"br"===ir(e)},po=lo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),vo=lo(["ul","ol","dl"]),bo=lo(["li","dd","dt"]),yo=lo(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),xo=lo(["thead","tbody","tfoot"]),wo=lo(["td","th"]),Co=lo(["pre","script","textarea","style"]),So=function(e){return function(t){return!!t&&t.nodeType===e}},ko=So(1),Oo=function(e){var t=e.toLowerCase().split(" ");return function(e){var i,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),i=0;i<t.length;i++)if(n===t[i])return!0;return!1}},To=function(e){return function(t){if(ko(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Eo=So(3),No=So(8),_o=So(9),Ao=So(11),Do=Oo("br"),Ro=To("true"),Bo=To("false"),Mo={isText:Eo,isElement:ko,isComment:No,isDocument:_o,isDocumentFragment:Ao,isBr:Do,isContentEditableTrue:Ro,isContentEditableFalse:Bo,matchNodeNames:Oo,hasPropValue:function(e,t){return function(n){return ko(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return ko(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return ko(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(ko(t))for(i=0;i<n.length;i++){var r=t.ownerDocument.defaultView.getComputedStyle(t,null);if((r?r.getPropertyValue(e):null)===n[i])return!0}return!1}},isBogus:function(e){return ko(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return ko(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return ko(e)&&"TABLE"===e.tagName}},Io=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},zo=function(e,t){var i,n=t.childNodes;if(!Mo.isElement(t)||!Io(t)){for(i=n.length-1;i>=0;i--)zo(e,n[i]);if(!1===Mo.isDocument(t)){if(Mo.isText(t)&&t.nodeValue.length>0){var r=Qt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||r>0)return;if(0===r&&function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n}(t))return}else if(Mo.isElement(t)&&(1===(n=t.childNodes).length&&Io(n[0])&&t.parentNode.insertBefore(n[0],t),n.length||yo(er.fromDom(t))))return;e.remove(t)}return t}},Po={trimNode:zo},Lo=Qt.makeMap,Ho=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vo=/[<>&\"\']/g,jo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Uo={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};co={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},so={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Wo=function(e,t){var i,n,r,o={};if(e){for(e=e.split(","),t=t||10,i=0;i<e.length;i+=2)n=String.fromCharCode(parseInt(e[i],t)),co[n]||(r="&"+e[i+1]+";",o[n]=r,o[r]=n);return o}};uo=Wo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var $o=function(text,e){return text.replace(e?Ho:Fo,function(e){return co[e]||e})},qo=function(text,e){return text.replace(e?Ho:Fo,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":co[e]||"&#"+e.charCodeAt(0)+";"})},Go=function(text,e,t){return t=t||uo,text.replace(e?Ho:Fo,function(e){return co[e]||t[e]||e})},Yo={encodeRaw:$o,encodeAllRaw:function(text){return(""+text).replace(Vo,function(e){return co[e]||e})},encodeNumeric:qo,encodeNamed:Go,getEncodeFunc:function(e,t){var n=Wo(t)||uo,r=Lo(e.replace(/\+/g,","));return r.named&&r.numeric?function(text,e){return text.replace(e?Ho:Fo,function(e){return void 0!==co[e]?co[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:r.named?t?function(text,e){return Go(text,e,n)}:Go:r.numeric?qo:$o},decode:function(text){return text.replace(jo,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Uo[t]||String.fromCharCode(t):so[e]||uo[e]||(text=e,(n=er.fromTag("div").dom()).innerHTML=text,n.textContent||n.innerText||text);var text,n})}},Xo={},Ko={},Jo=Qt.makeMap,Qo=Qt.each,Zo=Qt.extend,ei=Qt.explode,ti=Qt.inArray,ni=function(e,t){return(e=Qt.trim(e))?e.split(t||" "):[]},ri=function(e){var t,n,r,o,c,l,f={},d=function(e,n,r){var o,c,element,l=function(e,t){var i,n,map={};for(i=0,n=e.length;i<n;i++)map[e[i]]=t||{};return map};for(n=n||"","string"==typeof(r=r||[])&&(r=ni(r)),o=(e=ni(e)).length;o--;)element={attributes:l(c=ni([t,n].join(" "))),attributesOrder:c,children:l(r,Ko)},f[e[o]]=element},m=function(e,t){var n,r,i,o;for(n=(e=ni(e)).length,t=ni(t);n--;)for(r=f[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Xo[e]?Xo[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,l="acronym applet basefont big font strike tt"].join(" "),Qo(ni(l),function(e){d(e,"",r)}),n=[n,c="center dir isindex noframes"].join(" "),o=[n,r].join(" "),Qo(ni(c),function(e){d(e,"",o)})),o=o||[n,r].join(" "),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),d("address dt dd div caption","",o),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),d("blockquote","cite",o),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",o),d("dl","","dt dd"),d("a","href target rel media hreflang type",r),d("q","cite",r),d("ins del","cite datetime",o),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",o),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),d("param","name value"),d("map","name",[o,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",o),d("th","colspan rowspan headers scope abbr",o),d("form","accept-charset action autocomplete enctype method name novalidate target",o),d("fieldset","disabled form name",[o,"legend"].join(" ")),d("label","form for",r),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:r),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[o,"li"].join(" ")),d("noscript","",o),"html4"!==e&&(d("wbr"),d("ruby","",[r,"rt rp"].join(" ")),d("figcaption","",o),d("mark rt rp summary bdi","",r),d("canvas","width height",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[r,"option"].join(" ")),d("article section nav aside main header footer","",o),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[o,"figcaption"].join(" ")),d("time","datetime",r),d("dialog","open",o),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",r),d("progress","value max",r),d("meter","value min max low high optimum",r),d("details","open",[o,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(m("script","language xml:space"),m("style","xml:space"),m("object","declare classid code codebase codetype archive standby align border hspace vspace"),m("embed","align name hspace vspace"),m("param","valuetype type"),m("a","charset name rev shape coords"),m("br","clear"),m("applet","codebase archive code object alt name width height align hspace vspace"),m("img","name longdesc align border hspace vspace"),m("iframe","longdesc frameborder marginwidth marginheight scrolling align"),m("font basefont","size color face"),m("input","usemap align"),m("select","onchange"),m("textarea"),m("h1 h2 h3 h4 h5 h6 div p legend caption","align"),m("ul","type compact"),m("li","type"),m("ol dl menu dir","compact"),m("pre","width xml:space"),m("hr","align noshade size width"),m("isindex","prompt"),m("table","summary width frame rules cellspacing cellpadding align bgcolor"),m("col","width align char charoff valign"),m("colgroup","width align char charoff valign"),m("thead","align char charoff valign"),m("tr","align char charoff valign bgcolor"),m("th","axis align char charoff valign nowrap bgcolor width height"),m("form","accept"),m("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),m("tfoot","align char charoff valign"),m("tbody","align char charoff valign"),m("area","nohref"),m("body","background bgcolor text link vlink alink")),"html4"!==e&&(m("input button select textarea","autofocus"),m("input textarea","placeholder"),m("a","download"),m("link script img","crossorigin"),m("iframe","sandbox seamless allowfullscreen")),Qo(ni("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,delete f.script,Xo[e]=f,f)},oi=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Qo(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Jo(e,/[, ]/):ei(e,/[, ]/)})),n};function ii(e){var t,n,r,o,c,l,f,d,m,h,v,y,x,w={},C={},S=[],k={},O={},T=function(option,t,n){var r=e[option];return r?r=Jo(r,/[, ]/,Jo(r.toUpperCase(),/[, ]/)):(r=Xo[option])||(r=Jo(t," ",Jo(t.toUpperCase()," ")),r=Zo(r,n),Xo[option]=r),r};r=ri((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=oi(e.valid_styles),n=oi(e.invalid_styles,"map"),d=oi(e.valid_classes,"map"),o=T("whitespace_elements","pre script noscript style textarea video audio iframe object code"),c=T("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),l=T("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),f=T("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),h=T("non_empty_elements","td th iframe video audio object script pre code",l),v=T("move_caret_before_on_enter_elements","table",h),y=T("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),m=T("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),x=T("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Qo((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")});var E=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},N=function(e){var t,n,r,o,c,element,l,f,d,m,h,v,y,x,C,k,O,T,N,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,A=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,D=/[*?+]/;if(e)for(e=ni(e,","),w["@"]&&(k=w["@"].attributes,O=w["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(c=_.exec(e[t])){if(x=c[1],d=c[2],C=c[3],f=c[5],element={attributes:v={},attributesOrder:y=[]},"#"===x&&(element.paddEmpty=!0),"-"===x&&(element.removeEmpty=!0),"!"===c[4]&&(element.removeEmptyAttrs=!0),k){for(T in k)v[T]=k[T];y.push.apply(y,O)}if(f)for(r=0,o=(f=ni(f,"|")).length;r<o;r++)if(c=A.exec(f[r])){if(l={},h=c[1],m=c[2].replace(/[\\:]:/g,":"),x=c[3],N=c[4],"!"===h&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(m),l.required=!0),"-"===h){delete v[m],y.splice(ti(y,m),1);continue}x&&("="===x&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:m,value:N}),l.defaultValue=N),":"===x&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:m,value:N}),l.forcedValue=N),"<"===x&&(l.validValues=Jo(N,"?"))),D.test(m)?(element.attributePatterns=element.attributePatterns||[],l.pattern=E(m),element.attributePatterns.push(l)):(v[m]||y.push(m),v[m]=l)}k||"@"!==d||(k=v,O=y),C&&(element.outputName=d,w[C]=element),D.test(d)?(element.pattern=E(d),S.push(element)):w[d]=element}},_=function(e){w={},S=[],N(e),Qo(r,function(element,e){C[e]=element.children})},A=function(e){var t=/^(~)?(.+)$/;e&&(Xo.text_block_elements=Xo.block_elements=null,Qo(ni(e,","),function(e){var n=t.exec(e),r="~"===n[1],o=r?"span":"div",c=n[2];if(C[c]=C[o],k[c]=o,r||(m[c.toUpperCase()]={},m[c]={}),!w[c]){var l=w[o];delete(l=Zo({},l)).removeEmptyAttrs,delete l.removeEmpty,w[c]=l}Qo(C,function(element,e){element[o]&&(C[e]=element=Zo({},C[e]),element[c]=element[o])})}))},D=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Xo[e.schema]=null,t&&Qo(ni(t,","),function(e){var t,r,o=n.exec(e);o&&(r=o[1],t=r?C[o[2]]:C[o[2]]={"#comment":{}},t=C[o[2]],Qo(ni(o[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},R=function(e){var i,element=w[e];if(element)return element;for(i=S.length;i--;)if((element=S[i]).pattern.test(e))return element};return e.valid_elements?_(e.valid_elements):(Qo(r,function(element,e){w[e]={attributes:element.attributes,attributesOrder:element.attributesOrder},C[e]=element.children}),"html5"!==e.schema&&Qo(ni("strong/b em/i"),function(e){e=ni(e,"/"),w[e[1]].outputName=e[0]}),Qo(ni("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){w[e]&&(w[e].removeEmpty=!0)}),Qo(ni("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){w[e].paddEmpty=!0}),Qo(ni("span"),function(e){w[e].removeEmptyAttrs=!0})),A(e.custom_elements),D(e.valid_children),N(e.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),Qo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){w[t]&&(w[t].parentsRequired=ni(e))}),e.invalid_elements&&Qo(ei(e.invalid_elements),function(e){w[e]&&delete w[e]}),R("span")||N("span[!data-mce-type|*]"),{children:C,elements:w,getValidStyles:function(){return t},getValidClasses:function(){return d},getBlockElements:function(){return m},getInvalidStyles:function(){return n},getShortEndedElements:function(){return l},getTextBlockElements:function(){return y},getTextInlineElements:function(){return x},getBoolAttrs:function(){return f},getElementRule:R,getSelfClosingElements:function(){return c},getNonEmptyElements:function(){return h},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return O},isValidChild:function(e,t){var n=C[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,i,r=R(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return k},addValidElements:N,setValidElements:_,addCustomElements:A,addValidChildren:D}}var ai=function(e,t,g,b){var n=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+n(t)+n(g)+n(b)};function ui(e,t){var i,n,r,o,c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,m={};for(e=e||{},t&&(r=t.getValidStyles(),o=t.getInvalidStyles()),n="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<n.length;i++)m[n[i]]="\ufeff"+i,m["\ufeff"+i]=n[i];return{toHex:function(e){return e.replace(c,ai)},parse:function(t){var n,r,o,h,v,a,b,y,x={},w=e.url_converter,C=e.url_converter_scope||this,S=function(e,t,n){var r,o,c,l;if((r=x[e+"-top"+t])&&(o=x[e+"-right"+t])&&(c=x[e+"-bottom"+t])&&(l=x[e+"-left"+t])){var f=[r,o,c,l];for(i=f.length-1;i--&&f[i]===f[i+1];);i>-1&&n||(x[e+t]=-1===i?f[0]:f.join(" "),delete x[e+"-top"+t],delete x[e+"-right"+t],delete x[e+"-bottom"+t],delete x[e+"-left"+t])}},k=function(e){var i,t=x[e];if(t){for(i=(t=t.split(" ")).length;i--;)if(t[i]!==t[0])return!1;return x[e]=t[0],!0}},O=function(e){return h=!0,m[e]},T=function(e,t){return h&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return m[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},E=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},N=function(e){return e.replace(/\\[0-9a-f]+/gi,E)},_=function(t,n,r,o,c,l){if(c=c||l)return"'"+(c=T(c)).replace(/\'/g,"\\'")+"'";if(n=T(n||r||o),!e.allow_script_urls){var f=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(f))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(f))return""}return w&&(n=w.call(C,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,O).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,O)});n=f.exec(t);)if(f.lastIndex=n.index+n[0].length,r=n[1].replace(d,"").toLowerCase(),o=n[2].replace(d,""),r&&o){if(r=N(r),o=N(o),-1!==r.indexOf("\ufeff")||-1!==r.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===r&&"700"===o?o="bold":"color"!==r&&"background-color"!==r||(o=o.toLowerCase()),o=(o=o.replace(c,ai)).replace(l,_),x[r]=h?T(o,!0):o}S("border","",!0),S("border","-width"),S("border","-color"),S("border","-style"),S("padding",""),S("margin",""),v="border",b="border-style",y="border-color",k(a="border-width")&&k(b)&&k(y)&&(x[v]=x[a]+" "+x[b]+" "+x[y],delete x[a],delete x[b],delete x[y]),"medium none"===x.border&&delete x.border,"none"===x["border-image"]&&delete x["border-image"]}return x},serialize:function(e,t){var n,c,l="",f=function(t){var n,i,o,c;if(n=r[t])for(i=0,o=n.length;i<o;i++)t=n[i],(c=e[t])&&(l+=(l.length>0?" ":"")+t+": "+c+";")},d=function(e,t){var n;return!((n=o["*"])&&n[e]||(n=o[t])&&n[e])};if(t&&r)f("*"),f(t);else for(n in e)!(c=e[n])||o&&!d(n,t)||(l+=(l.length>0?" ":"")+n+": "+c+";");return l}}}var ci=Qt.each,si=Qt.grep,fi=ge.ie,di=/^([a-z0-9],?)+$/i,mi=/^[ \t\r\n]*$/,gi=function(e,t,n){var r={},o=t.keep_values,c={set:function(e,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,o,e[0])),e.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}},o&&(r.href=r.src=c),r},hi=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},pi=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o};function vi(e,n){var l,f=this;void 0===n&&(n={});var d={},m=t.window,h={},v=0,y=function(e,n){void 0===n&&(n={});var l,f=0,d={};l=n.maxLoadTime||5e3;var m=function(t){e.getElementsByTagName("head")[0].appendChild(t)},h=function(r,o,c){var link,style,h,v,y=function(e){v.status=e,v.passed=[],v.failed=[],link&&(link.onload=null,link.onerror=null,link=null)},x=function(){for(var e=v.passed,i=e.length;i--;)e[i]();y(2)},w=function(){for(var e=v.failed,i=e.length;i--;)e[i]();y(3)},C=function(e,t){e()||((new Date).getTime()-h<l?ye.setTimeout(t):w())},S=function(){C(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if((n=(t=r[i]).ownerNode?t.ownerNode:t.owningElement)&&n.id===link.id)return x(),!0},S)},k=function(){C(function(){try{var e=style.sheet.cssRules;return x(),!!e}catch(e){}},k)};if(r=Qt._addCacheSuffix(r),d[r]?v=d[r]:(v={passed:[],failed:[]},d[r]=v),o&&v.passed.push(o),c&&v.failed.push(c),1!==v.status)if(2!==v.status)if(3!==v.status){if(v.status=1,(link=e.createElement("link")).rel="stylesheet",link.type="text/css",link.id="u"+f++,link.async=!1,link.defer=!1,h=(new Date).getTime(),n.contentCssCors&&(link.crossOrigin="anonymous"),"onload"in link&&!((O=t.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(O[1],10)<536))link.onload=S,link.onerror=w;else{if(t.navigator.userAgent.indexOf("Firefox")>0)return(style=e.createElement("style")).textContent='@import "'+r+'"',k(),void m(style);S()}var O;m(link),link.href=r}else w();else x()},v=function(e){return eo.nu(function(t){h(e,r(t,o(io.value(e))),r(t,o(io.error(e))))})},y=function(e){return e.fold(c,c)};return{load:h,loadAll:function(e,t,n){no(map(e,v)).get(function(e){var r=Y(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(y)):t(r.pass.map(y))})}}}(e,{contentCssCors:n.contentCssCors}),x=[],w=n.schema?n.schema:ii({}),C=ui({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),S=n.ownEvents?new Ne(n.proxy):Ne.Event,k=w.getBlockElements(),O=bn.overrideDefaults(function(){return{context:e,element:ee.getRoot()}}),T=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},E=function(e){return"string"==typeof e&&(e=T(e)),O(e)},N=function(e,t,n){var r,o,c=E(e);return c.length&&(o=(r=l[t])&&r.get?r.get(c,t):c.attr(t)),void 0===o&&(o=n||""),o},_=function(e){var t=T(e);return t?t.attributes:[]},A=function(e,t,r){var o,c;""===r&&(r=null);var f=E(e);o=f.attr(t),f.length&&((c=l[t])&&c.set?c.set(f,r,t):f.attr(t,r),o!==r&&n.onSetAttrib&&n.onSetAttrib({attrElm:f,attrName:t,attrValue:r}))},D=function(){return n.root_element||e.body},R=function(t,n){return Kr.getPos(e.body,T(t),n)},B=function(e,t,n){var r=E(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}))&&(t=ge.ie&&ge.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},M=function(e){var t,n;return e=T(e),t=B(e,"width"),n=B(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},I=function(e,t){var i;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(di.test(t)){var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase();for(i=n.length-1;i>=0;i--)if(n[i]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return _t(t,o[0].ownerDocument||o[0],null,o).length>0},z=function(e,t,n,r){var o,c=[],l=T(e);for(r=void 0===r,n=n||("BODY"!==D().nodeName?D().parentNode:null),Qt.is(t,"string")&&(o=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return I(e,o)});l&&l!==n&&l.nodeType&&9!==l.nodeType;){if(!t||"function"==typeof t&&t(l)){if(!r)return[l];c.push(l)}l=l.parentNode}return r?c:null},P=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return I(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},L=function(e,t,n){var r,o="string"==typeof e?T(e):e;if(!o)return!1;if(Qt.isArray(o)&&(o.length||0===o.length))return r=[],ci(o,function(e,i){e&&("string"==typeof e&&(e=T(e)),r.push(t.call(n,e,i)))}),r;var c=n||f;return t.call(c,o)},H=function(e,t){E(e).each(function(i,e){ci(t,function(t,n){A(e,n,t)})})},F=function(e,html){var t=E(e);fi?t.each(function(i,e){if(!1!==e.canHaveHTML){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br>"+html,e.removeChild(e.firstChild)}catch(t){bn("<div></div>").html("<br>"+html).contents().slice(1).appendTo(e)}return html}}):t.html(html)},V=function(t,n,r,html,o){return L(t,function(t){var c="string"==typeof n?e.createElement(n):n;return H(c,r),html&&("string"!=typeof html&&html.nodeType?c.appendChild(html):"string"==typeof html&&F(c,html)),o?c:t.appendChild(c)})},j=function(t,n,html){return V(e.createElement(t),t,n,html,!0)},U=Yo.decode,W=Yo.encodeAllRaw,$=function(e,t){var n=E(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},G=function(e,t,n){E(e).toggleClass(t,n).each(function(){""===this.className&&bn(this).attr("class",null)})},X=function(e,t,n){return L(t,function(t){return Qt.is(t,"array")&&(e=e.cloneNode(!0)),n&&ci(si(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},K=function(){return e.createRange()},J=function(t,r,o,c){if(Qt.isArray(t)){for(var i=t.length;i--;)t[i]=J(t[i],r,o,c);return t}return!n.collect||t!==e&&t!==m||x.push([t,r,o,c]),S.bind(t,r,o,c||ee)},Q=function(t,n,r){var i;if(Qt.isArray(t)){for(i=t.length;i--;)t[i]=Q(t[i],n,r);return t}if(x&&(t===e||t===m))for(i=x.length;i--;){var o=x[i];t!==o[0]||n&&n!==o[1]||r&&r!==o[2]||S.unbind(o[0],o[1],o[2])}return S.unbind(t,n,r)},Z=function(e){if(e&&Mo.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},ee={doc:e,settings:n,win:m,files:h,stdMode:!0,boxModel:!0,styleSheetLoader:y,boundEvents:x,styles:C,schema:w,events:S,isBlock:function(e){if("string"==typeof e)return!!k[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!k[e.nodeName])}return!1},$:O,$$:E,root:null,clone:function(t,n){if(!fi||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return ci(_(t),function(e){A(r,e.nodeName,N(t,e.nodeName))}),r}return null},getRoot:D,getViewPort:function(e){var t=e||m,n=t.document,r=n.documentElement;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},getRect:function(e){var t,n;return e=T(e),t=R(e),n=M(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:M,getParent:function(e,t,n){var r=z(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:z,get:T,getNext:function(e,t){return P(e,t,"nextSibling")},getPrev:function(e,t){return P(e,t,"previousSibling")},select:function(t,r){return _t(t,T(r)||n.root_element||e,[])},is:I,add:V,create:j,createHTML:function(e,t,html){var n,r="";for(n in r+="<"+e,t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(r+=" "+n+'="'+W(t[n])+'"');return void 0!==html?r+">"+html+"</"+e+">":r+" />"},createFragment:function(html){var t,n=e.createElement("div"),r=e.createDocumentFragment();for(html&&(n.innerHTML=html);t=n.firstChild;)r.appendChild(t);return r},remove:$,setStyle:function(e,t,r){var o=E(e).css(t,r);n.update_styles&&hi(C,o)},getStyle:B,setStyles:function(e,t){var r=E(e).css(t);n.update_styles&&hi(C,r)},removeAllAttribs:function(e){return L(e,function(e){var i,t=e.attributes;for(i=t.length-1;i>=0;i--)e.removeAttributeNode(t.item(i))})},setAttrib:A,setAttribs:H,getAttrib:N,getPos:R,parseStyle:function(e){return C.parse(e)},serializeStyle:function(e,t){return C.serialize(e,t)},addStyle:function(n){var head,r;if(ee!==vi.DOM&&e===t.document){if(d[n])return;d[n]=!0}(r=e.getElementById("mceDefaultStyles"))||((r=e.createElement("style")).id="mceDefaultStyles",r.type="text/css",(head=e.getElementsByTagName("head")[0]).firstChild?head.insertBefore(r,head.firstChild):head.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=n:r.appendChild(e.createTextNode(n))},loadCSS:function(n){var head;ee===vi.DOM||e!==t.document?(n||(n=""),head=e.getElementsByTagName("head")[0],ci(n.split(","),function(e){var link;e=Qt._addCacheSuffix(e),h[e]||(h[e]=!0,link=j("link",{rel:"stylesheet",href:e}),head.appendChild(link))})):vi.DOM.loadCSS(n)},addClass:function(e,t){E(e).addClass(t)},removeClass:function(e,t){G(e,t,!1)},hasClass:function(e,t){return E(e).hasClass(t)},toggleClass:G,show:function(e){E(e).show()},hide:function(e){E(e).hide()},isHidden:function(e){return"none"===E(e).css("display")},uniqueId:function(e){return(e||"mce_")+v++},setHTML:F,getOuterHTML:function(e){var t="string"==typeof e?T(e):e;return Mo.isElement(t)?t.outerHTML:bn("<div></div>").append(bn(t).clone()).html()},setOuterHTML:function(e,html){E(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(e){}$(bn(this).html(html),!0)})},decode:U,encode:W,insertAfter:function(e,t){var n=T(t);return L(e,function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e})},replace:X,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=j(t),ci(_(e),function(t){A(n,t.nodeName,N(e,t.nodeName))}),X(n,e,!0)),n||e},findCommonAncestor:function(a,b){for(var e,t=a;t;){for(e=b;e&&t!==e;)e=e.parentNode;if(t===e)break;t=t.parentNode}return!t&&a.ownerDocument?a.ownerDocument.documentElement:t},toHex:function(e){return C.toHex(Qt.trim(e))},run:L,getAttribs:_,isEmpty:function(e,t){var i,n,r,o,c,l,f=0;if(e=e.firstChild){c=new ao(e,e.parentNode),t=t||(w?w.getNonEmptyElements():null),o=w?w.getWhiteSpaceElements():{};do{if(r=e.nodeType,Mo.isElement(e)){var d=e.getAttribute("data-mce-bogus");if(d){e=c.next("all"===d);continue}if(l=e.nodeName.toLowerCase(),t&&t[l]){if("br"===l){f++,e=c.next();continue}return!1}for(i=(n=_(e)).length;i--;)if("name"===(l=n[i].nodeName)||"data-mce-bookmark"===l)return!1}if(8===r)return!1;if(3===r&&!mi.test(e.nodeValue))return!1;if(3===r&&e.parentNode&&o[e.parentNode.nodeName]&&mi.test(e.nodeValue))return!1;e=c.next()}while(e)}return f<=1},createRng:K,nodeIndex:pi,split:function(e,t,n){var r,o,c,l=K();if(e&&t)return l.setStart(e.parentNode,pi(e)),l.setEnd(t.parentNode,pi(t)),r=l.extractContents(),(l=K()).setStart(t.parentNode,pi(t)+1),l.setEnd(e.parentNode,pi(e)+1),o=l.extractContents(),(c=e.parentNode).insertBefore(Po.trimNode(ee,r),e),n?c.insertBefore(n,e):c.insertBefore(t,e),c.insertBefore(Po.trimNode(ee,o),e),$(e),n||t},bind:J,unbind:Q,fire:function(e,t,n){return S.fire(e,t,n)},getContentEditable:Z,getContentEditableParent:function(e){for(var t=D(),n=null;e&&e!==t&&null===(n=Z(e));e=e.parentNode);return n},destroy:function(){if(x)for(var i=x.length;i--;){var e=x[i];S.unbind(e[0],e[1],e[2])}_t.setDocument&&_t.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return l=gi(C,n,function(){return ee}),ee}!function(e){e.DOM=e(t.document),e.nodeIndex=pi}(vi||(vi={}));var bi=vi,yi=bi.DOM,xi=Qt.each,wi=Qt.grep,Ci=function(e){return"function"==typeof e},Si=function(){var e={},n=[],r={},o=[],c=0,l=function(e,n,r){var o,c,l=yi;c=l.uniqueId(),(o=t.document.createElement("script")).id=c,o.type="text/javascript",o.src=Qt._addCacheSuffix(e),o.onload=function(){l.remove(c),o&&(o.onreadystatechange=o.onload=o=null),n()},o.onerror=function(){Ci(r)?r():void 0!==t.console&&t.console.log&&t.console.log("Failed to load script: "+e)},(t.document.getElementsByTagName("head")[0]||t.document.body).appendChild(o)};this.loadScript=function(e,t,n){l(e,t,n)},this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(t,o,c,l){void 0===e[t]&&(n.push(t),e[t]=0),o&&(r[t]||(r[t]=[]),r[t].push({success:o,failure:l,scope:c||this}))},this.remove=function(t){delete e[t],delete r[t]},this.loadQueue=function(e,t,r){this.loadScripts(n,e,t,r)},this.loadScripts=function(t,n,f,d){var m,h=[],v=function(e,t){xi(r[t],function(t){Ci(t[e])&&t[e].call(t.scope)}),r[t]=void 0};o.push({success:n,failure:d,scope:f||this}),(m=function(){var n=wi(t);if(t.length=0,xi(n,function(t){2!==e[t]?3!==e[t]?1!==e[t]&&(e[t]=1,c++,l(t,function(){e[t]=2,c--,v("success",t),m()},function(){e[t]=3,c--,h.push(t),v("failure",t),m()})):v("failure",t):v("success",t)}),!c){var r=o.slice(0);o.length=0,xi(r,function(e){0===h.length?Ci(e.success)&&e.success.call(e.scope):Ci(e.failure)&&e.failure.call(e.scope,h)})}})()}};Si.ScriptLoader=new Si;var ki=function(){return(ki=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},Oi=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Oi(n())}}},data={},Ti=Oi("en"),Ei={getData:function(){return dr(data,function(e){return ki({},e)})},setCode:function(e){e&&Ti.set(e)},getCode:function(){return Ti.get()},add:function(code,e){var t=data[code];for(var n in t||(data[code]=t={}),e)t[n.toLowerCase()]=e[n]},translate:function(text){var e,t=data[Ti.get()]||{},n=function(e){return j(e)?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(text){return""===text||null==text},o=function(text){var e=n(text),r=e.toLowerCase();return vr(t,r)?n(t[r]):e},c=function(e){return e.replace(/{context:\w+}$/,"")},l=function(text){return text};if(r(text))return l("");if(L(e=text)&&vr(e,"raw"))return l(n(text.raw));if(function(e){return H(e)&&e.length>1}(text)){var f=text.slice(1);return l(c(o(text[0]).replace(/\{([0-9]+)\}/g,function(e,t){return vr(f,t)?n(f[t]):e})))}return l(c(o(text)))},isRtl:function(){return pr(data,Ti.get()).bind(function(e){return pr(e,"_dir")}).exists(function(e){return"rtl"===e})},hasCode:function(code){return vr(data,code)}},Ni=Qt.each;function _i(){var e=this,t=[],n={},r={},o=[],c=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},l=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},f=function(e,t,n,r){var o=c(e);Ni(o,function(e){var n=l(t,e);d(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(Si))},d=function(e,t,o,c,l){if(!n[e]){var d="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=_i.baseURL+"/"+d),n[e]=d.substring(0,d.lastIndexOf("/")),r[e]?f(e,t,o,c):Si.ScriptLoader.add(d,function(){return f(e,t,o,c)},c,l)}};return{items:t,urls:n,lookup:r,_listeners:o,get:function(e){if(r[e])return r[e].instance},dependencies:c,requireLangPack:function(e,t){var r=Ei.getCode();if(r&&!1!==_i.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;Si.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,c){t.push(n),r[e]={instance:n,dependencies:c};var l=Y(o,function(t){return t.name===e});return o=l.fail,Ni(l.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete r[e]},createUrl:l,addComponents:function(t,n){var r=e.urls[t];Ni(n,function(script){Si.ScriptLoader.add(r+"/"+script)})},load:d,waitFor:function(e,t){r.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(_i||(_i={}));var Ai=function(marker,element){Hr(marker).each(function(e){e.dom().insertBefore(element.dom(),marker.dom())})},Di=function(marker,element){Vr(marker).fold(function(){Hr(marker).each(function(e){Bi(e,element)})},function(e){Ai(e,element)})},Ri=function(e,element){qr(e).fold(function(){Bi(e,element)},function(t){e.dom().insertBefore(element.dom(),t.dom())})},Bi=function(e,element){e.dom().appendChild(element.dom())},Mi=function(e,t){G(t,function(t){Bi(e,t)})},Ii=function(element){element.dom().textContent="",G(Wr(element),function(e){zi(e)})},zi=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Pi=function(e){var marker,t=Wr(e);t.length>0&&(marker=e,G(t,function(e){Ai(marker,e)})),zi(e)},Li=function(e,n){var r=null;return{cancel:function(){null!==r&&(t.clearTimeout(r),r=null)},throttle:function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];null===r&&(r=t.setTimeout(function(){e.apply(null,o),r=null},n))}}},Hi=function(element,e){var t=Cr(element,e);return void 0===t||""===t?[]:t.split(" ")},Fi=function(element){return void 0!==element.dom().classList},Vi=function(element,e){return function(element,e,t){var n=Hi(element,e).concat([t]);return xr(element,e,n.join(" ")),!0}(element,"class",e)},ji=function(element,e){return function(element,e,t){var n=filter(Hi(element,e),function(e){return e!==t});return n.length>0?xr(element,e,n.join(" ")):Sr(element,e),!1}(element,"class",e)},Ui=function(element,e){Fi(element)?element.dom().classList.add(e):Vi(element,e)},Wi=function(element){0===(Fi(element)?element.dom().classList:function(element){return Hi(element,"class")}(element)).length&&Sr(element,"class")},$i=function(element,e){return Fi(element)&&element.dom().classList.contains(e)},qi=function(e,t){var n=[];return G(Wr(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(qi(e,t))}),n},Gi=function(e,n){return function(e,n){var base=void 0===n?t.document:n.dom();return Ir(base)?[]:map(base.querySelectorAll(e),er.fromDom)}(n,e)};function Yi(e,t,n,a,r){return e(n,a)?I.some(n):j(r)&&r(n)?I.none():t(n,a,r)}var Xi=function(e,t,n){for(var element=e.dom(),r=j(n)?n:o(!1);element.parentNode;){element=element.parentNode;var c=er.fromDom(element);if(t(c))return I.some(c);if(r(c))break}return I.none()},Ki=function(e,t,n){return Yi(function(s){return t(s)},Xi,e,t,n)},Ji=function(e,t,n){return Xi(e,function(e){return Mr(e,t)},n)},Qi=function(e,n){return function(e,n){var base=void 0===n?t.document:n.dom();return Ir(base)?I.none():I.from(base.querySelector(e)).map(er.fromDom)}(n,e)},Zi=function(e,t,n){return Yi(Mr,Ji,e,t,n)},ea=o("mce-annotation"),ta=o("data-mce-annotation"),na=o("data-mce-annotation-uid"),ra=function(e,t){var n=e.selection.getRng(),r=er.fromDom(n.startContainer),o=er.fromDom(e.getBody()),c=t.fold(function(){return"."+ea()},function(e){return"["+ta()+'="'+e+'"]'}),l=$r(r,n.startOffset).getOr(r),f=Zi(l,c,function(e){return zr(e,o)}),d=function(e,t){return n=t,(r=e.dom())&&r.hasAttribute&&r.hasAttribute(n)?I.some(Cr(e,t)):I.none();var n,r};return f.bind(function(t){return d(t,""+na()).bind(function(n){return d(t,""+ta()).map(function(t){var r=oa(e,n);return{uid:n,name:t,elements:r}})})})},oa=function(e,t){var body=er.fromDom(e.getBody());return Gi(body,"["+na()+'="'+t+'"]')},ia=function(e,t){var body=er.fromDom(e.getBody()),n=Gi(body,"["+ta()+'="'+t+'"]'),r={};return G(n,function(e){var t=Cr(e,na()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])}),r},aa=function(e,n){var r,o,c,l=Oi({}),f=function(e,t){d(e,function(data){return t(data),data})},d=function(e,t){var n=l.get(),r=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Oi(I.none())});n[e]=r,l.set(n)},m=(r=function(){var t,n,r,o=l.get(),c=(t=sr(o),(r=ne.call(t,0)).sort(n),r);G(c,function(t){d(t,function(data){var n=data.previous.get();return ra(e,I.some(t)).fold(function(){n.isSome()&&(function(e){f(e,function(data){G(data.listeners,function(t){return t(!1,e)})})}(t),data.previous.set(I.none()))},function(e){var t=e.uid,r=e.name,o=e.elements;n.is(t)||(function(e,t,n){f(e,function(data){G(data.listeners,function(r){return r(!0,e,{uid:t,nodes:map(n,function(e){return e.dom()})})})})}(r,t,o),data.previous.set(I.some(t)))}),{previous:data.previous,listeners:data.listeners}})})},o=30,c=null,{cancel:function(){null!==c&&(t.clearTimeout(c),c=null)},throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null!==c&&t.clearTimeout(c),c=t.setTimeout(function(){r.apply(null,e),c=null},o)}});return e.on("remove",function(){m.cancel()}),e.on("nodeChange",function(){m.throttle()}),{addListener:function(e,t){d(e,function(data){return{previous:data.previous,listeners:data.listeners.concat([t])}})}}},ua=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){G(e,function(span){(function(span){return I.from(span.attributes.map[ta()]).bind(t.lookup)})(span).each(function(e){!1===e.persistent&&span.unwrap()})})})})},ca=function(){var e={};return{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?I.from(e[t]).map(function(a){return a.settings}):I.none()}}},sa=0,la=function(e,t){return er.fromDom(e.dom().cloneNode(t))},fa=function(e){return la(e,!1)},da=function(e){return la(e,!0)},ma=function(element,content){var html,div,e=Lr(element).dom(),n=er.fromDom(e.createDocumentFragment()),r=(html=content,(div=(e||t.document).createElement("div")).innerHTML=html,Wr(er.fromDom(div)));Mi(n,r),Ii(element),Bi(element,n)},ga=function(e){return"\ufeff"===e},ha="\ufeff",pa=function(text){return text.replace(new RegExp("\ufeff","g"),"")},va=Mo.isElement,ba=Mo.isText,ya=function(e){return ba(e)&&(e=e.parentNode),va(e)&&e.hasAttribute("data-mce-caret")},xa=function(e){return ba(e)&&ga(e.data)},wa=function(e){return ya(e)||xa(e)},Ca=function(e){return e.firstChild!==e.lastChild||!Mo.isBr(e.firstChild)},Sa=function(e){var t=e.container();return!(!e||!Mo.isText(t))&&(t.data.charAt(e.offset())===ha||e.isAtStart()&&xa(t.previousSibling))},ka=function(e){var t=e.container();return!(!e||!Mo.isText(t))&&(t.data.charAt(e.offset()-1)===ha||e.isAtEnd()&&xa(t.nextSibling))},Oa=function(e,n,r){var o,c,br;return(o=n.ownerDocument.createElement(e)).setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((br=t.document.createElement("br")).setAttribute("data-mce-bogus","1"),br)),c=n.parentNode,r?c.insertBefore(o,n):n.nextSibling?c.insertBefore(o,n.nextSibling):c.appendChild(o),o},Ta=function(e){return ba(e)&&e.data[0]===ha},Ea=function(e){return ba(e)&&e.data[e.data.length-1]===ha},Na=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),n=t[t.length-1],Mo.isBogus(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},_a=Mo.isContentEditableTrue,Aa=Mo.isContentEditableFalse,Da=Mo.isBr,Ra=Mo.isText,Ba=Mo.matchNodeNames("script style textarea"),Ma=Mo.matchNodeNames("img input textarea hr iframe video audio object"),Ia=Mo.matchNodeNames("table"),za=wa,Pa=function(e){return!za(e)&&(Ra(e)?!Ba(e.parentNode):Ma(e)||Da(e)||Ia(e)||La(e))},La=function(e){return!1===function(e){return Mo.isElement(e)&&"true"===e.getAttribute("unselectable")}(e)&&Aa(e)},Ha=function(e,t){return Pa(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(La(e))return!1;if(_a(e))return!0}return!0}(e,t)},Fa=Math.round,Va=function(rect){return rect?{left:Fa(rect.left),top:Fa(rect.top),bottom:Fa(rect.bottom),right:Fa(rect.right),width:Fa(rect.width),height:Fa(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ja=function(rect,e){return rect=Va(rect),e?rect.right=rect.left:(rect.left=rect.left+rect.width,rect.right=rect.left),rect.width=0,rect},Ua=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Wa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Ua(t.top-e.bottom,e,t)},$a=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ua(t.bottom-e.top,e,t)},qa=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},Ga=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},Ya=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Xa=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Ka=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Ja=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Ka.test(e)},Qa=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(!r.isSome())return I.none();n.push(r.getOrDie())}return I.some(t.apply(null,n))},Za=[].slice,eu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Za.call(arguments);return function(e){for(var i=0;i<n.length;i++)if(!n[i](e))return!1;return!0}},tu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Za.call(arguments);return function(e){for(var i=0;i<n.length;i++)if(n[i](e))return!0;return!1}},nu=Mo.isElement,ru=Pa,ou=Mo.matchStyleValues("display","block table"),iu=Mo.matchStyleValues("float","left right"),au=eu(nu,ru,E(iu)),uu=E(Mo.matchStyleValues("white-space","pre pre-line pre-wrap")),cu=Mo.isText,su=Mo.isBr,lu=bi.nodeIndex,fu=Xa,du=function(e){return"createRange"in e?e.createRange():bi.DOM.createRng()},mu=function(e){return e&&/[\r\n\t ]/.test(e)},gu=function(e){return!!e.setStart&&!!e.setEnd},hu=function(e){var text,t=e.startContainer,n=e.startOffset;return!!(mu(e.toString())&&uu(t.parentNode)&&Mo.isText(t)&&(text=t.data,mu(text[n-1])||mu(text[n+1])))},pu=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},vu=function(e){var t,n;return t=(n=e.getClientRects()).length>0?Va(n[0]):Va(e.getBoundingClientRect()),!gu(e)&&su(e)&&pu(t)?function(e){var t,n=e.ownerDocument,r=du(n),o=n.createTextNode(""),c=e.parentNode;return c.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=Va(r.getBoundingClientRect()),c.removeChild(o),t}(e):pu(t)&&gu(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&Mo.isText(n)&&0===r&&1===o){var c=e.cloneRange();return c.setEndAfter(n),vu(c)}return null}(e):t},bu=function(e,t){var n=ja(e,t);return n.width=1,n.right=n.left+1,n},yu=function(e){var t,n,r=[],o=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},c=function(e,t){var n=du(e.ownerDocument);if(t<e.data.length){if(Ja(e.data[t]))return r;if(Ja(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!hu(n)))return o(bu(vu(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),hu(n)||o(bu(vu(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),hu(n)||o(bu(vu(n),!0)))};if(cu(e.container()))return c(e.container(),e.offset()),r;if(nu(e.container()))if(e.isAtEnd())n=fu(e.container(),e.offset()),cu(n)&&c(n,n.data.length),au(n)&&!su(n)&&o(bu(vu(n),!1));else{if(n=fu(e.container(),e.offset()),cu(n)&&c(n,0),au(n)&&e.isAtEnd())return o(bu(vu(n),!1)),r;t=fu(e.container(),e.offset()-1),au(t)&&!su(t)&&(ou(t)||ou(n)||!au(n))&&o(bu(vu(t),!1)),au(n)&&o(bu(vu(n),!0))}return r};function xu(e,t,n){var r=function(){return n||(n=yu(xu(e,t))),n};return{container:o(e),offset:o(t),toRange:function(){var n;return(n=du(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return cu(e),0===t},isAtEnd:function(){return cu(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return fu(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,lu(t)+1)},e.before=function(t){return e(t.parentNode,lu(t))},e.isAbove=function(e,t){return Qa([head(t.getClientRects()),oe(e.getClientRects())],Wa).getOr(!1)},e.isBelow=function(e,t){return Qa([oe(t.getClientRects()),head(e.getClientRects())],$a).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&Mo.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(xu||(xu={}));var wu,Cu=xu,Su=Mo.isText,ku=Mo.isBogus,Ou=bi.nodeIndex,Tu=function(e){var t=e.parentNode;return ku(t)?Tu(t):t},Eu=function(e){return e?Gt.reduce(e.childNodes,function(e,t){return ku(t)&&"BR"!==t.nodeName?e=e.concat(Eu(t)):e.push(t),e},[]):[]},Nu=function(a){return function(b){return a===b}},_u=function(e){return(Su(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n,r;return t=Eu(Tu(e)),n=Gt.findIndex(t,Nu(e),e),t=t.slice(0,n+1),r=Gt.reduce(t,function(e,n,i){return Su(n)&&Su(t[i-1])&&e++,e},0),t=Gt.filter(t,Mo.matchNodeNames(e.nodeName)),(n=Gt.findIndex(t,Nu(e),e))-r}(e)+"]"},Au=function(e,t){var n,r,o,c,l,path=[];return n=t.container(),r=t.offset(),Su(n)?o=function(e,t){for(;(e=e.previousSibling)&&Su(e);)t+=e.data.length;return t}(n,r):(r>=(c=n.childNodes).length?(o="after",r=c.length-1):o="before",n=c[r]),path.push(_u(n)),l=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r}(e,n),l=Gt.filter(l,E(Mo.isBogus)),(path=path.concat(Gt.map(l,function(e){return _u(e)}))).reverse().join("/")+","+o},Du=function(e,path){var t,n,r;return path?(t=path.split(","),path=t[0].split("/"),r=t.length>1?t[1]:"before",(n=Gt.reduce(path,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,r=t[1],o=parseInt(t[2],10),c=Eu(n),c=Gt.filter(c,function(e,t){return!Su(e)||!Su(c[t-1])}),(c=Gt.filter(c,Mo.matchNodeNames(r)))[o]):null;var n,r,o,c},e))?Su(n)?function(e,t){for(var n,r=e,o=0;Su(r);){if(n=r.data.length,t>=o&&t<=o+n){e=r,t-=o;break}if(!Su(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return Su(e)&&t>e.data.length&&(t=e.data.length),Cu(e,t)}(n,parseInt(r,10)):(r="after"===r?Ou(n)+1:Ou(n),Cu(n.parentNode,r)):null):null},Ru=function(e,t){Mo.isText(t)&&0===t.data.length&&e.remove(t)},Bu=function(e,t,n){Mo.isDocumentFragment(n)?function(e,t,n){var r=I.from(n.firstChild),o=I.from(n.lastChild);t.insertNode(n),r.each(function(t){return Ru(e,t.previousSibling)}),o.each(function(t){return Ru(e,t.nextSibling)})}(e,t,n):function(e,t,n){t.insertNode(n),Ru(e,n.previousSibling),Ru(e,n.nextSibling)}(e,t,n)},Mu=Mo.isContentEditableFalse,Iu=function(e,t,n,r,o){var c,l=r[o?"startContainer":"endContainer"],f=r[o?"startOffset":"endOffset"],d=[],m=0,h=e.getRoot();for(Mo.isText(l)?d.push(n?function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Mo.isText(r);r=r.previousSibling)o+=e(r.data).length;return o}(t,l,f):f):(f>=(c=l.childNodes).length&&c.length&&(m=1,f=Math.max(0,c.length-1)),d.push(e.nodeIndex(c[f],n)+m));l&&l!==h;l=l.parentNode)d.push(e.nodeIndex(l,n));return d},zu=function(e,t,element){var n=0;return Qt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==element&&void n++}),n},Pu=function(e,t){var n,r,o,c=t?"start":"end";n=e[c+"Container"],r=e[c+"Offset"],Mo.isElement(n)&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Lu=function(e){return Pu(e,!0),Pu(e,!1),e},Hu=function(e,t){var n;if(Mo.isElement(e)&&(e=Xa(e,t),Mu(e)))return e;if(wa(e)){if(Mo.isText(e)&&ya(e)&&(e=e.parentNode),n=e.previousSibling,Mu(n))return n;if(n=e.nextSibling,Mu(n))return n}},Fu=function(e,t,n){var element=n.getNode(),r=element?element.nodeName:null,o=n.getRng();if(Mu(element)||"IMG"===r)return{name:r,index:zu(n.dom,r,element)};var c=function(e){return Hu(e.startContainer,e.startOffset)||Hu(e.endContainer,e.endOffset)}(o);return c?{name:r=c.tagName,index:zu(n.dom,r,c)}:function(e,t,n,r){var o=t.dom,c={};return c.start=Iu(o,e,n,r,!0),t.isCollapsed()||(c.end=Iu(o,e,n,r,!1)),c}(e,n,t,o)},Vu=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ju=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),c=e.isCollapsed(),element=e.getNode(),l=element.nodeName;if("IMG"===l)return{name:l,index:zu(n,l,element)};var f=Lu(r.cloneRange());if(!c){f.collapse(!1);var d=Vu(n,o+"_end",t);Bu(n,f,d)}(r=Lu(r)).collapse(!0);var m=Vu(n,o+"_start",t);return Bu(n,r,m),e.moveToBookmark({id:o,keep:1}),{id:o}},Uu={getBookmark:function(e,t,n){return 2===t?Fu(pa,n,e):3===t?function(e){var t=e.getRng();return{start:Au(e.dom.getRoot(),Cu.fromRangeStart(t)),end:Au(e.dom.getRoot(),Cu.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):ju(e,!1)},getUndoBookmark:l(Fu,c,!0),getPersistentBookmark:ju},Wu=function(e){return Mo.isElement(e)&&"_mce_caret"===e.id},$u=function(body,e){for(;e&&e!==body;){if("_mce_caret"===e.id)return e;e=e.parentNode}return null},qu=Mo.isElement,Gu=Mo.isText,Yu=function(e){var t=e.parentNode;t&&t.removeChild(e)},Xu=function(e,text){0===text.length?Yu(e):e.nodeValue=text},Ku=function(text){var e=pa(text);return{count:text.length-e.length,text:e}},Ju=function(e,t){return ec(e),t},Qu=function(e,t){var n,r,o,c=t.container(),l=(n=ie(c.childNodes),r=e,o=W(n,r),-1===o?I.none():I.some(o)).map(function(e){return e<t.offset()?Cu(c,t.offset()-1):t}).getOr(t);return ec(e),l},Zu=function(e,t){return Gu(e)&&t.container()===e?function(e,t){var n=Ku(e.data.substr(0,t.offset())),r=Ku(e.data.substr(t.offset())),text=n.text+r.text;return text.length>0?(Xu(e,text),Cu(e,t.offset()-n.count)):t}(e,t):Ju(e,t)},ec=function(e){if(qu(e)&&wa(e)&&(Ca(e)?e.removeAttribute("data-mce-caret"):Yu(e)),Gu(e)){var text=pa(function(e){try{return e.nodeValue}catch(e){return""}}(e));Xu(e,text)}},tc={removeAndReposition:function(e,t){return Cu.isTextPosition(t)?Zu(e,t):function(e,t){return t.container()===e.parentNode?Qu(e,t):Ju(e,t)}(e,t)},remove:ec},nc=Qn.detect().browser,rc=Mo.isContentEditableFalse,oc=function(e,element,t){var n,r,o,c,l,f=ja(element.getBoundingClientRect(),t);return"BODY"===e.tagName?(n=e.ownerDocument.documentElement,r=e.scrollLeft||n.scrollLeft,o=e.scrollTop||n.scrollTop):(l=e.getBoundingClientRect(),r=e.scrollLeft-l.left,o=e.scrollTop-l.top),f.left+=r,f.right+=r,f.top+=o,f.bottom+=o,f.width=1,(c=element.offsetWidth-element.clientWidth)>0&&(t&&(c*=-1),f.left+=c,f.right+=c),f},ic=function(e,t,n){var r,o,c=Oi(I.none()),l=function(){!function(e){var t,n,r,i,data;for(t=bn("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,Ea(r)&&(1===(data=r.data).length?r.parentNode.removeChild(r):r.deleteData(data.length-1,1)),r=n.nextSibling,Ta(r)&&(1===(data=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}(e),o&&(tc.remove(o),o=null),c.get().each(function(e){bn(e.caret).remove(),c.set(I.none())}),ye.clearInterval(r)},f=function(){r=ye.setInterval(function(){n()?bn("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):bn("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)};return{show:function(n,element){var r,d,m;if(l(),m=element,Mo.isElement(m)&&/^(TD|TH)$/i.test(m.tagName))return null;if(!t(element))return o=function(e,t){var n,r,o;if(r=e.ownerDocument.createTextNode(ha),o=e.parentNode,t){if(n=e.previousSibling,ba(n)){if(wa(n))return n;if(Ea(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,ba(n)){if(wa(n))return n;if(Ta(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(element,n),d=element.ownerDocument.createRange(),rc(o.nextSibling)?(d.setStart(o,0),d.setEnd(o,0)):(d.setStart(o,1),d.setEnd(o,1)),d;o=Oa("p",element,n),r=oc(e,element,n),bn(o).css("top",r.top);var h=bn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(e)[0];return c.set(I.some({caret:h,element:element,before:n})),c.get().each(function(e){n&&bn(e.caret).addClass("mce-visual-caret-before")}),f(),(d=element.ownerDocument.createRange()).setStart(o,0),d.setEnd(o,0),d},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){c.get().each(function(t){var n=oc(e,t.element,t.before);bn(t.caret).css(n)})},destroy:function(){return ye.clearInterval(r)}}},ac=function(){return nc.isIE()||nc.isEdge()||nc.isFirefox()},uc=function(e){return rc(e)||Mo.isTable(e)&&ac()},cc=Mo.isContentEditableFalse,sc=Mo.matchStyleValues("display","block table table-cell table-caption list-item"),lc=wa,fc=ya,dc=Mo.isElement,mc=Pa,gc=function(e){return e>0},hc=function(e){return e<0},pc=function(e,t){for(var n;n=e(t);)if(!fc(n))return n;return null},vc=function(e,t,n,r,o){var c=new ao(e,r);if(hc(t)){if((cc(e)||fc(e))&&n(e=pc(c.prev,!0)))return e;for(;e=pc(c.prev,o);)if(n(e))return e}if(gc(t)){if((cc(e)||fc(e))&&n(e=pc(c.next,!0)))return e;for(;e=pc(c.next,o);)if(n(e))return e}return null},bc=function(e,t){for(;e&&e!==t;){if(sc(e))return e;e=e.parentNode}return null},yc=function(e,t,n){return bc(e.container(),n)===bc(t.container(),n)},xc=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),dc(n)?n.childNodes[r+e]:null):null},wc=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Cc=function(e,t,n){return bc(t,e)===bc(n,e)},Sc=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],lc(r)&&(r=r[o]),cc(r)){if(Cc(t,r,n))return r;break}if(mc(r))break;n=n.parentNode}return null},kc=l(wc,!0),Oc=l(wc,!1),Tc=function(e,t,n){var r,o,c,f,d=l(Sc,!0,t),m=l(Sc,!1,t);if(o=n.startContainer,c=n.startOffset,ya(o)){if(dc(o)||(o=o.parentNode),"before"===(f=o.getAttribute("data-mce-caret"))&&(r=o.nextSibling,uc(r)))return kc(r);if("after"===f&&(r=o.previousSibling,uc(r)))return Oc(r)}if(!n.collapsed)return n;if(Mo.isText(o)){if(lc(o)){if(1===e){if(r=m(o))return kc(r);if(r=d(o))return Oc(r)}if(-1===e){if(r=d(o))return Oc(r);if(r=m(o))return kc(r)}return n}if(Ea(o)&&c>=o.data.length-1)return 1===e&&(r=m(o))?kc(r):n;if(Ta(o)&&c<=1)return-1===e&&(r=d(o))?Oc(r):n;if(c===o.data.length)return(r=m(o))?kc(r):n;if(0===c)return(r=d(o))?Oc(r):n}return n},Ec=function(e,t){return I.from(xc(e?0:-1,t)).filter(cc)},Nc=function(e,t,n){var r=Tc(e,t,n);return-1===e?xu.fromRangeStart(r):xu.fromRangeEnd(r)},_c=function(e){return I.from(e.getNode()).map(er.fromDom)},Ac=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},Dc=function(e,t){var n=yc(e,t);return!(n||!Mo.isBr(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(wu||(wu={}));var Rc=Mo.isContentEditableFalse,Bc=Mo.isText,Mc=Mo.isElement,Ic=Mo.isBr,zc=Pa,Pc=function(e){return Ma(e)||function(e){return!!La(e)&&!0!==X(ie(e.getElementsByTagName("*")),function(e,t){return e||_a(t)},!1)}(e)},Lc=Ha,Hc=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Fc=function(e,t){if(gc(e)){if(zc(t.previousSibling)&&!Bc(t.previousSibling))return Cu.before(t);if(Bc(t))return Cu(t,0)}if(hc(e)){if(zc(t.nextSibling)&&!Bc(t.nextSibling))return Cu.after(t);if(Bc(t))return Cu(t,t.data.length)}return hc(e)?Ic(t)?Cu.before(t):Cu.after(t):Cu.before(t)},Vc=function(e,t,n){var r,c,l,f,d;if(!Mc(n)||!t)return null;if(t.isEqual(Cu.after(n))&&n.lastChild){if(d=Cu.after(n.lastChild),hc(e)&&zc(n.lastChild)&&Mc(n.lastChild))return Ic(n.lastChild)?Cu.before(n.lastChild):d}else d=t;var m=d.container(),h=d.offset();if(Bc(m)){if(hc(e)&&h>0)return Cu(m,--h);if(gc(e)&&h<m.length)return Cu(m,++h);r=m}else{if(hc(e)&&h>0&&(c=Hc(m,h-1),zc(c)))return!Pc(c)&&(l=vc(c,e,Lc,c))?Bc(l)?Cu(l,l.data.length):Cu.after(l):Bc(c)?Cu(c,c.data.length):Cu.before(c);if(gc(e)&&h<m.childNodes.length&&(c=Hc(m,h),zc(c)))return Ic(c)?function(e,t){var n=t.nextSibling;return n&&zc(n)?Bc(n)?Cu(n,0):Cu.before(n):Vc(wu.Forwards,Cu.after(t),e)}(n,c):!Pc(c)&&(l=vc(c,e,Lc,c))?Bc(l)?Cu(l,0):Cu.before(l):Bc(c)?Cu(c,0):Cu.after(c);r=c||d.getNode()}return(gc(e)&&d.isAtEnd()||hc(e)&&d.isAtStart())&&(r=vc(r,e,o(!0),n,!0),Lc(r,n))?Fc(e,r):(c=vc(r,e,Lc,n),!(f=Gt.last(filter(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(m,n),Rc)))||c&&f.contains(c)?c?Fc(e,c):null:d=gc(e)?Cu.after(f):Cu.before(f))},jc=function(e){return{next:function(t){return Vc(wu.Forwards,t,e)},prev:function(t){return Vc(wu.Backwards,t,e)}}},Uc=function(e){return Cu.isTextPosition(e)?0===e.offset():Pa(e.getNode())},Wc=function(e){if(Cu.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Pa(e.getNode(!0))},$c=function(e,t){return!Cu.isTextPosition(e)&&!Cu.isTextPosition(t)&&e.getNode()===t.getNode(!0)},qc=function(e,t,n){return e?!$c(t,n)&&(r=t,!(!Cu.isTextPosition(r)&&Mo.isBr(r.getNode())))&&Wc(t)&&Uc(n):!$c(n,t)&&Uc(t)&&Wc(n);var r},Gc=function(e,t,n){var r=jc(t);return I.from(e?r.next(n):r.prev(n))},Yc=function(e,t,n){return Gc(e,t,n).bind(function(r){return yc(n,r,t)&&qc(e,n,r)?Gc(e,t,r):I.some(r)})},Xc=function(e,t,n,r){return Yc(e,t,n).bind(function(n){return r(n)?Xc(e,t,n,r):I.some(n)})},Kc=function(e,element){var t,n=e?element.firstChild:element.lastChild;return Mo.isText(n)?I.some(Cu(n,e?0:n.data.length)):n?Pa(n)?I.some(e?Cu.before(n):(t=n,Mo.isBr(t)?Cu.before(t):Cu.after(t))):function(e,t,n){var r=e?Cu.before(n):Cu.after(n);return Gc(e,t,r)}(e,element,n):I.none()},Jc=l(Gc,!0),Qc=l(Gc,!1),Zc={fromPosition:Gc,nextPosition:Jc,prevPosition:Qc,navigate:Yc,navigateIgnore:Xc,positionIn:Kc,firstPositionIn:l(Kc,!0),lastPositionIn:l(Kc,!1)},es=function(e,t){return!e.isBlock(t)||t.innerHTML||ge.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},ts=function(e,t){return Zc.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},ns=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!$u(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(ha);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},rs=function(e,t,n,r){var i,o,c,l,f=n[t?"start":"end"],d=e.getRoot();if(f){for(c=f[0],o=d,i=f.length-1;i>=1;i--){if(l=o.childNodes,ns(d,o,r))return!0;if(f[i]>l.length-1)return!!ns(d,o,r)||ts(o,r);o=l[f[i]]}3===o.nodeType&&(c=Math.min(f[0],o.nodeValue.length)),1===o.nodeType&&(c=Math.min(f[0],o.childNodes.length)),t?r.setStart(o,c):r.setEnd(o,c)}return!0},os=function(e){return Mo.isText(e)&&e.data.length>0},is=function(e,t,n){var r,o,c,l,f,d,marker=e.get(n.id+"_"+t),m=n.keep;if(marker){if(r=marker.parentNode,"start"===t?(m?marker.hasChildNodes()?(r=marker.firstChild,o=1):os(marker.nextSibling)?(r=marker.nextSibling,o=0):os(marker.previousSibling)?(r=marker.previousSibling,o=marker.previousSibling.data.length):(r=marker.parentNode,o=e.nodeIndex(marker)+1):o=e.nodeIndex(marker),f=r,d=o):(m?marker.hasChildNodes()?(r=marker.firstChild,o=1):os(marker.previousSibling)?(r=marker.previousSibling,o=marker.previousSibling.data.length):(r=marker.parentNode,o=e.nodeIndex(marker)):o=e.nodeIndex(marker),f=r,d=o),!m){for(l=marker.previousSibling,c=marker.nextSibling,Qt.each(Qt.grep(marker.childNodes),function(e){Mo.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});marker=e.get(n.id+"_"+t);)e.remove(marker,!0);l&&c&&l.nodeType===c.nodeType&&Mo.isText(l)&&!ge.opera&&(o=l.nodeValue.length,l.appendData(c.nodeValue),e.remove(c),f=l,d=o)}return I.some(Cu(f,d))}return I.none()},as=function(e,t){var n=e.dom;if(t){if(function(e){return Qt.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return rs(e,!0,t,n)&&rs(e,!1,t,n)?I.some(n):I.none()}(n,t);if(function(e){return"string"==typeof e.start}(t))return I.some(function(e,t){var n,r;return n=e.createRng(),r=Du(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Du(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n}(n,t));if(function(e){return e.hasOwnProperty("id")}(t))return function(e,t){var n,r,o=is(e,"start",t),c=is(e,"end",t);return Qa([o,(n=c,r=o,n.isSome()?n:r)],function(t,n){var r=e.createRng();return r.setStart(es(e,t.container()),t.offset()),r.setEnd(es(e,n.container()),n.offset()),r})}(n,t);if(function(e){return e.hasOwnProperty("name")}(t))return function(e,t){return I.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})}(n,t);if(function(e){return e.hasOwnProperty("rng")}(t))return I.some(t.rng)}return I.none()},us={getBookmark:function(e,t,n){return Uu.getBookmark(e,t,n)},moveToBookmark:function(e,t){as(e,t).each(function(t){e.setRng(t)})},isBookmarkNode:function(e){return Mo.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},cs=function(e){return e&&/^(IMG)$/.test(e.nodeName)},ss=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},ls=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},fs={isInlineBlock:cs,moveStart:function(e,t,n){var r,o,c,l=n.startOffset,f=n.startContainer;if((n.startContainer!==n.endContainer||!cs(n.startContainer.childNodes[n.startOffset]))&&1===f.nodeType)for(l<(c=f.childNodes).length?r=new ao(f=c[l],e.getParent(f,e.isBlock)):(r=new ao(f=c[c.length-1],e.getParent(f,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!ss(o))return n.setStart(o,0),void t.setRng(n)},getNonWhiteSpaceSibling:function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!ss(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:ss,replaceVars:function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},isEq:function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:ls,getStyle:function(e,t,n){return ls(e,e.getStyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},ds=us.isBookmarkNode,ms=fs.getParents,gs=fs.isWhiteSpaceNode,hs=fs.isTextBlock,ps=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},vs=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},bs=function(e,t,n,r){var o,c,l=n.nodeValue;return void 0===r&&(r=e?l.length:0),e?-1!==(o=(o=l.lastIndexOf(" ",r))>(c=l.lastIndexOf("",r))?o:c)&&!t&&(o<r||!e)&&o<=l.length&&o++:(o=l.indexOf(" ",r),c=l.indexOf("",r),o=-1!==o&&(-1===c||o<c)?o:c),o},ys=function(e,body,t,n,r,o){var c,l,f,d;if(3===t.nodeType){if(-1!==(f=bs(r,o,t,n)))return{container:t,offset:f};d=t}for(c=new ao(t,e.getParent(t,e.isBlock)||body);l=c[r?"prev":"next"]();)if(3!==l.nodeType||ds(l.parentNode)){if(e.isBlock(l)||fs.isEq(l,"BR"))break}else if(d=l,-1!==(f=bs(r,o,l)))return{container:l,offset:f};if(d)return{container:d,offset:n=r?0:d.length}},xs=function(e,t,n,r,o){var c,i,l,f;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),c=ms(e,r),i=0;i<c.length;i++)for(l=0;l<t.length;l++)if(!("collapsed"in(f=t[l])&&f.collapsed!==n.collapsed)&&e.is(c[i],f.selector))return c[i];return r},ws=function(e,t,n,r){var o,c=e.dom,l=c.getRoot();if(t[0].wrapper||(o=c.getParent(n,t[0].block,l)),!o){var f=c.getParent(n,"LI,TD,TH");o=c.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==l&&hs(e,t)},f)}if(o&&t[0].wrapper&&(o=ms(c,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!c.isBlock(o[r])&&(o=o[r],!fs.isEq(o,"br")););return o||n},Cs=function(e,t,n,r,o,c,l){var f,d,m,h,v,y;if(f=d=l?n:o,h=l?"previousSibling":"nextSibling",v=e.getRoot(),3===f.nodeType&&!gs(f)&&(l?r>0:c<f.nodeValue.length))return f;for(;;){if(!t[0].block_expand&&e.isBlock(d))return d;for(m=d[h];m;m=m[h])if(!ds(m)&&!gs(m)&&("BR"!==(y=m).nodeName||!y.getAttribute("data-mce-bogus")||y.nextSibling))return d;if(d===v||d.parentNode===v){f=d;break}d=d.parentNode}return f},Ss=function(e,t,n,r){var o,c=t.startContainer,l=t.startOffset,f=t.endContainer,d=t.endOffset,m=e.dom;return 1===c.nodeType&&c.hasChildNodes()&&3===(c=Xa(c,l)).nodeType&&(l=0),1===f.nodeType&&f.hasChildNodes()&&3===(f=Xa(f,t.collapsed?d:d-1)).nodeType&&(d=f.nodeValue.length),c=vs(m,c),f=vs(m,f),(ds(c.parentNode)||ds(c))&&(c=ds(c)?c:c.parentNode,3===(c=t.collapsed?c.previousSibling||c:c.nextSibling||c).nodeType&&(l=t.collapsed?c.length:0)),(ds(f.parentNode)||ds(f))&&(f=ds(f)?f:f.parentNode,3===(f=t.collapsed?f.nextSibling||f:f.previousSibling||f).nodeType&&(d=t.collapsed?0:f.length)),t.collapsed&&((o=ys(m,e.getBody(),c,l,!0,r))&&(c=o.container,l=o.offset),(o=ys(m,e.getBody(),f,d,!1,r))&&(f=o.container,d=o.offset)),n[0].inline&&(f=r?f:function(e,t){var n=ps(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=ps(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e}(f,d)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===c.nodeType&&0!==l||(c=Cs(m,n,c,l,f,d,!0)),n[0].inline&&3===f.nodeType&&d!==f.nodeValue.length||(f=Cs(m,n,c,l,f,d,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(c=xs(m,n,t,c,"previousSibling"),f=xs(m,n,t,f,"nextSibling")),(n[0].block||n[0].selector)&&(c=ws(e,n,c,"previousSibling"),f=ws(e,n,f,"nextSibling"),n[0].block&&(m.isBlock(c)||(c=Cs(m,n,c,l,f,d,!0)),m.isBlock(f)||(f=Cs(m,n,c,l,f,d,!1)))),1===c.nodeType&&(l=m.nodeIndex(c),c=c.parentNode),1===f.nodeType&&(d=m.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:l,endContainer:f,endOffset:d}},ks=Qt.each,Os={walk:function(e,t,n){var r,o,c,l,f,d,m,h=t.startContainer,v=t.startOffset,y=t.endContainer,x=t.endOffset;if((m=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)ks(m,function(e){n([e])});else{var w,C,S,k=function(e){var t;return 3===(t=e[0]).nodeType&&t===h&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===x&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e},O=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},T=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},E=function(e,t,r){var o=r?"nextSibling":"previousSibling";for(f=(l=e).parentNode;l&&l!==t;l=f)f=l.parentNode,(d=O(l===e?l:l[o],o)).length&&(r||d.reverse(),n(k(d)))};if(1===h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[v]),1===y.nodeType&&y.hasChildNodes()&&(C=x,S=(w=y).childNodes,--C>S.length-1?C=S.length-1:C<0&&(C=0),y=S[C]||w),h===y)return n(k([h]));for(r=e.findCommonAncestor(h,y),l=h;l;l=l.parentNode){if(l===y)return E(h,r,!0);if(l===r)break}for(l=y;l;l=l.parentNode){if(l===h)return E(y,r);if(l===r)break}o=T(h,r)||h,c=T(y,r)||y,E(h,o,!0),(d=O(o===h?o:o.nextSibling,"nextSibling",c===y?c.nextSibling:c)).length&&n(k(d)),E(y,c)}}},Ts=function(e,t){var n=function(element){return e(element)?I.from(element.dom().nodeValue):I.none()},r=Qn.detect().browser,o=r.isIE()&&10===r.version.major?function(element){try{return n(element)}catch(e){return I.none()}}:n;return{get:function(element){if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return o(element).getOr("")},getOption:o,set:function(element,n){if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom().nodeValue=n}}}(cr,"text"),Es=function(element){return Ts.get(element)},Ns=function(e,t,n,r){return Hr(t).fold(function(){return"skipping"},function(o){return"br"===r||function(e){return cr(e)&&"\ufeff"===Es(e)}(t)?"valid":function(e){return ur(e)&&$i(e,ea())}(t)?"existing":Wu(t)?"caret":fs.isValid(e,n,r)&&fs.isValid(e,ir(o),n)?"valid":"invalid-child"})},_s=function(e,t,n,r){var o,time,c=t.uid,l=void 0===c?(o="mce-annotation",time=(new Date).getTime(),o+"_"+Math.floor(1e9*Math.random())+ ++sa+String(time)):c,data=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&(t[p[i]]=s[p[i]])}return t}(t,["uid"]),f=er.fromTag("span",e);Ui(f,ea()),xr(f,""+na(),l),xr(f,""+ta(),n);var d=r(l,data),m=d.attributes,h=void 0===m?{}:m,v=d.classes,y=void 0===v?[]:v;return wr(f,h),function(element,e){G(e,function(e){Ui(element,e)})}(f,y),f},As=function(e,t,n,r,data){var o=[],c=_s(e.getDoc(),data,n,r),l=Oi(I.none()),f=function(){l.set(I.none())},d=function(e){G(e,m)},m=function(t){var element,n;switch(Ns(e,t,"span",ir(t))){case"invalid-child":f();var r=Wr(t);d(r),f();break;case"valid":var l=n.get().getOrThunk(function(){var e=fa(c);return o.push(e),n.set(I.some(e)),e});Ai(element=t,n=l),Bi(n,element)}};return Os.walk(e.dom,t,function(e){f(),function(e){var t=map(e,er.fromDom);d(t)}(e)}),o},Ds=function(e,t,n,data){e.undoManager.transact(function(){var r=e.selection.getRng();if(r.collapsed&&function(e,t){var n=Ss(e,t,[{inline:!0}],function(e){return 3===e.startContainer.nodeType&&e.startContainer.nodeValue.length>=e.startOffset&&""===e.startContainer.nodeValue[e.startOffset]}(t));t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,r),e.selection.getRng().collapsed){var o=_s(e.getDoc(),data,t,n.decorate);ma(o,""),e.selection.getRng().insertNode(o.dom()),e.selection.select(o.dom())}else{var c=Uu.getPersistentBookmark(e.selection,!1),l=e.selection.getRng();As(e,l,t,n.decorate,data),e.selection.moveToBookmark(c)}})};function Rs(e){var t=ca();ua(e,t);var n=aa(e,t);return{register:function(e,n){t.register(e,n)},annotate:function(n,data){t.lookup(n).each(function(t){Ds(e,n,t,data)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){ra(e,I.some(t)).each(function(e){var t=e.elements;G(t,Pi)})},getAll:function(t){var n=ia(e,t);return dr(n,function(e){return map(e,function(e){return e.dom()})})}}}var Bs=/^[ \t\r\n]*$/,Ms={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Is=function(e,t,n){var r,o,c=n?"lastChild":"firstChild",l=n?"prev":"next";if(e[c])return e[c];if(e!==t){if(r=e[l])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[l])return r}},zs=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,o;if(r=new e(t,Ms[t]||1),n)for(o in n)r.attr(o,n[o]);return r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,i;if("string"!=typeof e){for(i in e)this.attr(i,e[i]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),this;return this}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var i,t,n,r,o,c=new e(this.name,this.type);if(n=this.attributes){for((o=[]).map={},i=0,t=n.length;i<t;i++)"id"!==(r=n[i]).name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);c.attributes=o}return c.value=this.value,c.shortEnded=this.shortEnded,c},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=Is(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,i,t;if(this.firstChild){for(e=[],t=this.firstChild;t;t=Is(t,this))e.push(t);for(i=e.length;i--;)(t=e[i]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var i,r,o=this.firstChild;if(t=t||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(i=o.attributes.length;i--;)if("name"===(r=o.attributes[i].name)||0===r.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!Bs.test(o.value))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&Bs.test(o.value))return!1;if(n&&n(o))return!1}while(o=Is(o,this));return!0},e.prototype.walk=function(e){return Is(this,null,e)},e}(),Ps=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},Ls=function(text){return text.replace(/<!--|-->/g,"")},Hs=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},Fs=function(e,html,t){var n,r,o,c,l=1;for(c=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=n=t;r=o.exec(html);){if(n=o.lastIndex,"/"===r[1])l--;else if(!r[1]){if(r[2]in c)continue;l++}if(0===l)break}return n},Vs=function(e,t){var n=e.exec(t);if(n){var r=n[1],o=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?o:null}return null};function js(e,t){void 0===t&&(t=ii());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,o=e.cdata?e.cdata:n,text=e.text?e.text:n,c=e.start?e.start:n,l=e.end?e.end:n,f=e.pi?e.pi:n,d=e.doctype?e.doctype:n;return{parse:function(html){var n,m,h,v,i,y,x,w,C,S,k,O,T,E,N,_,A,D,R,B,M,I,z,P,L,H,F,V,j,U=0,W=[],$=0,G=Yo.decode,Y=Qt.makeMap("src,href,data,background,formaction,poster,xlink:href"),X=/((java|vb)script|mhtml):/i,K=function(e){var t,i;for(t=W.length;t--&&W[t].name!==e;);if(t>=0){for(i=W.length-1;i>=t;i--)(e=W[i]).valid&&l(e.name);W.length=t}},J=function(t,n,r,o,c){var l,i;if(r=(n=n.toLowerCase())in k?n:G(r||o||c||""),T&&!w&&!1===Ps(n)){if(!(l=D[n])&&R){for(i=R.length;i--&&!(l=R[i]).pattern.test(n););-1===i&&(l=null)}if(!l)return;if(l.validValues&&!(r in l.validValues))return}if(Y[n]&&!e.allow_script_urls){var f=r.replace(/[\s\u0000-\u001F]+/g,"");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}if(X.test(f))return;if(Hs(e,f))return}w&&(n in Y||0===n.indexOf("on"))||(v.map[n]=r,v.push({name:n,value:r}))};for(L=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,S=t.getShortEndedElements(),P=e.self_closing_elements||t.getSelfClosingElements(),k=t.getBoolAttrs(),T=e.validate,C=e.remove_internals,j=e.fix_self_closing,F=t.getSpecialElements(),z=html+">";n=L.exec(z);){if(U<n.index&&text(G(html.substr(U,n.index-U))),m=n[6])":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1)),K(m);else if(m=n[7]){if(n.index+n[0].length>html.length){text(G(html.substr(n.index))),U=n.index+n[0].length;continue}":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1)),O=m in S,j&&P[m]&&W.length>0&&W[W.length-1].name===m&&K(m);var Q=Vs(H,n[8]);if(null!==Q){if("all"===Q){U=Fs(t,html,L.lastIndex),L.lastIndex=U;continue}N=!1}if(!T||(E=t.getElementRule(m))){if(N=!0,T&&(D=E.attributes,R=E.attributePatterns),(A=n[8])?((w=-1!==A.indexOf("data-mce-type"))&&C&&(N=!1),(v=[]).map={},A.replace(H,J)):(v=[]).map={},T&&!w){if(B=E.attributesRequired,M=E.attributesDefault,I=E.attributesForced,E.removeEmptyAttrs&&!v.length&&(N=!1),I)for(i=I.length;i--;)x=(_=I[i]).name,"{$uid}"===(V=_.value)&&(V="mce_"+$++),v.map[x]=V,v.push({name:x,value:V});if(M)for(i=M.length;i--;)(x=(_=M[i]).name)in v.map||("{$uid}"===(V=_.value)&&(V="mce_"+$++),v.map[x]=V,v.push({name:x,value:V}));if(B){for(i=B.length;i--&&!(B[i]in v.map););-1===i&&(N=!1)}if(_=v.map["data-mce-bogus"]){if("all"===_){U=Fs(t,html,L.lastIndex),L.lastIndex=U;continue}N=!1}}N&&c(m,v,O)}else N=!1;if(h=F[m]){h.lastIndex=U=n.index+n[0].length,(n=h.exec(html))?(N&&(y=html.substr(U,n.index-U)),U=n.index+n[0].length):(y=html.substr(U),U=html.length),N&&(y.length>0&&text(y,!0),l(m)),L.lastIndex=U;continue}O||(A&&A.indexOf("/")===A.length-1?N&&l(m):W.push({name:m,valid:N}))}else(m=n[1])?(">"===m.charAt(0)&&(m=" "+m),e.allow_conditional_comments||"[if"!==m.substr(0,3).toLowerCase()||(m=" "+m),r(m)):(m=n[2])?o(Ls(m)):(m=n[3])?d(m):(m=n[4])&&f(m,n[5]);U=n.index+n[0].length}for(U<html.length&&text(G(html.substr(U))),i=W.length-1;i>=0;i--)(m=W[i]).valid&&l(m.name)}}}!function(e){e.findEndTag=Fs}(js||(js={}));var Us=js,Ws=function(e,html){var t,n,r,o,c,content=html,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,f=e.schema;for(content=function(e,html){var t=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(t,"")}(e.getTempAttrs(),content),c=f.getShortEndedElements();o=l.exec(content);)n=l.lastIndex,r=o[0].length,t=c[o[1]]?n:Us.findEndTag(f,content,n),content=content.substring(0,n-r)+content.substring(t),l.lastIndex=n-r;return pa(content)},$s={trimExternal:Ws,trimInternal:Ws},qs=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},Gs={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return qs(e,"body_id","tinymce")},getBodyClass:function(e){return qs(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmptyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)},getFontStyleValues:function(e){return Qt.explode(e.getParam("font_size_style_values",""))},getFontSizeClasses:function(e){return Qt.explode(e.getParam("font_size_classes",""))},getImagesDataImgFilter:function(e){return e.getParam("images_dataimg_filter",o(!0),"function")},isAutomaticUploadsEnabled:function(e){return e.getParam("automatic_uploads",!0,"boolean")},shouldReuseFileName:function(e){return e.getParam("images_reuse_filename",!1,"boolean")},shouldReplaceBlobUris:function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},getImageUploadUrl:function(e){return e.getParam("images_upload_url","","string")},getImageUploadBasePath:function(e){return e.getParam("images_upload_base_path","","string")},getImagesUploadCredentials:function(e){return e.getParam("images_upload_credentials",!1,"boolean")},getImagesUploadHandler:function(e){return e.getParam("images_upload_handler",null,"function")},shouldUseContentCssCors:function(e){return e.getParam("content_css_cors",!1,"boolean")},getLanguageCode:function(e){return e.getParam("language","en","string")},getLanguageUrl:function(e){return e.getParam("language_url","","string")},shouldIndentUseMargin:function(e){return e.getParam("indent_use_margin",!1)},getIndentation:function(e){return e.getParam("indentation","40px","string")},getContentCss:function(e){var t=e.settings.content_css;return P(t)?map(t.split(","),Wn):H(t)?t:!1===t||e.inline?[]:["default"]}},Ys=function(e,t,body){var content;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)content=Qt.trim($s.trimExternal(e.serializer,body.innerHTML));else if("text"===t.format)content=pa(body.innerText||body.textContent);else{if("tree"===t.format)return e.serializer.serialize(body,t);content=function(e,html){var t=Gs.getForcedRootBlock(e),n=new RegExp("^(<"+t+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+t+">[\r\n]*|<br \\/>[\r\n]*)$");return html.replace(n,"")}(e,e.serializer.serialize(body,t))}return"text"===t.format||Co(er.fromDom(body))?t.content=content:t.content=Qt.trim(content),t.no_events||e.fire("GetContent",t),t.content},Xs=Qt.makeMap;function Ks(e){var t,n,r,o,c,html=[];return t=(e=e||{}).indent,n=Xs(e.indent_before||""),r=Xs(e.indent_after||""),o=Yo.getEncodeFunc(e.entity_encoding||"raw",e.entities),c="html"===e.element_format,{start:function(e,l,f){var i,d,m,h;if(t&&n[e]&&html.length>0&&(h=html[html.length-1]).length>0&&"\n"!==h&&html.push("\n"),html.push("<",e),l)for(i=0,d=l.length;i<d;i++)m=l[i],html.push(" ",m.name,'="',o(m.value,!0),'"');html[html.length]=!f||c?">":" />",f&&t&&r[e]&&html.length>0&&(h=html[html.length-1]).length>0&&"\n"!==h&&html.push("\n")},end:function(e){var n;html.push("</",e,">"),t&&r[e]&&html.length>0&&(n=html[html.length-1]).length>0&&"\n"!==n&&html.push("\n")},text:function(text,e){text.length>0&&(html[html.length]=e?text:o(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("\x3c!--",text,"--\x3e")},pi:function(e,text){text?html.push("<?",e," ",o(text),"?>"):html.push("<?",e,"?>"),t&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",t?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}}function Js(e,t){void 0===t&&(t=ii());var n=Ks(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var o,c;c=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{l(e)}while(e=e.next)}},n.reset();var l=function(e){var r,f,d,m,h,v,i,y,x,w=o[e.type];if(w)w(e);else{if(r=e.name,f=e.shortEnded,d=e.attributes,c&&d&&d.length>1&&((v=[]).map={},x=t.getElementRule(e.name))){for(i=0,y=x.attributesOrder.length;i<y;i++)(m=x.attributesOrder[i])in d.map&&(h=d.map[m],v.map[m]=h,v.push({name:m,value:h}));for(i=0,y=d.length;i<y;i++)(m=d[i].name)in v.map||(h=d.map[m],v.map[m]=h,v.push({name:m,value:h}));d=v}if(n.start(e.name,d,f),!f){if(e=e.firstChild)do{l(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?o[11](r):l(r),n.getContent()}}}var Qs=function(e,t){t(e),e.firstChild&&Qs(e.firstChild,t),e.next&&Qs(e.next,t)},Zs=function(e,t,n){var r=function(e,t,n){var r={},o={},c=[];for(var l in n.firstChild&&Qs(n.firstChild,function(n){G(e,function(filter){filter.name===n.name&&(r[filter.name]?r[filter.name].nodes.push(n):r[filter.name]={filter:filter,nodes:[n]})}),G(t,function(filter){"string"==typeof n.attr(filter.name)&&(o[filter.name]?o[filter.name].nodes.push(n):o[filter.name]={filter:filter,nodes:[n]})})}),r)r.hasOwnProperty(l)&&c.push(r[l]);for(var l in o)o.hasOwnProperty(l)&&c.push(o[l]);return c}(e,t,n);G(r,function(e){G(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},el=function(element){var e=Lr(element).dom();return element.dom()===e.activeElement},tl=function(element){return(e=Lr(element),n=void 0!==e?e.dom():t.document,I.from(n.activeElement).map(er.fromDom)).filter(function(e){return element.dom().contains(e.dom())});var e,n},nl=function(e){if(!H(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return G(e,function(o,c){var l=sr(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==r[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!H(d))throw new Error("case arguments must be an array");n.push(f),r[f]=function(){var r=arguments.length;if(r!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+r);for(var o=new Array(r),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var t=sr(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!te(n,function(e){return $(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[f].apply(null,o)},log:function(label){t.console.log(label,{constructors:n,constructor:f,params:o})}}}}),r},rl=(nl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),il=Er("start","soffset","finish","foffset"),al=(rl.domRange,rl.relative,rl.exact,Qn.detect().browser),cl=function(e,element){var t=cr(element)?Es(element).length:Wr(element).length+1;return e>t?t:e<0?0:e},sl=function(e){return il(e.start(),cl(e.soffset(),e.start()),e.finish(),cl(e.foffset(),e.finish()))},ll=function(e,t){return Pr(e,t)||zr(e,t)},fl=function(e){return function(t){return ll(e,t.start())&&ll(e,t.finish())}},ml=function(e){return!0===e.inline||al.isIE()},gl=function(e){return il(er.fromDom(e.startContainer),e.startOffset,er.fromDom(e.endContainer),e.endOffset)},hl=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?I.from(t.getRangeAt(0)):I.none()).map(gl)},pl=function(e){var t,n=(t=e.dom().ownerDocument.defaultView,er.fromDom(t));return hl(n.dom()).filter(fl(e))},vl=function(e,t){return I.from(t).filter(fl(e)).map(sl)},bl=function(e){var n=t.document.createRange();try{return n.setStart(e.start().dom(),e.soffset()),n.setEnd(e.finish().dom(),e.foffset()),I.some(n)}catch(e){return I.none()}},yl=function(e){return(e.bookmark?e.bookmark:I.none()).bind(l(vl,er.fromDom(e.getBody()))).bind(bl)},xl={store:function(e){var t=ml(e)?pl(er.fromDom(e.getBody())):I.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=er.fromDom(e.getBody()),r=(ml(e)?I.from(t):I.none()).map(gl).filter(fl(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:hl,restore:function(e){yl(e).each(function(t){e.selection.setRng(t)})},getRng:yl,getBookmark:pl,validate:vl},wl=function(e,t){return function(e){return e.collapsed?I.from(Xa(e.startContainer,e.startOffset)).map(er.fromDom):I.none()}(t).bind(function(t){return xo(t)?I.some(t):!1===Pr(e,t)?I.some(e):I.none()})},Cl=function(e,t){wl(er.fromDom(e.getBody()),t).bind(function(e){return Zc.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},Sl=function(body){if(body.setActive)try{body.setActive()}catch(e){body.focus()}else body.focus()},kl=function(e){var t,n=e.getBody();return n&&(t=er.fromDom(n),el(t)||tl(t).isSome())},Ol=function(e){return e.inline?kl(e):function(e){return e.iframeElement&&el(er.fromDom(e.iframeElement))}(e)},Tl=function(e){return e.editorManager.setActive(e)},El=function(e,t){e.removed||(t?Tl(e):function(e){var t=e.selection,body=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable();var r=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})}(e,t.getNode());if(e.$.contains(body,r))return Sl(r),Cl(e,n),void Tl(e);void 0!==e.bookmark&&!1===Ol(e)&&xl.getRng(e).each(function(t){e.selection.setRng(t),n=t}),e.inline||(ge.opera||Sl(body),e.getWin().focus()),(ge.gecko||e.inline)&&(Sl(body),Cl(e,n)),Tl(e)}(e))},Nl=Ol,_l=function(content){return content instanceof zs},Al=function(e,html){e.dom.setHTML(e.getBody(),html),function(e){Nl(e)&&Zc.firstPositionIn(e.getBody()).each(function(t){var n=t.getNode(),r=Mo.isTable(n)?Zc.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())})}(e)},Dl=function(e,content,t){return void 0===t&&(t={}),t.format=t.format?t.format:"html",t.set=!0,t.content=_l(content)?"":content,_l(content)||t.no_events||(e.fire("BeforeSetContent",t),content=t.content),I.from(e.getBody()).fold(o(content),function(body){return _l(content)?function(e,body,content,t){Zs(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),content);var html=Js({validate:e.validate},e.schema).serialize(content);return t.content=Co(er.fromDom(body))?html:Qt.trim(html),Al(e,t.content),t.no_events||e.fire("SetContent",t),content}(e,body,content,t):function(e,body,content,t){var n,r;return 0===content.length||/^\s+$/.test(content)?(r='<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+r+"</li>"),(n=Gs.getForcedRootBlock(e))&&e.schema.isValidChild(body.nodeName.toLowerCase(),n.toLowerCase())?(content=r,content=e.dom.createHTML(n,e.settings.forced_root_block_attrs,content)):content||(content='<br data-mce-bogus="1">'),Al(e,content),e.fire("SetContent",t)):("raw"!==t.format&&(content=Js({validate:e.validate},e.schema).serialize(e.parser.parse(content,{isRootContent:!0,insert:!0}))),t.content=Co(er.fromDom(body))?content:Qt.trim(content),Al(e,t.content),t.no_events||e.fire("SetContent",t)),t.content}(e,body,content,t)})},Rl=function(e,t){return e.fire("PreProcess",t)},Bl=function(e,t){return e.fire("PostProcess",t)},Ml=function(e){return e.fire("remove")},Il=function(e){return e.fire("detach")},zl=function(e,t){return e.fire("SwitchMode",{mode:t})},Pl=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},Ll=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Hl=bi.DOM,Fl=function(e){return I.from(e).each(function(e){return e.destroy()})},Vl=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,body=e.getBody(),element=e.getElement();body&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&element&&Hl.remove(element.nextSibling),Ml(e),e.editorManager.remove(e),!e.inline&&body&&function(e){Hl.setStyle(e.id,"display",e.orgDisplay)}(e),Il(e),Hl.remove(e.getContainer()),Fl(t),Fl(n),e.destroy()}},jl=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Fl(n),Fl(r)),function(e){var form=e.formElement;form&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),Hl.unbind(form,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())},Ul=Er("sections","settings"),Wl=Qn.detect(),$l=Wl.deviceType.isTouch(),ql=Wl.deviceType.isPhone(),Gl=["lists","autolink","autosave"],Yl=ql?{theme:"mobile"}:{},Xl=function(e){var t=H(e)?e.join(" "):e,n=map(P(t)?t.split(" "):[],Wn);return filter(n,function(e){return e.length>0})},Kl=function(e,t){var n=gr(t,function(t,n){return $(e,n)});return Ul(n.t,n.f)},Jl=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?Qt.extend({},e.external_plugins,n):n},Ql=function(e,t,n,r){var o=Xl(n.forced_plugins),c=Xl(r.plugins),f=function(e,t){return[].concat(Xl(e)).concat(Xl(t))}(o,e&&function(e,t){return e.sections().hasOwnProperty(t)}(t,"mobile")?function(e){return filter(e,l($,Gl))}(c):c);return Qt.extend(r,{plugins:f.join(" ")})},Zl=function(e,t,n,r){var o=Kl(["mobile"],r),c=Qt.extend(t,n,o.settings(),function(e,t){var n=t.settings().inline;return e&&!n}(e,o)?function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return Qt.extend({},n,o)}(o,"mobile",Yl):{},{validate:!0,external_plugins:Jl(n,o.settings())});return Ql(e,o,n,c)},ef=function(e,t,n){return I.from(t.settings[n]).filter(e)},tf=l(ef,P),nf=function(e,t,n,r){var p,o=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var output={};return"string"==typeof e?G(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var t=e.split("=");t.length>1?output[Qt.trim(t[0])]=Qt.trim(t[1]):output[Qt.trim(t[0])]=Qt.trim(t)}):output=e,output}(o):"string"===r?ef(P,e,t).getOr(n):"number"===r?ef(U,e,t).getOr(n):"boolean"===r?ef(V,e,t).getOr(n):"object"===r?ef(L,e,t).getOr(n):"array"===r?ef(H,e,t).getOr(n):"string[]"===r?ef((p=P,function(a){return H(a)&&te(a,p)}),e,t).getOr(n):"function"===r?ef(j,e,t).getOr(n):o},rf=function(e,t){return t.dom()[e]},of=function(e,t){return parseInt(kr(t,e),10)},af=l(rf,"clientWidth"),uf=l(rf,"clientHeight"),cf=l(of,"margin-top"),sf=l(of,"margin-left"),lf={isXYInContentArea:function(e,t,n){var element,r=er.fromDom(e.getBody()),o=e.inline?r:(element=r,er.fromDom(element.dom().ownerDocument.documentElement)),c=function(e,t,n,r){var o=function(e){return e.dom().getBoundingClientRect()}(t);return{x:n-(e?o.left+t.dom().clientLeft+sf(t):0),y:r-(e?o.top+t.dom().clientTop+cf(t):0)}}(e.inline,o,t,n);return function(e,t,n){var r=af(e),o=uf(e);return t>=0&&n>=0&&t<=r&&n<=o}(o,c.x,c.y)},isEditorAttachedToDom:function(e){var t,n=e.inline?e.getBody():e.getContentAreaContainer();return(t=n,I.from(t).map(er.fromDom)).map(function(e){return Pr(Lr(e),e)}).getOr(!1)}};function ff(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},r=function(){t.length>0&&n().reposition(t)},o=function(e){J(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},c=function(c){if(!e.removed&&lf.isEditorAttachedToDom(e))return K(t,function(e){return a=n().getArgs(e),b=c,!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout);var a,b}).getOrThunk(function(){e.editorManager.setActive(e);var l=n().open(c,function(){o(l),r()});return function(e){t.push(e)}(l),r(),l})};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&c({text:t,type:"warning",timeout:0})}),e.on("ResizeEditor ResizeWindow NodeChange",function(){ye.requestAnimationFrame(r)}),e.on("remove",function(){G(t.slice(),function(e){n().close(e)})})}(e),{open:c,close:function(){I.from(t[0]).each(function(e){n().close(e),o(e),r()})},getNotifications:function(){return t}}}function df(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(dialog){t.push(dialog),function(dialog){e.fire("OpenWindow",{dialog:dialog})}(dialog)},c=function(dialog){!function(dialog){e.fire("CloseWindow",{dialog:dialog})}(dialog),0===(t=filter(t,function(e){return e!==dialog})).length&&e.focus()};return e.on("remove",function(){G(t,function(dialog){n().close(dialog)})}),{open:function(t,r){e.editorManager.setActive(e),xl.store(e);var dialog=n().open(t,r,c);return o(dialog),dialog},alert:function(e,t,o){n().alert(e,r(o||this,t))},confirm:function(e,t,o){n().confirm(e,r(o||this,t))},close:function(){I.from(t[t.length-1]).each(function(dialog){n().close(dialog),c(dialog)})}}}var mf,gf=_i.PluginManager,hf=function(e,t){var n=function(e,t){for(var n in gf.urls)if(gf.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?Ei.translate(["Failed to load plugin: {0} from url {1}",n,t]):Ei.translate(["Failed to load plugin url: {0}",t])},pf=function(e,t){e.notificationManager.open({type:"error",text:t})},vf=function(e,t){e._skinLoaded?pf(e,t):e.on("SkinLoaded",function(){pf(e,t)})},bf=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},yf={pluginLoadError:function(e,t){vf(e,hf(e,t))},pluginInitError:function(e,t,n){var r=Ei.translate(["Failed to initialize plugin: {0}",t]);bf(r,n),vf(e,r)},uploadError:function(e,t){vf(e,Ei.translate(["Failed to upload image: {0}",t]))},displayError:vf,initError:bf},xf=(mf={},{add:function(e,t){mf[e]=t},get:function(e){return mf[e]?mf[e]:{icons:{}}},has:function(e){return vr(mf,e)}}),wf=_i.PluginManager,Cf=_i.ThemeManager;function Sf(){return new(ce.getOrDie("XMLHttpRequest"))}function kf(e,n){var r={},o=function(e,r,o,progress){var c,l;(c=Sf()).open("POST",n.url),c.withCredentials=n.credentials,c.upload.onprogress=function(e){progress(e.loaded/e.total*100)},c.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e,t,l;c.status<200||c.status>=300?o("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?r((t=n.basePath,l=e.location,t?t.replace(/\/$/,"")+"/"+l.replace(/^\//,""):l)):o("Invalid JSON: "+c.responseText)},(l=new t.FormData).append("file",e.blob(),e.filename()),c.send(l)},c=function(e,t){return{url:t,blobInfo:e,status:!0}},l=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},f=function(e,t){Qt.each(r[e],function(e){e(t)}),delete r[e]},d=function(t,o){return t=Qt.grep(t,function(t){return!e.isUploaded(t.blobUri())}),he.all(Qt.map(t,function(t){return e.isPending(t.blobUri())?function(e){var t=e.blobUri();return new he(function(e){r[t]=r[t]||[],r[t].push(e)})}(t):function(t,n,r){return e.markPending(t.blobUri()),new he(function(o){var d;try{var m=function(){d&&d.close()};n(t,function(n){m(),e.markUploaded(t.blobUri(),n),f(t.blobUri(),c(t,n)),o(c(t,n))},function(n){m(),e.removeFailed(t.blobUri()),f(t.blobUri(),l(t,n)),o(l(t,n))},function(e){e<0||e>100||(d||(d=r()),d.progressBar.value(e))})}catch(e){o(l(t,e.message))}})}(t,n.handler,o)}))};return!1===j(n.handler)&&(n.handler=o),{upload:function(e,t){return n.url||n.handler!==o?d(e,t):new he(function(e){e([])})}}}var Of=function(e){return ce.getOrDie("atob")(e)},Tf=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},Ef=function(e){return new he(function(n){var r,o,i,c=Tf(e);try{r=Of(c.data)}catch(e){return void n(new t.Blob([]))}for(o=function(e){return new(ce.getOrDie("Uint8Array"))(e)}(r.length),i=0;i<o.length;i++)o[i]=r.charCodeAt(i);n(new t.Blob([o],{type:c.type}))})},Nf=function(e){return 0===e.indexOf("blob:")?function(e){return new he(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var o=Sf();o.open("GET",e,!0),o.responseType="blob",o.onload=function(){200===this.status?t(this.response):r()},o.onerror=r,o.send()}catch(e){r()}})}(e):0===e.indexOf("data:")?Ef(e):null},_f=function(e){return new he(function(t){var n=new(ce.getOrDie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},Af=Tf,Df=0,Rf=function(e){return(e||"blobid")+Df++},Bf=function(e,img,t,n){var r,o;0!==img.src.indexOf("blob:")?(r=Af(img.src).data,(o=e.findFirst(function(e){return e.base64()===r}))?t({image:img,blobInfo:o}):Nf(img.src).then(function(n){o=e.create(Rf(),n,r),e.add(o),t({image:img,blobInfo:o})},function(e){n(e)})):(o=e.getByUri(img.src))?t({image:img,blobInfo:o}):Nf(img.src).then(function(n){_f(n).then(function(c){r=Af(c).data,o=e.create(Rf(),n,r),e.add(o),t({image:img,blobInfo:o})})},function(e){n(e)})},Mf=function(e){return e?ie(e.getElementsByTagName("img")):[]},If=0,zf={uuid:function(e){return e+If+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};function Pf(e){var t,n,r,c,l,f,d,m,h,v=(t=[],n=function(e){var t,n,r;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||zf.uuid("blobid"),n=e.name||t,{id:o(t),name:o(n),filename:o(n+"."+(r=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[r.toLowerCase()]||"dat")),blob:o(e.blob),base64:o(e.base64),blobUri:o(e.blobUri||le.createObjectURL(e.blob)),uri:o(e.uri)}},{create:function(e,t,r,o){if(P(e))return n({id:e,name:o,blob:t,base64:r});if(L(e))return n(e);throw new Error("Unknown input type")},add:function(e){r(e.id())||t.push(e)},get:r=function(e){return c(function(t){return t.id()===e})},getByUri:function(e){return c(function(t){return t.blobUri()===e})},findFirst:c=function(e){return filter(t,e)[0]},removeByUri:function(e){t=filter(t,function(t){return t.blobUri()!==e||(le.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){G(t,function(e){le.revokeObjectURL(e.blobUri())}),t=[]}}),y=(d={},m=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:h=function(e){return e in d},getResultUri:function(e){var t=d[e];return t?t.resultUri:null},isPending:function(e){return!!h(e)&&1===d[e].status},isUploaded:function(e){return!!h(e)&&2===d[e].status},markPending:function(e){d[e]=m(1,null)},markUploaded:function(e,t){d[e]=m(2,t)},removeFailed:function(e){delete d[e]},destroy:function(){d={}}}),x=[],w=function(t){return function(n){return e.selection?t(n):[]}},C=function(content,e,t){var n=0;do{-1!==(n=content.indexOf(e,n))&&(content=content.substring(0,n)+t+content.substr(n+e.length),n+=t.length-e.length+1)}while(-1!==n);return content},S=function(content,e,t){return content=C(content,'src="'+e+'"','src="'+t+'"'),content=C(content,'data-mce-src="'+e+'"','data-mce-src="'+t+'"')},k=function(t,n){G(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=map(e.fragments,function(e){return S(e,t,n)}):e.content=S(e.content,t,n)})},O=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},T=function(t){return l||(l=kf(y,{url:Gs.getImageUploadUrl(e),basePath:Gs.getImageUploadBasePath(e),credentials:Gs.getImagesUploadCredentials(e),handler:Gs.getImagesUploadHandler(e)})),_().then(w(function(n){var r;return r=map(n,function(e){return e.blobInfo}),l.upload(r,O).then(w(function(r){var o=map(r,function(t,r){var image=n[r].image;return t.status&&Gs.shouldReplaceBlobUris(e)?function(image,t){v.removeByUri(image.src),k(image.src,t),e.$(image).attr({src:Gs.shouldReuseFileName(e)?t+"?"+(new Date).getTime():t,"data-mce-src":e.convertURL(t,"src")})}(image,t.url):t.error&&yf.uploadError(e,t.error),{element:image,status:t.status}});return t&&t(o),o}))}))},E=function(t){if(Gs.isAutomaticUploadsEnabled(e))return T(t)},N=function(t){return!1!==te(x,function(filter){return filter(t)})&&(0!==t.getAttribute("src").indexOf("data:")||Gs.getImagesDataImgFilter(e)(t))},_=function(){return f||(f=function(e,t){var n={};return{findAll:function(r,c){var l;c||(c=o(!0)),l=filter(Mf(r),function(img){var t=img.src;return!!ge.fileApi&&!img.hasAttribute("data-mce-bogus")&&!img.hasAttribute("data-mce-placeholder")&&!(!t||t===ge.transparentSrc)&&(0===t.indexOf("blob:")?!e.isUploaded(t)&&c(img):0===t.indexOf("data:")&&c(img))});var f=map(l,function(img){if(n[img.src])return new he(function(e){n[img.src].then(function(t){if("string"==typeof t)return t;e({image:img,blobInfo:t.blobInfo})})});var e=new he(function(e,n){Bf(t,img,e,n)}).then(function(e){return delete n[e.image.src],e}).catch(function(e){return delete n[img.src],e});return n[img.src]=e,e});return he.all(f)}}}(y,v)),f.findAll(e.getBody(),N).then(w(function(t){return t=filter(t,function(t){return"string"!=typeof t||(yf.displayError(e,t),!1)}),G(t,function(e){k(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},A=function(content){return content.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=y.getResultUri(n);if(r)return'src="'+r+'"';var o=v.getByUri(n);return o||(o=X(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t})};return e.on("setContent",function(){Gs.isAutomaticUploadsEnabled(e)?E():_()}),e.on("RawSaveContent",function(e){e.content=A(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=A(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){G(e,function(img){var e=img.attr("src");if(!v.getByUri(e)){var t=y.getResultUri(e);t&&img.attr("src",t)}})})}),{blobCache:v,addFilter:function(filter){x.push(filter)},uploadImages:T,uploadImagesAuto:E,scanForImages:_,destroy:function(){v.destroy(),y.destroy(),f=l=null}}}var Lf=function(e,t,n){return Pr(t,e)?function(element,e){for(var t=j(e)?e:o(!1),n=element.dom(),r=[];null!==n.parentNode&&void 0!==n.parentNode;){var c=n.parentNode,p=er.fromDom(c);if(r.push(p),!0===t(p))break;n=c}return r}(e,function(e){return n(e)||zr(e,t)}).slice(0,-1):[]},Hf=function(e,t){return Lf(e,t,o(!1))},Ff=Hf,Vf=function(e,t){return[e].concat(Hf(e,t))},jf=function(e,t){return e.hasOwnProperty(t.nodeName)},Uf=function(e,t){return!!Mo.isText(t)||!!Mo.isElement(t)&&!jf(e,t)&&!us.isBookmarkNode(t)},Wf=function(e,t,n){return r=Ff(er.fromDom(n),er.fromDom(t)),J(r,function(t){return jf(e,t.dom())}).isSome();var r},$f=function(e,t){if(Mo.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||jf(e,t.nextSibling)))return!0}return!1},qf=function(e){var t,n,r,o,c,l,f,d,m,h,v=e.dom,y=e.selection,x=e.schema,w=x.getBlockElements(),C=y.getStart(),S=e.getBody(),k=Gs.getForcedRootBlock(e);if(C&&Mo.isElement(C)&&k&&(h=S.nodeName.toLowerCase(),x.isValidChild(h,k.toLowerCase())&&!Wf(w,S,C))){for(n=(t=y.getRng()).startContainer,r=t.startOffset,o=t.endContainer,c=t.endOffset,m=Nl(e),C=S.firstChild;C;)if(Uf(w,C)){if($f(w,C)){f=C,C=C.nextSibling,v.remove(f);continue}l||(l=v.create(k,e.settings.forced_root_block_attrs),C.parentNode.insertBefore(l,C),d=!0),f=C,C=C.nextSibling,l.appendChild(f)}else l=null,C=C.nextSibling;d&&m&&(t.setStart(n,r),t.setEnd(o,c),y.setRng(t),e.nodeChanged())}},Gf=function(e){Gs.getForcedRootBlock(e)&&e.on("NodeChange",l(qf,e))},Yf={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},Xf=function(e){var t=e.startContainer,n=e.startOffset;return Mo.isText(t)?0===n?I.some(er.fromDom(t)):I.none():I.from(t.childNodes[n]).map(er.fromDom)},Kf=function(e){var t=e.endContainer,n=e.endOffset;return Mo.isText(t)?n===t.data.length?I.some(er.fromDom(t)):I.none():I.from(t.childNodes[n-1]).map(er.fromDom)},Jf=function(e){return qr(e).fold(o([e]),function(t){return[e].concat(Jf(t))})},Qf=function(e){return Gr(e).fold(o([e]),function(t){return"br"===ir(t)?Fr(t).map(function(t){return[e].concat(Qf(t))}).getOr([]):[e].concat(Qf(t))})},Zf=function(e,t,n,r){var o=n,c=new ao(n,o),l=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Qt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(l[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(ge.ie&&ge.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?c.next():c.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},ed=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0};function nd(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,o;o={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&Yf.isEq(o,t)||e.fire("SelectionChange"),t=o}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!ge.range&&e.selection.isCollapsed()||ed(e)&&!function(t){var i,r;if((r=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(i=r.length;i>=0&&r[i]===n[i];i--);if(-1===i)return n=r,!0}return n=r,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&ed(e)&&("IMG"===e.selection.getNode().nodeName?ye.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,o,c=e.selection;e.initialized&&c&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=c.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),r=[],e.dom.getParent(n,function(e){if(e===o)return!0;r.push(e)}),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}var rd,od=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},id=function(e,t){return n=function(e){return e.inline?od(e.getBody()):{left:0,top:0}}(e),r=function(e){var body=e.getBody();return e.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}}(e),{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=od(e.getContentAreaContainer()),r=function(e){var body=e.getBody(),t=e.getDoc().documentElement,n={left:body.scrollLeft,top:body.scrollTop},r={left:body.scrollLeft||t.scrollLeft,top:body.scrollTop||t.scrollTop};return e.inline?n:r}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:o.top-n.top+r.top};var n,r,o},ad=Mo.isContentEditableFalse,ud=Mo.isContentEditableTrue,cd=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},sd=function(e,t){return function(n){if(function(e){return 0===e.button}(n)){var r=K(t.dom.getParents(n.target),tu(ad,ud)).getOr(null);if(f=t.getBody(),ad(d=r)&&d!==f){var o=t.dom.getPos(r),c=t.getBody(),l=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?c.scrollWidth:l.offsetWidth)-2,e.maxY=(t.inline?c.scrollHeight:l.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var c=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(c,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),c.appendChild(o),c}(t,r,e.width,e.height)}}var f,d}},ld=function(e,t){return function(n){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!ad(t)}(t,(f=t.selection,3===(d=f.getSel().getRangeAt(0).startContainer).nodeType?d.parentNode:d),e.element)){var r=(c=e.element,(l=c.cloneNode(!0)).removeAttribute("data-mce-selected"),l),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact(function(){cd(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}var c,l,f,d;fd(e)}},fd=function(e){e.dragging=!1,e.element=null,cd(e.ghost)},md=function(e){var n,r,o,c,l,f,d={};n=bi.DOM,f=t.document,r=sd(d,e),o=function(e,t){var n=ye.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var o,c,l=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(function(e){return e.element}(e)&&!e.dragging&&l>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var f=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,id(t,r));o=e.ghost,c=t.getBody(),o.parentNode!==c&&c.appendChild(o),function(e,t,n,r,o,c){var l=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(l=t.pageX+n-o),t.pageY+r>c&&(f=t.pageY+r-c),e.style.width=n-l+"px",e.style.height=r-f+"px"}(e.ghost,f,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}}(d,e),c=ld(d,e),l=function(e,t){return function(){e.dragging&&t.fire("dragend"),fd(e)}}(d,e),e.on("mousedown",r),e.on("mousemove",o),e.on("mouseup",c),n.bind(f,"mousemove",o),n.bind(f,"mouseup",l),e.on("remove",function(){n.unbind(f,"mousemove",o),n.unbind(f,"mouseup",l)})},gd=function(e){md(e),function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(ad(n)||ad(e.dom.getContentEditableParent(n)))&&t.preventDefault()})}(e)},hd=function(e){return X(e,function(e,t){return e.concat(function(e){var t=function(t){return map(t,function(t){return(t=Va(t)).node=e,t})};if(Mo.isElement(e))return t(e.getClientRects());if(Mo.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(rd||(rd={}));var pd,vd=function(e,t,n,r,o,c){var l,f,line=0,d=[],m=function(r){var i,c,l;for(l=hd([r]),-1===e&&(l=l.reverse()),i=0;i<l.length;i++)if(c=l[i],!n(c,f)){if(d.length>0&&t(c,Gt.last(d))&&line++,c.line=line,o(c))return!0;d.push(c)}};return(f=Gt.last(c.getClientRects()))?(m(l=c.getNode()),function(e,t,n,r){for(;r=vc(r,e,Ha,t);)if(n(r))return}(e,r,m,l),d):d},bd=l(vd,rd.Up,Wa,$a),yd=l(vd,rd.Down,$a,Wa),xd=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},wd=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Cd=Mo.isContentEditableFalse,Sd=vc,kd=function(e,t){return Math.abs(e.left-t)},Od=function(e,t){return Math.abs(e.right-t)},Td=function(e,t){return e>=t.left&&e<=t.right},Ed=function(e,t){return Gt.reduce(e,function(e,n){var r,o;return r=Math.min(kd(e,t),Od(e,t)),o=Math.min(kd(n,t),Od(n,t)),Td(t,n)?n:Td(t,e)?e:o===r&&Cd(n.node)?n:o<r?n:e})},Nd=function(e,t,n,r){for(;r=Sd(r,e,Ha,t);)if(n(r))return},_d=function(e,t,n){var r,o=hd(function(e){return filter(ie(e.getElementsByTagName("*")),uc)}(e)),c=filter(o,function(rect){return n>=rect.top&&n<=rect.bottom});return(r=Ed(c,t))&&(r=Ed(function(e,t){var n=[],r=function(e,r){var o;return o=filter(hd([r]),function(n){return!e(n,t)}),n=n.concat(o),0===o.length};return n.push(t),Nd(rd.Up,e,l(r,Wa),t.node),Nd(rd.Down,e,l(r,$a),t.node),n}(e,r),t))&&uc(r.node)?function(e,t){return{node:e.node,before:kd(e,t)<Od(e,t)}}(r,t):null},Ad=function(e,t,n){return!n.collapsed&&X(n.getClientRects(),function(n,rect){return n||function(rect,e,t){return e>=rect.left&&e<=rect.right&&t>=rect.top&&t<=rect.bottom}(rect,e,t)},!1)},Dd=Mo.isContentEditableTrue,Rd=Mo.isContentEditableFalse,Bd=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},Md=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t)},Id=function(e,t,n){var r=Tc(1,e.getBody(),t),o=Cu.fromRangeStart(r),c=o.getNode();if(Rd(c))return Bd(1,e,c,!o.isAtEnd(),!1);var l=o.getNode(!0);if(Rd(l))return Bd(1,e,l,!1,!1);var f=e.dom.getParent(o.getNode(),function(e){return Rd(e)||Dd(e)});return Rd(f)?Bd(1,e,f,!1,n):null},zd=function(e,t,n){if(!t||!t.collapsed)return t;var r=Id(e,t,n);return r||t},Pd=function(e){var n=Li(function(){if(!e.removed&&e.getBody().contains(t.document.activeElement)&&e.selection.getRng().collapsed){var n=zd(e,e.selection.getRng(),!1);e.selection.setRng(n)}},0);e.on("focus",function(){n.throttle()}),e.on("blur",function(){n.cancel()})},Ld={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return ge.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Hd=(pd="",function(e){return pd===e}),Fd=function(e){return/^[\r\n\t ]$/.test(e)},Vd=function(e){return!Fd(e)&&!Hd(e)},jd=function(e,t,n){return I.from(n.container()).filter(Mo.isText).exists(function(text){var r=e?0:-1;return t(text.data.charAt(n.offset()+r))})},Ud=l(jd,!0,Fd),Wd=l(jd,!1,Fd),$d=function(e){var t=e.container();return Mo.isText(t)&&0===t.data.length},qd=function(e,t){return function(n){return I.from(xc(e?0:-1,n)).filter(t).isSome()}},Gd=function(e){return"IMG"===e.nodeName&&"block"===kr(er.fromDom(e),"display")},Yd=function(e){return Mo.isContentEditableFalse(e)&&!Mo.isBogusAll(e)},Xd=qd(!0,Gd),Kd=qd(!1,Gd),Jd=qd(!0,Mo.isTable),Qd=qd(!1,Mo.isTable),Zd=qd(!0,Yd),tm=qd(!1,Yd),nm=Mo.isContentEditableTrue,rm=Mo.isContentEditableFalse,om=function(e,t){for(var n=e.getBody();t&&t!==n;){if(nm(t)||rm(t))return t;t=t.parentNode}return null},im=function(e){var t,n=e.getBody(),r=ic(e.getBody(),function(t){return e.dom.isBlock(t)},function(){return Nl(e)}),o="sel-"+e.dom.uniqueId(),c=function(t){t&&e.selection.setRng(t)},l=function(){return e.selection.getRng()},f=function(t,n,o,c){return void 0===c&&(c=!0),e.fire("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(c&&e.selection.scrollIntoView(n,-1===t),r.show(o,n))},d=function(e,t){return t=Tc(e,n,t),-1===e?Cu.fromRangeStart(t):Cu.fromRangeEnd(t)},m=function(e){return wa(e)||Ta(e)||Ea(e)},h=function(e){return m(e.startContainer)||m(e.endContainer)},v=function(n,r){var c,l,m,v,y,w,C,S,k,O,T=e.$,E=e.dom;if(!n)return null;if(n.collapsed){if(!h(n))if(!1===r){if(S=d(-1,n),uc(S.getNode(!0)))return f(-1,S.getNode(!0),!1,!1);if(uc(S.getNode()))return f(-1,S.getNode(),!S.isAtEnd(),!1)}else{if(S=d(1,n),uc(S.getNode()))return f(1,S.getNode(),!S.isAtEnd(),!1);if(uc(S.getNode(!0)))return f(1,S.getNode(!0),!1,!1)}return null}return v=n.startContainer,y=n.startOffset,w=n.endOffset,3===v.nodeType&&0===y&&rm(v.parentNode)&&(v=v.parentNode,y=E.nodeIndex(v),v=v.parentNode),1!==v.nodeType?null:(w===y+1&&(c=v.childNodes[y]),rm(c)?(k=O=c.cloneNode(!0),(C=e.fire("ObjectSelected",{target:c,targetClone:k})).isDefaultPrevented()?null:(l=Qi(er.fromDom(e.getBody()),"#"+o).fold(function(){return T([])},function(e){return T([e.dom()])}),k=C.targetClone,0===l.length&&(l=T('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o)).appendTo(e.getBody()),n=e.dom.createRng(),k===O&&ge.ie?(l.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(k),n.setStartAfter(l[0].firstChild.firstChild),n.setEndAfter(k)):(l.empty().append("").append(k).append(""),n.setStart(l[0].firstChild,1),n.setEnd(l[0].lastChild,0)),l.css({top:E.getPos(c,e.getBody()).y}),l[0].focus(),(m=e.selection.getSel()).removeAllRanges(),m.addRange(n),G(Gi(er.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){Sr(e,"data-mce-selected")}),c.setAttribute("data-mce-selected","1"),t=c,x(),n)):null)},y=function(){t&&(t.removeAttribute("data-mce-selected"),Qi(er.fromDom(e.getBody()),"#"+o).each(zi),t=null),Qi(er.fromDom(e.getBody()),"#"+o).each(zi),t=null},x=function(){r.hide()};return ge.ceFalse&&function(){e.on("mouseup",function(t){var n=l();n.collapsed&&lf.isXYInContentArea(e,t.clientX,t.clientY)&&c(Id(e,n,!1))}),e.on("click",function(t){var n;(n=om(e,t.target))&&(rm(n)&&(t.preventDefault(),e.focus()),nm(n)&&e.dom.isChildOf(n,e.selection.getNode())&&y())}),e.on("blur NewBlock",function(){y()}),e.on("ResizeWindow FullscreenStateChanged",function(){return r.reposition()});var d=function(t,n){var r,o,c=e.dom.getParent(t,e.dom.isBlock),l=e.dom.getParent(n,e.dom.isBlock);return!(!c||!e.dom.isChildOf(c,l)||!1!==rm(om(e,c)))||c&&(r=c,o=l,!(e.dom.getParent(r,e.dom.isBlock)===e.dom.getParent(o,e.dom.isBlock)))&&function(e){var t=jc(e);if(!e.firstChild)return!1;var n=Cu.before(e.firstChild),r=t.next(n);return r&&!Zd(r)&&!tm(r)}(c)};!function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=om(e,n.target);rm(r)&&(t||(n.preventDefault(),v(Md(e,r))))})}(e),e.on("mousedown",function(t){var r,o=t.target;if((o===n||"HTML"===o.nodeName||e.dom.isChildOf(o,n))&&!1!==lf.isXYInContentArea(e,t.clientX,t.clientY))if(r=om(e,o))rm(r)?(t.preventDefault(),v(Md(e,r))):(y(),nm(r)&&t.shiftKey||Ad(t.clientX,t.clientY,e.selection.getRng())||(x(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===uc(o)){y(),x();var l=_d(n,t.clientX,t.clientY);if(l&&!d(t.target,l.node)){t.preventDefault();var m=f(1,l.node,l.before,!1);e.getBody().focus(),c(m)}}}),e.on("keypress",function(t){Ld.modifierPressed(t)||(t.keyCode,rm(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=v(e.range,e.forward))&&(e.range=t)}),e.on("AfterSetSelectionRange",function(t){var n,r=t.range;h(r)||"mcepastebin"===r.startContainer.parentNode.id||x(),n=r.startContainer.parentNode,e.dom.hasClass(n,"mce-offscreen-selection")||y()}),e.on("copy",function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!ge.ie){var c=(n=e.dom.get(o))?n.getElementsByTagName("*")[0]:n;c&&(t.preventDefault(),r.clearData(),r.setData("text/html",c.outerHTML),r.setData("text/plain",c.outerText))}}),gd(e),Pd(e)}(),{showCaret:f,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(Na(t),c(l()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:x,destroy:function(){r.destroy(),t=null}}},am=0,um=2,cm=1,sm=function(e,t){var n=e.length+t.length+2,r=new Array(n),o=new Array(n),c=function(n,r,o,l,script){var d=f(n,r,o,l);if(null===d||d.start===r&&d.diag===r-l||d.end===n&&d.diag===n-o)for(var i=n,m=o;i<r||m<l;)i<r&&m<l&&e[i]===t[m]?(script.push([0,e[i]]),++i,++m):r-n>l-o?(script.push([2,e[i]]),++i):(script.push([1,t[m]]),++m);else{c(n,d.start,o,d.start-d.diag,script);for(var h=d.start;h<d.end;++h)script.push([0,e[h]]);c(d.end,r,d.end-d.diag,l,script)}},l=function(n,r,o,c){for(var l=n;l-r<c&&l<o&&e[l]===t[l-r];)++l;return function(e,t,n){return{start:e,end:t,diag:n}}(n,l,r)},f=function(n,c,f,d){var m=c-n,h=d-f;if(0===m||0===h)return null;var v,y,i,x,w,C=m-h,S=h+m,k=(S%2==0?S:S+1)/2;for(r[1+k]=n,o[1+k]=c+1,v=0;v<=k;++v){for(y=-v;y<=v;y+=2){for(i=y+k,y===-v||y!==v&&r[i-1]<r[i+1]?r[i]=r[i+1]:r[i]=r[i-1]+1,w=(x=r[i])-n+f-y;x<c&&w<d&&e[x]===t[w];)r[i]=++x,++w;if(C%2!=0&&C-v<=y&&y<=C+v&&o[i-C]<=r[i])return l(o[i-C],y+n-f,c,d)}for(y=C-v;y<=C+v;y+=2){for(i=y+k-C,y===C-v||y!==C+v&&o[i+1]<=o[i-1]?o[i]=o[i+1]-1:o[i]=o[i-1],w=(x=o[i]-1)-n+f-y;x>=n&&w>=f&&e[x]===t[w];)o[i]=x--,w--;if(C%2==0&&-v<=y&&y<=v&&o[i]<=r[i+C])return l(o[i],y+n-f,c,d)}}},script=[];return c(0,e.length,0,t.length,script),script},lm=function(e){return Mo.isElement(e)?e.outerHTML:Mo.isText(e)?Yo.encodeRaw(e.data,!1):Mo.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},fm=function(e,html,n){var r=function(html){var e,n,r;for(r=t.document.createElement("div"),e=t.document.createDocumentFragment(),html&&(r.innerHTML=html);n=r.firstChild;)e.appendChild(n);return e}(html);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(r,o)}else e.appendChild(r)},dm=function(e){return filter(map(ie(e.childNodes),lm),function(e){return e.length>0})},mm=function(e,t){var n=map(ie(t.childNodes),lm);return function(e,t){var n=0;G(e,function(e){e[0]===am?n++:e[0]===cm?(fm(t,e[1],n),n++):e[0]===um&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)})}(sm(n,e),t),t},gm=Oi(I.none()),hm=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},pm=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},vm=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},bm=function(e){var n=er.fromTag("body",gm.get().getOrThunk(function(){var e=t.document.implementation.createHTMLDocument("undo");return gm.set(I.some(e)),e}));return ma(n,vm(e)),G(Gi(n,"*[data-mce-bogus]"),Pi),n.dom().innerHTML},ym={createFragmentedLevel:hm,createCompleteLevel:pm,createFromEditor:function(e){var t,content,n;return t=dm(e.getBody()),-1!==(content=(n=ee(t,function(html){var t=$s.trimInternal(e.serializer,html);return t.length>0?[t]:[]})).join("")).indexOf("</iframe>")?hm(n):pm(content)},applyToEditor:function(e,t,n){"fragmented"===t.type?mm(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(!!function(e,t){return vm(e)===vm(t)}(e,t)||function(e,t){return bm(e)===bm(t)}(e,t))}};function xm(e){var t,n,r=this,o=0,data=[],c=0,l=function(){return 0===c},f=function(e){l()&&(r.typing=e)},d=function(t){e.setDirty(t)},m=function(e){f(!1),r.add({},e)},h=function(){r.typing&&(f(!1),r.add())};return e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(h(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&m(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",m),e.on("DragEnd",m),e.on("KeyUp",function(t){var o=t.keyCode;t.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||t.ctrlKey)&&(m(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&r.typing&&!1===ym.isEq(ym.createFromEditor(e),data[0])&&(!1===e.isDirty()&&(d(!0),e.fire("change",{level:data[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(t>=33&&t<=36||t>=37&&t<=40||45===t)r.typing&&m(e);else{var o=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||o||(r.beforeChange(),f(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&m(e)}),e.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||function(e){return"insertText"===e.inputType&&null===e.data}(e))&&m(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:data,typing:!1,beforeChange:function(){l()&&(t=Uu.getUndoBookmark(e.selection))},add:function(n,r){var i,c,f,m=e.settings;if(f=ym.createFromEditor(e),n=n||{},n=Qt.extend(n,f),!1===l()||e.removed)return null;if(c=data[o],e.fire("BeforeAddUndo",{level:n,lastLevel:c,originalEvent:r}).isDefaultPrevented())return null;if(c&&ym.isEq(c,n))return null;if(data[o]&&(data[o].beforeBookmark=t),m.custom_undo_redo_levels&&data.length>m.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,o=data.length}n.bookmark=Uu.getUndoBookmark(e.selection),o<data.length-1&&(data.length=o+1),data.push(n),o=data.length-1;var h={level:n,lastLevel:c,originalEvent:r};return e.fire("AddUndo",h),o>0&&(d(!0),e.fire("change",h)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,f(!1)),o>0&&(t=data[--o],ym.applyToEditor(e,t,!0),d(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<data.length-1&&(t=data[++o],ym.applyToEditor(e,t,!1),d(!0),e.fire("redo",{level:t})),t},clear:function(){data=[],o=0,r.typing=!1,r.data=data,e.fire("ClearUndos")},hasUndo:function(){return o>0||r.typing&&data[0]&&!ym.isEq(ym.createFromEditor(e),data[0])},hasRedo:function(){return o<data.length-1&&!r.typing},transact:function(e){return h(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(t,n){var c,l;r.transact(t)&&(l=data[o].bookmark,c=data[o-1],ym.applyToEditor(e,c,!0),r.transact(n)&&(data[o-1].beforeBookmark=l))}}}var wm=function(e){var t=Gi(e,"br"),n=filter(function(e){for(var t=[],n=e.dom();n;)t.push(er.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),ho);t.length===n.length&&G(n,zi)},Cm=function(e){Ii(e),Bi(e,er.fromHtml('<br data-mce-bogus="1">'))},Sm=function(e){Gr(e).each(function(t){Fr(t).each(function(n){mo(e)&&ho(t)&&mo(n)&&zi(t)})})},km=fs.isEq,Om=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},Tm=function(e,t,n,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,function(t){return!!Om(e,t,n)||t.parentNode===o||!!_m(e,t,n,r,!0)}),_m(e,t,n,r))},Em=function(e,t,n){return!!km(t,n.inline)||!!km(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Nm=function(e,t,n,r,o,c){var l,f,i,d=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(d)if(void 0===d.length){for(l in d)if(d.hasOwnProperty(l)){if(f="attributes"===r?e.getAttrib(t,l):fs.getStyle(e,t,l),o&&!f&&!n.exact)return;if((!o||n.exact)&&!km(f,fs.normalizeStyleValue(e,fs.replaceVars(d[l],c),l)))return}}else for(i=0;i<d.length;i++)if("attributes"===r?e.getAttrib(t,d[i]):fs.getStyle(e,t,d[i]))return n;return n},_m=function(e,t,n,r,o){var c,i,l,f,d=e.formatter.get(n),m=e.dom;if(d&&t)for(i=0;i<d.length;i++)if(c=d[i],Em(e.dom,t,c)&&Nm(m,t,c,"attributes",o,r)&&Nm(m,t,c,"styles",o,r)){if(f=c.classes)for(l=0;l<f.length;l++)if(!e.dom.hasClass(t,f[l]))return;return c}},Am={matchNode:_m,matchName:Em,match:function(e,t,n,r){var o;return r?Tm(e,r,t,n):(r=e.selection.getNode(),!!Tm(e,r,t,n)||!((o=e.selection.getStart())===r||!Tm(e,o,t,n)))},matchAll:function(e,t,n){var r,o=[],c={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var i,l;for(i=0;i<t.length;i++)l=t[i],!c[l]&&_m(e,r,l,n)&&(c[l]=!0,o.push(l))},e.dom.getRoot()),o},canApply:function(e,t){var n,r,i,o,c,l=e.formatter.get(t),f=e.dom;if(l)for(n=e.selection.getStart(),r=fs.getParents(f,n),o=l.length-1;o>=0;o--){if(!(c=l[o].selector)||l[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(f.is(r[i],c))return!0}return!1},matchesUnInheritedFormatSelector:Om},Dm=function(e,t){return e.splitText(t)},Rm={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&Mo.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=Dm(t,n)).previousSibling,o>n?(t=r=Dm(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(Mo.isText(t)&&n>0&&n<t.nodeValue.length&&(t=Dm(t,n),n=0),Mo.isText(r)&&o>0&&o<r.nodeValue.length&&(o=(r=Dm(r,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}}},Bm=function(e,t,n){if(0!==n){var r=e.data.slice(t,t+n),o=t+n>=e.data.length,c=0===t;e.replaceData(t,n,function(content,e,t){return X(content.split(""),function(n,r){return function(e){return-1!==" \f\n\r\t\v".indexOf(e)}(r)||""===r?n.previousCharIsSpace||""===n.str&&e||n.str.length===content.length-1&&t?{previousCharIsSpace:!1,str:n.str+""}:{previousCharIsSpace:!0,str:n.str+" "}:{previousCharIsSpace:!1,str:n.str+r}},{previousCharIsSpace:!1,str:""}).str}(r,c,o))}},Mm=function(e,t){var n,content=e.data.slice(t),r=content.length-(n=content,n.replace(/^\s+/g,"")).length;return Bm(e,t,r)},Im=function(e,t){var n,r,o,c=er.fromDom(e),f=er.fromDom(t);return n=f,r="pre,code",o=l(zr,c),Ji(n,r,o).isSome()},zm=function(e,t){return Pa(t)&&!1===function(e,t){return Mo.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Im(e,t)}(e,t)||function(e){return Mo.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")}(t)||Pm(t)},Pm=Mo.hasAttribute("data-mce-bookmark"),Lm=Mo.hasAttribute("data-mce-bogus"),Hm=Mo.hasAttributeValue("data-mce-bogus","all"),Fm=function(e){return function(e){var t,n,r=0;if(zm(e,e))return!1;if(!(n=e.firstChild))return!0;t=new ao(n,e);do{if(Hm(n))n=t.next(!0);else if(Lm(n))n=t.next();else if(Mo.isBr(n))r++,n=t.next();else{if(zm(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},Vm=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===Cu.isTextPosition(e)&&n===t.parentNode&&r>Cu.before(t).offset()}(t,e)?Cu(t.container(),t.offset()-1):t},jm=function(e){return Pa(e.previousSibling)?I.some((t=e.previousSibling,Mo.isText(t)?Cu(t,t.data.length):Cu.after(t))):e.previousSibling?Zc.lastPositionIn(e.previousSibling):I.none();var t},Um=function(e){return Pa(e.nextSibling)?I.some((t=e.nextSibling,Mo.isText(t)?Cu(t,0):Cu.before(t))):e.nextSibling?Zc.firstPositionIn(e.nextSibling):I.none();var t},Wm=function(e,t){return jm(t).orThunk(function(){return Um(t)}).orThunk(function(){return function(e,t){var n=Cu.before(t.previousSibling?t.previousSibling:t.parentNode);return Zc.prevPosition(e,n).fold(function(){return Zc.nextPosition(e,Cu.after(t))},I.some)}(e,t)})},$m=function(e,t){return Um(t).orThunk(function(){return jm(t)}).orThunk(function(){return function(e,t){return Zc.nextPosition(e,Cu.after(t)).fold(function(){return Zc.prevPosition(e,Cu.before(t))},I.some)}(e,t)})},qm=function(e,t,n){return function(e,t,n){return e?$m(t,n):Wm(t,n)}(e,t,n).map(l(Vm,n))},Gm=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Ym=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(ir(t))},Xm=function(e){if(Fm(e)){var br=er.fromHtml('<br data-mce-bogus="1">');return Ii(e),Bi(e,br),I.some(Cu.before(br.dom()))}return I.none()},Km=function(e,t,n){var r=Fr(e).filter(function(e){return Mo.isText(e.dom())}),o=Vr(e).filter(function(e){return Mo.isText(e.dom())});return zi(e),Qa([r,o,t],function(e,t,r){var o=e.dom(),c=t.dom(),l=o.data.length;return function(e,t,n){var r=$n(e.data).length;e.appendData(t.data),zi(er.fromDom(t)),n&&Mm(e,r)}(o,c,n),r.container()===c?Cu(o,l):r}).orThunk(function(){return n&&(r.each(function(e){return t=e.dom(),n=e.dom().length,content=t.data.slice(0,n),r=content.length-$n(content).length,Bm(t,n-r,r);var t,n,content,r}),o.each(function(e){return Mm(e.dom(),0)})),t})},Jm=function(e,t,n,r){void 0===r&&(r=!0);var o,c=qm(t,e.getBody(),n.dom()),f=Xi(n,l(Ym,e),(o=e.getBody(),function(e){return e.dom()===o})),d=Km(n,c,function(e,element){return vr(e.schema.getTextInlineElements(),ir(element))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(Xm).fold(function(){r&&Gm(e,t,d)},function(n){r&&Gm(e,t,I.some(n))})},Qm=ha,Zm=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Qm||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},eg=function(e){var t;if(e)for(e=(t=new ao(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},tg=function(e){var t=er.fromTag("span");return wr(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Bi(t,er.fromText(Qm)),t},ng=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(Zm(t))Jm(e,!1,er.fromDom(t),n);else{var c=o.getRng(),l=r.getParent(t,r.isBlock),f=function(e){var t=eg(e);return t&&t.nodeValue.charAt(0)===Qm&&t.deleteData(0,1),t}(t);c.startContainer===f&&c.startOffset>0&&c.setStart(f,c.startOffset-1),c.endContainer===f&&c.endOffset>0&&c.setEnd(f,c.endOffset-1),r.remove(t,!0),l&&r.isEmpty(l)&&Cm(er.fromDom(l)),o.setRng(c)}},rg=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)ng(e,t,n);else if(!(t=$u(e.getBody(),o.getStart())))for(;t=r.get("_mce_caret");)ng(e,t,!1)},og=function(e,t,n){var r=e.dom,o=r.getParent(n,l(fs.isTextBlock,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(wm(er.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},ig=function(e,t){return e.appendChild(t),t},ag=function(e,t){var n,r,o=(n=function(e,t){return ig(e,t.cloneNode(!1))},r=t,function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i,e)}(e,function(e){r=n(r,e)}),r);return ig(o,o.ownerDocument.createTextNode(Qm))},ug=function(e){e.on("mouseup keydown",function(t){!function(e,t){var n=e.selection,body=e.getBody();rg(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Qm||rg(e,$u(body,n.getStart())),37!==t&&39!==t||rg(e,$u(body,n.getStart()))}(e,t.keyCode)})},cg=function(e,element){return e.schema.getTextInlineElements().hasOwnProperty(ir(element))&&!Wu(element.dom())&&!Mo.isBogus(element.dom())},sg={},lg=Gt.filter,fg=Gt.each;!function(e,t){var n=sg[e];n||(sg[e]=n=[]),sg[e].push(t)}("pre",function(e){var t,n,r=e.selection.getRng();t=Mo.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),fg(lg(lg(n,t),function(pre){return t(pre.previousSibling)&&-1!==Gt.indexOf(n,pre.previousSibling)}),function(pre){var e,t;e=pre.previousSibling,bn(t=pre).remove(),bn(e).append("<br><br>").append(t.childNodes)}))});var dg=function(e,t){fg(sg[e],function(e){e(t)})},mg=Qt.each,gg=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return mg(e.getAttribs(t),function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))}),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!o(r(t),r(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||us.isBookmarkNode(t)||us.isBookmarkNode(n))}},hg=/^(src|href|style)$/,pg=Qt.each,vg=fs.isEq,bg=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},yg=function(e,t,n){var r,o,c;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],Mo.isElement(r)&&(c=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[o>c?c:o]),Mo.isText(r)&&n&&o>=r.nodeValue.length&&(r=new ao(r,e.getBody()).next()||r),Mo.isText(r)&&!n&&0===o&&(r=new ao(r,e.getBody()).prev()||r),r},xg=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},wg=function(e,t,n,r,o){var c=er.fromDom(t),l=er.fromDom(e.create(r,o)),f=n?Ur(c):jr(c);return Mi(l,f),n?(Ai(c,l),Ri(l,c)):(Di(c,l),Bi(l,c)),l.dom()},Cg=function(e,t,n,r){return!(t=fs.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Sg=function(e,t,n,r,o){var i,c,l,f=e.dom;if(!function(e,t,n){return!!vg(t,n.inline)||!!vg(t,n.block)||(n.selector?Mo.isElement(t)&&e.is(t,n.selector):void 0)}(f,r,t)&&!function(e,t){return t.links&&"A"===e.tagName}(r,t))return!1;if("all"!==t.remove)for(pg(t.styles,function(e,c){e=fs.normalizeStyleValue(f,fs.replaceVars(e,n),c),"number"==typeof c&&(c=e,o=0),(t.remove_similar||!o||vg(fs.getStyle(f,o,c),e))&&f.setStyle(r,c,""),l=1}),l&&""===f.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),pg(t.attributes,function(e,t){var c;if(e=fs.replaceVars(e,n),"number"==typeof t&&(t=e,o=0),!o||vg(f.getAttrib(o,t),e)){if("class"===t&&(e=f.getAttrib(r,t))&&(c="",pg(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(c+=(c?" ":"")+e)}),c))return void f.setAttrib(r,t,c);"class"===t&&r.removeAttribute("className"),hg.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),pg(t.classes,function(e){e=fs.replaceVars(e,n),o&&!f.hasClass(o,e)||f.removeClass(r,e)}),c=f.getAttribs(r),i=0;i<c.length;i++){var d=c[i].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return!1}return"none"!==t.remove?(function(e,t,n){var r,o=t.parentNode,c=e.dom,l=Gs.getForcedRootBlock(e);n.block&&(l?o===c.getRoot()&&(n.list_block&&vg(t,n.list_block)||pg(Qt.grep(t.childNodes),function(t){fs.isValid(e,l,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=xg(c,t,l),c.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):c.isBlock(t)&&!c.isBlock(o)&&(Cg(c,t,!1)||Cg(c,t.firstChild,!0,1)||t.insertBefore(c.create("br"),t.firstChild),Cg(c,t,!0)||Cg(c,t.lastChild,!1,1)||t.appendChild(c.create("br")))),n.selector&&n.inline&&!vg(n.inline,t)||c.remove(t,1)}(e,r,t),!0):void 0},kg={removeFormat:Sg,remove:function(e,t,n,r,o){var c,l,f=e.formatter.get(t),d=f[0],m=!0,h=e.dom,v=e.selection,y=function(r){var c=function(e,t,n,r,o){var c;return pg(fs.getParents(e.dom,t.parentNode).reverse(),function(t){var l;c||"_start"===t.id||"_end"===t.id||(l=Am.matchNode(e,t,n,r,o))&&!1!==l.split&&(c=t)}),c}(e,r,t,n,o);return function(e,t,n,r,o,c,l,f){var d,m,h,v,i,y,x=e.dom;if(n){for(y=n.parentNode,d=r.parentNode;d&&d!==y;d=d.parentNode){for(m=x.clone(d,!1),i=0;i<t.length;i++)if(Sg(e,t[i],f,m,m)){m=0;break}m&&(h&&m.appendChild(h),v||(v=m),h=m)}!c||l.mixed&&x.isBlock(n)||(r=x.split(n,r)),h&&(o.parentNode.insertBefore(h,o),v.appendChild(o))}return r}(e,f,c,r,r,!0,d,n)},x=function(t){var r,i,o,c,l;if(Mo.isElement(t)&&h.getContentEditable(t)&&(c=m,m="true"===h.getContentEditable(t),l=!0),r=Qt.grep(t.childNodes),m&&!l)for(i=0,o=f.length;i<o&&!Sg(e,f[i],n,t,t);i++);if(d.deep&&r.length){for(i=0,o=r.length;i<o;i++)x(r[i]);l&&(m=c)}},w=function(e){var t=h.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return function(e){return us.isBookmarkNode(e)&&Mo.isElement(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),Mo.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),h.remove(t,!0),n},C=function(t){var n,r,o=t.commonAncestorContainer;if(t=Ss(e,t,f,!0),d.split){if(t=Rm.split(t),(n=yg(e,t,!0))!==(r=yg(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r=r.firstChild||r),bg(h,n,r)){var marker=I.from(n.firstChild).getOr(n);return y(wg(h,marker,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void w(!0)}if(bg(h,r,n))return marker=I.from(r.lastChild).getOr(r),y(wg(h,marker,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void w(!1);n=xg(h,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=xg(h,r,"span",{id:"_end","data-mce-type":"bookmark"}),y(n),y(r),n=w(!0),r=w()}else n=r=y(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=h.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=h.nodeIndex(r)+1}Os.walk(h,t,function(t){pg(t,function(t){x(t),Mo.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===fs.getTextDecoration(h,t.parentNode)&&Sg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)r.nodeType?((l=h.createRng()).setStartBefore(r),l.setEndAfter(r),C(l)):C(r);else if("false"!==h.getContentEditable(v.getNode()))v.isCollapsed()&&d.inline&&!h.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var o,c,l,f,d,m,h,v=e.dom,y=e.selection,x=[],w=y.getRng();for(o=w.startContainer,c=w.startOffset,d=o,3===o.nodeType&&(c!==o.nodeValue.length&&(f=!0),d=d.parentNode);d;){if(Am.matchNode(e,d,t,n,r)){m=d;break}d.nextSibling&&(f=!0),x.push(d),d=d.parentNode}if(m)if(f){l=y.getBookmark(),w.collapse(!0);var C=Ss(e,w,e.formatter.get(t),!0);C=Rm.split(C),e.formatter.remove(t,n,C),y.moveToBookmark(l)}else{h=$u(e.getBody(),m);var S=tg(!1).dom(),k=ag(x,S);og(e,S,h||m),ng(e,h,!1),y.setCursorLocation(k,1),v.isEmpty(m)&&v.remove(m)}}(e,t,n,o):(c=Uu.getPersistentBookmark(e.selection,!0),C(v.getRng()),v.moveToBookmark(c),d.inline&&Am.match(e,t,n,v.getStart())&&fs.moveStart(h,v,v.getRng()),e.nodeChanged());else{r=v.getNode();for(var i=0,S=f.length;i<S&&(!f[i].ceFalseOverride||!Sg(e,f[i],n,r,r));i++);}}},Og=Qt.each,Tg=function(e){return e&&1===e.nodeType&&!us.isBookmarkNode(e)&&!Wu(e)&&!Mo.isBogus(e)},Eg=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!us.isBookmarkNode(n))return n}return e},Ng=function(e,t,n){var r,o,c=new gg(e);if(t&&n&&(t=Eg(t,"previousSibling"),n=Eg(n,"nextSibling"),c.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)o=r,r=r.nextSibling,t.appendChild(o);return e.remove(n),Qt.each(Qt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},_g=function(e,filter,t){Og(e.childNodes,function(e){Tg(e)&&(filter(e)&&t(e),e.hasChildNodes()&&_g(e,filter,t))})},Ag=function(e,t){return l(function(t,n){return!(!n||!fs.getStyle(e,n,t))},t)},Dg=function(e,t,n){return l(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),Rg(e,r)},t,n)},Rg=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Bg=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=fs.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Mg=function(e,t,n,r){Og(t,function(t){Og(e.dom.select(t.inline,r),function(r){Tg(r)&&kg.removeFormat(e,t,n,r,t.exact?r:null)}),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Og(e.select(r,n),function(n){Tg(n)&&Og(t.styles,function(t,r){e.setStyle(n,r,"")})})}}(e.dom,t,r)})},Ig=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(Qt.walk(r,l(Bg,e),"childNodes"),Bg(e,r))},zg=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&_g(r,Ag(e,"fontSize"),Dg(e,"backgroundColor",fs.replaceVars(t.styles.backgroundColor,n)))},Pg=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(_g(r,Ag(e,"fontSize"),Dg(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},Lg=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Ng(e,fs.getNonWhiteSpaceSibling(r),r),r=Ng(e,r,fs.getNonWhiteSpaceSibling(r,!0)))},Hg=function(e,t,n,r,o){Am.matchNode(e,o.parentNode,n,r)&&kg.removeFormat(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(c){if(Am.matchNode(e,c,n,r))return kg.removeFormat(e,t,r,o),!0})},Fg=function(e){var n=Cu.fromRangeStart(e),r=Cu.fromRangeEnd(e),o=e.commonAncestorContainer;return Zc.fromPosition(!1,o,r).map(function(c){return!yc(n,r,o)&&yc(n,c,o)?function(e,n,r,o){var c=t.document.createRange();return c.setStart(e,n),c.setEnd(r,o),c}(n.container(),n.offset(),c.container(),c.offset()):e}).getOr(e)},Vg=function(e){return e.collapsed?e:Fg(e)},jg=Qt.each,Ug=function(e,t,n,r){var o,c,l=e.formatter.get(t),f=l[0],d=!r&&e.selection.isCollapsed(),m=e.dom,h=e.selection,v=function(e,t){if(t=t||f,e){if(t.onformat&&t.onformat(e,t,n,r),jg(t.styles,function(t,r){m.setStyle(e,r,fs.replaceVars(t,n))}),t.styles){var o=m.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}jg(t.attributes,function(t,r){m.setAttrib(e,r,fs.replaceVars(t,n))}),jg(t.classes,function(t){t=fs.replaceVars(t,n),m.hasClass(e,t)||m.addClass(e,t)})}},y=function(e,t){var n=!1;return!!f.selector&&(jg(e,function(e){if(!("collapsed"in e&&e.collapsed!==d))return m.is(t,e.selector)&&!Wu(t)?(v(t,e),n=!0,!1):void 0}),n)},x=function(r,o,c,d){var m,h,x=[],w=!0;m=f.inline||f.block,h=r.create(m),v(h),Os.walk(r,o,function(o){var c,C=function(o){var S,k,O,T;if(T=w,S=o.nodeName.toLowerCase(),k=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&r.getContentEditable(o)&&(T=w,w="true"===r.getContentEditable(o),O=!0),fs.isEq(S,"br"))return c=0,void(f.block&&r.remove(o));if(f.wrapper&&Am.matchNode(e,o,t,n))c=0;else{if(w&&!O&&f.block&&!f.wrapper&&fs.isTextBlock(e,S)&&fs.isValid(e,k,m))return o=r.rename(o,m),v(o),x.push(o),void(c=0);if(f.selector){var E=y(l,o);if(!f.inline||E)return void(c=0)}!w||O||!fs.isValid(e,m,S)||!fs.isValid(e,k,m)||!d&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Wu(o)||f.inline&&r.isBlock(o)?(c=0,jg(Qt.grep(o.childNodes),C),O&&(w=T),c=0):(c||(c=r.clone(h,!1),o.parentNode.insertBefore(c,o),x.push(c)),c.appendChild(o))}};jg(o,C)}),!0===f.links&&jg(x,function(e){var t=function(e){"A"===e.nodeName&&v(e,f),jg(Qt.grep(e.childNodes),t)};t(e)}),jg(x,function(o){var c,d=function(e){var t=!1;return jg(e.childNodes,function(e){if(function(e){return e&&1===e.nodeType&&!us.isBookmarkNode(e)&&!Wu(e)&&!Mo.isBogus(e)}(e))return t=e,!1}),t};c=function(e){var t=0;return jg(e.childNodes,function(e){fs.isWhiteSpaceNode(e)||us.isBookmarkNode(e)||t++}),t}(o),!(x.length>1)&&r.isBlock(o)||0!==c?(f.inline||f.wrapper)&&(f.exact||1!==c||(o=function(e){var t,n;return(t=d(e))&&!us.isBookmarkNode(t)&&Am.matchName(r,t,f)&&(n=r.clone(t,!1),v(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(o)),Mg(e,l,n,o),Hg(e,f,t,n,o),zg(r,f,n,o),Pg(r,f,n,o),Lg(r,f,n,o)):r.remove(o,1)})};if("false"!==m.getContentEditable(h.getNode())){if(f){if(r)r.nodeType?y(l,r)||((c=m.createRng()).setStartBefore(r),c.setEndAfter(r),x(m,Ss(e,c,l),0,!0)):x(m,r,0,!0);else if(d&&f.inline&&!m.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,o,c,l,f,text,d=e.selection;l=(r=d.getRng(!0)).startOffset,text=r.startContainer.nodeValue,(o=$u(e.getBody(),d.getStart()))&&(c=eg(o));var m,h,v=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&l>0&&l<text.length&&v.test(text.charAt(l))&&v.test(text.charAt(l-1))?(f=d.getBookmark(),r.collapse(!0),r=Ss(e,r,e.formatter.get(t)),r=Rm.split(r),e.formatter.apply(t,n,r),d.moveToBookmark(f)):(o&&c.nodeValue===Qm?e.formatter.apply(t,n,o):(m=e.getDoc(),h=tg(!0).dom(),c=(o=m.importNode(h,!0)).firstChild,r.insertNode(o),l=1,e.formatter.apply(t,n,o)),d.setCursorLocation(c,l))}(e,t,n);else{var w=e.selection.getNode();e.settings.forced_root_block||!l[0].defaultBlock||m.getParent(w,m.isBlock)||Ug(e,l[0].defaultBlock),e.selection.setRng(Vg(e.selection.getRng())),o=Uu.getPersistentBookmark(e.selection,!0),x(m,Ss(e,h.getRng(),l)),f.styles&&Ig(m,f,n,w),h.moveToBookmark(o),fs.moveStart(m,h,h.getRng()),e.nodeChanged()}dg(t,e)}}else{r=h.getNode();for(var i=0,C=l.length;i<C;i++)if(l[i].ceFalseOverride&&m.is(r,l[i].selector))return void v(r,l[i])}},Wg={applyFormat:Ug},$g=function(e,t,n,r){var o=sr(n.get()),c={},l={},f=filter(fs.getParents(e.dom,t),function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")});fr(r,function(data,t){Qt.each(f,function(n){return e.formatter.matchNode(n,t,{},data.similar)?(-1===o.indexOf(t)&&(G(data.callbacks,function(e){e(!0,{node:n,format:t,parents:f})}),c[t]=data.callbacks),l[t]=data.callbacks,!1):!Am.matchesUnInheritedFormatSelector(e,n,t)&&void 0})});var d=qg(n.get(),l,t,f);n.set(ki({},c,d))},qg=function(e,t,n,r){return gr(e,function(e,o){return!!vr(t,o)||(G(e,function(e){e(!1,{node:n,format:o,parents:r})}),!1)}).t},Gg=function(e,t,n,r,o){return null===t.get()&&function(e,t){var n=Oi({});e.set({}),t.on("NodeChange",function(r){$g(t,r.element,n,e.get())})}(t,e),function(e,t,n,r){var o=e.get();G(t.split(","),function(e){o[e]||(o[e]={similar:r,callbacks:[]}),o[e].callbacks.push(n)}),e.set(o)}(t,n,r,o),{unbind:function(){return function(e,t,n){var r=e.get();G(t.split(","),function(e){r[e].callbacks=filter(r[e].callbacks,function(e){return e!==n}),0===r[e].callbacks.length&&delete r[e]}),e.set(r)}(t,n,r)}}},Yg={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Qt.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Qt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},Xg=Qt.each,Kg=bi.DOM,Jg=function(e,t){var n,r,o,c=t&&t.schema||ii({}),l=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,function(e,t){t.classes.length&&Kg.addClass(e,t.classes.join(" ")),Kg.setAttribs(e,t.attrs)}(t=Kg.create(r.name),r),t},f=function(e,t,n){var r,o,d,m=t.length>0&&t[0],h=m&&m.name;if(d=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=c.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(t&&-1!==Qt.inArray(o,t)?t:o[0])}(e,h))h===d?(o=t[0],t=t.slice(1)):o=d;else if(m)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(r=l(o)).appendChild(e),n&&(r||(r=Kg.create("div")).appendChild(e),Qt.each(n,function(t){var n=l(t);r.insertBefore(n,e)})),f(r,t,o&&o.siblings)};return e&&e.length?(r=e[0],n=l(r),(o=Kg.create("div")).appendChild(f(n,e.slice(1),r.siblings)),o):""},Qg=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Qt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,o,c){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Qt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){var l=c.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},Zg=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Qt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Qt.map(e.split(/(?:~\+|~|\+)/),Qg),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},eh={getCssText:function(e,t){var n,r,o,c,l,f,d="";if(!1===(f=e.settings.preview_styles))return"";"string"!=typeof f&&(f="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var m=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(f=t.preview)?"":(n=t.block||t.inline||"span",(c=Zg(t.selector)).length?(c[0].name||(c[0].name=n),n=t.selector,r=Jg(c,e)):r=Jg([n],e),o=Kg.select(n,r)[0]||r.firstChild,Xg(t.styles,function(e,t){(e=m(e))&&Kg.setStyle(o,t,e)}),Xg(t.attributes,function(e,t){(e=m(e))&&Kg.setAttrib(o,t,e)}),Xg(t.classes,function(e){e=m(e),Kg.hasClass(o,e)||Kg.addClass(o,e)}),e.fire("PreviewFormats"),Kg.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),l=Kg.getStyle(e.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,Xg(f.split(" "),function(t){var n=Kg.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Kg.getStyle(e.getBody(),t,!0),"#ffffff"===Kg.toHex(n).toLowerCase())||"color"===t&&"#000000"===Kg.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===l)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*l+"px"}"border"===t&&n&&(d+="padding:0 2px;"),d+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),Kg.remove(r),d)},parseSelector:Zg,selectorToHtml:function(e,t){return Jg(Zg(e),t)}},nh={toggle:function(e,t,n,r,o){var c=t.get(n);!Am.match(e,n,r,o)||"toggle"in c[0]&&!c[0].toggle?Wg.applyFormat(e,n,r,o):kg.remove(e,n,r,o)}},rh={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)e.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}};function oh(e){var t=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?Qt.each(e,function(e,t){n(t,e)}):(H(r)||(r=[r]),Qt.each(r,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=r))};return n(Yg.get(e.dom)),n(e.settings.formats),{get:function(e){return e?t[e]:t},has:function(e){return vr(t,e)},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}(e),n=Oi(null);return rh.setup(e),ug(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:l(Wg.applyFormat,e),remove:l(kg.remove,e),toggle:l(nh.toggle,e,t),match:l(Am.match,e),matchAll:l(Am.matchAll,e),matchNode:l(Am.matchNode,e),canApply:l(Am.canApply,e),formatChanged:l(Gg,e,n),getCssText:l(eh.getCssText,e)}}var ih,ah=Object.prototype.hasOwnProperty,uh=(ih=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)ah.call(r,o)&&(t[o]=ih(t[o],r[o]))}return t}),ch={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var o,c,i=e.length,l="data-mce-"+r,f=t.url_converter,d=t.url_converter_scope;i--;)void 0!==(c=(o=e[i]).attributes.map[l])?(o.attr(r,c.length>0?c:null),o.attr(l,null)):(c=o.attributes.map[r],"style"===r?c=n.serializeStyle(n.parseStyle(c),o.name):f&&(c=f.call(d,c,r,o.name)),o.attr(r,c.length>0?c:null))}),e.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||(I.from(r.firstChild).exists(function(e){return!ga(e.value)})?r.unwrap():r.remove())}),e.addNodeFilter("noscript",function(e){for(var t,i=e.length;i--;)(t=e[i].firstChild)&&(t.value=Yo.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,o,c,i=e.length,l=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)o=(r=e[i]).firstChild?r.firstChild.value:"","script"===n?((c=r.attr("type"))&&r.attr("type","mce-no/type"===c?null:c.replace(/^mce\-/,"")),"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="// <![CDATA[\n"+l(o)+"\n// ]]>")):"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="\x3c!--\n"+l(o)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,i=e.length;i--;)0===(t=e[i]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){G(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var i=e.length;i--;)e[i].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},sh={process:function(e,n,r){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,r)?function(e,n,r){var o,c,l,f=e.dom;return n=n.cloneNode(!0),(o=t.document.implementation).createHTMLDocument&&(c=o.createHTMLDocument(""),Qt.each("BODY"===n.nodeName?n.childNodes:[n],function(e){c.body.appendChild(c.importNode(e,!0))}),n="BODY"!==n.nodeName?c.body.firstChild:c.body,l=f.doc,f.doc=c),Rl(e,uh(r,{node:n})),l&&(f.doc=l),n}(e,n,r):n}},lh=function(e,t,n){e.addNodeFilter("font",function(e){G(e,function(e){var r=t.parse(e.attr("style")),o=e.attr("color"),c=e.attr("face"),l=e.attr("size");o&&(r.color=o),c&&(r["font-family"]=c),l&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){G(t,function(t){e.attr(t,null)})}(e,["color","face","size"])})})},fh=function(e,t){var n=ui();t.convert_fonts_to_spans&&lh(e,n,Qt.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",function(e){G(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})}(e,n)},dh={register:function(e,t){t.inline_styles&&fh(e,t)}},mh=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new zs("br",1)).shortEnded=!0:r.empty().append(new zs("#text",3)).value=""},gh=function(e){return hh(e,"#text")&&""===e.firstChild.value},hh=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},ph=function(e,t,n,r){return r.isEmpty(t,n,function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)})},vh=function(e,t){return e&&(t[e.name]||"br"===e.name)},bh=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,o){var i,c,l,f,d,m,h,v,y=e.length,x=Qt.extend({},n.getBlockElements()),w=n.getNonEmptyElements(),C=n.getNonEmptyElements();for(x.body=1,i=0;i<y;i++)if(l=(c=e[i]).parent,x[c.parent.name]&&c===l.lastChild){for(d=c.prev;d;){if("span"!==(m=d.name)||"bookmark"!==d.attr("data-mce-type")){if("br"!==m)break;if("br"===m){c=null;break}}d=d.prev}c&&(c.remove(),ph(n,w,C,l)&&(h=n.getElementRule(l.name))&&(h.removeEmpty?l.remove():h.paddEmpty&&mh(t,o,x,l)))}else{for(f=c;l&&l.firstChild===f&&l.lastChild===f&&(f=l,!x[l.name]);)l=l.parent;f===l&&!0!==t.padd_empty_with_br&&((v=new zs("#text",3)).value="",c.replace(v))}}),e.addAttributeFilter("href",function(e){var n,r,o,i=e.length;if(!t.allow_unsafe_link_target)for(;i--;)"a"===(n=e[i]).name&&"_blank"===n.attr("target")&&n.attr("rel",(r=n.attr("rel"),o=void 0,o=r?Qt.trim(r):"",/\b(noopener)\b/g.test(o)?o:function(e){return e.split(" ").filter(function(p){return p.length>0}).concat(["noopener"]).sort().join(" ")}(o)))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var li=new zs("li",1);li.attr("style","list-style-type: none"),t.wrap(li)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,o,c,l,f,d,i=e.length,m=n.getValidClasses();i--;){for(r=(t=e[i]).attr("class").split(" "),l="",o=0;o<r.length;o++)c=r[o],d=!1,(f=m["*"])&&f[c]&&(d=!0),f=m[t.name],!d&&f&&f[c]&&(d=!0),d&&(l&&(l+=" "),l+=c);l.length||(l=null),t.attr("class",l)}})},yh=Qt.makeMap,xh=Qt.each,wh=Qt.explode,Ch=Qt.extend;function Sh(e,t){void 0===t&&(t=ii());var n={},r=[],o={},c={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var l=function(e){var i,t,l;(t=e.name)in n&&((l=o[t])?l.push(e):o[t]=[e]),i=r.length;for(;i--;)(t=r[i].name)in e.attributes.map&&((l=c[t])?l.push(e):c[t]=[e]);return e},f={schema:t,addAttributeFilter:function(e,t){xh(wh(e),function(e){var i;for(i=0;i<r.length;i++)if(r[i].name===e)return void r[i].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){xh(wh(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:l,parse:function(html,f){var d,m,i,h,v,y,x,w,C,S,k,O=[];f=f||{},o={},c={},C=Ch(yh("script,style,head,html,body,title,meta,param"),t.getBlockElements());var T=t.getNonEmptyElements(),E=t.children,N=e.validate,_=function(e){return!1===e?"":!0===e?"p":e}("forced_root_block"in f?f.forced_root_block:e.forced_root_block),A=t.getWhiteSpaceElements(),D=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,B=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/;S=A.hasOwnProperty(f.context)||A.hasOwnProperty(e.root_name);var I=function(e,t){var r,c=new zs(e,t);return e in n&&((r=o[e])?r.push(c):o[e]=[c]),c},z=function(e){var n,r,o,c,l=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((o=n.value.replace(R,"")).length>0)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!l[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}c=n.prev,n.remove(),n=c}};d=Us({validate:N,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(input){var e,output={};for(e in input)"li"!==e&&"p"!==e&&(output[e]=input[e]);return output}(t.getSelfClosingElements()),cdata:function(text){k.append(I("#cdata",4)).value=text},text:function(text,e){var t;S||(text=text.replace(B," "),vh(k.lastChild,C)&&(text=text.replace(D,""))),0!==text.length&&((t=I("#text",3)).raw=!!e,k.append(t).value=text)},comment:function(text){k.append(I("#comment",8)).value=text},pi:function(e,text){k.append(I(e,7)).value=text,z(k)},doctype:function(text){k.append(I("#doctype",10)).value=text,z(k)},start:function(e,n,o){var l,f,d,m,h;if(d=N?t.getElementRule(e):{}){for((l=I(d.outputName||e,1)).attributes=n,l.shortEnded=o,k.append(l),(h=E[k.name])&&E[l.name]&&!h[l.name]&&O.push(l),f=r.length;f--;)(m=r[f].name)in n.map&&((x=c[m])?x.push(l):c[m]=[l]);C[e]&&z(l),o||(k=l),!S&&A[e]&&(S=!0)}},end:function(n){var r,o,text,c,l;if(o=N?t.getElementRule(n):{}){if(C[n]&&!S){if((r=k.firstChild)&&3===r.type)if((text=r.value.replace(D,"")).length>0)r.value=text,r=r.next;else for(c=r.next,r.remove(),r=c;r&&3===r.type;)text=r.value,c=r.next,(0===text.length||M.test(text))&&(r.remove(),r=c),r=c;if((r=k.lastChild)&&3===r.type)if((text=r.value.replace(R,"")).length>0)r.value=text,r=r.prev;else for(c=r.prev,r.remove(),r=c;r&&3===r.type;)text=r.value,c=r.prev,(0===text.length||M.test(text))&&(r.remove(),r=c),r=c}if(S&&A[n]&&(S=!1),o.removeEmpty&&ph(t,T,A,k)&&!k.attributes.map.name&&!k.attr("id"))return l=k.parent,C[k.name]?k.empty().remove():k.unwrap(),void(k=l);o.paddEmpty&&(gh(k)||ph(t,T,A,k))&&mh(e,f,C,k),k=k.parent}}},t);var P=k=new zs(f.context||e.root_name,11);if(d.parse(html),N&&O.length&&(f.context?f.invalid=!0:function(e){var n,r,o,c,f,d,m,h,i,v,y,x,w,C,S,k;for(x=yh("tr,td,th,tbody,thead,tfoot,table"),v=t.getNonEmptyElements(),y=t.getWhiteSpaceElements(),w=t.getTextBlockElements(),C=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(w[r.name]&&"li"===r.parent.name){for(S=r.next;S&&w[S.name];)S.name="li",S.fixed=!0,r.parent.insert(S,r.parent),S=S.next;r.unwrap(r)}else{for(c=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!x[o.name];o=o.parent)c.push(o);if(o&&c.length>1){for(c.reverse(),f=d=l(c[0].clone()),i=0;i<c.length-1;i++){for(t.isValidChild(d.name,c[i].name)?(m=l(c[i].clone()),d.append(m)):m=d,h=c[i].firstChild;h&&h!==c[i+1];)k=h.next,m.append(h),h=k;d=m}ph(t,v,y,f)?o.insert(r,c[0],!0):(o.insert(f,c[0],!0),o.insert(r,f)),o=c[0],(ph(t,v,y,o)||hh(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((S=r.prev)&&("ul"===S.name||"ul"===S.name)){S.append(r);continue}if((S=r.next)&&("ul"===S.name||"ul"===S.name)){S.insert(r,S.firstChild,!0);continue}r.wrap(l(new zs("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(l(new zs("div",1))):C[r.name]?r.empty().remove():r.unwrap()}}}(O)),_&&("body"===P.name||f.isRootContent)&&function(){var n,r,o=P.firstChild,c=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(D,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(R,"")))};if(t.isValidChild(P.name,_.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!C[o.name]&&!o.attr("data-mce-type")?r?r.append(o):((r=I(_,1)).attr(e.forced_root_block_attrs),P.insert(r,o),r.append(o)):(c(r),r=null),o=n;c(r)}}(),!f.invalid){for(w in o){for(x=n[w],v=(m=o[w]).length;v--;)m[v].parent||m.splice(v,1);for(i=0,h=x.length;i<h;i++)x[i](m,w,f)}for(i=0,h=r.length;i<h;i++)if((x=r[i]).name in c){for(v=(m=c[x.name]).length;v--;)m[v].parent||m.splice(v,1);for(v=0,y=x.callbacks.length;v<y;v++)x.callbacks[v](m,x.name,f)}}return P}};return bh(f,e),dh.register(f,e),f}var kh=function(e,t,n){-1===Qt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var i=e.length;i--;)e[i].attr(t,null)}),t.push(n))},Oh=function(e,t,n){var html=pa(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Co(er.fromDom(t))?html:Qt.trim(html)},Th=function(e,html,t){var n=t.selection?uh({forced_root_block:!1},t):t,r=e.parse(html,n);return ch.trimTrailingBr(r),r},Eh=function(e,t,n,r,o){return function(e,t,content){return!t.no_events&&e?Bl(e,uh(t,{content:content})).content:content}(e,o,function(e,t,n){return Js(e,t).serialize(n)}(t,n,r))};function Nh(e,t){var n=function(e,t){var n,r,o,c=["data-mce-selected"];return n=t&&t.dom?t.dom:bi.DOM,r=t&&t.schema?t.schema:ii(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,o=Sh(e,r),ch.register(o,e,n),{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(c,l){var f=uh({format:"html"},l||{}),d=sh.process(t,c,f),html=Oh(n,d,f),m=Th(o,html,f);return"tree"===f.format?m:Eh(t,e,r,m,f)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:l(kh,o,c),getTempAttrs:function(){return c}}}(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function _h(e){return{getBookmark:l(us.getBookmark,e),moveToBookmark:l(us.moveToBookmark,e)}}!function(e){e.isBookmarkNode=us.isBookmarkNode}(_h||(_h={}));var Ah,Dh=_h,Rh=Mo.isContentEditableFalse,Bh=Mo.isContentEditableTrue,Mh=function(e,n){var r,o,c,l,f,d,m,h,v,y,x,w,C,S,k,O,T,E=n.dom,N=Qt.each,_=n.getDoc(),A=t.document,D=Math.abs,R=Math.round,B=n.getBody();l={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var M=function(e){return e&&("IMG"===e.nodeName||n.dom.is(e,"figure.image"))},I=function(e){var t=e.target;(function(e,t){return M(e.target)&&!Ad(e.clientX,e.clientY,t)})(e,n.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),n.selection.select(t))},z=function(e){return n.dom.is(e,"figure.image")?e.querySelector("img"):e},P=function(e){var t=n.settings.object_resizing;return!1!==t&&!ge.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&Mr(er.fromDom(e),t))},L=function(e){var t,l,N,_;t=e.screenX-d,l=e.screenY-m,S=t*f[2]+y,k=l*f[3]+x,S=S<5?5:S,k=k<5?5:k,(M(r)&&!1!==n.settings.resize_img_proportional?!Ld.modifierPressed(e):Ld.modifierPressed(e)||M(r)&&f[2]*f[3]!=0)&&(D(t)>D(l)?(k=R(S*w),S=R(k/w)):(S=R(k/w),k=R(S*w))),E.setStyles(z(o),{width:S,height:k}),N=(N=f.startPos.x+t)>0?N:0,_=(_=f.startPos.y+l)>0?_:0,E.setStyles(c,{left:N,top:_,display:"block"}),c.innerHTML=S+" &times; "+k,f[2]<0&&o.clientWidth<=S&&E.setStyle(o,"left",h+(y-S)),f[3]<0&&o.clientHeight<=k&&E.setStyle(o,"top",v+(x-k)),(t=B.scrollWidth-O)+(l=B.scrollHeight-T)!=0&&E.setStyles(c,{left:N-t,top:_-l}),C||(Pl(n,r,y,x),C=!0)},H=function(){C=!1;var e=function(e,t){t&&(r.style[e]||!n.schema.isValid(r.nodeName.toLowerCase(),e)?E.setStyle(z(r),e,t):E.setAttrib(z(r),e,t))};e("width",S),e("height",k),E.unbind(_,"mousemove",L),E.unbind(_,"mouseup",H),A!==_&&(E.unbind(A,"mousemove",L),E.unbind(A,"mouseup",H)),E.remove(o),E.remove(c),F(r),Ll(n,r,S,k),E.setAttrib(r,"style",E.getAttrib(r,"style")),n.nodeChanged()},F=function(e){var t,C,D,R,rect;V(),W(),t=E.getPos(e,B),h=t.x,v=t.y,rect=e.getBoundingClientRect(),C=rect.width||rect.right-rect.left,D=rect.height||rect.bottom-rect.top,r!==e&&(r=e,S=k=0),R=n.fire("ObjectSelected",{target:e}),P(e)&&!R.isDefaultPrevented()?N(l,function(e,t){var n;(n=E.get("mceResizeHandle"+t))&&E.remove(n),n=E.add(B,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===ge.ie&&(n.contentEditable=!1),E.bind(n,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),function(t){d=t.screenX,m=t.screenY,y=z(r).clientWidth,x=z(r).clientHeight,w=x/y,f=e,e.startPos={x:C*e[0]+h,y:D*e[1]+v},O=B.scrollWidth,T=B.scrollHeight,o=r.cloneNode(!0),E.addClass(o,"mce-clonedresizable"),E.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,E.setStyles(o,{left:h,top:v,margin:0}),o.removeAttribute("data-mce-selected"),B.appendChild(o),E.bind(_,"mousemove",L),E.bind(_,"mouseup",H),A!==_&&(E.bind(A,"mousemove",L),E.bind(A,"mouseup",H)),c=E.add(B,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+x)}(t)}),e.elm=n,E.setStyles(n,{left:C*e[0]+h-n.offsetWidth/2,top:D*e[1]+v-n.offsetHeight/2})}):V(),r.setAttribute("data-mce-selected","1")},V=function(){var e,t;for(e in W(),r&&r.removeAttribute("data-mce-selected"),l)(t=E.get("mceResizeHandle"+e))&&(E.unbind(t),E.remove(t))},j=function(t){var r,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};C||n.removed||(N(E.select("img[data-mce-selected],hr[data-mce-selected]"),function(img){img.removeAttribute("data-mce-selected")}),r="mousedown"===t.type?t.target:e.getNode(),o(r=E.$(r).closest("table,img,figure.image,hr")[0],B)&&($(),o(e.getStart(!0),r)&&o(e.getEnd(!0),r))?F(r):V())},U=function(e){return Rh(function(e,t){for(;t&&t!==e;){if(Bh(t)||Rh(t))return t;t=t.parentNode}return null}(n.getBody(),e))},W=function(){for(var e in l){var t=l[e];t.elm&&(E.unbind(t.elm),delete t.elm)}},$=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return n.on("init",function(){$(),ge.ie&&ge.ie>=11&&(n.on("mousedown click",function(e){var t=e.target,r=t.nodeName;C||!/^(TABLE|IMG|HR)$/.test(r)||U(t)||(2!==e.button&&n.selection.select(t,"TABLE"===r),"mousedown"===e.type&&n.nodeChanged())}),n.dom.bind(B,"mscontrolselect",function(e){var t=function(e){ye.setEditorTimeout(n,function(){n.selection.select(e)})};if(U(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}));var e=ye.throttle(function(e){n.composing||j(e)});n.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),n.on("keyup compositionend",function(t){r&&"TABLE"===r.nodeName&&e(t)}),n.on("hide blur",V),n.on("contextmenu",I)}),n.on("remove",W),{isResizable:P,showResizeRect:F,hideResizeRect:V,updateResizeRect:j,destroy:function(){r=o=null}}},Ih=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},zh=function(e,t,n){var r,o,c,l,f=e.dom,d=f.getRoot(),m=0;if(!function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()}(e,t,n)&&Mo.isElement(t)){if(!1===n&&(m=t.offsetHeight),"BODY"!==d.nodeName){var h=e.selection.getScrollContainer();if(h)return r=Ih(t).y-Ih(h).y+m,l=h.clientHeight,void((r<(c=h.scrollTop)||r+25>c+l)&&(h.scrollTop=r<c?r:r-l+25))}o=f.getViewPort(e.getWin()),r=f.getPos(t).y+m,c=o.y,l=o.h,(r<o.y||r+25>c+l)&&e.getWin().scrollTo(0,r<c?r:r-l+25)}},Ph=function(e,t){head(xu.fromRangeStart(t).getClientRects()).each(function(t){var n,r,o=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),c={x:qa(n=o,r=t),y:Ga(n,r)};!function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)}(e,0!==c.x?c.x>0?c.x+4:c.x-4:0,0!==c.y?c.y>0?c.y+4:c.y-4:0)})},Lh=function(e){return Mo.isContentEditableTrue(e)||Mo.isContentEditableFalse(e)},Hh={fromPoint:function(e,t,n){var r,o,c=n;if(c.caretPositionFromPoint)(o=c.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(c.body.createTextRange){r=c.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=function(e,t,n){var element,r,o;if(element=n.elementFromPoint(e,t),r=n.body.createTextRange(),element&&"HTML"!==element.tagName||(element=n.body),r.moveToElementText(element),(o=(o=Qt.toArray(r.getClientRects())).sort(function(a,b){return(a=Math.abs(Math.max(a.top-t,a.bottom-t)))-(b=Math.abs(Math.max(b.top-t,b.bottom-t)))})).length>0){t=(o[0].bottom+o[0].top)/2;try{return r.moveToPoint(e,t),r.collapse(!0),r}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Mo.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,Lh))?null:e}(r,n.body)}return r}},Fh=function(e,t){return map(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},Vh=function(e,n){var r=(n||t.document).createDocumentFragment();return G(e,function(element){r.appendChild(element.dom())}),er.fromDom(r)},jh=Er("element","width","rows"),Uh=Er("element","cells"),Wh=Er("x","y"),$h=function(td,e){var t=parseInt(Cr(td,e),10);return isNaN(t)?1:t},qh=function(table,e,t){var n=table.rows();return!!(n[t]?n[t].cells():[])[e]},Gh=function(e){return X(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Yh=function(table,element){for(var e=table.rows(),t=0;t<e.length;t++)for(var n=e[t].cells(),r=0;r<n.length;r++)if(zr(n[r],element))return I.some(Wh(r,t));return I.none()},Xh=function(table,e,t,n,r){for(var o=[],c=table.rows(),l=t;l<=r;l++){var f=c[l].cells(),d=e<n?f.slice(e,n+1):f.slice(n,e+1);o.push(Uh(c[l].element(),d))}return o},Kh=function(e){var table=jh(fa(e),0,[]);return G(Gi(e,"tr"),function(tr,e){G(Gi(tr,"td,th"),function(td,t){!function(table,e,t,tr,td){for(var n=$h(td,"rowspan"),r=$h(td,"colspan"),o=table.rows(),c=t;c<t+n;c++){o[c]||(o[c]=Uh(da(tr),[]));for(var l=e;l<e+r;l++)o[c].cells()[l]=c===t&&l===e?td:fa(td)}}(table,function(table,e,t){for(;qh(table,e,t);)e++;return e}(table,t,e),e,tr,td)})}),jh(table.element(),Gh(table.rows()),table.rows())},Jh=function(table){return function(table,e){var t=fa(table.element()),n=er.fromTag("tbody");return Mi(n,e),Bi(t,n),t}(table,function(table){return map(table.rows(),function(e){var t=map(e.cells(),function(e){var td=da(e);return Sr(td,"colspan"),Sr(td,"rowspan"),td}),tr=fa(e.element());return Mi(tr,t),tr})}(table))},Qh=function(table,e,t){return Yh(table,e).bind(function(e){return Yh(table,t).map(function(t){return function(table,e,t){var n=e.x(),r=e.y(),o=t.x(),c=t.y(),l=r<c?Xh(table,n,r,o,c):Xh(table,n,c,o,r);return jh(table.element(),Gh(l),l)}(table,e,t)})})},Zh=function(e){var t=[];if(e)for(var i=0;i<e.rangeCount;i++)t.push(e.getRangeAt(i));return t},ep=Zh,tp=function(e){return ee(e,function(e){var t=Ya(e);return t?[er.fromDom(t)]:[]})},np=function(e){return Zh(e).length>1},op=function(e){return filter(tp(e),wo)},ip=function(e){return Gi(e,"td[data-mce-selected],th[data-mce-selected]")},ap=function(e,element){var t=ip(element),n=op(e);return t.length>0?t:n},up=ap,cp=function(e){return ap(ep(e.selection.getSel()),er.fromDom(e.getBody()))},sp=function(e,t){return K(e,function(e){return"li"===ir(e)&&function(e,t){return Qa([Xf(t),Kf(t)],function(t,n){var r=K(Jf(e),l(zr,t)),o=K(Qf(e),l(zr,n));return r.isSome()&&o.isSome()}).getOr(!1)}(e,t)}).fold(o([]),function(li){return function(e){return K(e,function(e){return"ul"===ir(e)||"ol"===ir(e)})}(e).map(function(e){return[er.fromTag("li"),er.fromTag(ir(e))]}).getOr([])})},lp=function(e,t){var n=er.fromDom(t.commonAncestorContainer),r=Vf(n,e),c=filter(r,function(e){return go(e)||fo(e)}),l=sp(r,t),f=c.concat(l.length?l:function(e){return bo(e)?Hr(e).filter(vo).fold(o([]),function(t){return[e,t]}):vo(e)?[e]:[]}(n));return map(f,fa)},fp=function(){return Vh([])},dp=function(e,t){return n=er.fromDom(t.cloneContents()),r=lp(e,t),o=X(r,function(e,t){return Bi(t,e),t},n),r.length>0?Vh([o]):o;var n,r,o},mp=function(e,t){return(n=e,r=t[0],Ji(r,"table",l(zr,n))).bind(function(e){var n=t[0],r=t[t.length-1],o=Kh(e);return Qh(o,n,r).map(function(e){return Vh([Jh(e)])})}).getOrThunk(fp);var n,r},gp=function(e,t){var n=up(t,e);return n.length>0?mp(e,n):function(e,t){return t.length>0&&t[0].collapsed?fp():dp(e,t[0])}(e,t)},hp=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return function(e){return I.from(e.selection.getRng()).map(function(t){var n=e.dom.add(e.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),text=pa(n.innerText);return e.dom.remove(n),text}).getOr("")}(e);t.getInner=!0;var content=function(e,t){var n,r=e.selection.getRng(),o=e.dom.create("body"),c=e.selection.getSel(),l=Fh(e,ep(c));return(n=t.contextual?gp(er.fromDom(e.getBody()),l).dom():r.cloneContents())&&o.appendChild(n),e.selection.serializer.serialize(o,t)}(e,t);return"tree"===t.format?content:(t.content=e.selection.isCollapsed()?"":content,e.fire("GetContent",t),t.content)},pp=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},vp=function(e,t,n){return pp(e,t,function(e){return e.nodeName===n})},bp=function(e){return e&&"TABLE"===e.nodeName},yp=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},xp=function(e,t){return wa(e)&&!1===pp(e,t,Wu)},wp=function(e,t,n){for(var r=new ao(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Mo.isBr(t))return!0},Cp=function(e,t,n,r,o){var c,l,f,d,body=e.getRoot(),m=e.schema.getNonEmptyElements();if(f=e.getParent(o.parentNode,e.isBlock)||body,r&&Mo.isBr(o)&&t&&e.isEmpty(f))return I.some(xu(o.parentNode,e.nodeIndex(o)));for(c=new ao(o,f);d=c[r?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||xp(d,body))return I.none();if(Mo.isText(d)&&d.nodeValue.length>0)return!1===vp(d,body,"A")?I.some(xu(d,r?d.nodeValue.length:0)):I.none();if(e.isBlock(d)||m[d.nodeName.toLowerCase()])return I.none();l=d}return n&&l?I.some(xu(l,0)):I.none()},Sp=function(e,t,n,r){var o,c,l,f,d,m,h,body=e.getRoot(),v=!1;if(o=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],h=Mo.isElement(o)&&c===o.childNodes.length,d=e.schema.getNonEmptyElements(),m=n,wa(o))return I.none();if(Mo.isElement(o)&&c>o.childNodes.length-1&&(m=!1),Mo.isDocument(o)&&(o=body,c=0),o===body){if(m&&(f=o.childNodes[c>0?c-1:0])){if(wa(f))return I.none();if(d[f.nodeName]||bp(f))return I.none()}if(o.hasChildNodes()){if(c=Math.min(!m&&c>0?c-1:c,o.childNodes.length-1),o=o.childNodes[c],c=Mo.isText(o)&&h?o.data.length:0,!t&&o===body.lastChild&&bp(o))return I.none();if(function(body,e){for(;e&&e!==body;){if(Mo.isContentEditableFalse(e))return!0;e=e.parentNode}return!1}(body,o)||wa(o))return I.none();if(o.hasChildNodes()&&!1===bp(o)){f=o,l=new ao(o,body);do{if(Mo.isContentEditableFalse(f)||wa(f)){v=!1;break}if(Mo.isText(f)&&f.nodeValue.length>0){c=m?0:f.nodeValue.length,o=f,v=!0;break}if(d[f.nodeName.toLowerCase()]&&!yp(f)){c=e.nodeIndex(f),o=f.parentNode,m||c++,v=!0;break}}while(f=m?l.next():l.prev())}}}return t&&(Mo.isText(o)&&0===c&&Cp(e,h,t,!0,o).each(function(e){o=e.container(),c=e.offset(),v=!0}),Mo.isElement(o)&&((f=o.childNodes[c])||(f=o.childNodes[c-1]),!f||!Mo.isBr(f)||function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t}(f,"A")||wp(e,f,!1)||wp(e,f,!0)||Cp(e,h,t,!0,f).each(function(e){o=e.container(),c=e.offset(),v=!0}))),m&&!t&&Mo.isText(o)&&c===o.nodeValue.length&&Cp(e,h,t,!1,o).each(function(e){o=e.container(),c=e.offset(),v=!0}),v?I.some(xu(o,c)):I.none()},kp={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),o=xu.fromRangeStart(t);return Sp(e,n,!0,r).each(function(e){n&&xu.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Sp(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Yf.isEq(t,r)?I.none():I.some(r)}},Op=function(text){return 0===text.dom().length?(zi(text),I.none()):I.some(text)},Tp=function(e,content,t){if((t=function(e,content){return(e=e||{format:"html"}).set=!0,e.selection=!0,e.content=content,e}(t,content)).no_events||!(t=e.fire("BeforeSetContent",t)).isDefaultPrevented()){var n=e.selection.getRng();!function(e,t){var n=I.from(t.firstChild).map(er.fromDom),r=I.from(t.lastChild).map(er.fromDom);e.deleteContents(),e.insertNode(t);var o=n.bind(Fr).filter(cr).bind(Op),c=r.bind(Vr).filter(cr).bind(Op);Qa([o,n.filter(cr)],function(e,t){var n,data;n=t.dom(),data=e.dom().data,n.insertData(0,data),zi(e)}),Qa([c,r.filter(cr)],function(t,n){var r=n.dom().length;n.dom().appendData(t.dom().data),e.setEnd(n.dom(),r),zi(t)}),e.collapse(!1)}(n,n.createContextualFragment(t.content)),e.selection.setRng(n),Ph(e,n),t.no_events||e.fire("SetContent",t)}else e.fire("SetContent",t)},Ep=function(e,t,n,r,o){var c=n?t.startContainer:t.endContainer,l=n?t.startOffset:t.endOffset;return I.from(c).map(er.fromDom).map(function(e){return r&&t.collapsed?e:$r(e,o(e,l)).getOr(e)}).bind(function(e){return ur(e)?I.some(e):Hr(e)}).map(function(e){return e.dom()}).getOr(e)},Np=function(e,t,n){return Ep(e,t,!0,n,function(e,t){return Math.min(e.dom().childNodes.length,t)})},_p=function(e,t,n){return Ep(e,t,!1,n,function(e,t){return t>0?t-1:t})},Ap=function(e,t){for(var n=e;e&&Mo.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Dp=function(e,t,n){if(e&&e.hasOwnProperty(t)){var r=filter(e[t],function(e){return e!==n});0===r.length?delete e[t]:e[t]=r}},Rp=function(e){return!!e.select},Bp=function(e){return!(!e||!e.ownerDocument)&&Pr(er.fromDom(e.ownerDocument),er.fromDom(e))},Mp=function(e,t,n,r){var o,c,l,f,d=function(e,t){var n,r;return{selectorChangedWithUnbind:function(o,c){return n||(n={},r={},t.on("NodeChange",function(t){var o=t.element,c=e.getParents(o,null,e.getRoot()),l={};Qt.each(n,function(t,n){Qt.each(c,function(o){if(e.is(o,n))return r[n]||(Qt.each(t,function(e){e(!0,{node:o,selector:n,parents:c})}),r[n]=t),l[n]=t,!1})}),Qt.each(r,function(e,t){l[t]||(delete r[t],Qt.each(e,function(e){e(!1,{node:o,selector:t,parents:c})}))})})),n[o]||(n[o]=[]),n[o].push(c),{unbind:function(){Dp(n,o,c),Dp(r,o,c)}}}}}(e,r).selectorChangedWithUnbind,m=function(content,e){return Tp(r,content,e)},h=function(e){var t=y();t.collapse(!!e),x(t)},v=function(){return t.getSelection?t.getSelection():t.document.selection},y=function(){var n,o,c,d,m=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(null==(d=t.document))return null;if(void 0!==r.bookmark&&!1===Nl(r)){var h=xl.getRng(r);if(h.isSome())return h.map(function(e){return Fh(r,[e])[0]}).getOr(d.createRange())}try{(n=v())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():d.createRange())}catch(e){}return(o=Fh(r,[o])[0])||(o=d.createRange?d.createRange():d.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(c=e.getRoot(),o.setStart(c,0),o.setEnd(c,0)),l&&f&&(0===m(o.START_TO_START,o,l)&&0===m(o.END_TO_END,o,l)?o=f:(l=null,f=null)),o},x=function(e,t){var n,o;if(function(e){return!!e&&(!!Rp(e)||Bp(e.startContainer)&&Bp(e.endContainer))}(e)){var c=Rp(e)?e:null;if(c){f=null;try{c.select()}catch(e){}}else{if(n=v(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){f=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),l=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||ge.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},w=function(){var t,n,r=v();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},C={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:h,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),x(o),h(!1)):(Zf(e,o,r.getBody(),!0),x(o))},getContent:function(e){return hp(r,e)},setContent:m,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,content){return function(e,t,content){return I.from(t).map(function(t){var n=e.nodeIndex(t),r=e.createRng();return r.setStart(t.parentNode,n),r.setEnd(t.parentNode,n+1),content&&(Zf(e,r,t,!0),Zf(e,r,t,!1)),r})}(e,t,content).each(x),t},isCollapsed:function(){var e=y(),t=v();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:w,setNode:function(t){return m(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=y())?(o=t.startContainer,c=t.endContainer,l=t.startOffset,f=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===c&&f-l<2&&o.hasChildNodes()&&(n=o.childNodes[l]),3===o.nodeType&&3===c.nodeType&&(o=o.length===l?Ap(o.nextSibling,!0):o.parentNode,c=0===f?Ap(c.previousSibling,!1):c.parentNode,o&&o===c))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,c,l,f},getSel:v,setRng:x,getRng:y,getStart:function(e){return Np(r.getBody(),y(),e)},getEnd:function(e){return _p(r.getBody(),y(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var o,c,l=[];if(c=e.getRoot(),n=e.getParent(n||Np(c,t,t.collapsed),e.isBlock),r=e.getParent(r||_p(c,t,t.collapsed),e.isBlock),n&&n!==c&&l.push(n),n&&r&&n!==r){o=n;for(var f=new ao(n,c);(o=f.next())&&o!==r;)e.isBlock(o)&&l.push(o)}return r&&n!==r&&r!==c&&l.push(r),l}(e,y(),t,n)},normalize:function(){var t=y(),n=v();if(!np(n)&&ed(r)){var o=kp.normalize(e,t);return o.each(function(e){x(e,w())}),o.getOr(t)}return t},selectorChanged:function(e,t){return d(e,t),C},selectorChangedWithUnbind:d,getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return zh(r,e,t)},placeCaretAt:function(e,t){return x(Hh.fromPoint(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=y();return e.collapsed?Cu.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=l=f=null,c.destroy()}};return o=Dh(C),c=Mh(C,r),C.bookmarkManager=o,C.controlSelection=c,C},Ip=Mo.isText,zp=function(e){return Ip(e)&&e.data[0]===ha},Pp=function(e){return Ip(e)&&e.data[e.data.length-1]===ha},Lp=function(e){return e.ownerDocument.createTextNode(ha)},Hp=function(e,t){return e?function(e){if(Ip(e.previousSibling))return Pp(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(ha),e.previousSibling);if(Ip(e))return zp(e)?e:(e.insertData(0,ha),e);var t=Lp(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(Ip(e.nextSibling))return zp(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,ha),e.nextSibling);if(Ip(e))return Pp(e)?e:(e.appendData(ha),e);var t=Lp(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Fp=l(Hp,!0),Vp=l(Hp,!1),jp=function(e,t){return Mo.isText(e.container())?Hp(t,e.container()):Hp(t,e.getNode())},Up=function(e,t){var n=t.get();return n&&e.container()===n&&xa(n)},Wp=function(e,t){return t.fold(function(element){tc.remove(e.get());var text=Fp(element);return e.set(text),I.some(Cu(text,text.length-1))},function(element){return Zc.firstPositionIn(element).map(function(t){if(Up(t,e))return Cu(e.get(),1);tc.remove(e.get());var text=jp(t,!0);return e.set(text),Cu(text,1)})},function(element){return Zc.lastPositionIn(element).map(function(t){if(Up(t,e))return Cu(e.get(),e.get().length-1);tc.remove(e.get());var text=jp(t,!1);return e.set(text),Cu(text,text.length-1)})},function(element){tc.remove(e.get());var text=Vp(element);return e.set(text),I.some(Cu(text,1))})},$p=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,qp=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?xa(n)?Mo.isText(n.nextSibling)?Cu(n.nextSibling,0):Cu.after(n):Sa(t)?Cu(n,r+1):t:xa(n)?Mo.isText(n.previousSibling)?Cu(n.previousSibling,n.previousSibling.data.length):Cu.before(n):ka(t)?Cu(n,r-1):t},Gp={isInlineTarget:function(e,t){var n=tf(e,"inline_boundaries_selector").getOr("a[href],code");return Mr(er.fromDom(t),n)},findRootInline:function(e,t,n){var r=function(e,t,n){return filter(bi.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return I.from(r[r.length-1])},isRtl:function(element){return"rtl"===bi.DOM.getStyle(element,"direction",!0)||(text=element.textContent,$p.test(text));var text},isAtZwsp:function(e){return Sa(e)||ka(e)},normalizePosition:qp,normalizeForwards:l(qp,!0),normalizeBackwards:l(qp,!1),hasSameParentBlock:function(e,t,n){var r=bc(t,e),o=bc(n,e);return r&&r===o}},Yp=function(e,t){for(var i=0;i<e.length;i++){var n=e[i].apply(null,t);if(n.isSome())return n}return I.none()},Xp=nl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Kp=function(e,t){var n=bc(t,e);return n||e},Jp=function(e,t,n){var r=Gp.normalizeForwards(n),o=Kp(t,r.container());return Gp.findRootInline(e,o,r).fold(function(){return Zc.nextPosition(o,r).bind(l(Gp.findRootInline,e,o)).map(function(e){return Xp.before(e)})},I.none)},Qp=function(e,t){return null===$u(e,t)},Zp=function(e,t,n){return Gp.findRootInline(e,t,n).filter(l(Qp,t))},ev=function(e,t,n){var r=Gp.normalizeBackwards(n);return Zp(e,t,r).bind(function(e){return Zc.prevPosition(e,r).isNone()?I.some(Xp.start(e)):I.none()})},tv=function(e,t,n){var r=Gp.normalizeForwards(n);return Zp(e,t,r).bind(function(e){return Zc.nextPosition(e,r).isNone()?I.some(Xp.end(e)):I.none()})},nv=function(e,t,n){var r=Gp.normalizeBackwards(n),o=Kp(t,r.container());return Gp.findRootInline(e,o,r).fold(function(){return Zc.prevPosition(o,r).bind(l(Gp.findRootInline,e,o)).map(function(e){return Xp.after(e)})},I.none)},rv=function(e){return!1===Gp.isRtl(iv(e))},ov=function(e,t,n){return Yp([Jp,ev,tv,nv],[e,t,n]).filter(rv)},iv=function(e){return e.fold(c,c,c,c)},av=function(e){return e.fold(o("before"),o("start"),o("end"),o("after"))},uv=function(e){return e.fold(Xp.before,Xp.before,Xp.after,Xp.after)},cv=function(e,t,n,r,o,c){return Qa([Gp.findRootInline(t,n,r),Gp.findRootInline(t,n,o)],function(t,r){return t!==r&&Gp.hasSameParentBlock(n,t,r)?Xp.after(e?t:r):c}).getOr(c)},sv=function(e,t){return e.fold(o(!0),function(e){return r=t,!(av(n=e)===av(r)&&iv(n)===iv(r));var n,r})},lv=function(e,t){return e?t.fold(r(I.some,Xp.start),I.none,r(I.some,Xp.after),I.none):t.fold(I.none,r(I.some,Xp.before),I.none,r(I.some,Xp.end))},fv=function(e,t,n,r){var o=Gp.normalizePosition(e,r),c=ov(t,n,o);return ov(t,n,o).bind(l(lv,e)).orThunk(function(){return function(e,t,n,r,o){var c=Gp.normalizePosition(e,o);return Zc.fromPosition(e,n,c).map(l(Gp.normalizePosition,e)).fold(function(){return r.map(uv)},function(o){return ov(t,n,o).map(l(cv,e,t,n,c,o)).filter(l(sv,r))}).filter(rv)}(e,t,n,c,r)})},dv=ov,mv=fv,gv=(l(fv,!1),l(fv,!0),uv),hv=function(e){return e.fold(Xp.start,Xp.start,Xp.end,Xp.end)},pv=function(e){return j(e.selection.getSel().modify)},vv=function(e,t,n){var r=e?1:-1;return t.setRng(Cu(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},bv=function(e,t){var n=t.selection.getRng(),r=e?Cu.fromRangeEnd(n):Cu.fromRangeStart(n);return!!pv(t)&&(e&&Sa(r)?vv(!0,t.selection,r):!(e||!ka(r))&&vv(!1,t.selection,r))},yv=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},xv=function(e){return!1!==e.settings.inline_boundaries},wv=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Cv=function(e,t,n){return Wp(t,n).map(function(t){return yv(e,t),n})},Sv=function(e,t,n){return function(){return!!xv(t)&&bv(e,t)}},kv={move:function(e,t,n){return function(){return!!xv(e)&&function(e,t,n){var r=e.getBody(),o=Cu.fromRangeStart(e.selection.getRng()),c=l(Gp.isInlineTarget,e);return mv(n,c,r,o).bind(function(n){return Cv(e,t,n)})}(e,t,n).isSome()}},moveNextWord:l(Sv,!0),movePrevWord:l(Sv,!1),setupSelectedState:function(e){var t=Oi(null),n=l(Gp.isInlineTarget,e);return e.on("NodeChange",function(r){xv(e)&&(function(e,t,n){var r=filter(t.select('*[data-mce-selected="inline-boundary"]'),e),o=filter(n,e);G(re(r,o),l(wv,!1)),G(re(o,r),l(wv,!0))}(n,e.dom,r.parents),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Cu.fromRangeStart(e.selection.getRng());Cu.isTextPosition(n)&&!1===Gp.isAtZwsp(n)&&(yv(e,tc.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var o=filter(r,e);G(o,function(r){var o=Cu.fromRangeStart(t.selection.getRng());dv(e,t.getBody(),o).bind(function(e){return Cv(t,n,e)})})}}(n,e,t,r.parents))}),t},setCaretPosition:yv};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Ah||(Ah={}));var Ov=function(e,t){return e===wu.Backwards?t.reverse():t},Tv=function(e,t,n){return e===wu.Forwards?t.next(n):t.prev(n)},Ev=function(e,t,n,r){return Mo.isBr(r.getNode(t===wu.Forwards))?Ah.Br:!1===yc(n,r)?Ah.Block:Ah.Wrap},Nv=function(e,t,n,r){for(var o,c=jc(n),l=r,f=[];l&&(o=Tv(t,c,l));){if(Mo.isBr(o.getNode(!1)))return t===wu.Forwards?{positions:Ov(t,f).concat([o]),breakType:Ah.Br,breakAt:I.some(o)}:{positions:Ov(t,f),breakType:Ah.Br,breakAt:I.some(o)};if(o.isVisible()){if(e(l,o)){var d=Ev(0,t,l,o);return{positions:Ov(t,f),breakType:d,breakAt:I.some(o)}}f.push(o),l=o}else l=o}return{positions:Ov(t,f),breakType:Ah.Eol,breakAt:I.none()}},_v=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var o=t(n,r).positions;return e===wu.Backwards?o.concat(r):[r].concat(o)}).getOr([])},Av=function(e,t){return X(e,function(e,n){return e.fold(function(){return I.some(n)},function(r){return Qa([head(r.getClientRects()),head(n.getClientRects())],function(e,o){var c=Math.abs(t-e.left);return Math.abs(t-o.left)<=c?n:r}).or(e)})},I.none())},Dv=function(e,t){return head(t.getClientRects()).bind(function(t){return Av(e,t.left)})},Rv=l(Nv,xu.isAbove,-1),Bv=l(Nv,xu.isBelow,1),Mv=l(_v,-1,Rv),Iv=l(_v,1,Bv),zv=Mo.isContentEditableFalse,Pv=Ya,Lv=function(e,t,n,r){var o=e===wu.Forwards,c=o?Zd:tm;if(!r.collapsed){var l=Pv(r);if(zv(l))return Bd(e,t,l,e===wu.Backwards,!0)}var f=function(e){return ya(e.startContainer)}(r),d=Nc(e,t.getBody(),r);if(c(d))return Md(t,d.getNode(!o));var m=Gp.normalizePosition(o,n(d));if(!m)return f?r:null;if(c(m))return Bd(e,t,m.getNode(!o),o,!0);var h=n(m);return h&&c(h)&&Dc(m,h)?Bd(e,t,h.getNode(!o),o,!0):f?zd(t,m.toRange(),!0):null},Hv=function(e,t,n,r){var o,c,l,f,d,m,h,v,y;if(y=Pv(r),o=Nc(e,t.getBody(),r),c=n(t.getBody(),xd(1),o),l=filter(c,wd(1)),d=Gt.last(o.getClientRects()),(Zd(o)||Jd(o))&&(y=o.getNode()),(tm(o)||Qd(o))&&(y=o.getNode(!0)),!d)return null;if(m=d.left,(f=Ed(l,m))&&zv(f.node))return h=Math.abs(m-f.left),v=Math.abs(m-f.right),Bd(e,t,f.node,h<v,!0);if(y){var x=function(e,t,n,r){var o,c,l,f,d,m,h=jc(t),v=[],line=0,y=function(e){return Gt.last(e.getClientRects())};1===e?(o=h.next,c=$a,l=Wa,f=Cu.after(r)):(o=h.prev,c=Wa,l=$a,f=Cu.before(r)),m=y(f);do{if(f.isVisible()&&!l(d=y(f),m)){if(v.length>0&&c(d,Gt.last(v))&&line++,(d=Va(d)).position=f,d.line=line,n(d))return v;v.push(d)}}while(f=o(f));return v}(e,t.getBody(),xd(1),y);if(f=Ed(filter(x,wd(1)),m))return zd(t,f.position.toRange(),!0);if(f=Gt.last(filter(x,wd(0))))return zd(t,f.position.toRange(),!0)}},Fv=function(e,t,n){var pre,r,o=jc(e.getBody()),c=l(Ac,o.next),f=l(Ac,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(pre=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?c(Cu.fromRangeStart(n)):f(Cu.fromRangeStart(n)))||(r=function(e){var t=e.dom.create(Gs.getForcedRootBlock(e));return(!ge.ie||ge.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e),1===t?e.$(pre).after(r):e.$(pre).before(r),e.selection.select(r,!0),e.selection.collapse())}},Vv=function(e,t){return function(){var n=function(e,t){var n,r=jc(e.getBody()),o=l(Ac,r.next),c=l(Ac,r.prev),f=t?wu.Forwards:wu.Backwards,d=t?o:c,m=e.selection.getRng();return(n=Lv(f,e,d,m))?n:(n=Fv(e,f,m))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},jv=function(e,t){return function(){var n=function(e,t){var n,r=t?1:-1,o=t?yd:bd,c=e.selection.getRng();return(n=Hv(r,e,o,c))?n:(n=Fv(e,r,c))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},Uv=function(e,t){return function(){var n=t?Cu.fromRangeEnd(e.selection.getRng()):Cu.fromRangeStart(e.selection.getRng()),r=t?Bv(e.getBody(),n):Rv(e.getBody(),n);return(t?oe(r.positions):head(r.positions)).filter(function(e){return function(t){return e?tm(t):Zd(t)}}(t)).fold(o(!1),function(t){return e.selection.setRng(t.toRange()),!0})}},Wv=function(e,t,table,n,r){var o=Gi(er.fromDom(table),"td,th,caption").map(function(e){return e.dom()});return function(e,t,n){return X(e,function(e,r){return e.fold(function(){return I.some(r)},function(e){var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),c=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return I.some(c<o?r:e)})},I.none())}(filter(function(e,t){return ee(t,function(td){var rect=function(rect,e){return{left:rect.left-e,top:rect.top-e,right:rect.right+2*e,bottom:rect.bottom+2*e,width:rect.width+e,height:rect.height+e}}(Va(td.getBoundingClientRect()),-1);return[{x:rect.left,y:e(rect),cell:td},{x:rect.right,y:e(rect),cell:td}]})}(e,o),function(e){return t(e,r)}),n,r).map(function(e){return e.cell})},$v=l(Wv,function(rect){return rect.bottom},function(e,t){return e.y<t}),qv=l(Wv,function(rect){return rect.top},function(e,t){return e.y>t}),Gv=function(table,e){return head(e.getClientRects()).bind(function(rect){return $v(table,rect.left,rect.top)}).bind(function(t){return Dv((n=t,Zc.lastPositionIn(n).map(function(e){return Rv(n,e).positions.concat(e)}).getOr([])),e);var n})},Yv=function(table,e){return oe(e.getClientRects()).bind(function(rect){return qv(table,rect.left,rect.top)}).bind(function(t){return Dv((n=t,Zc.firstPositionIn(n).map(function(e){return[e].concat(Bv(n,e).positions)}).getOr([])),e);var n})},Xv=function(e,t){e.selection.setRng(t),Ph(e,t)},Kv=function(e,t,n){var r=e(t,n);return function(e){return e.breakType===Ah.Wrap&&0===e.positions.length}(r)||!Mo.isBr(n.getNode())&&function(e){return e.breakType===Ah.Br&&1===e.positions.length}(r)?!function(e,t,n){return n.breakAt.map(function(n){return e(t,n).breakAt.isSome()}).getOr(!1)}(e,t,r):r.breakAt.isNone()},Jv=l(Kv,Rv),Qv=l(Kv,Bv),Zv=function(e,t,table,td){var n=e.selection.getRng(),r=t?1:-1;if(ac()&&function(e,t,table){var n=Cu.fromRangeStart(t);return Zc.positionIn(!e,table).map(function(e){return e.isEqual(n)}).getOr(!1)}(t,n,table)){var o=Bd(r,e,table,!t,!0);return Xv(e,o),!0}return!1},eb=function(e,t){var n=t.getNode(e);return Mo.isElement(n)&&"TABLE"===n.nodeName?I.some(n):I.none()},tb=function(e,t,n){var table=eb(!!t,n),r=!1===t;table.fold(function(){return Xv(e,n.toRange())},function(table){return Zc.positionIn(r,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Xv(e,n.toRange())},function(r){return function(e,t,table,n){var r=Gs.getForcedRootBlock(t);r?t.undoManager.transact(function(){var element=er.fromTag(r);wr(element,Gs.getForcedRootBlockAttrs(t)),Bi(element,er.fromTag("br")),e?Di(er.fromDom(table),element):Ai(er.fromDom(table),element);var n=t.dom.createRng();n.setStart(element.dom(),0),n.setEnd(element.dom(),0),Xv(t,n)}):Xv(t,n.toRange())}(t,e,table,n)})})},nb=function(e,t,table,td){var n=e.selection.getRng(),r=Cu.fromRangeStart(n),o=e.getBody();if(!t&&Jv(td,r)){var c=function(e,table,t){return Gv(table,t).orThunk(function(){return head(t.getClientRects()).bind(function(rect){return Av(Mv(e,Cu.before(table)),rect.left)})}).getOr(Cu.before(table))}(o,table,r);return tb(e,t,c),!0}return!(!t||!Qv(td,r))&&(c=function(e,table,t){return Yv(table,t).orThunk(function(){return head(t.getClientRects()).bind(function(rect){return Av(Iv(e,Cu.after(table)),rect.left)})}).getOr(Cu.after(table))}(o,table,r),tb(e,t,c),!0)},rb=function(e,t){return function(){return I.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(td){return I.from(e.dom.getParent(td,"table")).map(function(table){return Zv(e,t,table)})}).getOr(!1)}},ob=function(e,t){return function(){return I.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(td){return I.from(e.dom.getParent(td,"table")).map(function(table){return nb(e,t,table,td)})}).getOr(!1)}},ib=function(e){return $(["figcaption"],ir(e))},ab=function(e){var n=t.document.createRange();return n.setStartBefore(e.dom()),n.setEndBefore(e.dom()),n},ub=function(e,t,n){n?Bi(e,t):Ri(e,t)},cb=function(e,t,n,r){return""===t?function(e,t){var br=er.fromTag("br");return ub(e,br,t),ab(br)}(e,r):function(e,t,n,r){var o=er.fromTag(n),br=er.fromTag("br");return wr(o,r),Bi(o,br),ub(e,o,t),ab(br)}(e,r,t,n)},sb=function(e,t,n){return t?function(e,t){return Bv(e,t).breakAt.isNone()}(e.dom(),n):function(e,t){return Rv(e,t).breakAt.isNone()}(e.dom(),n)},lb=function(e,t){var n=er.fromDom(e.getBody()),r=Cu.fromRangeStart(e.selection.getRng()),o=Gs.getForcedRootBlock(e),c=Gs.getForcedRootBlockAttrs(e);return function(e,t){var n=l(zr,t);return Ki(er.fromDom(e.container()),mo,n).filter(ib)}(r,n).exists(function(){if(sb(n,t,r)){var l=cb(n,o,c,t);return e.selection.setRng(l),!0}return!1})},fb=function(e,t){return function(){return!!e.selection.isCollapsed()&&lb(e,t)}},db=function(e,t){return ee(function(e){return map(e,function(pattern){return uh({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:n},pattern)})}(e),function(pattern){return function(pattern,e){return e.keyCode===pattern.keyCode&&e.shiftKey===pattern.shiftKey&&e.altKey===pattern.altKey&&e.ctrlKey===pattern.ctrlKey&&e.metaKey===pattern.metaKey}(pattern,t)?[pattern]:[]})},mb=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},gb=function(e,t){return K(db(e,t),function(pattern){return pattern.action()})},hb=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=Qn.detect().os;gb([{keyCode:Ld.RIGHT,action:Vv(e,!0)},{keyCode:Ld.LEFT,action:Vv(e,!1)},{keyCode:Ld.UP,action:jv(e,!1)},{keyCode:Ld.DOWN,action:jv(e,!0)},{keyCode:Ld.RIGHT,action:rb(e,!0)},{keyCode:Ld.LEFT,action:rb(e,!1)},{keyCode:Ld.UP,action:ob(e,!1)},{keyCode:Ld.DOWN,action:ob(e,!0)},{keyCode:Ld.RIGHT,action:kv.move(e,t,!0)},{keyCode:Ld.LEFT,action:kv.move(e,t,!1)},{keyCode:Ld.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:kv.moveNextWord(e,t)},{keyCode:Ld.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:kv.movePrevWord(e,t)},{keyCode:Ld.UP,action:fb(e,!1)},{keyCode:Ld.DOWN,action:fb(e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)})},pb=function(e,t){return Pr(e,t)?Ki(t,function(element){return po(element)||bo(element)},function(e){return function(t){return zr(e,er.fromDom(t.dom().parentNode))}}(e)):I.none()},vb=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var body=e.getBody(),t=body.firstChild&&e.dom.isBlock(body.firstChild)?body.firstChild:body;e.selection.setCursorLocation(t,0)}(e))},bb=function(e,t,n){return Qa([Zc.firstPositionIn(n),Zc.lastPositionIn(n)],function(r,o){var c=Gp.normalizePosition(!0,r),l=Gp.normalizePosition(!1,o),f=Gp.normalizePosition(!1,t);return e?Zc.nextPosition(n,f).map(function(e){return e.isEqual(l)&&t.isEqual(c)}).getOr(!1):Zc.prevPosition(n,f).map(function(e){return e.isEqual(c)&&t.isEqual(l)}).getOr(!1)}).getOr(!0)},yb=Er("block","position"),xb=Er("from","to"),wb=function(e,t){var n=er.fromDom(e),r=er.fromDom(t.container());return pb(n,r).map(function(e){return yb(e,t)})},Cb=function(e,t,n){var r=wb(e,Cu.fromRangeStart(n)),o=r.bind(function(n){return Zc.fromPosition(t,e,n.position()).bind(function(n){return wb(e,n).map(function(n){return function(e,t,n){return Mo.isBr(n.position().getNode())&&!1===Fm(n.block())?Zc.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?Zc.fromPosition(t,e,r).bind(function(t){return wb(e,t)}):I.some(n)}).getOr(n):n}(e,t,n)})})});return Qa([r,o],xb).filter(function(e){return function(e){return!1===zr(e.from().block(),e.to().block())}(e)&&function(e){return Hr(e.from().block()).bind(function(t){return Hr(e.to().block()).filter(function(e){return zr(t,e)})}).isSome()}(e)&&function(e){return!1===Mo.isContentEditableFalse(e.from().block())&&!1===Mo.isContentEditableFalse(e.to().block())}(e)})},Sb=function(e,t,n){return n.collapsed?Cb(e,t,n):I.none()},kb=function(e){var t=Wr(e);return J(t,mo).fold(function(){return t},function(e){return t.slice(0,e)})},Ob=function(e){var t=kb(e);return G(t,zi),t},Tb=function(e,t){var n=Vf(t,e);return K(n.reverse(),Fm).each(zi)},Eb=function(e,t,n,r){if(Fm(n))return Cm(n),Zc.firstPositionIn(n.dom());0===filter(jr(r),function(e){return!Fm(e)}).length&&Fm(t)&&Ai(r,er.fromTag("br"));var o=Zc.prevPosition(n.dom(),Cu.before(r.dom()));return G(Ob(t),function(e){Ai(r,e)}),Tb(e,t),o},Nb=function(e,t,n){if(Fm(n))return zi(n),Fm(t)&&Cm(t),Zc.firstPositionIn(t.dom());var r=Zc.lastPositionIn(n.dom());return G(Ob(t),function(e){Bi(n,e)}),Tb(e,t),r},_b=function(e,t){return Pr(t,e)?function(e,t){var n=Vf(t,e);return I.from(n[n.length-1])}(t,e):I.none()},Ab=function(e,t){Zc.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(er.fromDom).filter(ho).each(zi)},Db=function(e,t,n){return Ab(!0,t),Ab(!1,n),_b(t,n).fold(l(Nb,e,t,n),l(Eb,e,t,n))},Rb=function(e,t,n,r){return t?Db(e,r,n):Db(e,n,r)},Bb=function(e,t){var n,r=er.fromDom(e.getBody());return(n=Sb(r.dom(),t,e.selection.getRng()).bind(function(e){return Rb(r,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},Mb=function(e,t){var n=er.fromDom(t),r=l(zr,e);return Xi(n,wo,r).isSome()},Ib=function(e,t){var n=Zc.prevPosition(e.dom(),Cu.fromRangeStart(t)).isNone(),r=Zc.nextPosition(e.dom(),Cu.fromRangeEnd(t)).isNone();return!function(e,t){return Mb(e,t.startContainer)||Mb(e,t.endContainer)}(e,t)&&n&&r},zb=function(e){var t=er.fromDom(e.getBody()),n=e.selection.getRng();return Ib(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Qa([pb(e,er.fromDom(n.startContainer)),pb(e,er.fromDom(n.endContainer))],function(r,o){return!1===zr(r,o)&&(n.deleteContents(),Rb(e,!0,r,o).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)}(t,e.selection)},Pb=function(e,t){return!e.selection.isCollapsed()&&zb(e)},Lb=function(e){return _c(e).exists(ho)},Hb=function(e,t,n){var r=filter(Vf(er.fromDom(n.container()),t),mo),o=head(r).getOr(t);return Zc.fromPosition(e,o.dom(),n).filter(Lb)},Fb=function(e,t){return _c(t).exists(ho)||Hb(!0,e,t).isSome()},Vb=function(e,t){return function(e){return I.from(e.getNode(!0)).map(er.fromDom)}(t).exists(ho)||Hb(!1,e,t).isSome()},jb=l(Hb,!1),Ub=l(Hb,!0),Wb=nl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),$b=function(e,t,n,r){var o=r.getNode(!1===t);return pb(er.fromDom(e),er.fromDom(n.getNode())).map(function(e){return Fm(e)?Wb.remove(e.dom()):Wb.moveToElement(o)}).orThunk(function(){return I.some(Wb.moveToElement(o))})},qb=function(e,t,n){return Zc.fromPosition(t,e,n).bind(function(r){return c=r.getNode(),wo(er.fromDom(c))||bo(er.fromDom(c))?I.none():function(e,t,n,r){var c=function(t){return go(er.fromDom(t))&&!yc(n,r,e)};return Ec(!t,n).fold(function(){return Ec(t,r).fold(o(!1),c)},c)}(e,t,n,r)?I.none():t&&Mo.isContentEditableFalse(r.getNode())?$b(e,t,n,r):!1===t&&Mo.isContentEditableFalse(r.getNode(!0))?$b(e,t,n,r):t&&tm(n)?I.some(Wb.moveToPosition(r)):!1===t&&Zd(n)?I.some(Wb.moveToPosition(r)):I.none();var c})},Gb=function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return Mo.isElement(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&Mo.isContentEditableFalse(t.nextSibling)?I.some(Wb.moveToElement(t.nextSibling)):!1===e&&Mo.isContentEditableFalse(t.previousSibling)?I.some(Wb.moveToElement(t.previousSibling)):I.none()}(t,n.getNode(!1===t)).fold(function(){return qb(e,t,n)},I.some):qb(e,t,n).bind(function(t){return function(e,t,n){return n.fold(function(e){return I.some(Wb.remove(e))},function(e){return I.some(Wb.moveToElement(e))},function(n){return yc(t,n,e)?I.none():I.some(Wb.moveToPosition(n))})}(e,n,t)})},Yb=function(e,t){return function(e,t,n){var r=Tc(t?1:-1,e,n),o=Cu.fromRangeStart(r),c=er.fromDom(e);return!1===t&&tm(o)?I.some(Wb.remove(o.getNode(!0))):t&&Zd(o)?I.some(Wb.remove(o.getNode())):!1===t&&Zd(o)&&Vb(c,o)?jb(c,o).map(function(br){return Wb.remove(br.getNode())}):t&&tm(o)&&Fb(c,o)?Ub(c,o).map(function(br){return Wb.remove(br.getNode())}):Gb(e,t,o)}(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(function(e,t){return function(element){return e._selectionOverrides.hideFakeCaret(),Jm(e,t,er.fromDom(element)),!0}}(e,t),function(e,t){return function(element){var n=t?Cu.before(element):Cu.after(element);return e.selection.setRng(n.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}).getOr(!1)},Xb=function(e,t){var n,r=e.selection.getNode();return!!Mo.isContentEditableFalse(r)&&(n=er.fromDom(e.getBody()),G(Gi(n,".mce-offscreen-selection"),zi),Jm(e,t,er.fromDom(e.selection.getNode())),vb(e),!0)},Kb=function(e,t){return e.selection.isCollapsed()?Yb(e,t):Xb(e,t)},Jb=function(e){var br,t=function(e,t){for(;t&&t!==e;){if(Mo.isContentEditableTrue(t)||Mo.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Mo.isContentEditableTrue(t)&&e.dom.isBlock(t)&&e.dom.isEmpty(t)&&(br=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(t,""),t.appendChild(br),e.selection.setRng(Cu.before(br).toRange())),!0},Qb=function(e,t,n,r,o,c){var l=Bd(r,e,c.getNode(!o),o,!0);if(t.collapsed){var f=t.cloneRange();o?f.setEnd(l.startContainer,l.startOffset):f.setStart(l.endContainer,l.endOffset),f.deleteContents()}else t.deleteContents();return e.selection.setRng(l),function(e,t){Mo.isText(t)&&0===t.data.length&&e.remove(t)}(e.dom,n),!0},Zb=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Mo.isText(n.commonAncestorContainer))return!1;var r=t?wu.Forwards:wu.Backwards,o=jc(e.getBody()),c=l(Ac,o.next),f=l(Ac,o.prev),d=t?c:f,m=t?Zd:tm,h=Nc(r,e.getBody(),n),v=Gp.normalizePosition(t,d(h));if(!v)return!1;if(m(v))return Qb(e,n,h.getNode(),r,t,v);var y=d(v);return!!(y&&m(y)&&Dc(v,y))&&Qb(e,n,h.getNode(),r,t,y)}(e,t)},ey=function(e,t){return function(n){return Wp(t,n).map(function(t){return kv.setCaretPosition(e,t),!0}).getOr(!1)}},ty=function(e,n,r,o){var c=e.getBody(),f=l(Gp.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(function(e,n){var r=t.document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(n.container(),n.offset()),r}(r,o)),e.execCommand("Delete"),dv(f,c,Cu.fromRangeStart(e.selection.getRng())).map(hv).map(ey(e,n))}),e.nodeChanged()},ny=function(e,t,n,r){var c=function(e,t){var n=bc(t,e);return n||e}(e.getBody(),r.container()),f=l(Gp.isInlineTarget,e),d=dv(f,c,r);return d.bind(function(e){return n?e.fold(o(I.some(hv(e))),I.none,o(I.some(gv(e))),I.none):e.fold(I.none,o(I.some(gv(e))),I.none,o(I.some(hv(e))))}).map(ey(e,t)).getOrThunk(function(){var o=Zc.navigate(n,c,r),l=o.bind(function(e){return dv(f,c,e)});return d.isSome()&&l.isSome()?Gp.findRootInline(f,c,r).map(function(t){return!!function(e){return Qa([Zc.firstPositionIn(e),Zc.lastPositionIn(e)],function(t,n){var r=Gp.normalizePosition(!0,t),o=Gp.normalizePosition(!1,n);return Zc.nextPosition(e,r).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)}(t)&&(Jm(e,n,er.fromDom(t)),!0)}).getOr(!1):l.bind(function(c){return o.map(function(o){return n?ty(e,t,r,o):ty(e,t,o,r),!0})}).getOr(!1)})},ry=function(e,t,n){if(e.selection.isCollapsed()&&function(e){return!1!==e.settings.inline_boundaries}(e)){var r=Cu.fromRangeStart(e.selection.getRng());return ny(e,t,n,r)}return!1},oy=function(e){return 1===Wr(e).length},iy=function(e,t,n,r){var o=l(cg,t),c=map(filter(r,o),function(e){return e.dom()});if(0===c.length)Jm(t,e,n);else{var f=function(e,t){var n=tg(!1),r=ag(t,n.dom());return Ai(er.fromDom(e),n),zi(er.fromDom(e)),Cu(r,0)}(n.dom(),c);t.selection.setRng(f.toRange())}},ay=function(e,t){var n=er.fromDom(e.getBody()),r=er.fromDom(e.selection.getStart()),c=filter(function(e,t){var n=Vf(t,e);return J(n,mo).fold(o(n),function(e){return n.slice(0,e)})}(n,r),oy);return oe(c).map(function(n){var element,r=Cu.fromRangeStart(e.selection.getRng());return!(!bb(t,r,n.dom())||(element=n,Wu(element.dom())&&Zm(element.dom()))||(iy(t,e,n,c),0))}).getOr(!1)},uy=function(e,t){return!!e.selection.isCollapsed()&&ay(e,t)},cy=Er("start","end"),sy=Er("rng","table","cells"),ly=nl([{removeTable:["element"]},{emptyCells:["cells"]}]),fy=function(e,t){return Zi(er.fromDom(e),"td,th",t)},dy=function(e,t){return Ji(e,"table",t)},my=function(e){return!1===zr(e.start(),e.end())},gy=function(e,t){return dy(e.start(),t).bind(function(n){return dy(e.end(),t).bind(function(e){return zr(n,e)?I.some(n):I.none()})})},hy=function(table){return Gi(table,"td,th")},py=function(e,t){var n=fy(t.startContainer,e),r=fy(t.endContainer,e);return t.collapsed?I.none():Qa([n,r],cy).fold(function(){return n.fold(function(){return r.bind(function(t){return dy(t,e).bind(function(table){return head(hy(table)).map(function(e){return cy(e,t)})})})},function(t){return dy(t,e).bind(function(table){return oe(hy(table)).map(function(e){return cy(t,e)})})})},function(t){return vy(e,t)?I.none():function(e,t){return dy(e.start(),t).bind(function(table){return oe(hy(table)).map(function(t){return cy(e.start(),t)})})}(t,e)})},vy=function(e,t){return gy(t,e).isSome()},by=function(e,t){var n=function(e){return l(zr,e)}(e);return function(e,t){var n=fy(e.startContainer,t),r=fy(e.endContainer,t);return Qa([n,r],cy).filter(my).filter(function(e){return vy(t,e)}).orThunk(function(){return py(t,e)})}(t,n).bind(function(e){return function(e,t){return gy(e,t).map(function(table){return sy(e,table,hy(table))})}(e,n)})},yy=function(e,t){return J(e,function(e){return zr(e,t)})},xy=function(e){return function(e){return Qa([yy(e.cells(),e.rng().start()),yy(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})}(e).map(function(t){var n=e.cells();return t.length===n.length?ly.removeTable(e.table()):ly.emptyCells(t)})},wy=function(e,t){return by(e,t).bind(xy)},Cy=function(e,t){return G(t,Cm),e.selection.setCursorLocation(t[0].dom(),0),!0},Sy=function(e,table){return Jm(e,!1,table),!0},ky=function(e,t,n,r){return Ty(t,r).fold(function(){return function(e,t,n){return wy(t,n).map(function(t){return t.fold(l(Sy,e),l(Cy,e))})}(e,t,n)},function(caption){return function(e,caption){return Ey(e,caption)}(e,caption)}).getOr(!1)},Oy=function(e,t){return K(Vf(t,e),wo)},Ty=function(e,t){return K(Vf(t,e),function(e){return"caption"===ir(e)})},Ey=function(e,t){return Cm(t),e.selection.setCursorLocation(t.dom(),0),I.some(!0)},Ny=function(e,t,n,r,o){return Zc.navigate(n,e.getBody(),o).bind(function(c){return function(e,t,n,r){return Zc.firstPositionIn(e.dom()).bind(function(o){return Zc.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o)})}).getOr(!0)}(r,n,o,c)?function(e,t){return Ey(e,t)}(e,r):function(e,t,n){return Ty(e,er.fromDom(n.getNode())).map(function(e){return!1===zr(e,t)})}(t,r,c)}).or(I.some(!0))},_y=function(e,t,n,r){var o=Cu.fromRangeStart(e.selection.getRng());return Oy(n,r).bind(function(r){return Fm(r)?Ey(e,r):function(e,t,n,r,o){return Zc.navigate(n,e.getBody(),o).bind(function(e){return Oy(t,er.fromDom(e.getNode())).map(function(e){return!1===zr(e,r)})})}(e,n,t,r,o)}).getOr(!1)},Ay=function(e,t){return e?Jd(t):Qd(t)},Dy=function(e,t,n){var r=er.fromDom(e.getBody());return Ty(r,n).fold(function(){return _y(e,t,r,n)||function(e,t){var n=Cu.fromRangeStart(e.selection.getRng());return Ay(t,n)||Zc.fromPosition(t,e.getBody(),n).map(function(e){return Ay(t,e)}).getOr(!1)}(e,t)},function(n){return function(e,t,n,r){var o=Cu.fromRangeStart(e.selection.getRng());return Fm(r)?Ey(e,r):Ny(e,n,t,r,o)}(e,t,r,n).getOr(!1)})},Ry=function(e,t){var n=er.fromDom(e.selection.getStart(!0)),r=cp(e);return e.selection.isCollapsed()&&0===r.length?Dy(e,t,n):function(e,t){var n=er.fromDom(e.getBody()),r=e.selection.getRng(),o=cp(e);return 0!==o.length?Cy(e,o):ky(e,n,r,t)}(e,n)},By=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n=Cu.fromRangeStart(e.selection.getRng());return Zc.fromPosition(t,e.getBody(),n).filter(function(e){return t?Xd(e):Kd(e)}).bind(function(e){return I.from(xc(t?0:-1,e))}).map(function(t){return e.selection.select(t),!0}).getOr(!1)}(e,t)},My=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){gb([{keyCode:Ld.BACKSPACE,action:mb(Kb,e,!1)},{keyCode:Ld.DELETE,action:mb(Kb,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(Zb,e,!1)},{keyCode:Ld.DELETE,action:mb(Zb,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(ry,e,t,!1)},{keyCode:Ld.DELETE,action:mb(ry,e,t,!0)},{keyCode:Ld.BACKSPACE,action:mb(Ry,e,!1)},{keyCode:Ld.DELETE,action:mb(Ry,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(By,e,!1)},{keyCode:Ld.DELETE,action:mb(By,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(Pb,e,!1)},{keyCode:Ld.DELETE,action:mb(Pb,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(Bb,e,!1)},{keyCode:Ld.DELETE,action:mb(Bb,e,!0)},{keyCode:Ld.BACKSPACE,action:mb(uy,e,!1)},{keyCode:Ld.DELETE,action:mb(uy,e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&function(e,t){gb([{keyCode:Ld.BACKSPACE,action:mb(Jb,e)},{keyCode:Ld.DELETE,action:mb(Jb,e)}],t)}(e,t)})},Iy=function(e){return I.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},zy=function(e,t){var n,r,o,c=t,l=e.dom,f=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var d=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&t.insertBefore(l.doc.createTextNode(""),t.firstChild)}if(o=l.createRng(),t.normalize(),t.hasChildNodes()){for(n=new ao(t,t);r=n.current();){if(Mo.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}c=r,r=n.next()}r||(o.setStart(c,0),o.setEnd(c,0))}else Mo.isBr(t)?t.nextSibling&&l.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),l.remove(void 0),e.selection.scrollIntoView(t)}},Py=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},Ly=Iy,Hy=function(e){return Iy(e).fold(o(""),function(e){return e.nodeName.toUpperCase()})},Fy=function(e){return Iy(e).filter(function(e){return bo(er.fromDom(e))}).isSome()},Vy=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},jy=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Uy=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Wy=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Mo.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},$y=function(e,t,n,r,o){var c=e.dom,l=e.selection.getRng();if(n!==e.getBody()){var f;jy(f=n)&&jy(f.parentNode)&&(o="LI");var d=o?t(o):c.create("BR");if(Wy(n,r,!0)&&Wy(n,r,!1))Vy(n,"LI")?c.insertAfter(d,Uy(n)):c.replace(d,n);else if(Wy(n,r,!0))Vy(n,"LI")?(c.insertAfter(d,Uy(n)),d.appendChild(c.doc.createTextNode(" ")),d.appendChild(n)):n.parentNode.insertBefore(d,n);else if(Wy(n,r,!1))c.insertAfter(d,Uy(n));else{n=Uy(n);var m=l.cloneRange();m.setStartAfter(r),m.setEndAfter(n);var h=m.extractContents();"LI"===o&&function(e,t){return e.firstChild&&e.firstChild.nodeName===t}(h,"LI")?(d=h.firstChild,c.insertAfter(h,n)):(c.insertAfter(h,n),c.insertAfter(d,n))}c.remove(r),zy(e,d)}},qy=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},Gy=function(e){e.innerHTML='<br data-mce-bogus="1">'},Yy=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},Xy=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},Ky=function(e,t,n){return!1===Mo.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ha?0:n:n===t.data.length-1&&t.data.charAt(n)===ha?t.data.length:n},Jy=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},Qy=function(e,t){var n=Gs.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Gs.getForcedRootBlockAttrs(e))},Zy=function(e,t){var n,r,o,c,l,f,d,m,h,v,y,x,w,C=e.dom,S=e.schema,k=S.getNonEmptyElements(),O=e.selection.getRng(),T=function(t){var n,c,f,d=o,m=S.getTextInlineElements();if(t||"TABLE"===v||"HR"===v?(n=C.create(t||x),Qy(e,n)):n=l.cloneNode(!1),f=n,!1===Gs.shouldKeepStyles(e))C.setAttrib(n,"style",null),C.setAttrib(n,"class",null);else do{if(m[d.nodeName]){if(Wu(d)||us.isBookmarkNode(d))continue;c=d.cloneNode(!1),C.setAttrib(c,"id",""),n.hasChildNodes()?(c.appendChild(n.firstChild),n.appendChild(c)):(f=c,n.appendChild(c))}}while((d=d.parentNode)&&d!==r);return Gy(f),n},E=function(e){var t,n,r,f;if(f=Ky(e,o,c),Mo.isText(o)&&(e?f>0:f<o.nodeValue.length))return!1;if(o.parentNode===l&&w&&!e)return!0;if(e&&Mo.isElement(o)&&o===l.firstChild)return!0;if(Yy(o,"TABLE")||Yy(o,"HR"))return w&&!e||!w&&e;for(t=new ao(o,l),Mo.isText(o)&&(e&&0===f?t.prev():e||f!==o.nodeValue.length||t.next());n=t.current();){if(Mo.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),k[r]&&"br"!==r))return!1}else if(Mo.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},N=function(){d=/^(H[1-6]|PRE|FIGURE)$/.test(v)&&"HGROUP"!==y?T(x):T(),Gs.shouldEndContainerOnEmptyBlock(e)&&Xy(C,h)&&C.isEmpty(l)?d=C.split(h,l):C.insertAfter(d,l),zy(e,d)};kp.normalize(C,O).each(function(e){O.setStart(e.startContainer,e.startOffset),O.setEnd(e.endContainer,e.endOffset)}),o=O.startContainer,c=O.startOffset,x=Gs.getForcedRootBlock(e),f=!(!t||!t.shiftKey);var _=!(!t||!t.ctrlKey);Mo.isElement(o)&&o.hasChildNodes()&&(w=c>o.childNodes.length-1,o=o.childNodes[Math.min(c,o.childNodes.length-1)]||o,c=w&&Mo.isText(o)?o.nodeValue.length:0),(r=Jy(C,o))&&((x&&!f||!x&&f)&&(o=function(e,t,n,r,o){var c,l,f,d,m,h,v=t||"P",y=e.dom,x=Jy(y,r);if(!(l=y.getParent(r,y.isBlock))||!Xy(y,l)){if(h=(l=l||x)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(l)?l.nodeName.toLowerCase():l.parentNode.nodeName.toLowerCase(),!l.hasChildNodes())return c=y.create(v),Qy(e,c),l.appendChild(c),n.setStart(c,0),n.setEnd(c,0),c;for(d=r;d.parentNode!==l;)d=d.parentNode;for(;d&&!y.isBlock(d);)f=d,d=d.previousSibling;if(f&&e.schema.isValidChild(h,v.toLowerCase())){for(c=y.create(v),Qy(e,c),f.parentNode.insertBefore(c,f),d=f;d&&!y.isBlock(d);)m=d.nextSibling,c.appendChild(d),d=m;n.setStart(r,o),n.setEnd(r,o)}}return r}(e,x,O,o,c)),l=C.getParent(o,C.isBlock),h=l?C.getParent(l.parentNode,C.isBlock):null,v=l?l.nodeName.toUpperCase():"","LI"!==(y=h?h.nodeName.toUpperCase():"")||_||(l=h,h=h.parentNode,v=y),/^(LI|DT|DD)$/.test(v)&&C.isEmpty(l)?$y(e,T,h,l,x):x&&l===e.getBody()||(x=x||"P",ya(l)?(d=Na(l),C.isEmpty(l)&&Gy(l),zy(e,d)):E()?N():E(!0)?(d=l.parentNode.insertBefore(T(),l),zy(e,Yy(l,"HR")?d:l)):((n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,Ky(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Ky(!1,e.endContainer,e.endOffset)),t}(O).cloneRange()).setEndAfter(l),function(e){G(qi(er.fromDom(e),cr),function(text){var e=text.dom();e.nodeValue=pa(e.nodeValue)})}(m=n.extractContents()),function(e){do{Mo.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(m),d=m.firstChild,C.insertAfter(m,l),function(e,t,n){var i,r=n,o=[];if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;Mo.isElement(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}for(i=o.length;i--;)!(r=o[i]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue?e.remove(r):qy(e,r)&&e.remove(r)}}(C,k,d),function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(C,l),C.isEmpty(l)&&Gy(l),d.normalize(),C.isEmpty(d)?(C.remove(d),N()):zy(e,d)),C.setAttrib(d,"id",""),e.fire("NewBlock",{newBlock:d})))},ex=function(e,t,n){var marker=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(marker,n),t.scrollIntoView(marker),e.remove(marker)},tx=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},nx=function(e,t){var n,r,o=e.selection,c=e.dom,l=o.getRng();kp.normalize(c,l).each(function(e){l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)});var f=l.startOffset,d=l.startContainer;if(1===d.nodeType&&d.hasChildNodes()){var m=f>d.childNodes.length-1;d=d.childNodes[Math.min(f,d.childNodes.length-1)]||d,f=m&&3===d.nodeType?d.nodeValue.length:0}var h=c.getParent(d,c.isBlock),v=h?c.getParent(h.parentNode,c.isBlock):null,y=v?v.nodeName.toUpperCase():"",x=!(!t||!t.ctrlKey);"LI"!==y||x||(h=v),d&&3===d.nodeType&&f>=d.nodeValue.length&&(function(e,t,n){for(var r,o=new ao(t,n),c=e.getNonEmptyElements();r=o.next();)if(c[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema,d,h)||(n=c.create("br"),l.insertNode(n),l.setStartAfter(n),l.setEndAfter(n),r=!0)),n=c.create("br"),Bu(c,l,n),ex(c,o,n),tx(c,o,n,r),e.undoManager.add()},rx=function(e,t){var br=er.fromTag("br");Ai(er.fromDom(t),br),e.undoManager.add()},ox=function(e,t){ix(e.getBody(),t)||Di(er.fromDom(t),er.fromTag("br"));var br=er.fromTag("br");Di(er.fromDom(t),br),ex(e.dom,e.selection,br.dom()),tx(e.dom,e.selection,br.dom(),!1),e.undoManager.add()},ix=function(e,t){return n=Cu.after(t),!!Mo.isBr(n.getNode())||Zc.nextPosition(e,Cu.after(t)).map(function(e){return Mo.isBr(e.getNode())}).getOr(!1);var n},ax=function(e){return e&&"A"===e.nodeName&&"href"in e},ux=function(e){return e.fold(o(!1),ax,ax,o(!1))},cx=function(e,t){t.fold(n,l(rx,e),l(ox,e),n)},sx={insert:function(e,t){var n=function(e){var t=l(Gp.isInlineTarget,e),n=Cu.fromRangeStart(e.selection.getRng());return dv(t,e.getBody(),n).filter(ux)}(e);n.isSome()?n.each(l(cx,e)):nx(e,t)}},lx=function(e,t){return Ly(e).filter(function(e){return t.length>0&&Mr(er.fromDom(e),t)}).isSome()},fx=function(e){return lx(e,Gs.getBrNewLineSelector(e))},dx=function(e){return lx(e,Gs.getNoNewLineSelector(e))},mx=nl([{br:[]},{block:[]},{none:[]}]),gx=function(e,t){return dx(e)},hx=function(e){return function(t,n){return""===Gs.getForcedRootBlock(t)===e}},px=function(e){return function(t,n){return Fy(t)===e}},vx=function(e,t){return function(n,r){return Hy(n)===e.toUpperCase()===t}},bx=function(e){return vx("pre",e)},yx=function(e){return function(t,n){return Gs.shouldPutBrInPre(t)===e}},xx=function(e,t){return fx(e)},wx=function(e,t){return t},Cx=function(e){var t=Gs.getForcedRootBlock(e),n=Py(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},Sx=function(e,t){return function(n,r){return X(e,function(e,p){return e&&p(n,r)},!0)?I.some(t):I.none()}},kx=function(e,t){return Yp([Sx([gx],mx.none()),Sx([vx("summary",!0)],mx.br()),Sx([bx(!0),yx(!1),wx],mx.br()),Sx([bx(!0),yx(!1)],mx.block()),Sx([bx(!0),yx(!0),wx],mx.block()),Sx([bx(!0),yx(!0)],mx.br()),Sx([px(!0),wx],mx.br()),Sx([px(!0)],mx.block()),Sx([hx(!0),wx,Cx],mx.block()),Sx([hx(!0)],mx.br()),Sx([xx],mx.br()),Sx([hx(!1),wx],mx.br()),Sx([Cx],mx.block())],[e,!(!t||!t.shiftKey)]).getOr(mx.none())},Ox={insert:function(e,t){kx(e,t).fold(function(){sx.insert(e,t)},function(){Zy(e,t)},n)}},Tx=function(e){e.on("keydown",function(t){t.keyCode===Ld.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),Ox.insert(e,t)}))}(e,t)})},Ex=function(text,e){var t=e.container(),n=e.offset();return Mo.isText(t)?(t.insertData(n,text),I.some(xu(t,n+text.length))):_c(e).map(function(t){var n=er.fromText(text);return e.isAtEnd()?Di(t,n):Ai(t,n),xu(n.dom(),text.length)})},Nx=l(Ex,""),_x=l(Ex," "),Ax=function(e,t,n){return Zc.navigateIgnore(e,t,n,$d)},Dx=function(e,t,n){var r=filter(Vf(er.fromDom(n.container()),t),mo);return head(r).fold(function(){return Ax(e,t.dom(),n).forall(function(e){return!1===yc(e,n,t.dom())})},function(t){return Ax(e,t.dom(),n).isNone()})},Rx=l(Dx,!1),Bx=l(Dx,!0),Mx=function(e){return xu.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},Ix=function(e,t){var n=filter(Vf(er.fromDom(t.container()),e),mo);return head(n).getOr(e)},zx=function(e,t){return Mx(t)?Wd(t):Wd(t)||Zc.prevPosition(Ix(e,t).dom(),t).exists(Wd)},Px=function(e,t){return Mx(t)?Ud(t):Ud(t)||Zc.nextPosition(Ix(e,t).dom(),t).exists(Ud)},Lx=function(e){return _c(e).bind(function(e){return Ki(e,ur)}).exists(function(e){return t=kr(e,"white-space"),$(["pre","pre-line","pre-wrap"],t);var t})},Hx=function(e,t){return function(e,t){return Zc.prevPosition(e.dom(),t).isNone()}(e,t)||function(e,t){return Zc.nextPosition(e.dom(),t).isNone()}(e,t)||Rx(e,t)||Bx(e,t)||Vb(e,t)||Fb(e,t)},Fx=function(e,t){var n=function(e){var t=e.container(),n=e.offset();return Mo.isText(t)&&n<t.data.length?xu(t,n+1):e}(t);return!Lx(n)&&(Bx(e,n)||Fb(e,n)||Px(e,n))},Vx=function(e,t){return function(e,t){return!Lx(t)&&(Rx(e,t)||Vb(e,t)||zx(e,t))}(e,t)||Fx(e,t)},jx=function(text,e){return Hd(text.charAt(e))},Ux=function(e){var t=e.container();return Mo.isText(t)&&Un(t.data,"")},Wx=function(e){var text=e.data,t=function(text){return map(text.split(""),function(e,i,t){return Hd(e)&&i>0&&i<t.length-1&&Vd(t[i-1])&&Vd(t[i+1])?" ":e}).join("")}(text);return t!==text&&(e.data=t,!0)},$x=function(e,t){return I.some(t).filter(Ux).bind(function(t){var n=t.container();return function(e,t){var text=t.data,n=xu(t,0);return!(!jx(text,0)||Vx(e,n)||(t.data=" "+text.slice(1),0))}(e,n)||Wx(n)||function(e,t){var text=t.data,n=xu(t,text.length-1);return!(!jx(text,text.length-1)||Vx(e,n)||(t.data=text.slice(0,-1)+" ",0))}(e,n)?I.some(t):I.none()})},qx=function(e){var t=er.fromDom(e.getBody());e.selection.isCollapsed()&&$x(t,xu.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},Gx=function(e,t){return function(n){return function(e,t){return!Lx(t)&&(Hx(e,t)||zx(e,t)||Px(e,t))}(e,n)?Nx(t):_x(t)}},Yx=function(e){var t=Cu.fromRangeStart(e.selection.getRng()),n=er.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=l(Gp.isInlineTarget,e),o=Cu.fromRangeStart(e.selection.getRng());return dv(r,e.getBody(),o).bind(function(e){return function(t){return t.fold(function(element){return Zc.prevPosition(e.dom(),Cu.before(element))},function(element){return Zc.firstPositionIn(element)},function(element){return Zc.lastPositionIn(element)},function(element){return Zc.nextPosition(e.dom(),Cu.after(element))})}}(n)).bind(Gx(n,t)).exists(function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}}(e))}return!1},Xx=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){gb([{keyCode:Ld.SPACEBAR,action:mb(Yx,e)}],t).each(function(e){t.preventDefault()})}(e,t)})},Kx=function(e,t){t.hasAttribute("data-mce-caret")&&(Na(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},Jx=function(e,t){var n=function(e){return Qi(er.fromDom(e.getBody()),"*[data-mce-caret]").fold(o(null),function(e){return e.dom()})}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Kx(e,n)):void(Ca(n)&&(Kx(e,n),e.undoManager.add()))},Qx=function(e){e.on("keyup compositionstart",l(Jx,e))},Zx=Qn.detect().browser,ew=function(e){!function(e){var t=Li(function(){e.composing||qx(e)},0);Zx.isIE()&&(e.on("keypress",function(e){t.throttle()}),e.on("remove",function(e){t.cancel()}))}(e),e.on("input",function(t){!1===t.isComposing&&qx(e)})},tw=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){gb([{keyCode:Ld.END,action:Uv(e,!0)},{keyCode:Ld.HOME,action:Uv(e,!1)}],t).each(function(e){t.preventDefault()})}(e,t)})},nw=function(e){var t=kv.setupSelectedState(e);Qx(e),hb(e,t),My(e,t),Tx(e),Xx(e),ew(e),tw(e)};function rw(e){var n,r,o,c=Qt.each,l=Ld.BACKSPACE,f=Ld.DELETE,d=e.dom,m=e.selection,h=e.settings,v=e.parser,y=ge.gecko,x=ge.ie,w=ge.webkit,C=x?"Text":"URL",S=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},k=function(e){return e.isDefaultPrevented()},O=function(){e.shortcuts.add("meta+a",null,"SelectAll")},T=function(){e.on("keydown",function(e){if(!k(e)&&e.keyCode===l&&m.isCollapsed()&&0===m.getRng().startOffset){var t=m.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},E=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(ge.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))};return e.on("keydown",function(t){var n,r,o,c,l;if(!k(t)&&t.keyCode===Ld.BACKSPACE&&(r=(n=m.getRng()).startContainer,o=n.startOffset,c=d.getRoot(),l=r,n.collapsed&&0===o)){for(;l&&l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==c;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),(n=d.createRng()).setStart(r,0),n.setEnd(r,0),m.setRng(n))}}),n=function(e){var body=d.create("body"),t=e.cloneContents();return body.appendChild(t),m.serializer.serialize(body,{format:"html"})},e.on("keydown",function(t){var r,body,o,c,m,h=t.keyCode;if(!k(t)&&(h===f||h===l)){if(r=e.selection.isCollapsed(),body=e.getBody(),r&&!d.isEmpty(body))return;if(!r&&(o=e.selection.getRng(),c=n(o),(m=d.createRng()).selectNode(e.getBody()),c!==n(m)))return;t.preventDefault(),e.setContent(""),body.firstChild&&d.isBlock(body.firstChild)?e.selection.setCursorLocation(body.firstChild,0):e.selection.setCursorLocation(body,0),e.nodeChanged()}}),ge.windowsPhone||e.on("keyup focusin mouseup",function(e){Ld.modifierPressed(e)||m.normalize()},!0),w&&(e.inline||d.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=m.getRng(),e.getBody().focus(),"mousedown"===t.type){if(wa(n.startContainer))return;m.placeCaretAt(t.clientX,t.clientY)}else m.setRng(n)}),e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==d.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&d.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),m.select(n))}),h.forced_root_block&&e.on("init",function(){S("DefaultParagraphSeparator",Gs.getForcedRootBlock(e))}),e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})}),T(),v.addNodeFilter("br",function(e){for(var i=e.length;i--;)"Apple-interchange-newline"===e[i].attr("class")&&e[i].remove()}),ge.iOS?(e.inline||e.on("keydown",function(){t.document.activeElement===t.document.body&&e.getWin().focus()}),E(),e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):O()),ge.ie>=11&&(E(),T()),ge.ie&&(O(),S("AutoUrlDetect",!1),e.on("dragstart",function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&m.select(t.target),(n=e.selection.getContent()).length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(C,r)))}(t)}),e.on("drop",function(t){if(!k(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(C))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=Hh.fromPoint(t.x,t.y,e.getDoc());m.setRng(r),content=n.html,o=!0,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:content,internal:o}):e.execCommand("mceInsertContent",!1,content)}}var content,o})),y&&(e.on("keydown",function(t){if(!k(t)&&t.keyCode===l){if(!e.getBody().getElementsByTagName("hr").length)return;if(m.isCollapsed()&&0===m.getRng().startOffset){var n=m.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return d.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(d.remove(r),t.preventDefault())}}}),t.Range.prototype.getClientRects||e.on("mousedown",function(t){if(!k(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),ye.setEditorTimeout(e,function(){n.focus()})}}),r=function(){var template=d.getAttribs(m.getStart().cloneNode(!1));return function(){var t=m.getStart();t!==e.getBody()&&(d.setAttrib(t,"style",null),c(template,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},o=function(){return!m.isCollapsed()&&d.getParent(m.getStart(),d.isBlock)!==d.getParent(m.getEnd(),d.isBlock)},e.on("keypress",function(t){var n;if(!k(t)&&(8===t.keyCode||46===t.keyCode)&&o())return n=r(),e.getDoc().execCommand("delete",!1,null),n(),t.preventDefault(),!1}),d.bind(e.getDoc(),"cut",function(t){var n;!k(t)&&o()&&(n=r(),ye.setEditorTimeout(e,function(){n()}))}),h.readonly||e.on("BeforeExecCommand MouseDown",function(){S("StyleWithCSS",!1),S("enableInlineTableEditing",!1),h.object_resizing||S("enableObjectResizing",!1)}),e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||c(d.select("a"),function(e){var t=e.parentNode,n=d.getRoot();if(t.lastChild===e){for(;t&&!d.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}d.add(t,"br",{"data-mce-bogus":1})}})}),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ge.mac&&e.on("keydown",function(t){!Ld.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),T()),{refreshContentEditable:function(){},isHidden:function(){var t;return!y||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}var ow=function(e){return Mo.isElement(e)&&po(er.fromDom(e))},iw=function(e){e.on("click",function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=xu.fromRangeStart(t),r=xu.fromRangeEnd(t);if(xu.isElementPosition(n)){var o=n.container();ow(o)&&Zc.firstPositionIn(o).each(function(e){return t.setStart(e.container(),e.offset())})}xu.isElementPosition(r)&&(o=n.container(),ow(o)&&Zc.lastPositionIn(o).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Vg(t))}(e)})},aw=function(e){!function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})}(e),function(e){e.parser.addNodeFilter("details",function(e){G(e,function(details){details.attr("data-mce-open",details.attr("open")),details.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){G(e,function(details){var e=details.attr("data-mce-open");details.attr("open",P(e)?e:null),details.attr("data-mce-open",null)})})}(e)},uw=bi.DOM,cw=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&ye.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)}(e)},sw=function(e,n){var body,r,o=e.settings,c=e.getElement(),l=e.getDoc();o.inline||(e.getElement().style.visibility=e.orgVisibility),n||e.inline||(l.open(),l.write(e.iframeHTML),l.close()),e.inline&&(e.on("remove",function(){var e=this.getBody();uw.removeClass(e,"mce-content-body"),uw.removeClass(e,"mce-edit-focus"),uw.setAttrib(e,"contentEditable",null)}),uw.addClass(c,"mce-content-body"),e.contentDocument=l=o.content_document||t.document,e.contentWindow=o.content_window||t.window,e.bodyElement=c,e.contentAreaContainer=c,o.content_document=o.content_window=null,o.root_name=c.nodeName.toLowerCase()),(body=e.getBody()).disabled=!0,e.readonly=o.readonly,e.readonly||(e.inline&&"static"===uw.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=e.getParam("content_editable_state",!0)),body.disabled=!1,e.editorUpload=Pf(e),e.schema=ii(o),e.dom=bi(l,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:o.force_hex_style_colors,class_filter:o.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:Gs.shouldUseContentCssCors(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=Sh(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,o,c,i=t.length,l=e.dom;i--;)if(o=(r=t[i]).attr(n),c="data-mce-"+n,!r.attributes.map[c]){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?((o=l.serializeStyle(l.parseStyle(o),r.name)).length||(o=null),r.attr(c,o),r.attr(n,o)):"tabindex"===n?(r.attr(c,o),r.attr(n,null)):r.attr(c,e.convertURL(o,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,i=e.length;i--;)0!==(n=(t=e[i]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,i=e.length;i--;)(t=e[i]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,i=t.length,r=e.schema.getNonEmptyElements();i--;)(n=t[i]).isEmpty(r)&&0===n.getAll("br").length&&(n.append(new zs("br",1)).shortEnded=!0)}),t}(e),e.serializer=Nh(o,e),e.selection=Mp(e.dom,e.getWin(),e.serializer,e),e.annotator=Rs(e),e.formatter=oh(e),e.undoManager=xm(e),e._nodeChangeDispatcher=new nd(e),e._selectionOverrides=im(e),aw(e),iw(e),nw(e),Gf(e),e.fire("PreInit"),o.browser_spellcheck||o.gecko_spellcheck||(l.body.spellcheck=!1,uw.setAttrib(body,"spellcheck","false")),e.quirks=rw(e),e.fire("PostRender"),o.directionality&&(body.dir=o.directionality),o.protect&&e.on("BeforeSetContent",function(e){Qt.each(o.protect,function(pattern){e.content=e.content.replace(pattern,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",Qt.each(e.contentStyles,function(style){r+=style+"\r\n"}),e.dom.addStyle(r)),function(e){return e.inline?uw.styleSheetLoader:e.dom.styleSheetLoader}(e).loadAll(e.contentCSS,function(t){cw(e)},function(t){cw(e)}),o.content_style&&function(e,text){var head=er.fromDom(e.getDoc().head),t=er.fromTag("style");xr(t,"type","text/css"),Bi(t,er.fromText(text)),Bi(head,t)}(e,o.content_style)},lw=bi.DOM,fw=function(e,n){var title=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),r=function(e,title,t,n){var iframe=er.fromTag("iframe");return wr(iframe,n),wr(iframe,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),Ui(iframe,"tox-edit-area__iframe"),iframe}(e.id,title,n.height,Gs.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var o=function(e,n){if(t.document.domain!==t.window.location.hostname&&ge.ie&&ge.ie<12){var r=zf.uuid("mce");e[r]=function(){sw(e)};var o='javascript:(function(){document.open();document.domain="'+t.document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+r+"(true);})()";return lw.setAttrib(n,"src",o),!0}return!1}(e,r);return e.contentAreaContainer=n.iframeContainer,e.iframeElement=r,e.iframeHTML=function(e){var t,n,r;return r=Gs.getDocType(e)+"<html><head>",Gs.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Gs.getBodyId(e),n=Gs.getBodyClass(e),Gs.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Gs.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'}(e),lw.add(n.iframeContainer,r),o},dw=function(e,t){var n=fw(e,t);t.editorContainer&&(lw.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=lw.isHidden(t.editorContainer)),e.getElement().style.display="none",lw.setAttrib(e.id,"aria-hidden","true"),n||sw(e)},mw=function(e){e.contentCSS=e.contentCSS.concat(function(e){var t=Gs.getContentCss(e),n=e.editorManager.baseURL+"/skins/content",r="content"+e.editorManager.suffix+".css",o=!0===e.inline;return map(t,function(t){return function(e){return/^[a-z0-9\-]+$/i.test(e)}(t)&&!o?n+"/"+t+"/"+r:e.documentBaseURI.toAbsolute(t)})}(e))},gw=bi.DOM,hw=function(e,t,n){var r=wf.get(n),o=wf.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Qt.trim(n),r&&-1===Qt.inArray(t,n)){if(Qt.each(wf.dependencies(n),function(n){hw(e,t,n)}),e.plugins[n])return;try{var c=new r(e,o,e.$);e.plugins[n]=c,c.init&&(c.init(e,o),t.push(n))}catch(t){yf.pluginInitError(e,n,t)}}},pw=function(e){return e.replace(/^\-/,"")},vw=function(element){return{editorContainer:element,iframeContainer:element}},bw=function(e){var t=e.getElement();return e.inline?vw(null):function(e){var t=gw.create("div");return gw.insertAfter(t,e),vw(t)}(t)},yw=function(e){e.fire("ScriptsLoaded"),function(e){var t=Qt.trim(e.settings.icons),n=e.ui.registry.getAll().icons,r=ki({},{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 1 1 0-2h9.2zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h6.8zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h4.4zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 0 1 0-2h2zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 1 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',comment:'<svg width="24" height="24"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z" fill-rule="nonzero"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z"/></g></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z" fill-rule="nonzero"/></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2zm2 14h-2v2a2 2 0 0 0 2-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',indeterminate:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zM9 11a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H9z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2.1 2a2 2 0 1 0 2.7 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z" fill-rule="evenodd"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><g fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="#000" stroke-width="2"><path d="M12 5v14M5 12h14"/></g></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7zM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm-2.4-6.1L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z" fill-rule="evenodd"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><path d="M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z" fill-rule="nonzero"/></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z" opacity=".2"/><path d="M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path d="M9 11.2l1 1v.2l-1 1v-2.2zm5 1l1-1v2.2l-1-1v-.2zM20 5v14H4V5h16zm-1 2h-4v.8l-.2-.2-.8.8V7h-4v1.4l-.8-.8-.2.2V7H5v11h4v-1.8l.5.5.5-.4V18h4v-1.8l.8.8.2-.3V18h4V7zm-3.9 3.4l-1.8 1.9 1.8 1.9c.4.3.4.9 0 1.2-.3.3-.8.3-1.2 0L12 13.5l-1.8 1.9a.8.8 0 0 1-1.2 0 .9.9 0 0 1 0-1.2l1.8-1.9-1.9-2a.9.9 0 0 1 1.2-1.2l2 2 1.8-1.8c.3-.4.9-.4 1.2 0a.8.8 0 0 1 0 1.1z" fill-rule="evenodd"/></svg>',"table-delete-row":'<svg width="24" height="24"><path d="M16.7 8.8l1.1 1.2-2.4 2.5L18 15l-1.2 1.2-2.5-2.5-2.4 2.5-1.3-1.2 2.5-2.5-2.5-2.5 1.2-1.3 2.6 2.6 2.4-2.5zM4 5h16v14H4V5zm15 5V7H5v3h4.8l1 1H5v3h5.8l-1 1H5v3h14v-3h-.4l-1-1H19v-3h-1.3l1-1h.3z" fill-rule="evenodd"/></svg>',"table-delete-table":'<svg width="24" height="26"><path d="M4 6h16v14H4V6zm1 2v11h14V8H5zm11.7 8.7l-1.5 1.5L12 15l-3.3 3.2-1.4-1.5 3.2-3.2-3.3-3.2 1.5-1.5L12 12l3.2-3.2 1.5 1.5-3.2 3.2 3.2 3.2z" fill-rule="evenodd"/></svg>',"table-insert-column-after":'<svg width="24" height="24"><path d="M14.3 9c.4 0 .7.3.7.6v2.2h2.1c.4 0 .7.3.7.7 0 .4-.3.7-.7.7H15v2.2c0 .3-.3.6-.7.6a.7.7 0 0 1-.6-.6v-2.2h-2.2a.7.7 0 0 1 0-1.4h2.2V9.6c0-.3.3-.6.6-.6zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z" fill-rule="evenodd"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path d="M9.7 16a.7.7 0 0 1-.7-.6v-2.2H6.9a.7.7 0 0 1 0-1.4H9V9.6c0-.3.3-.6.7-.6.3 0 .6.3.6.6v2.2h2.2c.4 0 .8.3.8.7 0 .4-.4.7-.8.7h-2.2v2.2c0 .3-.3.6-.6.6zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z" fill-rule="evenodd"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path d="M14.8 10.5c0 .3-.2.5-.5.5h-1.8v1.8c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.6V11H9.7a.5.5 0 0 1 0-1h1.8V8.3c0-.3.2-.6.5-.6s.5.3.5.6V10h1.8c.3 0 .5.2.5.5zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-4V7H5v7h14z" fill-rule="evenodd"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path d="M9.2 14.5c0-.3.2-.5.5-.5h1.8v-1.8c0-.3.2-.5.5-.5s.5.2.5.6V14h1.8c.3 0 .5.2.5.5s-.2.5-.5.5h-1.8v1.7c0 .3-.2.6-.5.6a.5.5 0 0 1-.5-.6V15H9.7a.5.5 0 0 1-.5-.5zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7H5v7h14zm0-8V7h-4v3h4z" fill-rule="evenodd"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z" fill-rule="evenodd"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z" fill-rule="evenodd"/></svg>',"table-row-properties":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',"table-split-cells":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.5 4.5l1.5 1.6c.3.2.3.7 0 1-.2.2-.7.2-1 0l-1.5-1.6-1.6 1.5c-.2.3-.7.3-1 0a.7.7 0 0 1 0-1l1.6-1.5-1.5-1.6a.7.7 0 0 1 1-1l1.5 1.6 1.6-1.5c.2-.3.7-.3 1 0 .2.2.2.7 0 1l-1.6 1.5z" fill-rule="evenodd"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z" fill-rule="evenodd"/></svg>',table:'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" fill-rule="evenodd"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>'},xf.get(t).icons);fr(r,function(t,r){vr(n,r)||e.ui.registry.addIcon(r,t)})}(e),function(e){var t=e.settings.theme;if(P(t)){e.settings.theme=pw(t);var n=Cf.get(t);e.theme=new n(e,Cf.urls[t]),e.theme.init&&e.theme.init(e,Cf.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}}(e),function(e){var t=[];Qt.each(e.settings.plugins.split(/[ ,]/),function(n){hw(e,t,pw(n))})}(e);var t=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,P(t.theme)?function(e){return e.theme.renderUI()}(e):j(t.theme)?function(e){var t=e.getElement(),n=e.settings.theme(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n}(e):bw(e)}(e);return e.editorContainer=t.editorContainer?t.editorContainer:null,mw(e),e.inline?sw(e):dw(e,t)},xw=bi.DOM,ww=function(e){return"-"===e.charAt(0)},Cw=function(e,t){var n=Si.ScriptLoader;!function(e,t,n,r){var o=t.settings,c=o.theme;if(P(c)){if(!ww(c)&&!Cf.urls.hasOwnProperty(c)){var l=o.theme_url;l?Cf.load(c,t.documentBaseURI.toAbsolute(l)):Cf.load(c,"themes/"+c+"/theme"+n+".js")}e.loadQueue(function(){Cf.waitFor(c,r)})}else r()}(n,e,t,function(){!function(e,t){var n=Gs.getLanguageCode(t),r=Gs.getLanguageUrl(t);!1===Ei.hasCode(n)&&"en"!==n&&(""!==r?e.add(r):e.add(t.editorManager.baseURL+"/langs/"+n+".js"))}(n,e),function(e){var t=Qt.trim(e.getParam("icons","","string"));if(t.length>0&&!xf.has(t)){var n=e.editorManager.baseURL+"/icons/"+t+"/icons.js";Si.ScriptLoader.add(n)}}(e),function(e,t){Qt.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),Qt.each(e.external_plugins,function(t,n){wf.load(n,t),e.plugins+=" "+n}),Qt.each(e.plugins.split(/[ ,]/),function(e){if((e=Qt.trim(e))&&!wf.urls[e])if(ww(e)){e=e.substr(1,e.length);var n=wf.dependencies(e);Qt.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=wf.createUrl(n,e),wf.load(e.resource,e)})}else wf.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})}(e.settings,t),n.loadQueue(function(){e.removed||yw(e)},e,function(t){yf.pluginLoadError(e,t[0]),e.removed||yw(e)})})},Sw=function(e){var n=e.settings,r=e.id;Ei.setCode(Gs.getLanguageCode(e));var o=function(){xw.unbind(t.window,"ready",o),e.render()};if(Ne.Event.domLoaded){if(e.getElement()&&ge.contentEditable){n.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var form=e.getElement().form||xw.getParent(r,"form");form&&(e.formElement=form,n.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(xw.insertAfter(xw.create("input",{type:"hidden",name:r}),r),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},xw.bind(form,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!n.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),form._mceOldSubmit(form)})),e.windowManager=df(e),e.notificationManager=ff(e),"xml"===n.encoding&&e.on("GetContent",function(e){e.save&&(e.content=xw.encode(e.content))}),n.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),n.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Cw(e,e.suffix)}}else xw.bind(t.window,"ready",o)},kw=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},Ow=function(e,t,n){var element,r;$i(e,t)&&!1===n?(r=t,Fi(element=e)?element.dom().classList.remove(r):ji(element,r),Wi(element)):n&&Ui(e,t)},Tw=function(e,t){Ow(er.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",kw(e,"StyleWithCSS",!1),kw(e,"enableInlineTableEditing",!1),kw(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Ew=function(e){return e.readonly?"readonly":"design"},Nw=function(e){return Qt.grep(e.childNodes,function(e){return"LI"===e.nodeName})},_w=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return""===e.data||Mo.isBr(e)}(e.firstChild)},Aw=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||_w(t))?e.slice(0,-1):e;var t},Dw=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Rw=function(e,t){var n=Cu.after(e),r=jc(t).prev(n);return r?r.toRange():null},Bw=function(e,t,n){var r=e.parentNode;return Qt.each(t,function(t){r.insertBefore(t,e)}),function(e,t){var n=Cu.before(e),r=jc(t).next(n);return r?r.toRange():null}(e,n)},Mw=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||""===e.value}(t.firstChild)}(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},Iw=function(e,t,n,r){var o=function(e,t,n){var html=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(html))}(t,e,r),c=Dw(t,n.startContainer),l=Aw(Nw(o.firstChild)),f=t.getRoot(),d=function(e){var r=Cu.fromRangeStart(n),o=jc(t.getRoot()),l=1===e?o.prev(r):o.next(r);return!l||Dw(t,l.getNode())!==c};return d(1)?Bw(c,l,f):d(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),Rw(t[0],n)}(c,l,f,t):function(e,t,n,r){var o=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),c=e.parentNode;return c.insertBefore(o[0],e),Qt.each(t,function(li){c.insertBefore(li,e)}),c.insertBefore(o[1],e),c.removeChild(e),Rw(t[t.length-1],n)}(c,l,f,n)},zw=function(e,t){return!!Dw(e,t)},Pw=Mo.matchNodeNames("td th"),Lw=function(e,content){var t=e.selection.getRng(),n=t.startContainer,r=t.startOffset;t.collapsed&&function(e,t){return Mo.isText(e)&&""===e.nodeValue[t-1]}(n,r)&&Mo.isText(n)&&(n.insertData(r-1," "),n.deleteData(r,1),t.setStart(n,r),t.setEnd(n,r),e.selection.setRng(t)),e.selection.setContent(content)},Hw=function(e,t,details){var n,r,o,c,l,f,marker,d,m,h,v,y=e.selection,x=e.dom;if(/^ | $/.test(t)&&(t=function(e,html){var t,n;t=e.startContainer,n=e.startOffset;var r=function(e){return t[e]&&3===t[e].nodeType};return 3===t.nodeType&&(n>0?html=html.replace(/^&nbsp;/," "):r("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),n<t.length?html=html.replace(/&nbsp;(<br>|)$/," "):r("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(y.getRng(),t)),n=e.parser,v=details.merge,r=Js({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',f={content:t,format:"html",selection:!0,paste:details.paste},(f=e.fire("BeforeSetContent",f)).isDefaultPrevented())e.fire("SetContent",{content:f.content,format:"html",selection:!0,paste:details.paste});else{-1===(t=f.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h);var w=(d=y.getRng()).startContainer||(d.parentElement?d.parentElement():null),body=e.getBody();w===body&&y.isCollapsed()&&x.isBlock(body.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,body.firstChild)&&x.isEmpty(body.firstChild)&&((d=x.createRng()).setStart(body.firstChild,0),d.setEnd(body.firstChild,0),y.setRng(d)),y.isCollapsed()||(e.selection.setRng(Vg(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),t=function(e,t){var n,r;return n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t))),t}(e.selection.getRng(),t));var C,S={context:(o=y.getNode()).nodeName.toLowerCase(),data:details.data,insert:!0};if(l=n.parse(t,S),!0===details.paste&&Mw(e.schema,l)&&zw(x,o))return d=Iw(r,x,e.selection.getRng(),l),e.selection.setRng(d),void e.fire("SetContent",f);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(l),"mce_marker"===(m=l.lastChild).attr("id"))for(marker=m,m=m.prev;m;m=m.walk(!0))if(3===m.type||!x.isBlock(m.name)){e.schema.isValidChild(m.parent.name,"span")&&m.parent.insert(marker,m,"br"===m.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),S.invalid){for(Lw(e,h),o=y.getNode(),c=e.getBody(),9===o.nodeType?o=m=c:m=o;m!==c;)o=m,m=m.parentNode;t=o===c?c.innerHTML:x.getOuterHTML(o),t=r.serialize(n.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return r.serialize(l)}))),o===c?x.setHTML(c,t):x.setOuterHTML(o,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):Lw(e,t)}}(e,t=r.serialize(l),o);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var o=e.getBody(),c=new gg(r);Qt.each(r.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&c.compare(t,e)&&r.remove(e,!0)})}}(e,v),function(e,marker){var t,n,r,o,c,l=e.dom,f=e.selection;if(marker){if(e.selection.scrollIntoView(marker),t=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(marker))return l.remove(marker),void f.select(t);var d=l.createRng();(o=marker.previousSibling)&&3===o.nodeType?(d.setStart(o,o.nodeValue.length),ge.ie||(c=marker.nextSibling)&&3===c.nodeType&&(o.appendData(c.data),c.parentNode.removeChild(c))):(d.setStartBefore(marker),d.setEndBefore(marker)),n=l.getParent(marker,l.isBlock),l.remove(marker),n&&l.isEmpty(n)&&(e.$(n).empty(),d.setStart(n,0),d.setEnd(n,0),Pw(n)||function(e){return!!e.getAttribute("data-mce-fragment")}(n)||!(r=function(t){var n=Cu.fromRangeStart(t);if(n=jc(e.getBody()).next(n))return n.toRange()}(d))?l.add(n,l.create("br",{"data-mce-bogus":"1"})):(d=r,l.remove(n))),f.setRng(d)}}(e,x.get("mce_marker")),C=e.getBody(),Qt.each(C.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),function(e,t){I.from(e.getParent(t,"td,th")).map(er.fromDom).each(Sm)}(e.dom,e.selection.getStart()),e.fire("SetContent",f),e.addVisual()}},Fw={insertAtCaret:function(e,t){var n=function(e){var details;return"string"!=typeof e?(details=Qt.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:details}):{content:e,details:{}}}(t);Hw(e,n.content,n.details)}},Vw=function(e,t){e.getDoc().execCommand(t,!1,null)},jw={deleteCommand:function(e){Kb(e,!1)||Zb(e,!1)||ry(e,!1)||Bb(e,!1)||Ry(e)||Pb(e,!1)||uy(e,!1)||(Vw(e,"Delete"),vb(e))},forwardDeleteCommand:function(e){Kb(e,!0)||Zb(e,!0)||ry(e,!0)||Bb(e,!0)||Ry(e)||Pb(e,!0)||uy(e,!0)||Vw(e,"ForwardDelete")}},Uw=function(e){return function(t,n){return I.from(n).map(er.fromDom).filter(ur).bind(function(element){return function(e,t,n){var r=function(t){return Tr(t,e)};return Ki(er.fromDom(n),function(e){return r(e).isSome()},function(e){return zr(er.fromDom(t),e)}).bind(r)}(e,t,element.dom()).or(function(e,t){return I.from(bi.DOM.getStyle(t,e,!0))}(e,element.dom()))}).getOr("")}},Ww={getFontSize:Uw("font-size"),getFontFamily:r(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Uw("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e}},$w=function(e){return Zc.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Mo.isText(t)?t.parentNode:t})},qw=function(e){return I.from(e.selection.getRng()).bind(function(t){return function(e,t){return e.startContainer===t&&0===e.startOffset}(t,e.getBody())?I.none():I.from(e.selection.getStart(!0))})},Gw=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=Gs.getFontStyleValues(e),o=Gs.getFontSizeClasses(e);return o?o[n-1]||t:r[n-1]||t}return t}return t},Yw=function(e,t){e.formatter.toggle("fontname",{value:Gw(e,t)}),e.nodeChanged()},Xw=function(e){return qw(e).fold(function(){return $w(e).map(function(t){return Ww.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return Ww.getFontFamily(e.getBody(),t)})},Kw=function(e,t){e.formatter.toggle("fontsize",{value:Gw(e,t)}),e.nodeChanged()},Jw=function(e){return qw(e).fold(function(){return $w(e).map(function(t){return Ww.getFontSize(e.getBody(),t)}).getOr("")},function(t){return Ww.getFontSize(e.getBody(),t)})},Qw=function(e){var t=parseInt(e,10);return isNaN(t)?0:t},Zw=function(e,element){return(e||"table"===ir(element)?"margin":"padding")+("rtl"===kr(element,"direction")?"-right":"-left")},eC=function(e){var t=nC(e);return!0!==e.readonly&&(t.length>1||function(e,t){return te(t,function(t){var n=Zw(Gs.shouldIndentUseMargin(e),t),r=Tr(t,n).map(Qw).getOr(0);return"false"!==e.dom.getContentEditable(t.dom())&&r>0})}(e,t))},tC=function(e){return vo(e)||bo(e)},nC=function(e){return filter(map(e.selection.getSelectedBlocks(),er.fromDom),function(e){return!tC(e)&&!function(e){return Hr(e).map(tC).getOr(!1)}(e)&&Ki(e,function(e){return Mo.isContentEditableTrue(e.dom())||Mo.isContentEditableFalse(e.dom())}).exists(function(e){return Mo.isContentEditableTrue(e.dom())})})},rC=function(e,t){var n=e.dom,r=e.selection,o=e.formatter,c=Gs.getIndentation(e),l=/[a-z%]+$/i.exec(c)[0],f=parseInt(c,10),d=Gs.shouldIndentUseMargin(e),m=Gs.getForcedRootBlock(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==m||n.getParent(r.getNode(),n.isBlock)||o.apply("div"),G(nC(e),function(e){!function(e,t,n,r,o,element){var c=Zw(n,er.fromDom(element));if("outdent"===t){var l=Math.max(0,Qw(element.style[c])-r);e.setStyle(element,c,l?l+o:"")}else l=Qw(element.style[c])+r+o,e.setStyle(element,c,l)}(n,t,d,f,l,e.dom())})},oC=Qt.each,iC=Qt.extend,aC=Qt.map,uC=Qt.inArray;function cC(e){var t,n,r,o,c={state:{},exec:{},value:{}};e.on("PreInit",function(){t=e.dom,n=e.selection,r=e.formatter});var l=function(e,t){t=t||"exec",oC(e,function(e,n){oC(n.toLowerCase().split(","),function(n){c[t][n]=e})})},f=function(t,n,r){t=t.toLowerCase(),c.value[t]=function(){return n.call(r||e)}};iC(this,{execCommand:function(t,n,r,o){var l,f,d=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?xl.restore(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(f=t.toLowerCase(),l=c.exec[f])return l(f,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(oC(e.plugins,function(p){if(p.execCommand&&p.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),d=!0,!1}),d)return d;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{d=e.getDoc().execCommand(t,n,r)}catch(e){}return!!d&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=c.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=c.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),c.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:l,addCommand:function(t,n,r){t=t.toLowerCase(),c.exec[t]=function(t,o,c,l){return n.call(r||e,o,c,l)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),c.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:f,hasCustomCommand:function(e){return e=e.toLowerCase(),!!c.exec[e]}});var d=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},m=function(e){return r.match(e)},h=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},v=function(e){o=n.getBookmark(e)},y=function(){n.moveToBookmark(o)};l({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{d(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");ge.mac&&(o=o.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),oC("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&h("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,o;d(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(o=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)&&(v(),t.split(o,r),y()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){h(e)},"ForeColor,HiliteColor":function(e,t,n){h(e,n)},FontName:function(t,n,r){Yw(e,r)},FontSize:function(t,n,r){Kw(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){h("blockquote")},FormatBlock:function(e,t,n){return h(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,o){var c=o||n.getNode();c!==e.getBody()&&(v(),e.dom.remove(c,!0),y())},mceSelectNodeDepth:function(r,o,c){var l=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&l++===c)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Fw.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,o){n.setContent("tiny_mce_marker");var content=e.getContent();e.setContent(content.replace(/tiny_mce_marker/g,function(){return o}))},mceInsertNewLine:function(t,n,r){Ox.insert(e,r)},mceToggleFormat:function(e,t,n){h(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){rC(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,c){var l;"string"==typeof c&&(c={href:c}),l=t.getParent(n.getNode(),"a"),c.href=c.href.replace(" ","%20"),l&&c.href||r.remove("link"),c.href&&r.apply("link",c,l)},selectAll:function(){var e=t.getParent(n.getStart(),Mo.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){jw.deleteCommand(e)},forwardDelete:function(){jw.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return sx.insert(e,r),!0}});var x=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),c=aC(o,function(t){return!!r.matchNode(t,e)});return-1!==uC(c,!0)}};l({JustifyLeft:x("alignleft"),JustifyCenter:x("aligncenter"),JustifyRight:x("alignright"),JustifyFull:x("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return m(e)},mceBlockQuote:function(){return m("blockquote")},Outdent:function(){return eC(e)},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),l({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),f("FontName",function(){return Xw(e)},this),f("FontSize",function(){return Jw(e)},this)}var sC=Qt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),lC=function(e){var t,n,r=this,o={},c=function(){return!1},l=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||c;var f=function(e,t,l,f){var d,m,i;if(!1===t&&(t=c),t)for(t={func:t},f&&Qt.extend(t,f),i=(m=e.toLowerCase().split(" ")).length;i--;)e=m[i],(d=o[e])||(d=o[e]=[],n(e,!0)),l?d.unshift(t):d.push(t);return r},d=function(e,t){var i,c,l,f,d;if(e)for(i=(f=e.toLowerCase().split(" ")).length;i--;){if(e=f[i],c=o[e],!e){for(l in o)n(l,!1),delete o[l];return r}if(c){if(t)for(d=c.length;d--;)c[d].func===t&&(c=c.slice(0,d).concat(c.slice(d+1)),o[e]=c);else c.length=0;c.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return r};r.fire=function(n,r){var f,i,m,h;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=l},r.stopPropagation=function(){r.isPropagationStopped=l},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=l},r.isDefaultPrevented=c,r.isPropagationStopped=c,r.isImmediatePropagationStopped=c),e.beforeFire&&e.beforeFire(r),f=o[n])for(i=0,m=f.length;i<m;i++){if((h=f[i]).once&&d(n,h.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===h.func.call(t,r))return r.preventDefault(),r}return r},r.on=f,r.off=d,r.once=function(e,t,n){return f(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};lC.isNative=function(e){return!!sC[e.toLowerCase()]};var fC,dC=function(e){return e._eventDispatcher||(e._eventDispatcher=new lC({scope:e,toggleEvent:function(t,n){lC.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},mC={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;if(t=dC(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return dC(this).on(e,t,n)},off:function(e,t){return dC(this).off(e,t)},once:function(e,t){return dC(this).once(e,t)},hasEventListeners:function(e){return dC(this).has(e)}},gC=bi.DOM,hC=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=gC.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},pC=function(e,t,n){!function(e){return!e.hidden&&!e.readonly}(e)?function(e){return!0===e.readonly}(e)&&n.preventDefault():e.fire(t,n)},vC=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=hC(e,t),e.settings.event_root){if(fC||(fC={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&fC){for(t in fC)e.dom.unbind(hC(e,t));fC=null}})),fC[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),i=o.length;i--;){var body=o[i].getBody();(body===r||gC.isChildOf(r,body))&&pC(o[i],t,n)}},fC[t]=r,gC.bind(n,t,r)}else r=function(n){pC(e,t,n)},gC.bind(n,t,r),e.delegates[t]=r},bC={bindPendingEventDelegates:function(){var e=this;Qt.each(e._pendingNativeEvents,function(t){vC(e,t)})},toggleNativeEvent:function(e,t){"focus"!==e&&"blur"!==e&&(t?this.initialized?vC(this,e):this._pendingNativeEvents?this._pendingNativeEvents.push(e):this._pendingNativeEvents=[e]:this.initialized&&(this.dom.unbind(hC(this,e),e,this.delegates[e]),delete this.delegates[e]))},unbindAllNativeEvents:function(){var e,body=this.getBody(),t=this.dom;if(this.delegates){for(e in this.delegates)this.dom.unbind(hC(this,e),e,this.delegates[e]);delete this.delegates}!this.inline&&body&&t&&(body.onload=null,t.unbind(this.getWin()),t.unbind(this.getDoc())),t&&(t.unbind(body),t.unbind(this.getContainer()))}},yC=bC=Qt.extend({},mC,bC),xC=Qt.each,wC=Qt.explode,CC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},SC=Qt.makeMap("alt,ctrl,shift,meta,access");function kC(e){var t={},n=[],r=function(pattern){var e,t,n={};for(t in xC(wC(pattern,"+"),function(e){e in SC?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=CC[e]||e.toUpperCase().charCodeAt(0))}),e=[n.keyCode],SC)n[t]?e.push(t):n[t]=!1;return n.id=e.join(","),n.access&&(n.alt=!0,ge.mac?n.ctrl=!0:n.shift=!0),n.meta&&(ge.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},o=function(pattern,desc,t,n){var o;return(o=Qt.map(wC(pattern,">"),r))[o.length-1]=Qt.extend(o[o.length-1],{func:t,scope:n||e}),Qt.extend(o[0],{desc:e.translate(desc),subpatterns:o.slice(1)})},c=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},l=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!function(e){return e.altKey||e.ctrlKey||e.metaKey}(e)&&!function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}(e)||e.isDefaultPrevented()||(xC(t,function(t){if(c(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&l(t),!0}),c(e,n[0])&&(1===n.length&&"keydown"===e.type&&l(n[0]),n.shift()))}),this.add=function(pattern,desc,n,r){var c;return c=n,"string"==typeof n?n=function(){e.execCommand(c,!1,null)}:Qt.isArray(c)&&(n=function(){e.execCommand(c[0],c[1],c[2])}),xC(wC(Qt.trim(pattern.toLowerCase())),function(pattern){var e=o(pattern,desc,n,r);t[e.id]=e}),!0},this.remove=function(pattern){var e=o(pattern);return!!t[e.id]&&(delete t[e.id],!0)}}var OC=Qt.each,TC=Qt.trim,EC="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),NC={ftp:21,http:80,https:443,mailto:25},_C=function(e,n){var r,o,c=this;if(e=TC(e),r=(n=c.settings=n||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))c.source=e;else{var l=0===e.indexOf("//");0!==e.indexOf("/")||l||(e=(r&&r.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(o=n.base_uri?n.base_uri.path:new _C(t.document.location.href).directory,""==n.base_uri.protocol?e="//mce_host"+c.toAbsPath(o,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(o,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),OC(EC,function(t,i){var n=e[i];n&&(n=n.replace(/\(mce_at\)/g,"@@")),c[t]=n}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),c.port||"mce_host"!==c.host||(c.port=r.port),c.host&&"mce_host"!==c.host||(c.host=r.host),c.source=""),l&&(c.protocol="")}};_C.prototype={setPath:function(path){path=/^(.*?)\/?(\w+)?$/.exec(path),this.path=path[0],this.directory=path[1],this.file=path[2],this.source="",this.getURI()},toRelative:function(e){var output;if("./"===e)return e;if("mce_host"!==(e=new _C(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),n=e.getURI();return t===n||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===n?t:(output=this.toRelPath(this.path,e.path),e.query&&(output+="?"+e.query),e.anchor&&(output+="#"+e.anchor),output)},toAbsolute:function(e,t){return(e=new _C(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=NC[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(base,path){var e,i,t,n=0,r="";if(base=(base=base.substring(0,base.lastIndexOf("/"))).split("/"),e=path.split("/"),base.length>=e.length)for(i=0,t=base.length;i<t;i++)if(i>=e.length||base[i]!==e[i]){n=i+1;break}if(base.length<e.length)for(i=0,t=e.length;i<t;i++)if(i>=base.length||base[i]!==e[i]){n=i+1;break}if(1===n)return path;for(i=0,t=base.length-(n-1);i<t;i++)r+="../";for(i=n-1,t=e.length;i<t;i++)r+=i!==n-1?"/"+e[i]:e[i];return r},toAbsPath:function(base,path){var i,tr,e,t=0,n=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),OC(base,function(e){e&&n.push(e)}),base=n,i=path.length-1,n=[];i>=0;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?t>0?t--:n.push(path[i]):t++);return 0!==(e=(i=base.length-t)<=0?n.reverse().join("/"):base.slice(0,i).join("/")+"/"+n.reverse().join("/")).indexOf("/")&&(e="/"+e),tr&&e.lastIndexOf("/")!==e.length-1&&(e+=tr),e},getURI:function(e){var s;return this.source&&!e||(s="",e||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}},_C.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},_C.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var AC=function(){var e,t,n,r,o,c,l,f,d=(t={},n={},r={},o={},c={},l={},{addButton:(f=function(e,t){return function(n,r){return e[n.toLowerCase()]=uh({type:t},r)}})(e={},"button"),addToggleButton:f(e,"togglebutton"),addMenuButton:f(e,"menubutton"),addSplitButton:f(e,"splitbutton"),addMenuItem:f(t,"menuitem"),addNestedMenuItem:f(t,"nestedmenuitem"),addToggleMenuItem:f(t,"togglemenuitem"),addAutocompleter:f(n,"autocompleter"),addContextMenu:f(o,"contextmenu"),addContextToolbar:f(c,"contexttoolbar"),addContextForm:f(c,"contextform"),addSidebar:f(l,"sidebar"),addIcon:function(e,t){return r[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:o,contextToolbars:c,sidebars:l}}});return{addAutocompleter:d.addAutocompleter,addButton:d.addButton,addContextForm:d.addContextForm,addContextMenu:d.addContextMenu,addContextToolbar:d.addContextToolbar,addIcon:d.addIcon,addMenuButton:d.addMenuButton,addMenuItem:d.addMenuItem,addNestedMenuItem:d.addNestedMenuItem,addSidebar:d.addSidebar,addSplitButton:d.addSplitButton,addToggleButton:d.addToggleButton,addToggleMenuItem:d.addToggleMenuItem,getAll:d.getAll}},DC=bi.DOM,RC=Qt.extend,BC=Qt.each,MC=Qt.resolve,IC=ge.ie,zC=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,c=n.baseURI;t=function(e,t,n,r,o){var c=function(e,t,n){return{id:e,theme:"silver",popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}}(t,n,e);return Zl($l,c,r,o)}(r,e,o,n.defaultSettings,t),r.settings=t,_i.languageLoad=t.language_load,_i.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new _C(t.document_base_url,{base_uri:c}),r.baseURI=c,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new kC(r),r.loadedCSS={},r.editorCommands=new cC(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(ge.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(ge.overrideViewPort=!1),r.ui={registry:AC()},n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=bn.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};zC.prototype={render:function(){Sw(this)},focus:function(e){El(this,e)},hasFocus:function(){return Nl(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this.settings[e];if(o)return this.callbackLookup&&(r=this.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?MC(r):0,o=MC(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:r}),o.apply(r||this,Array.prototype.slice.call(arguments,1))},translate:function(text){return Ei.translate(text)},getParam:function(e,t,n){return nf(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},addSidebar:function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},addMenuItem:function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},addContextToolbar:function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(pattern,desc,e,t){this.shortcuts.add(pattern,desc,e,t)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(DC.show(this.getContainer()),DC.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this.getDoc();this.hidden||(IC&&e&&!this.inline&&e.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(DC.hide(this.getContainer()),DC.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,time){this.fire("ProgressState",{state:e,time:time})},load:function(e){var html,t=this.getElement();return this.removed?"":t?((e=e||{}).load=!0,html=this.setContent(void 0!==t.value?t.value:t.innerHTML,e),e.element=t,e.no_events||this.fire("LoadContent",e),e.element=t=null,html):void 0},save:function(e){var html,form,t=this,n=t.getElement();if(n&&t.initialized&&!t.removed)return(e=e||{}).save=!0,e.element=n,e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),"raw"===e.format&&t.fire("RawSaveContent",e),html=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=html:(!e.is_removing&&t.inline||(n.innerHTML=html),(form=DC.getParent(t.id,"form"))&&BC(form.elements,function(e){if(e.name===t.id)return e.value=html,!1})),e.element=n=null,!1!==e.set_dirty&&t.setDirty(!1),html},setContent:function(content,e){return Dl(this,content,e)},getContent:function(e){return function(e,t){return void 0===t&&(t={}),I.from(e.getBody()).fold(o("tree"===t.format?new zs("body",11):""),function(body){return Ys(e,t,body)})}(this,e)},insertContent:function(content,e){e&&(content=RC({content:content},e)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){!function(e,t){t!==Ew(e)&&(e.initialized?Tw(e,"readonly"===t):e.on("init",function(){Tw(e,"readonly"===t)}),zl(e,t))}(this,e)},getContainer:function(){return this.container||(this.container=DC.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=DC.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),BC(o.select("table,a",e),function(e){var c;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((c=o.getAttrib(e,"border"))&&"0"!==c||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(c=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",c&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){Vl(this)},destroy:function(e){jl(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},RC(zC.prototype,yC);var PC,LC,HC,FC={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("tox-")||-1!==e.className.toString().indexOf("mce-")}},VC=function(e,t){Qn.detect().browser.isIE()?function(e){e.on("focusout",function(){xl.store(e)})}(e):function(e,t){e.on("mouseup touchend",function(e){t.throttle()})}(e,t),e.on("keyup nodechange",function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||xl.store(e)})},jC=function(e){var n=Li(function(){xl.store(e)},0);e.inline&&function(e,n){var r=function(){n.throttle()};bi.DOM.bind(t.document,"mouseup",r),e.on("remove",function(){bi.DOM.unbind(t.document,"mouseup",r)})}(e,n),e.on("init",function(){VC(e,n)}),e.on("remove",function(){n.cancel()})},UC=bi.DOM,WC=function(e){return FC.isEditorUIElement(e)},$C=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==UC.getParent(t,function(t){return WC(t)||!!n&&e.dom.is(t,n)})},qC=function(e,n){var r=n.editor;jC(r),r.on("focusin",function(){var t=e.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),e.setActive(this),e.focusedEditor=this,this.fire("focus",{blurredEditor:t}),this.focus(!0))}),r.on("focusout",function(){var n=this;ye.setEditorTimeout(n,function(){var r=e.focusedEditor;$C(n,function(){try{return t.document.activeElement}catch(e){return t.document.body}}())||r!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),PC||(PC=function(n){var r,o=e.activeEditor;r=n.target,o&&r.ownerDocument===t.document&&(r===t.document.body||$C(o,r)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},UC.bind(t.document,"focusin",PC))},GC=function(e,n){e.focusedEditor===n.editor&&(e.focusedEditor=null),e.activeEditor||(UC.unbind(t.document,"focusin",PC),PC=null)},YC=function(e){e.on("AddEditor",l(qC,e)),e.on("RemoveEditor",l(GC,e))},XC=bi.DOM,KC=Qt.explode,JC=Qt.each,QC=Qt.extend,ZC=0,eS=!1,tS=[],nS=[],rS=function(e){var t=e.type;JC(HC.get(),function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}})},oS=function(e){e!==eS&&(e?bn(window).on("resize scroll",rS):bn(window).off("resize scroll",rS),eS=e)},iS=function(e){var t=nS;delete tS[e.id];for(var i=0;i<tS.length;i++)if(tS[i]===e){tS.splice(i,1);break}return nS=filter(nS,function(t){return e!==t}),HC.activeEditor===e&&(HC.activeEditor=nS.length>0?nS[0]:null),HC.focusedEditor===e&&(HC.focusedEditor=null),t.length!==nS.length};HC={defaultSettings:{},$:bn,majorVersion:"5",minorVersion:"0.3",releaseDate:"2019-03-19",editors:tS,i18n:Ei,activeEditor:null,settings:{},setup:function(){var e,n,r,o,c="";if(n=_C.getDocumentBaseUrl(t.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),r=window.tinymce||window.tinyMCEPreInit)e=r.base||r.baseURL,c=r.suffix;else{for(var l=t.document.getElementsByTagName("script"),i=0;i<l.length;i++){var f=(o=l[i].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==f.indexOf(".min")&&(c=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&t.document.currentScript&&(-1!==(o=t.document.currentScript.src).indexOf(".min")&&(c=".min"),e=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new _C(n).toAbsolute(e),this.documentBaseURL=n,this.baseURI=new _C(this.baseURL),this.suffix=c,YC(this)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new _C(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new _C(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var o in r)_i.PluginManager.urls[o]=r[o]},init:function(e){var n,r,o=this;r=Qt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");var c=function(e){var t=e.id;return t||(t=(t=e.name)&&!XC.get(t)?e.name:XC.uniqueId(),e.setAttribute("id",t)),t},l=function(e,t){return t.constructor===RegExp?t.test(e.className):XC.hasClass(e,t)},f=function(e){n=e},d=function(){var n,m=0,h=[],v=function(e,t,r){var c=new zC(e,t,o);h.push(c),c.on("init",function(){++m===n.length&&f(h)}),c.targetElm=c.targetElm||r,c.render()};XC.unbind(window,"ready",d),function(t){var n=e[t];n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),n=bn.unique(function(e){var n,r=[];if(ge.ie&&ge.ie<11)return yf.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return JC(e.types,function(e){r=r.concat(XC.select(e.selector))}),r;if(e.selector)return XC.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(n=e.elements||"").length>0&&JC(KC(n),function(e){var n;(n=XC.get(e))?r.push(n):JC(t.document.forms,function(t){JC(t.elements,function(t){t.name===e&&(e="mce_editor_"+ZC++,XC.setAttrib(t,"id",e),r.push(t))})})});break;case"textareas":case"specific_textareas":JC(XC.select("textarea"),function(t){e.editor_deselector&&l(t,e.editor_deselector)||e.editor_selector&&!l(t,e.editor_selector)||r.push(t)})}return r}(e)),e.types?JC(e.types,function(t){Qt.each(n,function(n){return!XC.is(n,t.selector)||(v(c(n),QC({},e,t),n),!1)})}):(Qt.each(n,function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(iS(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(n=Qt.grep(n,function(e){return!o.get(e.id)})).length?f([]):JC(n,function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in r}(e,t)?v(c(t),e,t):yf.initError("Could not initialize inline editor on invalid inline target element",t)}))};return o.settings=e,XC.bind(window,"ready",d),new he(function(e){n?e(n):f=function(t){e(t)}})},get:function(e){return 0===arguments.length?nS.slice(0):P(e)?K(nS,function(t){return t.id===e}).getOr(null):U(e)&&nS[e]?nS[e]:null},add:function(e){var t=this;return tS[e.id]===e?e:(null===t.get(e.id)&&("length"!==e.id&&(tS[e.id]=e),tS.push(e),nS.push(e)),oS(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),LC||(LC=function(){t.fire("BeforeUnload")},XC.bind(window,"beforeunload",LC)),e)},createEditor:function(e,t){return this.add(new zC(e,t,this))},remove:function(e){var i,t,n=this;if(e){if(!P(e))return t=e,F(n.get(t.id))?null:(iS(t)&&n.fire("RemoveEditor",{editor:t}),0===nS.length&&XC.unbind(window,"beforeunload",LC),t.remove(),oS(nS.length>0),t);JC(XC.select(e),function(e){(t=n.get(e.id))&&n.remove(t)})}else for(i=nS.length-1;i>=0;i--)n.remove(nS[i])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new zC(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){JC(nS,function(e){e.save()})},addI18n:function(code,e){Ei.add(code,e)},translate:function(text){return Ei.translate(text)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},QC(HC,mC),HC.setup();var aS=HC;function uS(e){return{walk:function(t,n){return Os.walk(e,t,n)},split:Rm.split,normalize:function(t){return kp.normalize(e,t).fold(o(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}!function(e){e.compareRanges=Yf.isEq,e.getCaretRangeFromPoint=Hh.fromPoint,e.getSelectedNode=Ya,e.getNode=Xa}(uS||(uS={}));var cS,sS,lS=uS,fS=Math.min,dS=Math.max,mS=Math.round,gS=function(rect,e,t){var n,r,o,c,l,f;return n=e.x,r=e.y,o=rect.w,c=rect.h,l=e.w,f=e.h,"b"===(t=(t||"").split(""))[0]&&(r+=f),"r"===t[1]&&(n+=l),"c"===t[0]&&(r+=mS(f/2)),"c"===t[1]&&(n+=mS(l/2)),"b"===t[3]&&(r-=c),"r"===t[4]&&(n-=o),"c"===t[3]&&(r-=mS(c/2)),"c"===t[4]&&(n-=mS(o/2)),hS(n,r,o,c)},hS=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},pS={inflate:function(rect,e,t){return hS(rect.x-e,rect.y-t,rect.w+2*e,rect.h+2*t)},relativePosition:gS,findBestRelativePosition:function(rect,e,t,n){var r,i;for(i=0;i<n.length;i++)if((r=gS(rect,e,n[i])).x>=t.x&&r.x+r.w<=t.w+t.x&&r.y>=t.y&&r.y+r.h<=t.h+t.y)return n[i];return null},intersect:function(rect,e){var t,n,r,o;return t=dS(rect.x,e.x),n=dS(rect.y,e.y),r=fS(rect.x+rect.w,e.x+e.w),o=fS(rect.y+rect.h,e.y+e.h),r-t<0||o-n<0?null:hS(t,n,r-t,o-n)},clamp:function(rect,e,t){var n,r,o,c,l,f,d,m,h,v;return l=rect.x,f=rect.y,d=rect.x+rect.w,m=rect.y+rect.h,h=e.x+e.w,v=e.y+e.h,n=dS(0,e.x-l),r=dS(0,e.y-f),o=dS(0,d-h),c=dS(0,m-v),l+=n,f+=r,t&&(d+=n,m+=r,l-=o,f-=c),hS(l,f,(d-=o)-l,(m-=c)-f)},create:hS,fromClientRect:function(e){return hS(e.left,e.top,e.width,e.height)}},vS=Qt.each,bS=Qt.extend,yS=function(){};yS.extend=cS=function(e){var t,n,r,o=this.prototype,c=function(){var i,e,t;if(!sS&&(this.init&&this.init.apply(this,arguments),e=this.Mixins))for(i=e.length;i--;)(t=e[i]).init&&t.init.apply(this,arguments)},l=function(){return this},f=function(e,t){return function(){var n,r=this._super;return this._super=o[e],n=t.apply(this,arguments),this._super=r,n}};for(n in sS=!0,t=new this,sS=!1,e.Mixins&&(vS(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&vS(e.Methods.split(","),function(t){e[t]=l}),e.Properties&&vS(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&vS(e.Statics,function(e,t){c[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=bS({},o.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&o[n]?t[n]=f(n,r):t[n]=r;return c.prototype=t,c.constructor=c,c.extend=cS,c};var xS=Math.min,wS=Math.max,CS=Math.round,SS={serialize:function(e){var data=JSON.stringify(e);return P(data)?data.replace(/[\u0080-\uFFFF]/g,function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t}):data},parse:function(text){try{return JSON.parse(text)}catch(e){}}},kS={callbacks:{},count:0,send:function(e){var t=this,n=bi.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(c){n.remove(o),delete t.callbacks[r],e.callback(c)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},OS={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):ye.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",OS.fire("beforeInitialize",{settings:e}),t=Sf()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Qt.each(e.requestheaders,function(header){t.setRequestHeader(header.key,header.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=OS.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();ye.setTimeout(r,10)}}};Qt.extend(OS,mC);var TS,ES=Qt.extend,NS=function(e){this.settings=ES({},e),this.count=0};NS.sendRPC=function(e){return(new NS).send(e)},NS.prototype={send:function(e){var t=e.error,n=e.success;(e=ES(this.settings,e)).success=function(r,o){void 0===(r=SS.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,o):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=SS.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",OS.send(e)}};try{TS=t.window.localStorage}catch(e){TS=function(){return data={},e=[],t={getItem:function(e){var t=data[e];return t||null},setItem:function(t,n){e.push(t),data[t]=String(n)},key:function(t){return e[t]},removeItem:function(t){e=e.filter(function(e){return e===t}),delete data[t]},clear:function(){e=[],data={}},length:0},Object.defineProperty(t,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),t;var data,e,t}()}var _S=aS,AS={geom:{Rect:pS},util:{Promise:he,Delay:ye,Tools:Qt,VK:Ld,URI:_C,Class:yS,EventDispatcher:lC,Observable:mC,I18n:Ei,XHR:OS,JSON:SS,JSONRequest:NS,JSONP:kS,LocalStorage:TS,Color:function(e){var t={},n=0,g=0,b=0,r=function(e){var r;return"object"==typeof e?"r"in e?(n=e.r,g=e.g,b=e.b):"v"in e&&function(e,t,r){var o,c,l,f;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,r=parseInt(r,10)/100,t=wS(0,xS(t,1)),r=wS(0,xS(r,1)),0!==t){switch(o=e/60,l=(c=r*t)*(1-Math.abs(o%2-1)),f=r-c,Math.floor(o)){case 0:n=c,g=l,b=0;break;case 1:n=l,g=c,b=0;break;case 2:n=0,g=c,b=l;break;case 3:n=0,g=l,b=c;break;case 4:n=l,g=0,b=c;break;case 5:n=c,g=0,b=l;break;default:n=g=b=0}n=CS(255*(n+f)),g=CS(255*(g+f)),b=CS(255*(b+f))}else n=g=b=CS(255*r)}(e.h,e.s,e.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(r[1],10),g=parseInt(r[2],10),b=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(r[1],16),g=parseInt(r[2],16),b=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(r[1]+r[1],16),g=parseInt(r[2]+r[2],16),b=parseInt(r[3]+r[3],16)),n=n<0?0:n>255?255:n,g=g<0?0:g>255?255:g,b=b<0?0:b>255?255:b,t};return e&&r(e),t.toRgb=function(){return{r:n,g:g,b:b}},t.toHsv=function(){return function(e,g,b){var s,t,n,r;return t=0,(n=xS(e/=255,xS(g/=255,b/=255)))===(r=wS(e,wS(g,b)))?{h:0,s:0,v:100*(t=n)}:(s=(r-n)/r,t=r,{h:CS(60*((e===n?3:b===n?1:5)-(e===n?g-b:b===n?e-g:b-e)/(r-n))),s:CS(100*s),v:CS(100*t)})}(n,g,b)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(g)+e(b)},t.parse=r,t}},dom:{EventUtils:Ne,Sizzle:_t,DomQuery:bn,TreeWalker:ao,DOMUtils:bi,ScriptLoader:Si,RangeUtils:lS,Serializer:Nh,ControlSelection:Mh,BookmarkManager:Dh,Selection:Mp,Event:Ne.Event},html:{Styles:ui,Entities:Yo,Node:zs,Schema:ii,SaxParser:Us,DomParser:Sh,Writer:Ks,Serializer:Js},Env:ge,AddOnManager:_i,Annotator:Rs,Formatter:oh,UndoManager:xm,EditorCommands:cC,WindowManager:df,NotificationManager:ff,EditorObservable:yC,Shortcuts:kC,Editor:zC,FocusManager:FC,EditorManager:aS,DOM:bi.DOM,ScriptLoader:Si.ScriptLoader,PluginManager:_i.PluginManager,ThemeManager:_i.ThemeManager,IconManager:xf,trim:Qt.trim,isArray:Qt.isArray,is:Qt.is,toArray:Qt.toArray,makeMap:Qt.makeMap,each:Qt.each,map:Qt.map,grep:Qt.grep,inArray:Qt.inArray,extend:Qt.extend,create:Qt.create,walk:Qt.walk,createNS:Qt.createNS,resolve:Qt.resolve,explode:Qt.explode,_addCacheSuffix:Qt._addCacheSuffix,isOpera:ge.opera,isWebKit:ge.webkit,isIE:ge.ie,isGecko:ge.gecko,isMac:ge.mac},DS=_S=Qt.extend(_S,AS);!function(e){window.tinymce=e,window.tinyMCE=e}(DS),function(t){try{e.exports=t}catch(e){}}(DS)}(window)},function(e,t){!function(){"use strict";var e,t,n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},f=function(e){e.addCommand("ApplyUnorderedListStyle",function(t,n){l(e,"UL",n["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,n){l(e,"OL",n["list-style-type"])})},d=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},m=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,square");return t?t.split(/[ ,]/):[]},h=function(e){return function(){return e}},v=h(!1),y=h(!0),x=v,w=y,C=function(){return S},S=(r={fold:function(e,s){return e()},is:x,isSome:x,isNone:w,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:C,ap:C,each:function(){},bind:C,flatten:C,exists:x,forall:w,filter:C,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:h("none()")},Object.freeze&&Object.freeze(r),r),k=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:w,isNone:x,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(a))},ap:function(e){return e.fold(C,function(e){return k(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:S},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(x,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},O=function(e){return null==e?S:k(e)},T=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},E=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}},N=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),style=e.dom.getStyle(t,"listStyleType");return O(style)},_=function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t.parents,T),o=-1!==r?t.parents.slice(0,r):t.parents,l=c.grep(o,E(e));return l.length>0&&l[0].nodeName===n},A=function(e,t,n,r,o,f){f.length>0?function(e,t,n,r,o,f){e.ui.registry.addSplitButton(t,{tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(c.map(f,function(e){var t="OL"===o?"num":"bull",n="disc"===e||"decimal"===e?"default":e,r="default"===e?"":e,c=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e);return{type:"choiceitem",value:r,icon:"list-"+t+"-"+n,text:c,ariaLabel:c}}))},onAction:function(){return e.execCommand(r)},onItemAction:function(t,n){l(e,o,n)},select:function(t){return N(e).map(function(e){return t===e}).getOr(!1)},onSetup:function(t){var n=function(n){t.setActive(_(e,n,o))};return e.on("nodeChange",n),function(){return e.off("nodeChange",n)}}})}(e,t,n,r,o,f):function(e,t,n,r,o,c){e.ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",onSetup:function(t){var n=function(n){t.setActive(_(e,n,o))};return e.on("nodeChange",n),function(){return e.off("nodeChange",n)}},onAction:function(){return e.execCommand(r)}})}(e,t,n,r,o)},D=function(e){A(e,"numlist","Numbered list","InsertOrderedList","OL",d(e)),A(e,"bullist","Bullet list","InsertUnorderedList","UL",m(e))};o.add("advlist",function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==c.inArray(n.split(/[ ,]/),t)})(e,"lists")&&(D(e),f(e))})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},r=function(e){return e.getParam("default_link_target","")},o=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},c=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,o(t,n)):e.setStartBefore(t)},l=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,o(t,n)):e.setEndAfter(t)},f=function(e,t,o){var f,d,m,h,v,text,y,x,w,C,S=n(e),k=r(e);if("A"!==e.selection.getNode().tagName){if((f=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(x=f.endContainer.previousSibling)){if(!f.endContainer.firstChild||!f.endContainer.firstChild.nextSibling)return;x=f.endContainer.firstChild.nextSibling}if(w=x.length,c(f,x,w),l(f,x,w),f.endOffset<5)return;d=f.endOffset,h=x}else{if(3!==(h=f.endContainer).nodeType&&h.firstChild){for(;3!==h.nodeType&&h.firstChild;)h=h.firstChild;3===h.nodeType&&(c(f,h,0),l(f,h,h.nodeValue.length))}d=1===f.endOffset?2:f.endOffset-1-t}m=d;do{c(f,h,d>=2?d-2:0),l(f,h,d>=1?d-1:0),d-=1,C=f.toString()}while(" "!==C&&""!==C&&160!==C.charCodeAt(0)&&d-2>=0&&C!==o);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(f.toString(),o)?0===f.startOffset?(c(f,h,0),l(f,h,m)):(c(f,h,d),l(f,h,m)):(c(f,h,d),l(f,h,m),d+=1),"."===(text=f.toString()).charAt(text.length-1)&&l(f,h,m-1),(y=(text=f.toString().trim()).match(S))&&("www."===y[1]?y[1]="http://www.":/@$/.test(y[1])&&!/^mailto:/.test(y[1])&&(y[1]="mailto:"+y[1]),v=e.selection.getBookmark(),e.selection.setRng(f),e.execCommand("createlink",!1,y[1]+y[2]),k&&e.dom.setAttrib(e.selection.getNode(),"target",k),e.selection.moveToBookmark(v),e.nodeChanged())}},d=function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){f(e,-1,"")}(e)}),t.ie?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){f(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){f(e,0,"")}(e)}))};e.add("autolink",function(e){d(e)})}()},function(e,t){!function(e){"use strict";var t,n,r,o,c,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.util.VK"),d=function(e){return e.target_list},m=function(e){return e.rel_list},h=function(e){return e.link_class_list},v=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},y=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},x=function(e){return e.link_list},w=function(e){return"string"==typeof e.default_link_target},C=function(e){return e.default_link_target},S=d,k=function(e){return!1!==d(e)},O=m,T=function(e){return void 0!==m(e)},E=h,N=function(e){return void 0!==h(e)},_=function(e){return!1!==e.link_title},A=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},D=function(e){return!0===e.link_quicklink},R=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.Env"),M=function(t){if(!B.ie||B.ie>10){var link=e.document.createElement("a");link.target="_blank",link.href=t,link.rel="noreferrer noopener";var n=e.document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(link,t){e.document.body.appendChild(link),link.dispatchEvent(t),e.document.body.removeChild(link)}(link,n)}else{var r=e.window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+R.DOM.encode(t)+'">'),o.close()}}},I=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},z=function(e){return function(){return e}},P=z(!1),L=z(!0),H=P,F=L,V=function(){return j},j=(o={fold:function(e,s){return e()},is:H,isSome:H,isNone:F,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:V,ap:V,each:function(){},bind:V,flatten:V,exists:H,forall:F,filter:V,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:z("none()")},Object.freeze&&Object.freeze(o),o),U=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:F,isNone:H,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return U(e(a))},ap:function(e){return e.fold(V,function(e){return U(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:j},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(H,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},W={some:U,none:V,from:function(e){return null==e?j:U(e)}},$=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},G=$("string"),Y=$("function"),X=void 0===(c=Array.prototype.indexOf)?function(e,t){return J(e,t)}:function(e,t){return c.call(e,t)},K=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},J=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return i;return-1},Q=Array.prototype.push,Z=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);Q.apply(t,e[i])}return t},ee=function(e,t){var output=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r}(e,t);return Z(output)},te=(Array.prototype.slice,Y(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),ne=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],o=function(e){return e.filter(function(e){return-1===te.inArray(n,e)})},c=t?function(e){return(e=o(e)).length>0?e.concat(n):n}(r):o(r);return c.length>0?function(e){return te.trim(e.sort().join(" "))}(c):""},re=function(e,t){return t=t||e.selection.getNode(),ie(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},oe=function(e){return e&&"A"===e.nodeName&&!!e.href},ie=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},ae=function(data){return e=["title","rel","class","target"],t=function(e,t){return data[t].each(function(n){e[t]=n.length>0?n:null}),e},n={href:data.href},K(e,function(e){n=t(n,e)}),n;var e,t,n},ue=function(e,t){var img=e.dom.select("img",t)[0];if(img){var a=e.dom.getParents(img,"a[href]",t)[0];a&&(a.parentNode.insertBefore(img,a),e.dom.remove(a))}},ce=function(e,t,n){var img=e.dom.select("img",t)[0];if(img){var a=e.dom.create("a",n);img.parentNode.insertBefore(a,img),a.appendChild(img)}},se=function(e,t,data){e.undoManager.transact(function(){var n=e.selection.getNode(),r=re(e,n),o=ae(data);if(!T(e.settings)&&!1===A(e.settings)){var c=ne(o.rel,"_blank"===o.target);o.rel=c||null}data.href===t.href&&t.attach(),r?(e.focus(),function(e,t,text,n){text.each(function(text){t.hasOwnProperty("innerText")?t.innerText=text:t.textContent=text}),e.dom.setAttribs(t,n),e.selection.select(t)}(e,r,data.text,o)):function(e,t,text,n){ie(t)?ce(e,t,n):text.fold(function(){return e.execCommand("mceInsertLink",!1,n)},function(text){return e.insertContent(e.dom.createHTML("a",n,e.dom.encode(text)))})}(e,n,data.text,o)})},le=function(e){e.undoManager.transact(function(){var t=e.selection.getNode();if(ie(t))ue(e,t);else{var n=e.dom.getParent(t,"a[href]",e.getBody());n&&e.dom.remove(n,!0)}e.focus()})},fe=function(e){return te.grep(e,oe).length>0},de=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},me=function(html){return!(/</.test(html)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(html)||-1===html.indexOf("href=")))},ge=re,he=function(e,t){return function(text){return text.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))},pe=ne,ve=function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t},be=function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i],i);if(n.isSome())return n}return W.none()},ye=function(e){return G(e.value)?e.value:""},xe=function(e){return void 0===e&&(e=ye),function(t){return W.from(t).map(function(t){return function(e,t){var n=[];return te.each(e,function(e){var text=G(e.text)?e.text:G(e.title)?e.title:"";if(void 0!==e.menu);else{var r=t(e);n.push({text:text,value:r})}}),n}(t,e)})}},we={sanitize:function(e){return xe(ye)(e)},sanitizeWith:xe,createUi:function(e,label){return function(t){return{name:e,type:"selectbox",label:label,items:t}}},getValue:ye},Ce=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ce(n())}}},Se=function(e,t,n,data){var r=data[t],o=e.length>0;return void 0!==r?function(e,t){return be(t,function(t){return W.some(t).filter(function(i){return i.value===e})})}(r,n).map(function(i){return{url:{value:i.value,meta:{text:o?e:i.text,attach:I}},text:o?e:i.text}}):W.none()},ke=function(e,t){var n=Ce(e.text),r=function(data,e){var r,o,c=(r=t,o=e.name,"link"===o?r.catalogs.link:"anchor"===o?r.catalogs.anchor:W.none()).getOr([]);return Se(n.get(),e.name,c,data)};return{onChange:function(e,t){return"url"===t.name?function(data){if(n.get().length<=0){var e=void 0!==data.url.meta.text?data.url.meta.text:data.url.value;return W.some({text:e})}return W.none()}(e()):(o=["anchor","link"],c=t.name,X(o,c)>-1?r(e(),t):"text"===t.name?(n.set(e().text),W.none()):W.none());var o,c}}},Oe=function(){return(Oe=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},Te=function(t){var data=W.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){K(e,l)},l=function(t){data.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){data=W.some(e),c(n),n=[]}),{get:r,map:function(e){return Te(function(t){r(function(data){t(e(data))})})},isReady:o}},Ee={nu:Te,pure:function(a){return Te(function(e){e(a)})}},Ne=function(t){var n=function(n){var r;t((r=n,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this;e.setTimeout(function(){r.apply(o,t)},0)}))},r=function(){return Ee.nu(n)};return{map:function(e){return Ne(function(t){n(function(a){var n=e(a);t(n)})})},bind:function(e){return Ne(function(t){n(function(a){e(a).get(t)})})},anonBind:function(e){return Ne(function(t){n(function(a){e.get(t)})})},toLazy:r,toCached:function(){var e=null;return Ne(function(t){null===e&&(e=r()),e.get(t)})},get:n}},_e={nu:Ne,pure:function(a){return Ne(function(e){e(a)})}},Ae=tinymce.util.Tools.resolve("tinymce.util.Delay"),De=function(data){var e=data.href;return e.indexOf("@")>0&&-1===e.indexOf("//")&&-1===e.indexOf("mailto:")?W.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return Oe({},t,{href:"mailto:"+e})}}):W.none()},Re=function(e){return function(data){var t=data.href;return!0===e&&!/^\w+:/i.test(t)||!1===e&&/^\s*www[\.|\d\.]/i.test(t)?W.some({message:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",preprocess:function(e){return Oe({},e,{href:"http://"+t})}}):W.none()}},Be=function(t,n,data){return be([De,Re(n)],function(e){return e(data)}).fold(function(){return _e.pure(data)},function(n){return _e.nu(function(r){!function(e,t,n){var r=e.selection.getRng();Ae.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})}(t,n.message,function(t){e.console.log("state",t),r(t?n.preprocess(data):data)})})})},Me=function(e){var t=e.dom.select("a:not([href])"),n=ee(t,function(e){var t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]});return n.length>0?W.some([{text:"None",value:""}].concat(n)):W.none()},Ie=function(e){if(N(e.settings)){var t=E(e.settings);return we.sanitize(t)}return W.none()},ze=tinymce.util.Tools.resolve("tinymce.util.XHR"),Pe=function(e){var t=function(t){return e.convertURL(t.value||t.url,"href")},n=x(e.settings);return _e.nu(function(e){"string"==typeof n?ze.send({url:n,success:function(text){return e(function(text){try{return W.some(JSON.parse(text))}catch(e){return W.none()}}(text))},error:function(t){return e(W.none())}}):"function"==typeof n?n(function(output){return e(W.some(output))}):e(W.from(n))}).map(function(e){return e.bind(we.sanitizeWith(t))})},Le=function(e,t){if(T(e.settings)){var n=O(e.settings),r=t.is("_blank");return(!1===A(e.settings)?we.sanitizeWith(function(e){return pe(we.getValue(e),r)}):we.sanitize)(n)}return W.none()},He=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Fe=function(e){if(k(e.settings)){var t=S(e.settings);return we.sanitize(t).orThunk(function(){return W.some(He)})}return W.none()},Ve=function(e,t,n){var r=e.getAttrib(t,n);return null!==r&&r.length>0?W.some(r):W.none()},je=function(e,t,n){return Pe(e).map(function(r){var o=function(e,t,n,r){var o=e.dom,text=me(r.getContent())?W.some(he(r,n)):W.none(),c=n?W.some(o.getAttrib(n,"href")):W.none(),l=w(t)?W.some(C(t)):W.none(),f=n?W.from(o.getAttrib(n,"target")):l,d=Ve(o,n,"rel"),m=Ve(o,n,"class");return{url:c,text:text,title:Ve(o,n,"title"),target:f,rel:d,linkClass:m}}(e,t,n,e.selection);return{anchor:o,catalogs:{targets:Fe(e),rels:Le(e,o.target),classes:Ie(e),anchor:Me(e),link:r},optNode:W.from(n),flags:{titleEnabled:_(t)}}})},Ue=function(e){(function(e){var t=e.settings,n=ge(e);return je(e,t,n)})(e).map(function(t){var n=function(e,t,n){return function(r){var data=r.getData();if(!data.url.value)return le(e),void r.close();var o=function(e){return W.from(data[e]).filter(function(n){return!t.anchor[e].is(n)})},c={href:data.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},l={href:data.url.value,attach:void 0!==data.url.meta&&data.url.meta.attach?data.url.meta.attach:function(){}};Be(e,n,c).get(function(t){se(e,l,t)}),r.close()}}(e,t,v(e.settings));return function(e,t){var n,r=e.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],c={url:{value:(n=e).anchor.url.getOr(""),meta:{attach:function(){},text:n.anchor.url.fold(function(){return""},function(){return n.anchor.text.getOr("")}),original:{value:n.anchor.url.getOr("")}}},text:n.anchor.text.getOr(""),title:n.anchor.title.getOr(""),anchor:n.anchor.url.getOr(""),link:n.anchor.url.getOr(""),rel:n.anchor.rel.getOr(""),target:n.anchor.target.getOr(""),linkClass:n.anchor.linkClass.getOr("")},l=ke(c,e),f=e.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Z([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,ve([f.anchor.map(we.createUi("anchor","Anchors")),f.rels.map(we.createUi("rel","Rel")),f.targets.map(we.createUi("target","Open link in...")),f.link.map(we.createUi("link","Link list")),f.classes.map(we.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:c,onChange:function(e,t){var n=t.name;l.onChange(e.getData,{name:n}).each(function(t){e.setData(t)})},onSubmit:t}}(t,n)}).get(function(t){e.windowManager.open(t)})},We=function(e,t){return e.dom.getParent(t,"a[href]")},$e=function(e){return We(e,e.selection.getStart())},qe=function(e,a){if(a){var t=de(a);if(/^#/.test(t)){var n=e.$(t);n.length&&e.selection.scrollIntoView(n[0],!0)}else M(a.href)}},Ge=function(e){return function(){Ue(e)}},Ye=function(e){return function(){qe(e,$e(e))}},Xe=function(e){e.on("click",function(t){var link=We(e,t.target);link&&f.metaKeyPressed(t)&&(t.preventDefault(),qe(e,link))}),e.on("keydown",function(t){var link=$e(e);link&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),qe(e,link))})},Ke=function(e){return function(t){var n=function(n){return t.setActive(!e.readonly&&!!ge(e,n.element))};return e.on("nodechange",n),function(){return e.off("nodechange",n)}}},Je=function(e){return function(t){t.setDisabled(!fe(e.dom.getParents(e.selection.getStart())));var n=function(e){return t.setDisabled(!fe(e.parents))};return e.on("nodechange",n),function(){return e.off("nodechange",n)}}},Qe=function(e){e.addCommand("mceLink",function(){D(e.settings)?e.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Ge(e)()})},Ze=function(e){e.addShortcut("Meta+K","",function(){e.execCommand("mceLink")})},et=function(e){e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ge(e),onSetup:Ke(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return le(e)},onSetup:Je(e)})},tt=function(e){e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ye(e),onSetup:Je(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ge(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return le(e)},onSetup:Je(e)})},nt=function(e){e.ui.registry.addContextMenu("link",{update:function(element){return fe(e.dom.getParents(element,"a"))?"link unlink openlink":"link"}})},ot=function(e){var t=function(t){var n=e.selection.getNode();return t.setDisabled(!ge(e,n)),function(){}};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ke(e)},label:"Link",predicate:function(t){return!!ge(e,t)&&y(e.settings)},initValue:function(){var t=ge(e);return t?de(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var n=e.selection.getNode();return t.setActive(!!ge(e,n)),Ke(e)(t)},onAction:function(t){var n=ge(e),r=t.getValue();if(n)e.dom.setAttrib(n,"href",r),function(e){e.selection.collapse(!1)}(e),t.hide();else{var o={href:r,attach:function(){}},text=me(e.selection.getContent())?W.some(he(e.selection,n)).filter(function(e){return e.length>0}).or(W.from(r)):W.none();se(e,o,{href:r,text:text,title:W.none(),rel:W.none(),target:W.none(),class:W.none()}),t.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:function(t){le(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:function(t){Ye(e)(),t.hide()}}]})};l.add("link",function(e){et(e),tt(e),nt(e),ot(e),Xe(e),Qe(e),Ze(e)})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),f=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),d=tinymce.util.Tools.resolve("tinymce.util.VK"),m=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),h=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=function(e){return e&&"BR"===e.nodeName},x=function(e){return e&&3===e.nodeType},w=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},C=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},S=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},k=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},O=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},T=y,E=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},N=function(e,t){return e&&e.nodeName in t},_=function(e,t){return!!y(t)&&!(!e.isBlock(t.nextSibling)||y(t.previousSibling))},A=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},D=function(e,t){return e.isChildOf(t,e.getRoot())},R=function(e,t){if(x(e))return{container:e,offset:t};var n=l.getNode(e,t);return x(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&x(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&x(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},B=function(e){var t=e.cloneRange(),n=R(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=R(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},M=v.DOM,I=function(e){var t={},n=function(n){var r,o,c;o=e[n?"startContainer":"endContainer"],c=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=M.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(c=Math.min(c,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[c]):M.insertAfter(r,o.childNodes[c])):o.appendChild(r),o=r,c=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=c};return n(!0),e.collapsed||n(),t},z=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,M.remove(o),!n.hasChildNodes()&&M.isBlock(n)&&n.appendChild(M.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=M.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),B(n)},P=function(e){return function(){return e}},L=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},H=P(!1),F=P(!0),V=H,j=F,U=function(){return W},W=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,s){return e()},is:V,isSome:V,isNone:j,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:U,ap:U,each:function(){},bind:U,flatten:U,exists:V,forall:j,filter:U,equals:e,equals_:e,toArray:function(){return[]},toString:P("none()")};return Object.freeze&&Object.freeze(r),r}(),$=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:j,isNone:V,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return $(e(a))},ap:function(e){return e.fold(U,function(e){return $(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:W},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(V,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},G={some:$,none:U,from:function(e){return null==e?W:$(e)}},Y=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},X=Y("string"),K=Y("boolean"),J=Y("function"),Q=Y("number"),map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},Z=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},ee=function(e,t,n){return Z(e,function(e){n=t(n,e)}),n},te=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return G.some(r)}return G.none()},ne=Array.prototype.push,re=function(e,t){return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);ne.apply(t,e[i])}return t}(map(e,t))},oe=Array.prototype.slice,head=function(e){return 0===e.length?G.none():G.some(e[0])},ie=function(e){return 0===e.length?G.none():G.some(e[e.length-1])},ae=(J(Array.from)&&Array.from,void 0!==e.window?e.window:Function("return this;")()),ue=function(p,e){return function(e,t){for(var n=null!=t?t:ae,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},ce=function(e,t){var n=function(e,t){return ue(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n},se=function(e){return function(e){return ce("HTMLElement",e)}(ue("ownerDocument.defaultView",e)).prototype.isPrototypeOf(e)},le=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),fe=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",me(e,t))},de=function(e){var t=e.selection.getSelectedBlocks();return h.grep(function(e,t){var n=h.map(t,function(t){var n=e.dom.getParent(t,"li,dd,dt",me(e,t));return n||t});return le.unique(n)}(e,t),function(e){return k(e)})},me=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ge=function(e,t){var n=e.dom.getParents(t,"ol,ul",me(e,t));return ie(n)},he=function(e,t){var n=map(t,function(t){return ge(e,t).getOr(t)});return le.unique(n)},pe={isList:function(e){var t=fe(e);return se(t)},getParentList:fe,getSelectedSubLists:function(e){var t=fe(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return h.grep(e.querySelectorAll("ol,ul,dl"),function(e){return w(e)})}(t):h.grep(n,function(e){return w(e)&&t!==e})},getSelectedListItems:de,getClosestListRootElm:me,getSelectedDlItems:function(e){return filter(de(e),S)},getSelectedListRoots:function(e){var t=function(e){var t=ge(e,e.selection.getStart()),n=filter(e.selection.getSelectedBlocks(),C);return t.toArray().concat(n)}(e);return he(e,t)}},ve=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:P(e)}},be={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return ve(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return ve(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return ve(n)},fromDom:ve,fromPoint:function(e,t,n){var r=e.dom();return G.from(r.elementFromPoint(t,n)).map(ve)}},ye=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(!r.isSome())return G.none();n.push(r.getOrDie())}return G.some(t.apply(null,n))},xe=Object.keys,we=function(){return ce("Node")},Ce=function(a,b,e){return 0!=(a.compareDocumentPosition(b)&e)},Se=function(a,b){return Ce(a,b,we().DOCUMENT_POSITION_CONTAINED_BY)},ke=function(){return Oe(0,0)},Oe=function(e,t){return{major:e,minor:t}},Te={nu:Oe,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?ke():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Oe(r(1),r(2))}(e,n)},unknown:ke},Ee=function(e,t){return function(){return t===e}},Ne=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Ee("Edge",t),isChrome:Ee("Chrome",t),isIE:Ee("IE",t),isOpera:Ee("Opera",t),isFirefox:Ee("Firefox",t),isSafari:Ee("Safari",t)}},_e={unknown:function(){return Ne({current:void 0,version:Te.unknown()})},nu:Ne,edge:P("Edge"),chrome:P("Chrome"),ie:P("IE"),opera:P("Opera"),firefox:P("Firefox"),safari:P("Safari")},Ae=function(e,t){return function(){return t===e}},De=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ae("Windows",t),isiOS:Ae("iOS",t),isAndroid:Ae("Android",t),isOSX:Ae("OSX",t),isLinux:Ae("Linux",t),isSolaris:Ae("Solaris",t),isFreeBSD:Ae("FreeBSD",t)}},Re={unknown:function(){return De({current:void 0,version:Te.unknown()})},nu:De,windows:P("Windows"),ios:P("iOS"),android:P("Android"),linux:P("Linux"),osx:P("OSX"),solaris:P("Solaris"),freebsd:P("FreeBSD")},Be=function(e,t){var n=String(t).toLowerCase();return te(e,function(e){return e.search(n)})},Me=function(e,t){return Be(e,t).map(function(e){var n=Te.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ie=function(e,t){return Be(e,t).map(function(e){var n=Te.detect(e.versionRegexes,t);return{current:e.name,version:n}})},ze=function(e,t){return-1!==e.indexOf(t)},Pe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Le=function(e){return function(t){return ze(t,e)}},He=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ze(e,"edge/")&&ze(e,"chrome")&&ze(e,"safari")&&ze(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pe],search:function(e){return ze(e,"chrome")&&!ze(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ze(e,"msie")||ze(e,"trident")}},{name:"Opera",versionRegexes:[Pe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Le("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Le("firefox")},{name:"Safari",versionRegexes:[Pe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ze(e,"safari")||ze(e,"mobile/"))&&ze(e,"applewebkit")}}],Fe=[{name:"Windows",search:Le("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ze(e,"iphone")||ze(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Le("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Le("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Le("linux"),versionRegexes:[]},{name:"Solaris",search:Le("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Le("freebsd"),versionRegexes:[]}],Ve={browsers:P(He),oses:P(Fe)},je=function(e){var t=Ve.browsers(),n=Ve.oses(),r=Me(t,e).fold(_e.unknown,_e.nu),o=Ie(n,e).fold(Re.unknown,Re.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,l=e.isAndroid()&&4===e.version.major,f=r||c||l&&!0===/mobile/i.test(n),d=e.isiOS()||e.isAndroid(),m=d&&!f,h=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:P(r),isiPhone:P(o),isTablet:P(f),isPhone:P(m),isTouch:P(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:P(h)}}(o,r,e);return{browser:r,os:o,deviceType:c}},Ue={detect:(t=function(){var t=e.navigator.userAgent;return je(t)},r=!1,function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r||(r=!0,n=t.apply(null,e)),n})},We=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),$e=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,We),qe=function(e,t){return e.dom()===t.dom()},Ge=Ue.detect().browser.isIE()?function(e,t){return Se(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Ye=function(element,e){var t=element.dom();if(t.nodeType!==$e)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Xe=function(element){var e=element.dom();return G.from(e.parentNode).map(be.fromDom)},Ke=function(element){var e=element.dom();return map(e.childNodes,be.fromDom)},Je=function(element,e){var t=element.dom().childNodes;return G.from(t[e]).map(be.fromDom)},Qe=function(element){return Je(element,0)},Ze=function(element){return Je(element,element.dom().childNodes.length-1)},et=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(marker,element){Xe(marker).each(function(e){e.dom().insertBefore(element.dom(),marker.dom())})}),tt=function(e,element){e.dom().appendChild(element.dom())},nt=function(e,t){Z(t,function(t){tt(e,t)})},ot=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},it=function(element){return element.dom().nodeName.toLowerCase()},at=function(element,t){var n=element.dom();!function(e,t){for(var n=xe(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}}(t,function(t,r){!function(t,n,r){if(!(X(r)||K(r)||Q(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")}(n,r,t)})},ut=function(element){return ee(element.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},ct=function(element,t,n){!function(t,n,r){if(!X(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);(function(e){return void 0!==e.style})(t)&&t.style.setProperty(n,r)}(element.dom(),t,n)},st=function(e){return function(e,t){return be.fromDom(e.dom().cloneNode(t))}(e,!0)},lt=function(e,t){var n=function(e,t){var n=be.fromTag(t),r=ut(e);return at(n,r),n}(e,t);et(e,n);var r=Ke(e);return nt(n,r),ot(e),n},ft=function(e,t){tt(e.item,t.list)},mt=function(e,t){var n={list:be.fromTag(t,e),item:be.fromTag("li",e)};return tt(n.list,n.item),n},gt=function(e,t,n){var r=t.slice(0,n.depth);return ie(r).each(function(t){!function(e,t){tt(e.list,t),e.item=t}(t,function(e,t,content){var n=be.fromTag("li",e);return at(n,t),nt(n,content),n}(e,n.itemAttributes,n.content)),function(e,t){it(e.list)!==t.listType&&(e.list=lt(e.list,t.listType)),at(e.list,t.listAttributes)}(t,n)}),r},ht=function(e,t,n){var r,o=function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(mt(e,t.listType));return r}(e,n,n.depth-t.length);return function(e){for(var i=1;i<e.length;i++)ft(e[i-1],e[i])}(o),function(e,t){for(var i=0;i<e.length-1;i++)ct(e[i].item,"list-style-type","none");ie(e).each(function(e){at(e.list,t.listAttributes),at(e.item,t.itemAttributes),nt(e.item,t.content)})}(o,n),r=o,ye([ie(t),head(r)],ft),t.concat(o)},pt=function(e){return Ye(e,"OL,UL")},vt=function(e){return Qe(e).map(pt).getOr(!1)},bt=function(e){return e.depth>0},yt=function(e){return e.isSelected},xt=function(li){var e=Ke(li),content=Ze(li).map(pt).getOr(!1)?e.slice(0,-1):e;return map(content,st)},wt=Object.prototype.hasOwnProperty,Ct=(o=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var c in r)wt.call(r,c)&&(t[c]=o(t[c],r[c]))}return t}),St=function(e){Z(e,function(t,i){(function(e,t){for(var n=e[t].depth,i=t-1;i>=0;i--){if(e[i].depth===n)return G.some(e[i]);if(e[i].depth<n)break}return G.none()})(e,i).each(function(e){var n,source;source=e,(n=t).listType=source.listType,n.listAttributes=Ct({},source.listAttributes)})})},kt=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return kt(n())}}},Ot=function(e,t,n,r){return Qe(r).filter(pt).fold(function(){t.each(function(e){qe(e.start,r)&&n.set(!0)});var o=function(li,e,t){return Xe(li).map(function(n){return{depth:e,isSelected:t,content:xt(li),itemAttributes:ut(li),listAttributes:ut(n),listType:it(n)}})}(r,e,n.get());t.each(function(e){qe(e.end,r)&&n.set(!1)});var c=Ze(r).filter(pt).map(function(r){return Tt(e,t,n,r)}).getOr([]);return o.toArray().concat(c)},function(r){return Tt(e,t,n,r)})},Tt=function(e,t,n,r){return re(Ke(r),function(element){return(pt(element)?Tt:Ot)(e+1,t,n,element)})},Et=tinymce.util.Tools.resolve("tinymce.Env"),Nt=function(e,t){var n,r,o,c,l=e.dom,f=e.schema.getBlockElements(),d=l.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=l.create(o)).tagName===e.settings.forced_root_block&&l.setAttribs(r,e.settings.forced_root_block_attrs),N(t.firstChild,f)||d.appendChild(r)),t)for(;n=t.firstChild;){var m=n.nodeName;c||"SPAN"===m&&"bookmark"===n.getAttribute("data-mce-type")||(c=!0),N(n,f)?(d.appendChild(n),r=null):o?(r||(r=l.create(o),d.appendChild(r)),r.appendChild(n)):d.appendChild(n)}return e.settings.forced_root_block?c||Et.ie&&!(Et.ie>10)||r.appendChild(l.create("br",{"data-mce-bogus":"1"})):d.appendChild(l.create("br")),d},_t=function(e,t,element){return e.fire("ListMutation",{action:t,element:element})},At=function(t,n){return map(n,function(n){var r,o,c,content=(r=n.content,c=(o||e.document).createDocumentFragment(),Z(r,function(element){c.appendChild(element.dom())}),be.fromDom(c));return be.fromDom(Nt(t,content.dom()))})},Dt=function(e,t){return St(t),function(e,t){var n=ee(t,function(t,n){return n.depth>t.length?ht(e,t,n):gt(e,t,n)},[]);return head(n).map(function(e){return e.list})}(e.contentDocument,t).toArray()},Rt=function(e,t,n){var r=function(e,t){var n=kt(!1);return map(e,function(e){return{sourceList:e,entries:Tt(0,t,n,e)}})}(t,function(e){var t,n,r=map(pe.getSelectedListItems(e),be.fromDom);return ye([te(r,L(vt)),te((t=r,n=oe.call(t,0),n.reverse(),n),L(vt))],function(e,t){return{start:e,end:t}})}(e));Z(r,function(t){!function(e,t){Z(filter(e,yt),function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(t,e)})}(t.entries,n);var marker,r=function(e,t){return re(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,c=e.length;i<c;i++){var l=e[i],f=t(l);f!==n&&(r.push(o),o=[]),n=f,o.push(l)}return 0!==o.length&&r.push(o),r}(t,bt),function(t){return head(t).map(bt).getOr(!1)?Dt(e,t):At(e,t)})}(e,t.entries);Z(r,function(t){_t(e,"Indent"===n?"IndentList":"OutdentList",t.dom())}),marker=t.sourceList,Z(r,function(e){et(marker,e)}),ot(t.sourceList)})},Bt=v.DOM,Mt=function(e,ul,li){var t,n,r,o,c,l;for(r=Bt.select('span[data-mce-type="bookmark"]',ul),c=Nt(e,li),(t=Bt.createRng()).setStartAfter(li),t.setEndAfter(ul),o=(n=t.extractContents()).firstChild;o;o=o.firstChild)if("LI"===o.nodeName&&e.dom.isEmpty(o)){Bt.remove(o);break}e.dom.isEmpty(n)||Bt.insertAfter(n,ul),Bt.insertAfter(c,ul),A(e.dom,li.parentNode)&&(l=li.parentNode,h.each(r,function(e){l.parentNode.insertBefore(e,li.parentNode)}),Bt.remove(l)),Bt.remove(li),A(e.dom,ul)&&Bt.remove(ul)},It=function(e){Ye(e,"DT")&&lt(e,"DD")},zt=function(e,t,n){Z(n,"Indent"===t?It:function(t){return function(e,t){Ye(t,"DD")?lt(t,"DT"):Ye(t,"DT")&&Xe(t).each(function(dl){return Mt(e,dl.dom(),t.dom())})}(e,t)})},Pt=function(e,t){var n=map(pe.getSelectedListRoots(e),be.fromDom),r=map(pe.getSelectedDlItems(e),be.fromDom),o=!1;if(n.length||r.length){var c=e.selection.getBookmark();Rt(e,n,t),zt(e,t,r),e.selection.moveToBookmark(c),e.selection.setRng(B(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Lt=function(e){return Pt(e,"Indent")},Ht=function(e){return Pt(e,"Outdent")},Ft=function(e){return Pt(e,"Flatten")},Vt=function(e){return/\btox\-/.test(e.className)},jt=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ut=function(e,t){h.each(t,function(t,n){e.setAttribute(n,t)})},Wt=function(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){Ut(t,n["list-attributes"]),h.each(e.select("li",t),function(li){Ut(li,n["list-item-attributes"])})}(e,t,n)},$t=function(e,t,n,r){var o,c;for(o=t[n?"startContainer":"endContainer"],c=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(c,o.childNodes.length-1)]||o),!n&&T(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(E(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},qt=function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),c="LI",l=pe.getClosestListRootElm(e,e.selection.getStart(!0)),f=e.dom;"false"!==f.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(c="DT"),r=I(o),h.each(function(e,t,n){for(var r,o=[],c=e.dom,l=$t(e,t,!0,n),f=$t(e,t,!1,n),d=[],v=l;v&&(d.push(v),v!==f);v=v.nextSibling);return h.each(d,function(t){if(E(e,t))return o.push(t),void(r=null);if(c.isBlock(t)||T(t))return T(t)&&c.remove(t),void(r=null);var l=t.nextSibling;m.isBookmarkNode(t)&&(E(e,l)||!l&&t.parentNode===n)?r=null:(r||(r=c.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))}),o}(e,o,l),function(r){var o,l;(l=r.previousSibling)&&w(l)&&l.nodeName===t&&function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(o=null===o?"":o)}(f,l,n)?(o=l,r=f.rename(r,c),l.appendChild(r)):(o=f.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=f.rename(r,c)),function(e,element,t){h.each(t,function(style){var t;return e.setStyle(element,((t={})[style]="",t))})}(f,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Wt(f,o,n),Yt(e.dom,o)}),e.selection.setRng(z(r)))},Gt=function(e,t,n){return function(e,t){return e&&t&&w(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&(r=n,t.className===r.className);var r},Yt=function(e,t){var n,r;if(n=t.nextSibling,Gt(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Gt(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Xt=function(e,t,n,r,o){if(t.nodeName!==r||Kt(o)){var c=I(e.selection.getRng(!0));h.each([t].concat(n),function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.dom.rename(t,n);Wt(e.dom,o,r),_t(e,jt(n),o)}else Wt(e.dom,t,r),_t(e,jt(n),t)}(e,t,r,o)}),e.selection.setRng(z(c))}else Ft(e)},Kt=function(e){return"list-style-type"in e},Jt={toggleList:function(e,t,n){var r=pe.getParentList(e),o=pe.getSelectedSubLists(e);n=n||{},r&&o.length>0?Xt(e,r,o,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||Kt(r)||Vt(t)){var o=I(e.selection.getRng(!0));Wt(e.dom,t,r);var c=e.dom.rename(t,n);Yt(e.dom,c),e.selection.setRng(z(o)),_t(e,jt(n),c)}else Ft(e);else qt(e,n,r),_t(e,jt(n),t)}(e,r,t,n)},mergeWithAdjacentLists:Yt},Qt=v.DOM,Zt=function(e,ul){var t,n=ul.parentNode;"LI"===n.nodeName&&n.firstChild===ul&&((t=n.previousSibling)&&"LI"===t.nodeName?(t.appendChild(ul),A(e,n)&&Qt.remove(n)):Qt.setStyle(n,"listStyleType","none")),w(n)&&(t=n.previousSibling)&&"LI"===t.nodeName&&t.appendChild(ul)},en=function(e,element){h.each(h.grep(e.select("ol,ul",element)),function(ul){Zt(e,ul)})},tn=function(e,t,n,r){var o,c,d=t.startContainer,m=t.startOffset;if(3===d.nodeType&&(n?m<d.data.length:m>0))return d;for(o=e.schema.getNonEmptyElements(),1===d.nodeType&&(d=l.getNode(d,m)),c=new f(d,r),n&&_(e.dom,d)&&c.next();d=c[n?"next":"prev2"]();){if("LI"===d.nodeName&&!d.hasChildNodes())return d;if(o[d.nodeName])return d;if(3===d.nodeType&&d.data.length>0)return d}},nn=function(e,t){var n=t.childNodes;return 1===n.length&&!w(n[0])&&e.isBlock(n[0])},rn=function(e,t,n){var r,o;if(o=nn(e,n)?n.firstChild:n,function(e,t){nn(e,t)&&e.remove(t.firstChild,!0)}(e,t),!A(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},on=function(e,t,n){var r,o,ul=t.parentNode;if(D(e,t)&&D(e,n)){w(n.lastChild)&&(o=n.lastChild),ul===n.lastChild&&T(ul.previousSibling)&&e.remove(ul.previousSibling),(r=n.lastChild)&&T(r)&&t.hasChildNodes()&&e.remove(r),A(e,n,!0)&&e.$(n).empty(),rn(e,t,n),o&&n.appendChild(o);var c=Ge(be.fromDom(n),be.fromDom(t))?e.getParents(t,w,n):[];e.remove(t),Z(c,function(t){A(e,t)&&t!==e.getRoot()&&e.remove(t)})}},an=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),on(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{var c=I(t);on(o,n,r),e.selection.setRng(z(c))}},un=function(e,t){var ul,n,r,o=e.dom,c=e.selection,l=c.getStart(),f=pe.getClosestListRootElm(e,l),li=o.getParent(c.getStart(),"LI",f);if(li){if((ul=li.parentNode)===e.getBody()&&A(o,ul))return!0;if(n=B(c.getRng(!0)),(r=o.getParent(tn(e,n,t,f),"LI",f))&&r!==li)return t?an(e,n,r,li):function(e,t,n,r){var o=I(t);on(e.dom,n,r);var c=z(o);e.selection.setRng(c)}(e,n,li,r),!0;if(!r&&!t)return Ft(e),!0}return!1},cn=function(e,t){return un(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=pe.getClosestListRootElm(e,r),c=n.getParent(r,n.isBlock,o);if(c&&n.isEmpty(c)){var l=B(e.selection.getRng(!0)),f=n.getParent(tn(e,l,t,o),"LI",o);if(f)return e.undoManager.transact(function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,c,o),Jt.mergeWithAdjacentLists(n,f.parentNode),e.selection.select(f,!0),e.selection.collapse(t)}),!0}return!1}(e,t)},sn=function(e,t){return e.selection.isCollapsed()?cn(e,t):function(e){var t=e.selection.getStart(),n=pe.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||pe.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),en(e.dom,e.getBody())}),!0)}(e)},ln=function(e){e.on("keydown",function(t){t.keyCode===d.BACKSPACE?sn(e,!1)&&t.preventDefault():t.keyCode===d.DELETE&&sn(e,!0)&&t.preventDefault()})},fn=sn,dn=function(e){return{backspaceDelete:function(t){fn(e,t)}}},mn=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},gn=function(e){e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase();"indent"===n?Lt(e):"outdent"===n&&Ht(e)}),e.addCommand("InsertUnorderedList",function(t,n){Jt.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){Jt.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){Jt.toggleList(e,"DL",n)}),e.addCommand("RemoveList",function(){Ft(e)}),e.addQueryStateHandler("InsertUnorderedList",mn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",mn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",mn(e,"DL"))},hn=function(e){return e.getParam("lists_indent_on_tab",!0)},pn=function(e){hn(e)&&function(e){e.on("keydown",function(t){t.keyCode!==d.TAB||d.metaKeyPressed(t)||e.undoManager.transact(function(){(t.shiftKey?Ht(e):Lt(e))&&t.preventDefault()})})}(e),ln(e)},vn=function(e,t){return function(n){var r=function(e){var r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,O),o=-1!==r?e.parents.slice(0,r):e.parents,c=h.grep(o,w);n.setActive(c.length>0&&c[0].nodeName===t&&!Vt(c[0]))};return e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}},bn=function(e){var t=function(t){return function(){return e.execCommand(t)}};(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==h.inArray(n.split(/[ ,]/),t)})(e,"advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:vn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:vn(e,"UL")}))};c.add("lists",function(e){return pn(e),bn(e),gn(e),dn(e)})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},f=function(e){return function(){return e}},d=function(e){return e},m=f(!1),h=f(!0),v=m,y=h,x=function(){return w},w=(o={fold:function(e,s){return e()},is:v,isSome:v,isNone:y,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:x,ap:x,each:function(){},bind:x,flatten:x,exists:v,forall:y,filter:x,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:f("none()")},Object.freeze&&Object.freeze(o),o),C=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:y,isNone:v,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return C(e(a))},ap:function(e){return e.fold(x,function(e){return C(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:w},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(v,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},S={some:C,none:x,from:function(e){return null==e?w:C(e)}},k=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},O=k("string"),T=k("object"),E=k("function"),N=k("number"),_=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},A=Array.prototype.push,D=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);A.apply(t,e[i])}return t},R=(Array.prototype.slice,E(Array.from)&&Array.from,function(){return(R=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)}),B=function(t){var data=S.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){_(e,l)},l=function(t){data.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){data=S.some(e),c(n),n=[]}),{get:r,map:function(e){return B(function(t){r(function(data){t(e(data))})})},isReady:o}},M={nu:B,pure:function(a){return B(function(e){e(a)})}},I=function(t){var n=function(n){var r;t((r=n,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this;e.setTimeout(function(){r.apply(o,t)},0)}))},r=function(){return M.nu(n)};return{map:function(e){return I(function(t){n(function(a){var n=e(a);t(n)})})},bind:function(e){return I(function(t){n(function(a){e(a).get(t)})})},anonBind:function(e){return I(function(t){n(function(a){e.get(t)})})},toLazy:r,toCached:function(){var e=null;return I(function(t){null===e&&(e=r()),e.get(t)})},get:n}},z={nu:I,pure:function(a){return I(function(e){e(a)})}},P=function(e){return{is:function(t){return e===t},isValue:h,isError:m,getOr:f(e),getOrThunk:f(e),getOrDie:f(e),or:function(t){return P(e)},orThunk:function(t){return P(e)},fold:function(t,n){return n(e)},map:function(t){return P(t(e))},mapError:function(t){return P(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return S.some(e)}}},L=function(e){return{is:m,isValue:m,isError:h,getOr:d,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return L(e)},mapError:function(t){return L(t(e))},each:l,bind:function(t){return L(e)},exists:m,forall:h,toOption:S.none}},H={value:P,error:L},F=function(t){return R({},t,{toCached:function(){return F(t.toCached())},bindFuture:function(e){return F(t.bind(function(t){return t.fold(function(e){return z.pure(H.error(e))},function(a){return e(a)})}))},bindResult:function(e){return F(t.map(function(t){return t.bind(e)}))},mapResult:function(e){return F(t.map(function(t){return t.map(e)}))},mapError:function(e){return F(t.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return t.map(function(t){return t.fold(e,n)})},withTimeout:function(n,r){return F(z.nu(function(o){var c=!1,l=e.setTimeout(function(){c=!0,o(H.error(r()))},n);t.get(function(t){c||(e.clearTimeout(l),o(t))})}))}})},V=function(e){return F(z.nu(e))},j=V,U=Object.prototype.hasOwnProperty,W=function(e){return function(){for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var o=t[r];for(var c in o)U.call(o,c)&&(n[c]=e(n[c],o[c]))}return n}},$=W(function(e,t){return T(e)&&T(t)?$(e,t):t}),G=W(function(e,t){return t}),Y=void 0!==e.window?e.window:Function("return this;")(),X=function(p,e){return function(e,t){for(var n=null!=t?t:Y,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},K={getOrDie:function(e,t){var n=function(e,t){return X(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}},J=function(){return K.getOrDie("URL")},Q=function(e){return J().createObjectURL(e)},Z=function(u){J().revokeObjectURL(u)},ee=function(e){var t=e.imageList.map(function(e){return{name:"images",type:"selectbox",label:"Image list",items:e}}),n=e.classList.map(function(e){return{name:"classes",type:"selectbox",label:"Class",items:e}});return D([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasDescription?[{name:"alt",type:"input",label:"Image description"}]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:D([n.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},te=function(e){return{title:"General",items:ee(e)}},ne=ee,re=tinymce.util.Tools.resolve("tinymce.util.Promise"),oe=tinymce.util.Tools.resolve("tinymce.util.Tools"),ie=tinymce.util.Tools.resolve("tinymce.util.XHR"),ae=function(e){return!1!==e.settings.image_dimensions},ue=function(e){return!0===e.settings.image_advtab},ce=function(e){return e.getParam("image_prepend_url","")},se=function(e){return e.getParam("image_class_list")},le=function(e){return!1!==e.settings.image_description},fe=function(e){return!0===e.settings.image_title},de=function(e){return!0===e.settings.image_caption},me=function(e){return e.getParam("image_list",!1)},ge=function(e){return!!e.getParam("images_upload_url",!1)},he=function(e){return!!e.getParam("images_upload_handler",!1)},pe=function(e){return e.getParam("images_upload_url")},ve=function(e){return e.getParam("images_upload_handler")},be=function(e){return e.getParam("images_upload_base_path")},ye=function(e){return e.getParam("images_upload_credentials")},xe=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},we=function(t,n){var img=e.document.createElement("img");function r(e){img.parentNode&&img.parentNode.removeChild(img),n(e)}img.onload=function(){var e={width:xe(img.width,img.clientWidth),height:xe(img.height,img.clientHeight)};r(H.value(e))},img.onerror=function(){r(H.error(void 0))};var style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",e.document.body.appendChild(img),img.src=t},Ce=function(e){return e&&(e=e.replace(/px$/,"")),e},Se=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},ke=function(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},Oe=function(e,t){var n=me(e);"string"==typeof n?ie.send({url:n,success:function(text){t(JSON.parse(text))}}):"function"==typeof n?n(t):t(n)},Te=function(e,data,t){function n(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){data.width||data.height||!ae(e)||e.dom.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n},Ee=function(e){return new re(function(t,n){var r=new(K.getOrDie("FileReader"));r.onload=function(){t(r.result)},r.onerror=function(){n(r.error.message)},r.readAsDataURL(e)})},Ne=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,_e=function(image){return image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?Ce(image.style.marginLeft):""},Ae=function(image){return image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?Ce(image.style.marginTop):""},De=function(image){return image.style.borderWidth?Ce(image.style.borderWidth):""},Re=function(image,e){return image.hasAttribute(e)?image.getAttribute(e):""},Be=function(image,e){return image.style[e]?image.style[e]:""},Me=function(image){return null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName},Ie=function(image,e,t){image.setAttribute(e,t)},ze=function(image){Me(image)?function(image){var e=image.parentNode;Ne.insertAfter(image,e),Ne.remove(e)}(image):function(image){var e=Ne.create("figure",{class:"image"});Ne.insertAfter(e,image),e.appendChild(image),e.appendChild(Ne.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable="false"}(image)},Pe=function(image,e){var t=image.getAttribute("style"),n=e(null!==t?t:"");n.length>0?(image.setAttribute("style",n),image.setAttribute("data-mce-style",n)):image.removeAttribute("style")},Le=function(e,t){return function(image,e,n){image.style[e]?(image.style[e]=Se(n),Pe(image,t)):Ie(image,e,n)}},He=function(image,e){return image.style[e]?Ce(image.style[e]):Re(image,e)},Fe=function(image,e){var t=Se(e);image.style.marginLeft=t,image.style.marginRight=t},Ve=function(image,e){var t=Se(e);image.style.marginTop=t,image.style.marginBottom=t},je=function(image,e){var t=Se(e);image.style.borderWidth=t},Ue=function(image,e){image.style.borderStyle=e},We=function(e){return"FIGURE"===e.nodeName},$e=function(t,data){var image=e.document.createElement("img");return Ie(image,"style",data.style),(_e(image)||""!==data.hspace)&&Fe(image,data.hspace),(Ae(image)||""!==data.vspace)&&Ve(image,data.vspace),(De(image)||""!==data.border)&&je(image,data.border),(function(image){return Be(image,"borderStyle")}(image)||""!==data.borderStyle)&&Ue(image,data.borderStyle),t(image.getAttribute("style"))},qe=function(e,image){return{src:Re(image,"src"),alt:Re(image,"alt"),title:Re(image,"title"),width:He(image,"width"),height:He(image,"height"),class:Re(image,"class"),style:e(Re(image,"style")),caption:Me(image),hspace:_e(image),vspace:Ae(image),border:De(image),borderStyle:Be(image,"borderStyle")}},Ge=function(image,e,t,n,r){t[n]!==e[n]&&r(image,n,t[n])},Ye=function(e,t){return function(image,n,r){e(image,r),Pe(image,t)}},Xe=function(e,t,image){var n=qe(e,image);Ge(image,n,t,"caption",function(image,e,t){return ze(image)}),Ge(image,n,t,"src",Ie),Ge(image,n,t,"alt",Ie),Ge(image,n,t,"title",Ie),Ge(image,n,t,"width",Le(0,e)),Ge(image,n,t,"height",Le(0,e)),Ge(image,n,t,"class",Ie),Ge(image,n,t,"style",Ye(function(image,e){return Ie(image,"style",e)},e)),Ge(image,n,t,"hspace",Ye(Fe,e)),Ge(image,n,t,"vspace",Ye(Ve,e)),Ge(image,n,t,"border",Ye(je,e)),Ge(image,n,t,"borderStyle",Ye(Ue,e))},Ke=function(e,t){var n=e.dom.styles.parse(t),r=ke(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},Je=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},Qe=function(e,figure){var t=e.dom,n=t.getParent(figure.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]},e.getBody());return n?t.split(n,figure):figure},Ze=function(t,data){var n=function(t,data){var image=e.document.createElement("img");if(Xe(t,G(data,{caption:!1}),image),Ie(image,"alt",data.alt),data.caption){var figure=Ne.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(Ne.create("figcaption",{contentEditable:!0},"Caption")),figure.contentEditable="false",figure}return image}(function(e){return Ke(t,e)},data);t.dom.setAttrib(n,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(n.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),We(r)){var figure=Qe(t,r);t.selection.select(figure)}else t.selection.select(r)},et=function(e,data){var image=Je(e);image?data.src?function(e,data){var image=Je(e);if(Xe(function(t){return Ke(e,t)},data,image),function(e,image){e.dom.setAttrib(image,"src",image.getAttribute("src"))}(e,image),We(image.parentNode)){var figure=image.parentNode;Qe(e,figure),e.selection.select(image.parentNode)}else e.selection.select(image),Te(e,data,image)}(e,data):function(e,image){if(image){var t=e.dom.is(image.parentNode,"figure.image")?image.parentNode:image;e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,image):data.src&&Ze(e,data)},tt=function(e){return O(e.value)?e.value:""},nt=function(e,t){var n=[];return oe.each(e,function(e){var text=O(e.text)?e.text:O(e.title)?e.title:"";if(void 0!==e.menu){var r=nt(e.menu,t);n.push({text:text,items:r})}else{var o=t(e);n.push({text:text,value:o})}}),n},ot=function(e){return void 0===e&&(e=tt),function(t){return t?S.from(t).map(function(t){return nt(t,e)}):S.none()}},it=function(e,t){return function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i],i);if(n.isSome())return n}return S.none()}(e,function(e){return function(e){return Object.prototype.hasOwnProperty.call(e,"items")}(e)?it(e.items,t):e.value===t?S.some(e):S.none()})},at=ot,ut=function(e){return ot(tt)(e)},ct=function(e,t){return e.bind(function(e){return it(e,t)})},st=function(){},lt=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function ft(t){var n=function(n,r,o,progress){var c,l;(c=new(K.getOrDie("XMLHttpRequest"))).open("POST",t.url),c.withCredentials=t.credentials,c.upload.onprogress=function(e){progress(e.loaded/e.total*100)},c.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e;c.status<200||c.status>=300?o("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?r(lt(t.basePath,e.location)):o("Invalid JSON: "+c.responseText)},(l=new e.FormData).append("file",n.blob(),n.filename()),c.send(l)};return t=oe.extend({credentials:!1,handler:n},t),{upload:function(e){return t.url||t.handler!==n?function(e,t){return new re(function(n,r){try{t(e,n,r,st)}catch(e){r(e.message)}})}(e,t.handler):re.reject("Upload url missing from the settings.")}}}var mt,gt,ht,pt=function(e){return{title:"Advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace"},{type:"input",label:"Horizontal space",name:"hspace"},{type:"input",label:"Border width",name:"border"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},vt=function(e){var t=at(function(t){return e.convertURL(t.value||t.url,"src")}),n=z.nu(function(n){Oe(e,function(e){n(t(e).map(function(e){return D([[{text:"None",value:""}],e])}))})}),r=ut(se(e)),o=ue(e),c=ge(e),l=he(e),image=function(e){var image=Je(e);return image?qe(function(t){return Ke(e,t)},image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}}(e),f=le(e),d=fe(e),m=ae(e),h=de(e),v=pe(e),y=be(e),x=ye(e),w=ve(e),C=S.some(ce(e)).filter(function(e){return O(e)&&e.length>0});return n.map(function(e){return{image:image,imageList:e,classList:r,hasAdvTab:o,hasUploadUrl:c,hasUploadHandler:l,hasDescription:f,hasImageTitle:d,hasDimensions:m,hasImageCaption:h,url:v,basePath:y,credentials:x,handler:w,prependURL:C}})},bt=function(e){return{title:"Upload",items:[{type:"dropzone",name:"fileinput"}]}},yt=function(image){return{src:{value:image.src,meta:{}},images:image.src,alt:image.alt,title:image.title,dimensions:{width:image.width,height:image.height},classes:image.class,caption:image.caption,style:image.style,vspace:image.vspace,border:image.border,hspace:image.hspace,borderstyle:image.borderStyle,fileinput:[]}},xt=function(data){return{src:data.src.value,alt:data.alt,title:data.title,width:data.dimensions.width,height:data.dimensions.height,class:data.classes,style:data.style,caption:data.caption,hspace:data.hspace,vspace:data.vspace,border:data.border,borderStyle:data.borderstyle}},wt=function(e,t){var data=t.getData();(function(e,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?S.none():e.prependURL.bind(function(e){return t.substring(0,e.length)!==e?S.some(e+t):S.none()})})(e,data.src.value).each(function(e){t.setData({src:{value:e,meta:data.src.meta}})})},Ct=function(e,t){(function(e,data){var meta=data.src.meta;if(void 0!==meta){var t=$({},data);return e.hasDescription&&O(meta.alt)&&(t.alt=meta.alt),e.hasImageTitle&&O(meta.title)&&(t.title=meta.title),e.hasDimensions&&(O(meta.width)&&(t.dimensions.width=meta.width),O(meta.height)&&(t.dimensions.height=meta.height)),O(meta.class)&&ct(e.classList,meta.class).each(function(e){t.classes=e.value}),e.hasAdvTab&&(O(meta.vspace)&&(t.vspace=meta.vspace),O(meta.border)&&(t.border=meta.border),O(meta.hspace)&&(t.hspace=meta.hspace),O(meta.borderstyle)&&(t.borderstyle=meta.borderstyle)),S.some(t)}return S.none()})(e,t.getData()).each(function(data){return t.setData(data)})},St=function(e,t,n,r){wt(t,r),Ct(t,r),function(e,t,n,r){var data=r.getData(),o=data.src.value,meta=data.src.meta||{};meta.width||meta.height||!t.hasDimensions||e.imageSize(o).get(function(e){e.each(function(e){n.open&&r.setData({dimensions:e})})})}(e,t,n,r),function(e,t,n){var data=n.getData(),image=ct(e.imageList,data.src.value);t.prevImage=image,n.setData({images:image.map(function(e){return e.value}).getOr("")})}(t,n,r)},kt=function(e,t,data){var n=ke(e(data.style)),r=$({},data);return r.vspace=function(e){return e["margin-top"]&&e["margin-bottom"]&&e["margin-top"]===e["margin-bottom"]?Ce(String(e["margin-top"])):""}(n),r.hspace=function(e){return e["margin-right"]&&e["margin-left"]&&e["margin-right"]===e["margin-left"]?Ce(String(e["margin-right"])):""}(n),r.border=function(e){return e["border-width"]?Ce(String(e["border-width"])):""}(n),r.borderstyle=function(e){return e["border-style"]?String(e["border-style"]):""}(n),r.style=function(e,t,n){return t(e(t(n)))}(e,t,n),r},Ot=function(e,t,n,r){var o,data=r.getData();r.block("Uploading image"),(o=data.fileinput,0===o.length?S.none():S.some(o[0])).fold(function(){r.unblock()},function(o){var c=Q(o),l=ft({url:t.url,basePath:t.basePath,credentials:t.credentials,handler:t.handler}),f=function(){r.unblock(),Z(c)};Ee(o).then(function(d){var m=e.createBlobCache(o,c,d);l.upload(m).then(function(o){r.setData({src:{value:o,meta:{}}}),r.showTab("General"),St(e,t,n,r),f()}).catch(function(t){f(),e.alertErr(r,t)})})})},Tt=function(e,t,n){return function(r,o){"src"===o.name?St(e,t,n,r):"images"===o.name?function(e,t,n,r){var data=r.getData(),image=ct(t.imageList,data.images);image.each(function(img){""===data.alt||n.prevImage.map(function(image){return image.text===data.alt}).getOr(!1)?""===img.value?r.setData({src:img,alt:n.prevAlt}):r.setData({src:img,alt:img.text}):r.setData({src:img})}),n.prevImage=image,St(e,t,n,r)}(e,t,n,r):"alt"===o.name?n.prevAlt=r.getData().alt:"style"===o.name?function(e,t){var data=t.getData(),n=kt(e.parseStyle,e.serializeStyle,data);t.setData(n)}(e,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?function(e,t,n){var data=$(yt(t.image),n.getData()),style=$e(e.normalizeCss,xt(data));n.setData({style:style})}(e,t,r):"fileinput"===o.name&&Ot(e,t,n,r)}},Et=function(e){return function(){e.open=!1}},Nt=function(e){return e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:D([[te(e)],e.hasAdvTab?[pt(e)]:[],e.hasUploadUrl||e.hasUploadHandler?[bt(e)]:[]])}:{type:"panel",items:ne(e)}},_t=function(e){return function(t){var n=function(e){return{prevImage:ct(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}}(t);return{title:"Insert/Edit Image",size:"normal",body:Nt(t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:yt(t.image),onSubmit:e.onSubmit(t),onChange:Tt(e,t,n),onClose:Et(n)}}},At=function(e){return function(t){return function(n){var data=$(yt(t.image),n.getData());e.undoManager.transact(function(){et(e,xt(data))}),e.editorUpload.uploadImagesAuto(),n.close()}}},Dt=function(e){return function(t){return j(function(n){we(e.documentBaseURI.toAbsolute(t),function(data){var e=data.bind(function(e){return(O(e.width)||N(e.width))&&(O(e.height)||N(e.height))?H.value({width:String(e.width),height:String(e.height)}):H.error(void 0)});n(e)})})}},Rt=function(e){return function(t,n,r){return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,base64:r.split(",")[1]})}},Bt=function(e){return function(t,n){e.windowManager.alert(n,t.close)}},Mt=function(e){return function(t){return Ke(e,t)}},It=function(e){return function(t){return e.dom.parseStyle(t)}},zt=function(e){return function(t,n){return e.dom.serializeStyle(t,n)}},Pt=function(e){var t={onSubmit:At(e),imageSize:Dt(e),createBlobCache:Rt(e),alertErr:Bt(e),normalizeCss:Mt(e),parseStyle:It(e),serializeStyle:zt(e)};return{open:function(){return vt(e).map(_t(t)).get(function(t){e.windowManager.open(t)})}}},Lt=function(e){e.addCommand("mceImage",Pt(e).open)},Ht=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},Ft=function(e){return function(t){for(var n,i=t.length,r=function(t){t.attr("contenteditable",e?"true":null)};i--;)n=t[i],Ht(n)&&(n.attr("contenteditable",e?"false":null),oe.each(n.getAll("figcaption"),r))}},Vt=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",Ft(!0)),e.serializer.addNodeFilter("figure",Ft(!1))})},jt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:f(e)}},Ut={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return jt(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return jt(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return jt(n)},fromDom:jt,fromPoint:function(e,t,n){var r=e.dom();return S.from(r.elementFromPoint(t,n)).map(jt)}},Wt=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(){return $t(0,0)}),$t=function(e,t){return{major:e,minor:t}},qt={nu:$t,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Wt():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return $t(r(1),r(2))}(e,n)},unknown:Wt},Gt=function(e,t){return function(){return t===e}},Yt=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Gt("Edge",t),isChrome:Gt("Chrome",t),isIE:Gt("IE",t),isOpera:Gt("Opera",t),isFirefox:Gt("Firefox",t),isSafari:Gt("Safari",t)}},Xt={unknown:function(){return Yt({current:void 0,version:qt.unknown()})},nu:Yt,edge:f("Edge"),chrome:f("Chrome"),ie:f("IE"),opera:f("Opera"),firefox:f("Firefox"),safari:f("Safari")},Kt=function(e,t){return function(){return t===e}},Jt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Kt("Windows",t),isiOS:Kt("iOS",t),isAndroid:Kt("Android",t),isOSX:Kt("OSX",t),isLinux:Kt("Linux",t),isSolaris:Kt("Solaris",t),isFreeBSD:Kt("FreeBSD",t)}},Qt={unknown:function(){return Jt({current:void 0,version:qt.unknown()})},nu:Jt,windows:f("Windows"),ios:f("iOS"),android:f("Android"),linux:f("Linux"),osx:f("OSX"),solaris:f("Solaris"),freebsd:f("FreeBSD")},Zt=function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return S.some(r)}return S.none()}(e,function(e){return e.search(n)})},en=function(e,t){return Zt(e,t).map(function(e){var n=qt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},tn=function(e,t){return Zt(e,t).map(function(e){var n=qt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},nn=function(e,t){return-1!==e.indexOf(t)},rn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,on=function(e){return function(t){return nn(t,e)}},an=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return nn(e,"edge/")&&nn(e,"chrome")&&nn(e,"safari")&&nn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rn],search:function(e){return nn(e,"chrome")&&!nn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return nn(e,"msie")||nn(e,"trident")}},{name:"Opera",versionRegexes:[rn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:on("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:on("firefox")},{name:"Safari",versionRegexes:[rn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(nn(e,"safari")||nn(e,"mobile/"))&&nn(e,"applewebkit")}}],un=[{name:"Windows",search:on("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return nn(e,"iphone")||nn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:on("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:on("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:on("linux"),versionRegexes:[]},{name:"Solaris",search:on("sunos"),versionRegexes:[]},{name:"FreeBSD",search:on("freebsd"),versionRegexes:[]}],cn={browsers:f(an),oses:f(un)},sn=function(e){var t=cn.browsers(),n=cn.oses(),r=en(t,e).fold(Xt.unknown,Xt.nu),o=tn(n,e).fold(Qt.unknown,Qt.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,l=e.isAndroid()&&4===e.version.major,d=r||c||l&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:f(r),isiPhone:f(o),isTablet:f(d),isPhone:f(h),isTouch:f(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:f(v)}}(o,r,e);return{browser:r,os:o,deviceType:c}},ln=((mt=function(){var t=e.navigator.userAgent;return sn(t)},ht=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ht||(ht=!0,gt=mt.apply(null,e)),gt})().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Pt(t).open,onSetup:function(e){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Pt(t).open}),t.ui.registry.addContextMenu("image",{update:function(element){return We(element)||"IMG"===element.nodeName?[(n=element,{text:"Image",icon:"image",onAction:function(){var r=((mt=function(){var t=e.navigator.userAgent;return sn(t)},ht=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ht||(ht=!0,gt=mt.apply(null,e)),gt})().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(e){return(element=e,t=element.dom(),S.from(t.parentNode).map(Ut.fromDom)).filter(function(e){return"figure"===e.dom().nodeName.toLowerCase()}).getOr(e);var element,t})(Ut.fromDom(n));t.selection.select(r.dom()),Pt(t).open()}})]:[];var n}})});c.add("image",function(e){Vt(e),ln(e),Lt(e)})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(e,t){return e.fire("insertCustomChar",{chr:t})},d=function(e,t){var n=f(e,t).chr;e.execCommand("mceInsertContent",!1,n)},m=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=function(e){return e.settings.charmap},v=function(e){return e.settings.charmap_append},y=function(e){return function(){return e}},x=y(!1),w=y(!0),C=x,S=w,k=function(){return O},O=(o={fold:function(e,s){return e()},is:C,isSome:C,isNone:S,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:k,ap:k,each:function(){},bind:k,flatten:k,exists:C,forall:S,filter:k,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:y("none()")},Object.freeze&&Object.freeze(o),o),T=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:S,isNone:C,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return T(e(a))},ap:function(e){return e.fold(k,function(e){return T(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:O},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(C,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},E={some:T,none:k,from:function(e){return null==e?O:T(e)}},N=(c="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===c}),map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},_=Array.prototype.push,A=function(e,t){return function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);_.apply(t,e[i])}return t}(map(e,t))},D=(Array.prototype.slice,N(Array.from)&&Array.from,m.isArray),R=function(e){return D(e)?[].concat((t=e,m.grep(t,function(e){return D(e)&&2===e.length}))):"function"==typeof e?e():[];var t},B=function(e){var t=function(e,t){var n=h(e);n&&(t=[{name:"User Defined",characters:R(n)}]);var r=v(e);if(r){var o=m.grep(t,function(e){return"User Defined"===e.name});return o.length?(o[0].characters=[].concat(o[0].characters).concat(R(r)),t):[].concat(t).concat({name:"User Defined",characters:R(r)})}return t}(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return t.length>1?[{name:"All",characters:A(t,function(g){return g.characters})}].concat(t):t},M=function(e){return{getCharMap:function(){return B(e)},insertChar:function(t){d(e,t)}}},I=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return I(n())}}},z=function(e,t){return-1!==e.indexOf(t)},P=function(e,pattern){var t=[],n=pattern.toLowerCase();return function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)}(e.characters,function(g){(function(e,t,n){return!!z(String.fromCharCode(e).toLowerCase(),n)||z(t.toLowerCase(),n)||z(t.toLowerCase().replace(/\s+/g,""),n)})(g[0],g[1],n)&&t.push(g)}),map(t,function(e){return{text:e[1],value:String.fromCharCode(e[0]),icon:String.fromCharCode(e[0])}})},L=function(t,n){var r,o,c,l=1===n.length?I("User Defined"):I("All"),f=function(e,pattern){(function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return E.some(r)}return E.none()})(n,function(e){return e.name===l.get()}).each(function(t){var n=P(t,pattern);e.setData({results:n})})},m=(r=function(e){var pattern=e.getData().pattern;f(e,pattern)},o=40,c=null,{cancel:function(){null!==c&&(e.clearTimeout(c),c=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==c&&e.clearTimeout(c),c=e.setTimeout(function(){r.apply(null,t),c=null},o)}}),h={title:"Special Character",size:"normal",body:1===n.length?{type:"panel",items:[{label:"Search",type:"input",name:"pattern"},{type:"collection",name:"results"}]}:{type:"tabpanel",tabs:map(n,function(e){return{title:e.name,items:[{label:"Search",type:"input",name:"pattern"},{type:"collection",name:"results"}]}})},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:P(n[0],"")},onAction:function(e,details){"results"===details.name&&(d(t,details.value),e.close())},onTabChange:function(e,title){l.set(title),m.throttle(e)},onChange:function(e,t){"pattern"===t.name&&m.throttle(e)}};t.windowManager.open(h)},H=function(e,t){e.addCommand("mceShowCharmap",function(){L(e,t)})},F=tinymce.util.Tools.resolve("tinymce.util.Promise"),V=function(e){e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return e.execCommand("mceShowCharmap")}}),e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return e.execCommand("mceShowCharmap")}})};l.add("charmap",function(e){var t=B(e);return H(e,t),V(e),function(e,t){e.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(pattern,e){return new F(function(e,n){e(P(t,pattern))})},onAction:function(t,n,r){e.selection.setRng(n),e.insertContent(r),t.hide()}})}(e,t[0]),M(e)})}(window)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("mcePrint",function(){e.getWin().print()})},n=function(e){e.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:function(){return e.execCommand("mcePrint")}}),e.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:function(){return e.execCommand("mcePrint")}})};e.add("print",function(e){t(e),n(e),e.addShortcut("Meta+P","","mcePrint")})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){return e.getParam("content_style","")},r=function(e){var r="",o=e.dom.encode,c=n(e);r+='<base href="'+o(e.documentBaseURI.getURI())+'">',c&&(r+='<style type="text/css">'+c+"</style>"),t.each(e.contentCSS,function(t){r+='<link type="text/css" rel="stylesheet" href="'+o(e.documentBaseURI.toAbsolute(t))+'">'});var l=e.settings.body_id||"tinymce";-1!==l.indexOf("=")&&(l=(l=e.getParam("body_id","","hash"))[e.id]||l);var f=e.settings.body_class||"";-1!==f.indexOf("=")&&(f=(f=e.getParam("body_class","","hash"))[e.id]||"");var d=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+r+'</head><body id="'+o(l)+'" class="mce-content-body '+o(f)+'"'+o(d)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},o=function(e){e.addCommand("mcePreview",function(){!function(e){var content=r(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:content}}).focus("close")}(e)})},c=function(e){e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:function(){return e.execCommand("mcePreview")}}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:function(){return e.execCommand("mcePreview")}})};e.add("preview",function(e){o(e),c(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},n=function(e){e.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:function(){return e.execCommand("InsertHorizontalRule")}}),e.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:function(){return e.execCommand("InsertHorizontalRule")}})};e.add("hr",function(e){t(e),n(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},n=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.getAttribute("id")||t.getAttribute("name"):""},r=function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))},o=function(e){var o=n(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:o},onSubmit:function(n){(function(e,n){return t(n)?(r(e,n),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(e,n.getData().id)||n.close()}})},c=function(e){e.addCommand("mceAnchor",function(){o(e)})},l=function(e){return function(t){for(var i=0;i<t.length;i++)(n=t[i]).attr("href")||!n.attr("id")&&!n.attr("name")||n.firstChild||t[i].attr("contenteditable",e);var n}},f=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",l("false")),e.serializer.addNodeFilter("a",l(null))})},d=function(e){e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return e.execCommand("mceAnchor")},onSetup:function(t){return e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind}}),e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return e.execCommand("mceAnchor")}})};e.add("anchor",function(e){f(e),c(e),d(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},r=function(e){return e.getParam("pagebreak_split_block",!1)},o=function(){return"mce-pagebreak"},c=function(){return'<img src="'+t.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},l=function(e){var t=n(e),o=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(o,c())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(n){for(var o,c,i=n.length;i--;)if((c=(o=n[i]).attr("class"))&&-1!==c.indexOf("mce-pagebreak")){var l=o.parent;if(e.schema.getBlockElements()[l.name]&&r(e)){l.type=3,l.value=t,l.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}})})},f=c,d=o,m=function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+f()+"</p>"):e.insertContent(f())})},h=function(e){e.on("ResolveName",function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,d())&&(t.name="pagebreak")})},v=function(e){e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:function(){return e.execCommand("mcePageBreak")}}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:function(){return e.execCommand("mcePageBreak")}})};e.add("pagebreak",function(e){m(e),v(e),l(e),h(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var o,c,l,f,d,m={findAndReplaceDOMText:function(e,t,n,o,c){var l,text,f,d,m,h,v=[],y=0;function x(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(f=t.ownerDocument,d=c.getBlockElements(),m=c.getWhiteSpaceElements(),h=c.getShortEndedElements(),text=function e(t){var n;if(3===t.nodeType)return t.data;if(m[t.nodeName]&&!d[t.nodeName])return"";if(n="",r(t))return"\n";if((d[t.nodeName]||h[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;l=e.exec(text);)v.push(x(l,o));else l=text.match(e),v.push(x(l,o));return v.length&&(y=v.length,function(e,t,n){var o,c,l,f,v=[],y=0,x=e,w=t.shift(),C=0;e:for(;;){if((d[x.nodeName]||h[x.nodeName]||r(x))&&y++,3===x.nodeType&&(!c&&x.length+y>=w[1]?(c=x,f=w[1]-y):o&&v.push(x),!o&&x.length+y>w[0]&&(o=x,l=w[0]-y),y+=x.length),o&&c){if(x=n({startNode:o,startNodeIndex:l,endNode:c,endNodeIndex:f,innerNodes:v,match:w[2],matchIndex:C}),y-=c.length-f,o=null,c=null,v=[],C++,!(w=t.shift()))break}else if(m[x.nodeName]&&!d[x.nodeName]||!x.firstChild){if(x.nextSibling){x=x.nextSibling;continue}}else if(!r(x)){x=x.firstChild;continue}for(;;){if(x.nextSibling){x=x.nextSibling;break}if(x.parentNode===e)break e;x=x.parentNode}}}(t,v,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(f.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,c=e.startNode,l=e.endNode,d=e.matchIndex;if(c===l){var m=c;o=m.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(m.data.substring(0,e.startNodeIndex)),o.insertBefore(n,m));var h=t(e.match[0],d);return o.insertBefore(h,m),e.endNodeIndex<m.length&&(r=f.createTextNode(m.data.substring(e.endNodeIndex)),o.insertBefore(r,m)),m.parentNode.removeChild(m),h}n=f.createTextNode(c.data.substring(0,e.startNodeIndex)),r=f.createTextNode(l.data.substring(e.endNodeIndex));for(var v=t(c.data.substring(e.startNodeIndex),d),i=0,y=e.innerNodes.length;i<y;++i){var x=e.innerNodes[i],w=t(x.data,d);x.parentNode.replaceChild(w,x)}var C=t(l.data.substring(0,e.endNodeIndex),d);return(o=c.parentNode).insertBefore(n,c),o.insertBefore(v,c),o.removeChild(c),(o=l.parentNode).insertBefore(C,l),o.insertBefore(r,l),o.removeChild(l),C}}(n))),y}}},h=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},v=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},y=function(e,t){var r,o=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var i=0;i<r.length;i++){var c=h(r[i]);null!==c&&c.length&&c===t.toString()&&o.push(r[i])}return o},x=function(e,t,n){var r=t.get(),o=e.dom;(n=!1!==n)?r++:r--,o.removeClass(y(e,t.get()),"mce-match-marker-selected");var c=y(e,r);return c.length?(o.addClass(y(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(c[0]),r):-1},w=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},C=function(e,t){var n=x(e,t,!0);-1!==n&&t.set(n)},S=function(e,t){var n=x(e,t,!1);-1!==n&&t.set(n)},k=function(e){var t=h(e);return null!==t&&t.length>0},O=function(e,t,r){var i,o,c,l;for(o=n.toArray(e.getBody().getElementsByTagName("span")),i=0;i<o.length;i++){var f=h(o[i]);null!==f&&f.length&&(f===t.get().toString()&&(c||(c=o[i].firstChild),l=o[i].firstChild),v(o[i]))}if(c&&l){var d=e.dom.createRng();return d.setStart(c,0),d.setEnd(l,l.data.length),!1!==r&&e.selection.setRng(d),d}},T=function(e,t){return y(e,t.get()+1).length>0},E=function(e,t){return y(e,t.get()-1).length>0},N={done:O,find:function(e,t,text,n,r){text=(text=text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),text=r?"\\b"+text+"\\b":text;var o=function(e,t,n){var r,marker;return(marker=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),O(e,t,!1),m.findAndReplaceDOMText(n,r,marker,!1,e.schema)}(e,t,new RegExp(text,n?"g":"gi"));return o&&(t.set(-1),t.set(x(e,t,!0))),o},next:C,prev:S,replace:function(e,t,text,r,o){var i,c,l,f,d,m,y=t.get();for(r=!1!==r,l=e.getBody(),c=n.grep(n.toArray(l.getElementsByTagName("span")),k),i=0;i<c.length;i++){var x=h(c[i]);if(f=d=parseInt(x,10),o||f===t.get()){for(text.length?(c[i].firstChild.nodeValue=text,v(c[i])):w(e.dom,c[i]);c[++i];){if((f=parseInt(h(c[i]),10))!==d){i--;break}w(e.dom,c[i])}r&&y--}else d>t.get()&&c[i].setAttribute("data-mce-index",d-1)}return t.set(y),r?(m=T(e,t),C(e,t)):(m=E(e,t),S(e,t)),!o&&m},hasNext:T,hasPrev:E},_=function(e,t){return{done:function(n){return N.done(e,t,n)},find:function(text,n,r){return N.find(e,t,text,n,r)},next:function(){return N.next(e,t)},prev:function(){return N.prev(e,t)},replace:function(text,n,r){return N.replace(e,t,text,n,r)}}},A=function(e){return function(){return e}},D=A(!1),R=A(!0),B=function(){return M},M=(f={fold:function(e,s){return e()},is:D,isSome:D,isNone:R,getOr:l=function(e){return e},getOrThunk:c=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:l,orThunk:c,map:B,ap:B,each:function(){},bind:B,flatten:B,exists:D,forall:R,filter:B,equals:o=function(e){return e.isNone()},equals_:o,toArray:function(){return[]},toString:A("none()")},Object.freeze&&Object.freeze(f),f),I=(d="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===d}),z=(Array.prototype.slice,I(Array.from)&&Array.from,function(e,t){var r,o={};function c(n){(N.hasNext(e,t)?n.enable:n.disable)("next"),(N.hasPrev(e,t)?n.enable:n.disable)("prev")}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var l=function(e,t){!function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)}(["replace","replaceall","prev","next"],t?e.disable:e.enable)};function f(t){e.windowManager.alert("Could not find the specified string.",function(){t.focus("findtext")})}var d=function(n){var data=n.getData();if(!data.findtext.length)return N.done(e,t,!1),l(n,!0),void c(n);if(o.text===data.findtext&&o.caseState===data.matchcase&&o.wholeWord===data.wholewords)return N.hasNext(e,t)?(N.next(e,t),void c(n)):void f(n);var r=N.find(e,t,data.findtext,data.matchcase,data.wholewords);r||f(n),l(n,0===r),c(n),o={text:data.findtext,caseState:data.matchcase,wholeWord:data.wholewords}},m={findtext:r,replacetext:"",matchcase:!1,wholewords:!1};e.windowManager.open({title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"input",name:"findtext",label:"Find"},{type:"input",name:"replacetext",label:"Replace with"},{type:"grid",columns:2,items:[{type:"checkbox",name:"matchcase",label:"Match case"},{type:"checkbox",name:"wholewords",label:"Find whole words only"}]}]},buttons:[{type:"custom",name:"find",text:"Find",align:"start",primary:!0},{type:"custom",name:"replace",text:"Replace",align:"start",disabled:!0},{type:"custom",name:"replaceall",text:"Replace All",align:"start",disabled:!0},{type:"custom",name:"prev",text:"Previous",align:"end",icon:"arrow-left",disabled:!0},{type:"custom",name:"next",text:"Next",align:"end",icon:"arrow-right",disabled:!0}],initialData:m,onAction:function(n,details){var data=n.getData();switch(details.name){case"find":d(n);break;case"replace":N.replace(e,t,data.replacetext)||(l(n,!0),t.set(-1),o={});break;case"replaceall":N.replace(e,t,data.replacetext,!0,!0),l(n,!0),o={};break;case"prev":N.prev(e,t),c(n);break;case"next":N.next(e,t),c(n)}},onSubmit:d,onClose:function(){e.focus(),N.done(e,t),e.undoManager.add()}})}),P=function(e,t){e.addCommand("SearchReplace",function(){z(e,t)})},L=function(e,t){return function(){z(e,t)}},H=function(e,t){e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:L(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:L(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",L(e,t))};t.add("searchreplace",function(t){var n=e(-1);return P(t,n),H(t,n),_(t,n)})}()},function(e,t){!function(){"use strict";var e,t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),f=function(){return(f=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},d="[-'\\.]",m="[:]",h="[+*/,;;]",v="[0-9---------------------------------]",y="\\r",x="\\n",w="[\v\f\u2028\u2029]",C="[------------------------------------------------------------------------------------------------------]",S="[----\ufeff-]",k="[-------]",O="[=_--<>]",T="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",E=0,N=1,_=2,A=3,D=4,R=5,B=6,M=7,I=8,z=9,P=10,L=11,H=12,F=13,V=[new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),new RegExp(d),new RegExp(m),new RegExp(h),new RegExp(v),new RegExp(y),new RegExp(x),new RegExp(w),new RegExp(C),new RegExp(S),new RegExp(k),new RegExp(O),new RegExp("@")],j=new RegExp("^"+T+"$"),U=function(e){return function(){return e}},W=function(e){return e},$=U(!1),G=U(!0),Y=function(){return X},X=(r={fold:function(e,s){return e()},is:$,isSome:$,isNone:G,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:Y,ap:Y,each:function(){},bind:Y,flatten:Y,exists:$,forall:G,filter:Y,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:U("none()")},Object.freeze&&Object.freeze(r),r),K=(o="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===o}),J=(Array.prototype.slice,K(Array.from)&&Array.from,V),Q=F,Z=function(e){for(var t=Q,n=J.length,r=0;r<n;++r){var o=J[r];if(o&&o.test(e)){t=r;break}}return t},ee=function(e){var t,n;return function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r}(e,(t=Z,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r}))},te=/^\s+$/,ne=j,re=function(e){return"http"===e||"https"===e},oe=function(e,t){var n=function(e,t){var i;for(i=t;i<e.length&&!te.test(e[i]);i++);return i}(e,t+1);return"://"===e.slice(t+1,n).join("").substr(0,3)?n:t},ie=function(e,t,n){n=f({},{includeWhitespace:!1,includePunctuation:!1},n);for(var r=[],o=[],i=0;i<e.length;i++){var c=t(e[i]);"\ufeff"!==c&&(r.push(e[i]),o.push(c))}return function(e,t,n,r){for(var map,o,c,l,f,d,m=[],h=[],i=0;i<n.length;++i)if(h.push(e[i]),c=void 0,l=void 0,f=void 0,d=void 0,f=(map=n)[o=i],d=map[o+1],!(o<0||o>map.length-1&&0!==o||f===E&&d===E||(l=map[o+2],f===E&&(d===_||d===N||d===H)&&l===E||(c=map[o-1],(f===_||f===N||d===H)&&d===E&&c===E||!(f!==D&&f!==E||d!==D&&d!==E)||(f===A||f===N)&&d===D&&c===D||f===D&&(d===A||d===N)&&l===D||f===I||f===z||c===I||c===z||d===I||d===z||f===R&&d===B||f!==M&&f!==R&&f!==B&&d!==M&&d!==R&&d!==B&&(f===P&&d===P||d===L&&(f===E||f===D||f===P||f===L)||f===L&&(d===E||d===D||d===P)||f===H))))){var v=t[i];if((r.includeWhitespace||!te.test(v))&&(r.includePunctuation||!ne.test(v))){var y=i-h.length+1,x=i+1,w=t.slice(y,x).join("");if(re(w)){var C=oe(t,i),S=e.slice(x,C);Array.prototype.push.apply(h,S),i=C}m.push(h)}h=[]}return m}(r,o,ee(o),n)},ae=function(e,t){for(var n=t.getBlockElements(),r=t.getShortEndedElements(),o=t.getWhiteSpaceElements(),c=function(e){return n[e.nodeName]||r[e.nodeName]||o[e.nodeName]},f="",d=new l(e,e);e=d.next();)3===e.nodeType?f+=e.data:0!==f.length&&c(e)&&(f+=" ");return f},ue=function(e){return{words:ie(e.split(""),W).length,characters:e.length,charactersNoSpace:e.replace(/\s/g,"").length}},ce=function(e){return ue(function(e){return e.removed?"":ae(e.getBody(),e.schema)}(e))},se=tinymce.util.Tools.resolve("tinymce.util.Delay"),le=function(e){!function(e,t){e.fire("wordCountUpdate",{wordCount:t})}(e,ce(e))},fe=function(e){var t=ce(e),n=function(e){var t=ae(e.selection.getRng().cloneContents(),e.schema);return e.selection.isCollapsed()?ue(""):ue(t)}(e);e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.words),String(n.words)],["Characters (no spaces)",String(t.charactersNoSpace),String(n.charactersNoSpace)],["Characters",String(t.characters),String(n.characters)]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})};c.add("wordcount",function(e){return function(e){e.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return fe(e)}}),e.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return fe(e)}})}(e),function(e){var t=se.debounce(function(){return le(e)},300);e.on("init",function(){le(e),se.setEditorTimeout(e,function(){e.on("setcontent beforeaddundo undo redo keyup",t)},0)})}(e),function(e){return{getCount:function(){return ce(e).words}}}(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){e.fire("VisualBlocks",{state:t})},r=function(e,t,r){e.dom.toggleClass(e.getBody(),"mce-visualblocks"),r.set(!r.get()),n(e,r.get())},o=function(e,t,n){e.addCommand("mceVisualBlocks",function(){r(e,t,n)})},c=function(e){return e.getParam("visualblocks_default_state",!1,"boolean")},l=function(e,t,n){e.on("PreviewFormats AfterPreviewFormats",function(t){n.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),e.on("init",function(){c(e)&&r(e,t,n)}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")})},f=function(e,t){return function(n){n.setActive(t.get());var r=function(e){return n.setActive(e.state)};return e.on("VisualBlocks",r),function(){return e.off("VisualBlocks",r)}}},d=function(e,t){e.ui.registry.addToggleButton("visualblocks",{icon:"paragraph",tooltip:"Show blocks",onAction:function(){return e.execCommand("mceVisualBlocks")},onSetup:f(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",onAction:function(){return e.execCommand("mceVisualBlocks")},onSetup:f(e,t)})};t.add("visualblocks",function(t,n){var r=e(!1);o(t,n,r),d(t,r),l(t,n,r)})}()},function(e,t){!function(e){"use strict";var t,n,r,o,c,l=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return l(n())}}},f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(e){return{isEnabled:function(){return e.get()}}},m=function(e,t){return e.fire("VisualChars",{state:t})},h={"":"nbsp","":"shy"},v=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},y=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n},x={charMap:h,regExp:v(h),regExpGlobal:v(h,!0),selector:y(h),charMapToRegExp:v,charMapToSelector:y},w=function(e){return function(){return e}},C=w(!1),S=w(!0),k=C,O=S,T=function(){return E},E=(o={fold:function(e,s){return e()},is:k,isSome:k,isNone:O,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:T,ap:T,each:function(){},bind:T,flatten:T,exists:k,forall:O,filter:T,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:w("none()")},Object.freeze&&Object.freeze(o),o),N=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:O,isNone:k,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return N(e(a))},ap:function(e){return e.fold(T,function(e){return N(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:E},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(k,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},_=function(e){return null==e?E:N(e)},A=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}}("function"),D=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},R=(Array.prototype.slice,A(Array.from)&&Array.from,function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:w(e)}}),B={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return R(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return R(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return R(n)},fromDom:R,fromPoint:function(e,t,n){var r=e.dom();return _(r.elementFromPoint(t,n)).map(R)}},M=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE),I=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(element){return element.dom().nodeValue}),z=(c=M,function(element){return function(element){return element.dom().nodeType}(element)===c}),P=function(e){return'<span data-mce-bogus="1" class="mce-'+x.charMap[e]+'">'+e+"</span>"},L=function(e,t){var n=[],r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r}(e.dom().childNodes,B.fromDom);return D(r,function(e){t(e)&&(n=n.concat([e])),n=n.concat(L(e,t))}),n},H={isMatch:function(e){return z(e)&&void 0!==I(e)&&x.regExp.test(I(e))},filterDescendants:L,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(html){return html.replace(x.regExpGlobal,P)}},F=function(e,t){var n,div,r=H.filterDescendants(B.fromDom(t),H.isMatch);D(r,function(t){var r=H.replaceWithSpans(I(t));for(div=e.dom.create("div",null,r);n=div.lastChild;)e.dom.insertAfter(n,t.dom());e.dom.remove(t.dom())})},V=function(e,body){var t=e.dom.select(x.selector,body);D(t,function(t){e.dom.remove(t,1)})},j=F,U=V,W=function(e){var body=e.getBody(),t=e.selection.getBookmark(),n=H.findParentElm(e.selection.getNode(),body);V(e,n=void 0!==n?n:body),F(e,n),e.selection.moveToBookmark(t)},$=function(e,t){var n,body=e.getBody(),r=e.selection;t.set(!t.get()),m(e,t.get()),n=r.getBookmark(),!0===t.get()?j(e,body):U(e,body),r.moveToBookmark(n)},G=function(e,t){e.addCommand("mceVisualChars",function(){$(e,t)})},Y=tinymce.util.Tools.resolve("tinymce.util.Delay"),X=function(e,t){var n=Y.debounce(function(){W(e)},300);!1!==e.settings.forced_root_block&&e.on("keydown",function(r){!0===t.get()&&(13===r.keyCode?W(e):n())})},K=function(e){return e.getParam("visualchars_default_state",!1)},J=function(e,t){e.on("init",function(){var n=!K(e);t.set(n),$(e,t)})},Q=function(e,t){return function(n){n.setActive(t.get());var r=function(e){return n.setActive(e.state)};return e.on("VisualChars",r),function(){return e.off("VisualChars",r)}}};f.add("visualchars",function(e){var t=l(!1);return G(e,t),function(e,t){e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"paragraph",onAction:function(){return e.execCommand("mceVisualChars")},onSetup:Q(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",onAction:function(){return e.execCommand("mceVisualChars")},onSetup:Q(e,t)})}(e,t),X(e,t),J(e,t),d(t)})}(window)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,html){e.focus(),e.undoManager.transact(function(){e.setContent(html)}),e.selection.setCursorLocation(),e.nodeChanged()},n=function(e){return e.getContent({source_view:!0})},r=function(e){var r=n(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:r},onSubmit:function(n){t(e,n.getData().code),n.close()}})},o=function(e){e.addCommand("mceCodeEditor",function(){r(e)})},c=function(e){e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(e)}}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(e)}})};e.add("code",function(e){return o(e),c(e),{}})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},n=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},r=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},o=t,c=n,l=function(e){var r=n(e);return r.length>0?r[0]:t(e)},f=function(e){return e.getParam("insertdatetime_element",!1)},d="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),m="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),h="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),v="January February March April May June July August September October November December".split(" "),y=function(e,t){if((e=""+e).length<t)for(var i=0;i<t-e.length;i++)e="0"+e;return e},x=function(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",y(n.getMonth()+1,2))).replace("%d",y(n.getDate(),2))).replace("%H",""+y(n.getHours(),2))).replace("%M",""+y(n.getMinutes(),2))).replace("%S",""+y(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(v[n.getMonth()]))).replace("%b",""+e.translate(h[n.getMonth()]))).replace("%A",""+e.translate(m[n.getDay()]))).replace("%a",""+e.translate(d[n.getDay()]))).replace("%%","%")},w=function(e,t){if(f(e)){var n=x(e,t),r=void 0;r=/%[HMSIp]/.test(t)?x(e,"%Y-%m-%dT%H:%M"):x(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)}(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(x(e,t))},C=x,S=function(e){e.addCommand("mceInsertDate",function(){w(e,r(e))}),e.addCommand("mceInsertTime",function(){w(e,o(e))})},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return O(n())}}},T=function(e){var t=c(e),n=O(l(e));e.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(e){return e===n.get()},fetch:function(n){n(k.map(t,function(t){return{type:"choiceitem",text:C(e,t),value:t}}))},onAction:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];w(e,n.get())},onItemAction:function(t,r){n.set(r),w(e,r)}});var r=function(t){return function(){n.set(t),w(e,t)}};e.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return k.map(t,function(t){return{type:"menuitem",text:C(e,t),onAction:r(t)}})}})};e.add("insertdatetime",function(e){S(e),T(e)})}()},function(e,t){!function(){"use strict";var e,t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},f=l("string"),d=l("function"),m=Object.prototype.hasOwnProperty,h=(e=function(e,t){return t},function(){for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var o=t[r];for(var c in o)m.call(o,c)&&(n[c]=e(n[c],o[c]))}return n}),v=function(e){return function(){return e}},y=v(!1),x=v(!0),w=y,C=x,S=function(){return k},k=(o={fold:function(e,s){return e()},is:w,isSome:w,isNone:C,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:S,ap:S,each:function(){},bind:S,flatten:S,exists:w,forall:C,filter:S,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:v("none()")},Object.freeze&&Object.freeze(o),o),O=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:C,isNone:w,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return O(e(a))},ap:function(e){return e.fold(S,function(e){return O(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:k},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(w,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},T=S,E=function(e){return null==e?k:O(e)},N=Object.hasOwnProperty,_=function(e,t){return A(e,t)?E(e[t]):T()},A=function(e,t){return N.call(e,t)},D=Array.prototype.push,R=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);D.apply(t,e[i])}return t},B=(Array.prototype.slice,d(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),M=function(e){return e.getParam("media_scripts")},I=function(e){return e.getParam("audio_template_callback")},z=function(e){return e.getParam("video_template_callback")},P=function(e){return e.getParam("media_live_embeds",!0)},L=function(e){return e.getParam("media_filter_html",!0)},H=function(e){return e.getParam("media_url_resolver")},F=function(e){return e.getParam("media_alt_source",!0)},V=function(e){return e.getParam("media_poster",!0)},j=function(e){return e.getParam("media_dimensions",!0)},U=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),W=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$=function(e,t){if(e)for(var i=0;i<e.length;i++)if(-1!==t.indexOf(e[i].filter))return e[i]},G=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},Y=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},X={getMaxWidth:G("maxWidth"),getMaxHeight:G("maxHeight"),setMaxWidth:Y("maxWidth"),setMaxHeight:Y("maxHeight")},K=W.DOM,J=function(e){return K.getAttrib(e,"data-ephox-embed-iri")},Q=function(e,html){return function(html){var e=K.createFragment(html);return""!==J(e.firstChild)}(html)?function(html){var div=K.createFragment(html).firstChild;return{type:"ephox-embed-iri",source1:J(div),source2:"",poster:"",width:X.getMaxWidth(div),height:X.getMaxHeight(div)}}(html):function(e,html){var data={};return U({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,n){if(data.source1||"param"!==t||(data.source1=n.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(data.type||(data.type=t),data=B.extend(n.map,data)),"script"===t){var r=$(e,n.map.src);if(!r)return;data={type:"script",source1:n.map.src,width:r.width,height:r.height}}"source"===t&&(data.source1?data.source2||(data.source2=n.map.src):data.source1=n.map.src),"img"!==t||data.poster||(data.poster=n.map.src)}}).parse(html),data.source1=data.source1||data.src||data.data,data.source2=data.source2||"",data.poster=data.poster||"",data}(e,html)},Z=tinymce.util.Tools.resolve("tinymce.util.Promise"),ee=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""},te=tinymce.util.Tools.resolve("tinymce.html.Writer"),ne=tinymce.util.Tools.resolve("tinymce.html.Schema"),re=W.DOM,oe=function(e,t){var n,i,r,o;for(n in t)if(r=""+t[n],e.map[n])for(i=e.length;i--;)(o=e[i]).name===n&&(r?(e.map[n]=r,o.value=r):(delete e.map[n],e.splice(i,1)));else r&&(e.push({name:n,value:r}),e.map[n]=r)},ie=function(html,data){var div=re.createFragment(html).firstChild;return X.setMaxWidth(div,data.width),X.setMaxHeight(div,data.height),function(html){var e=te();return U(e).parse(html),e.getContent()}(div.outerHTML)},ae=function(html,data,e){return function(html){var e=re.createFragment(html);return""!==re.getAttrib(e.firstChild,"data-ephox-embed-iri")}(html)?ie(html,data):function(html,data,e){var t,n=te(),r=0;return U({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(text){n.comment(text)},cdata:function(text){n.cdata(text)},text:function(text,e){n.text(text,e)},start:function(o,c,l){switch(o){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&oe(c,{width:data.width,height:data.height})}if(e)switch(o){case"video":oe(c,{poster:data.poster,src:""}),data.source2&&oe(c,{src:""});break;case"iframe":oe(c,{src:data.source1});break;case"source":if(++r<=2&&(oe(c,{src:data["source"+r],type:data["source"+r+"mime"]}),!data["source"+r]))return;break;case"img":if(!data.poster)return;t=!0}n.start(o,c,l)},end:function(o){if("video"===o&&e)for(var c=1;c<=2;c++)if(data["source"+c]){var l=[];l.map={},r<c&&(oe(l,{src:data["source"+c],type:data["source"+c+"mime"]}),n.start("source",l,!0))}if(data.poster&&"object"===o&&e&&!t){var f=[];f.map={},oe(f,{src:data.poster,width:data.width,height:data.height}),n.start("img",f,!0)}n.end(o)}},ne({})).parse(html),n.getContent()}(html,data,e)},ue=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ce=function(pattern,e){for(var t=pattern.regex.exec(e),n=pattern.url,r=function(i){n=n.replace("$"+i,function(){return t[i]?t[i]:""})},i=0;i<t.length;i++)r(i);return n.replace(/\?$/,"")},se=function(e,t){var data=B.extend({},t);if(!data.source1&&(B.extend(data,Q(M(e),data.embed)),!data.source1))return"";data.source2||(data.source2=""),data.poster||(data.poster=""),data.source1=e.convertURL(data.source1,"source"),data.source2=e.convertURL(data.source2,"source"),data.source1mime=ee(data.source1),data.source2mime=ee(data.source2),data.poster=e.convertURL(data.poster,"poster");var pattern=function(e){var pattern=ue.filter(function(pattern){return pattern.regex.test(e)});return pattern.length>0?B.extend({},pattern[0],{url:ce(pattern[0],e)}):null}(data.source1);if(pattern&&(data.source1=pattern.url,data.type=pattern.type,data.allowFullscreen=pattern.allowFullscreen,data.width=data.width||pattern.w,data.height=data.height||pattern.h),data.embed)return ae(data.embed,data,!0);var n=$(M(e),data.source1);n&&(data.type="script",data.width=n.width,data.height=n.height);var r=I(e),o=z(e);return data.width=data.width||300,data.height=data.height||150,B.each(data,function(t,n){data[n]=e.dom.encode(t)}),"iframe"===data.type?function(data){var e=data.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source1+'" width="'+data.width+'" height="'+data.height+'"'+e+"></iframe>"}(data):"application/x-shockwave-flash"===data.source1mime?function(data){var html='<object data="'+data.source1+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+="</object>"}(data):-1!==data.source1mime.indexOf("audio")?function(data,e){return e?e(data):'<audio controls="controls" src="'+data.source1+'">'+(data.source2?'\n<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</audio>"}(data,r):"script"===data.type?function(data){return'<script src="'+data.source1+'"><\/script>'}(data):function(data,e){return e?e(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source1+'"'+(data.source1mime?' type="'+data.source1mime+'"':"")+" />\n"+(data.source2?'<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</video>"}(data,o)},le={},fe=function(e){return function(data){return se(e,data)}},de=function(e,data){var t=H(e);return t?function(data,e,t){return new Z(function(n,r){var o=function(t){return t.html&&(le[data.source1]=t),n({url:data.source1,html:t.html?t.html:e(data)})};le[data.source1]?o(le[data.source1]):t({url:data.source1},o,r)})}(data,fe(e),t):function(data,e){return new Z(function(t){t({html:e(data),url:data.source1})})}(data,fe(e))},me=function(e){return le.hasOwnProperty(e)},ge=function(data){return h(data,{source1:data.source1.value,source2:_(data,"source2").bind(function(e){return _(e,"value")}).getOr(""),poster:_(data,"poster").bind(function(e){return _(e,"value")}).getOr("")})},he=function(data){return h(data,{source1:{value:_(data,"source1").getOr("")},source2:{value:_(data,"source2").getOr("")},poster:{value:_(data,"poster").getOr("")}})},pe=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},ve=function(e,t){return B.extend({},Q(M(e),t))},be=function(e){var t=e.selection.getNode();return t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri")?e.selection.getContent():""},ye=function(e,html){var t=e.dom.select("img[data-mce-object]");e.insertContent(html),function(e,t){var i,n,r=e.dom.select("img[data-mce-object]");for(i=0;i<t.length;i++)for(n=r.length-1;n>=0;n--)t[i]===r[n]&&r.splice(n,1);e.selection.select(r[0])}(e,t),e.nodeChanged()},xe=function(e){var t=function(e){var element=e.selection.getNode(),t=element.getAttribute("data-ephox-embed-iri");return t?{source1:t,width:X.getMaxWidth(element),height:X.getMaxHeight(element)}:element.getAttribute("data-mce-object")?Q(M(e),e.serializer.serialize(element,{selection:!0})):{}}(e),n={source1:"",source2:"",embed:be(e),poster:"",dimensions:{height:t.height?t.height:"",width:t.width?t.width:""}},r=he(h(n,t)),o=function(t){var data=ge(t.getData());return j(e)?h(data,{width:data.dimensions.width,height:data.dimensions.height}):data},c=function(t){var n=o(t);de(e,n).then(function(e,t){return function(n){if(f(n.url)&&n.url.trim().length>0){var html=n.html,r=ve(t,html),o={source1:n.url,embed:html};!function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)}(["width","height"],function(e){_(r,e).each(function(t){var n=o.dimensions||{};n[e]=t,o.dimensions=n})}),e.setData(he(o))}}}(w,e)).catch(pe(e))},l=j(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],d={title:"General",items:R([[{name:"source1",type:"urlinput",filetype:"media",label:"Source"}],l])},m={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},v=[];F(e)&&v.push({name:"source2",type:"urlinput",filetype:"media",label:"Alternative source URL"}),V(e)&&v.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var y={title:"Advanced",items:v},x=[d,m];v.length>0&&x.push(y);var body={type:"tabpanel",tabs:x},w=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:body,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){!function(data,e){data.embed=ae(data.embed,data),data.embed&&me(data.source1)?ye(e,data.embed):de(e,data).then(function(t){ye(e,t.html)}).catch(pe(e))}(o(t),e),t.close()},onChange:function(t,n){switch(n.name){case"source1":c(t);break;case"embed":!function(t){var data=ge(t.getData()),n=ve(e,data.embed);n.dimensions={width:n.width?n.width:data.dimensions.width,height:n.height?n.height:data.dimensions.height},t.setData(he(n))}(t)}},initialData:r})},we=function(e){return{showDialog:function(){xe(e)}}},Ce=function(e){e.addCommand("mceMedia",function(){xe(e)})},Se=tinymce.util.Tools.resolve("tinymce.html.Node"),ke=tinymce.util.Tools.resolve("tinymce.Env"),Oe=function(e,html){if(!1===L(e))return html;var t,n=te();return U({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(text){n.comment(text)},cdata:function(text){n.cdata(text)},text:function(text,e){n.text(text,e)},start:function(r,o,c){if(t=!0,"script"!==r&&"noscript"!==r){for(var i=0;i<o.length;i++){if(0===o[i].name.indexOf("on"))return;"style"===o[i].name&&(o[i].value=e.dom.serializeStyle(e.dom.parseStyle(o[i].value),r))}n.start(r,o,c),t=!1}},end:function(e){t||n.end(e)}},ne({})).parse(html),n.getContent()},Te=function(e,t){var n,r=t.name;return(n=new Se("img",1)).shortEnded=!0,Ne(e,t,n),n.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===r?"30":"150"),style:t.attr("style"),src:ke.transparentSrc,"data-mce-object":r,class:"mce-object mce-object-"+r}),n},Ee=function(e,t){var n,r,o,c=t.name;return(n=new Se("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":c,class:"mce-preview-object mce-object-"+c}),Ne(e,t,n),(r=new Se(c,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(o=new Se("span",1)).attr("class","mce-shim"),n.append(r),n.append(o),n},Ne=function(e,t,n){var r,o,c,l,f;for(l=(c=t.attributes).length;l--;)r=c[l].name,o=c[l].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(f=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Oe(e,f))),n.firstChild=null)},_e=function(e){var t=e.attr("class");return t&&/\btiny-pageembed\b/.test(t)},Ae=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri")||_e(e))return!0;return!1},De=function(e){return function(t){for(var n,r,i=t.length;i--;)(n=t[i]).parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=$(M(e),n.attr("src"))))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),"iframe"===n.name&&P(e)&&ke.ceFalse?Ae(n)||n.replace(Ee(e,n)):Ae(n)||n.replace(Te(e,n))))}},Re=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();B.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();B.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",De(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,o,c,l,f,d,m,h,i=t.length;i--;)if((r=t[i]).parent){for(m=r.attr(n),o=new Se(m,1),"audio"!==m&&"script"!==m&&((h=r.attr("class"))&&-1!==h.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),c=(l=r.attributes).length;c--;){var v=l[c].name;0===v.indexOf("data-mce-p-")&&o.attr(v.substr(11),l[c].value)}"script"===m&&o.attr("type","text/javascript"),(f=r.attr("data-mce-html"))&&((d=new Se("#text",3)).raw=!0,d.value=Oe(e,unescape(f)),o.append(d)),r.replace(o)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})},Be=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},Me=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var html,t=e.target;t.getAttribute("data-mce-object")&&(html=t.getAttribute("data-mce-html"))&&(html=unescape(html),t.setAttribute("data-mce-html",escape(ae(html,{width:e.width,height:e.height}))))})},Ie=function(e,t){return function(n){return e.selection.selectorChangedWithUnbind(t.join(","),n.setActive).unbind}},ze=function(e){e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:function(){e.execCommand("mceMedia")},onSetup:Ie(e,["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"])}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:function(){e.execCommand("mceMedia")}})};c.add("media",function(e){return Ce(e),ze(e),Be(e),Re(e),Me(e),we(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()}(e)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}(n,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},n=function(e){e.addCommand("mceNonBreaking",function(){t(e,1)})},r=tinymce.util.Tools.resolve("tinymce.util.VK"),o=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t},c=function(e){var n=o(e);n>0&&e.on("keydown",function(o){if(o.keyCode===r.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),t(e,n)}})},l=function(e){e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return e.execCommand("mceNonBreaking")}}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return e.execCommand("mceNonBreaking")}})};e.add("nonbreaking",function(e){n(e),l(e),c(e)})}()},function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},o=function(e){return function(){return e}},c=function(e){return e};function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var f,d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},m=function(e){return e()},h=o(!1),v=o(!0),y=h,x=v,w=function(){return C},C=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,s){return e()},is:y,isSome:y,isNone:x,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:w,ap:w,each:function(){},bind:w,flatten:w,exists:y,forall:x,filter:w,equals:e,equals_:e,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(r),r}(),S=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:x,isNone:y,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return S(e(a))},ap:function(e){return e.fold(w,function(e){return S(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:C},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(y,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},k={some:S,none:w,from:function(e){return null==e?C:S(e)}},O=tinymce.util.Tools.resolve("tinymce.PluginManager"),T=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},E=T("string"),N=T("array"),_=T("boolean"),A=T("function"),D=T("number"),R=void 0===(f=Array.prototype.indexOf)?function(e,t){return V(e,t)}:function(e,t){return f.call(e,t)},B=function(e,t){return R(e,t)>-1},M=function(e,t){return F(e,t).isSome()},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},I=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},z=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,c=e.length;i<c;i++){var l=e[i],f=t(l);f!==n&&(r.push(o),o=[]),n=f,o.push(l)}return 0!==o.length&&r.push(o),r},P=function(e,t,n){return function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i,e)}(e,function(e){n=t(n,e)}),n},L=function(e,t,n){return I(e,function(e){n=t(n,e)}),n},H=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return k.some(r)}return k.none()},F=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return k.some(i);return k.none()},V=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return i;return-1},j=Array.prototype.push,U=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);j.apply(t,e[i])}return t},W=function(e,t){var output=map(e,t);return U(output)},$=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i,e))return!1;return!0},G=Array.prototype.slice,Y=function(e){var t=G.call(e,0);return t.reverse(),t},X=function(e,t){var n=G.call(e,0);return n.sort(t),n},K=(A(Array.from)&&Array.from,Object.keys),J=Object.hasOwnProperty,Q=function(e,t){for(var n=K(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},Z=function(e,t){return ee(e,function(e,i,n){return{k:i,v:t(e,i,n)}})},ee=function(e,t){var n={};return Q(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},te=function(e,t){return ne(e,t)?k.from(e[t]):k.none()},ne=function(e,t){return J.call(e,t)},re=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return I(e,function(e,i){r[e]=o(t[i])}),r}},oe=function(e){return e.slice(0).sort()},ie=function(e,t){throw new Error("All required keys ("+oe(e).join(", ")+") were not specified. Specified keys were: "+oe(t).join(", ")+".")},ae=function(e){throw new Error("Unsupported keys for object: "+oe(e).join(", "))},ue=function(label,e){if(!N(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");I(e,function(a){if(!E(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},ce=function(e){var t=oe(e);H(t,function(s,i){return i<t.length-1&&s===t[i+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},se=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return ue("required",e),ue("optional",t),ce(n),function(r){var c=K(r);$(e,function(e){return B(c,e)})||ie(e,c);var l=filter(c,function(e){return!B(n,e)});l.length>0&&ae(l);var f={};return I(e,function(e){f[e]=o(r[e])}),I(t,function(e){f[e]=o(Object.prototype.hasOwnProperty.call(r,e)?k.some(r[e]):k.none())}),f}},le=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE),fe=e.Node.DOCUMENT_NODE,de=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),me=e.Node.TEXT_NODE,ge=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(element){return element.dom().nodeName.toLowerCase()}),he=function(element){return element.dom().nodeType},pe=function(e){return function(element){return he(element)===e}},ve=function(element){return he(element)===le||"#comment"===ge(element)},be=pe(de),ye=pe(me),xe=pe(fe),we=function(t,n,r){if(!(E(r)||_(r)||D(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},Ce=function(element,e,t){we(element.dom(),e,t)},Se=function(element,e){var t=element.dom();Q(e,function(e,n){we(t,n,e)})},ke=function(element,e){var t=element.dom().getAttribute(e);return null===t?void 0:t},Oe=function(element,e){var t=element.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(e)},Te=function(element,e){element.dom().removeAttribute(e)},Ee=function(element){return L(element.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},Ne=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},_e=function(e,t){return-1!==e.indexOf(t)},Ae=function(e,t){return Ne(e,t,0)},De=function(e){return void 0!==e.style},Re=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Be=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},Me={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return Be(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return Be(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return Be(n)},fromDom:Be,fromPoint:function(e,t,n){var r=e.dom();return k.from(r.elementFromPoint(t,n)).map(Be)}},Ie=function(element){var e=ye(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)},body=Re(function(){return ze(Me.fromDom(e.document))}),ze=function(e){var b=e.dom().body;if(null==b)throw new Error("Body is not available yet");return Me.fromDom(b)},Pe=function(t,n,r){if(!E(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);De(t)&&t.style.setProperty(n,r)},Le=function(element,e,t){var n=element.dom();Pe(n,e,t)},He=function(element,e){var t=element.dom();Q(e,function(e,n){Pe(t,n,e)})},Fe=function(element,t){var n=element.dom(),r=e.window.getComputedStyle(n).getPropertyValue(t),o=""!==r||Ie(element)?r:Ve(n,t);return null===o?void 0:o},Ve=function(e,t){return De(e)?e.style.getPropertyValue(t):""},je=function(element,e){var t=element.dom(),n=Ve(t,e);return k.from(n).filter(function(e){return e.length>0})},Ue=function(element,e){!function(e,t){De(e)&&e.style.removeProperty(t)}(element.dom(),e),Oe(element,"style")&&""===ke(element,"style").replace(/^\s+|\s+$/g,"")&&Te(element,"style")},We=void 0!==e.window?e.window:Function("return this;")(),$e=function(p,e){return function(e,t){for(var n=null!=t?t:We,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},qe=function(e,t){var n=function(e,t){return $e(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n},Ge=function(){return qe("Node")},Ye=function(a,b,e){return 0!=(a.compareDocumentPosition(b)&e)},Xe=function(a,b){return Ye(a,b,Ge().DOCUMENT_POSITION_CONTAINED_BY)},Ke=function(){return Je(0,0)},Je=function(e,t){return{major:e,minor:t}},Qe={nu:Je,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Ke():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Je(r(1),r(2))}(e,n)},unknown:Ke},Ze=function(e,t){return function(){return t===e}},et=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Ze("Edge",t),isChrome:Ze("Chrome",t),isIE:Ze("IE",t),isOpera:Ze("Opera",t),isFirefox:Ze("Firefox",t),isSafari:Ze("Safari",t)}},tt={unknown:function(){return et({current:void 0,version:Qe.unknown()})},nu:et,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o("Firefox"),safari:o("Safari")},nt=function(e,t){return function(){return t===e}},ot=function(e){var t=e.current;return{current:t,version:e.version,isWindows:nt("Windows",t),isiOS:nt("iOS",t),isAndroid:nt("Android",t),isOSX:nt("OSX",t),isLinux:nt("Linux",t),isSolaris:nt("Solaris",t),isFreeBSD:nt("FreeBSD",t)}},it={unknown:function(){return ot({current:void 0,version:Qe.unknown()})},nu:ot,windows:o("Windows"),ios:o("iOS"),android:o("Android"),linux:o("Linux"),osx:o("OSX"),solaris:o("Solaris"),freebsd:o("FreeBSD")},at=function(e,t){var n=String(t).toLowerCase();return H(e,function(e){return e.search(n)})},ut=function(e,t){return at(e,t).map(function(e){var n=Qe.detect(e.versionRegexes,t);return{current:e.name,version:n}})},ct=function(e,t){return at(e,t).map(function(e){var n=Qe.detect(e.versionRegexes,t);return{current:e.name,version:n}})},st=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,lt=function(e){return function(t){return _e(t,e)}},ft=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return _e(e,"edge/")&&_e(e,"chrome")&&_e(e,"safari")&&_e(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,st],search:function(e){return _e(e,"chrome")&&!_e(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return _e(e,"msie")||_e(e,"trident")}},{name:"Opera",versionRegexes:[st,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:lt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:lt("firefox")},{name:"Safari",versionRegexes:[st,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(_e(e,"safari")||_e(e,"mobile/"))&&_e(e,"applewebkit")}}],mt=[{name:"Windows",search:lt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return _e(e,"iphone")||_e(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:lt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:lt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:lt("linux"),versionRegexes:[]},{name:"Solaris",search:lt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:lt("freebsd"),versionRegexes:[]}],gt={browsers:o(ft),oses:o(mt)},ht=function(e){var t=gt.browsers(),n=gt.oses(),r=ut(t,e).fold(tt.unknown,tt.nu),c=ct(n,e).fold(it.unknown,it.nu),l=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),c=e.isiOS()&&!r,l=e.isAndroid()&&3===e.version.major,f=e.isAndroid()&&4===e.version.major,d=r||l||f&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:o(r),isiPhone:o(c),isTablet:o(d),isPhone:o(h),isTouch:o(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:o(v)}}(c,r,e);return{browser:r,os:c,deviceType:l}},pt={detect:Re(function(){var t=e.navigator.userAgent;return ht(t)})},vt=de,bt=fe,yt=function(element,e){var t=element.dom();if(t.nodeType!==vt)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},xt=function(e){return e.nodeType!==vt&&e.nodeType!==bt||0===e.childElementCount},wt=function(e,t){return e.dom()===t.dom()},Ct=pt.detect().browser.isIE()?function(e,t){return Xe(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},St=yt,kt=function(element){return Me.fromDom(element.dom().ownerDocument)},Ot=function(element){var e=element.dom();return k.from(e.parentNode).map(Me.fromDom)},Tt=function(element,e){for(var t=A(e)?e:o(!1),n=element.dom(),r=[];null!==n.parentNode&&void 0!==n.parentNode;){var c=n.parentNode,p=Me.fromDom(c);if(r.push(p),!0===t(p))break;n=c}return r},Et=function(element){var e=element.dom();return k.from(e.previousSibling).map(Me.fromDom)},Nt=function(element){var e=element.dom();return k.from(e.nextSibling).map(Me.fromDom)},_t=function(element){var e=element.dom();return map(e.childNodes,Me.fromDom)},At=function(element,e){var t=element.dom().childNodes;return k.from(t[e]).map(Me.fromDom)},Dt=(re("element","offset"),function(marker,element){Ot(marker).each(function(e){e.dom().insertBefore(element.dom(),marker.dom())})}),Rt=function(marker,element){Nt(marker).fold(function(){Ot(marker).each(function(e){Mt(e,element)})},function(e){Dt(e,element)})},Bt=function(e,element){(function(element){return At(element,0)})(e).fold(function(){Mt(e,element)},function(t){e.dom().insertBefore(element.dom(),t.dom())})},Mt=function(e,element){e.dom().appendChild(element.dom())},It=function(element,e){Dt(element,e),Mt(e,element)},zt=function(marker,e){I(e,function(t,i){var n=0===i?marker:e[i-1];Rt(n,t)})},Pt=function(e,t){I(t,function(t){Mt(e,t)})},Lt=function(element){element.dom().textContent="",I(_t(element),function(e){Ht(e)})},Ht=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Ft=function(e){var marker,t=_t(e);t.length>0&&(marker=e,I(t,function(e){Dt(marker,e)})),Ht(e)},Vt=re("width","height"),jt=re("rows","columns"),address=re("row","column"),Ut=re("x","y"),Wt=re("element","rowspan","colspan"),$t=re("element","rowspan","colspan","isNew"),qt={dimensions:Vt,grid:jt,address:address,coords:Ut,extended:re("element","rowspan","colspan","row","column"),detail:Wt,detailnew:$t,rowdata:re("element","cells","section"),elementnew:re("element","isNew"),rowdatanew:re("element","cells","section","isNew"),rowcells:re("cells","section"),rowdetails:re("details","section"),bounds:re("startRow","startCol","finishRow","finishCol")},Gt=function(e,t){var n=[];return I(_t(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Gt(e,t))}),n},Yt=function(e,t,n){return function(e,t,n){return filter(Tt(e,n),t)}(e,function(e){return yt(e,t)},n)},Xt=function(e,t){return function(e,t){return filter(_t(e),t)}(e,function(e){return yt(e,t)})},Kt=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return xt(base)?[]:map(base.querySelectorAll(t),Me.fromDom)}(n,t)};function Jt(e,t,n,a,r){return e(n,a)?k.some(n):A(r)&&r(n)?k.none():t(n,a,r)}var Qt=function(e,t,n){for(var element=e.dom(),r=A(n)?n:o(!1);element.parentNode;){element=element.parentNode;var c=Me.fromDom(element);if(t(c))return k.some(c);if(r(c))break}return k.none()},Zt=function(e,t,n){return Qt(e,function(e){return yt(e,t)},n)},en=function(e,t){return function(e,t){return H(e.dom().childNodes,r(t,Me.fromDom)).map(Me.fromDom)}(e,function(e){return yt(e,t)})},tn=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return xt(base)?k.none():k.from(base.querySelector(t)).map(Me.fromDom)}(n,t)},nn=function(e,t,n){return Jt(yt,Zt,e,t,n)},rn=function(e,t,n){return W(_t(e),function(e){return yt(e,t)?n(e)?[e]:[]:rn(e,t,n)})},on={firstLayer:function(e,t){return rn(e,t,o(!0))},filterFirstLayer:rn},an=function(e,element,t){var n=void 0!==t?t:o(!1);return n(element)?k.none():B(e,ge(element))?k.some(element):Zt(element,e.join(","),function(e){return yt(e,"table")||n(e)})},un=function(e,element){return Ot(element).map(function(t){return Xt(t,e)})},cn=l(un,"th,td"),sn=l(un,"tr"),ln=function(element,e){return parseInt(ke(element,e),10)},fn={cell:function(element,e){return an(["td","th"],element,e)},firstCell:function(e){return tn(e,"th,td")},cells:function(e){return on.firstLayer(e,"th,td")},neighbourCells:cn,table:function(element,e){return nn(element,"table",e)},row:function(element,e){return an(["tr"],element,e)},rows:function(e){return on.firstLayer(e,"tr")},notCell:function(element,e){return an(["caption","tr","tbody","tfoot","thead"],element,e)},neighbourRows:sn,attr:ln,grid:function(element,e,t){var n=ln(element,e),r=ln(element,t);return qt.grid(n,r)}},dn=function(table){var e=fn.rows(table);return map(e,function(e){var element=e,t=Ot(element).map(function(p){var e=ge(p);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),n=map(fn.cells(e),function(e){var t=Oe(e,"rowspan")?parseInt(ke(e,"rowspan"),10):1,n=Oe(e,"colspan")?parseInt(ke(e,"colspan"),10):1;return qt.detail(e,t,n)});return qt.rowdata(element,n,t)})},mn=function(e,t){return map(e,function(e){var n=map(fn.cells(e),function(e){var t=Oe(e,"rowspan")?parseInt(ke(e,"rowspan"),10):1,n=Oe(e,"colspan")?parseInt(ke(e,"colspan"),10):1;return qt.detail(e,t,n)});return qt.rowdata(e,n,t.section())})},gn=function(e,t){return e+","+t},hn=function(e,t){var n=W(e.all(),function(e){return e.cells()});return filter(n,t)},pn={generate:function(e){var t={},n=[],r=e.length,c=0;I(e,function(details,e){var r=[];I(details.cells(),function(n,o){for(var l=0;void 0!==t[gn(e,l)];)l++;for(var f=qt.extended(n.element(),n.rowspan(),n.colspan(),e,l),i=0;i<n.colspan();i++)for(var d=0;d<n.rowspan();d++){var m=l+i,h=gn(e+d,m);t[h]=f,c=Math.max(c,m+1)}r.push(f)}),n.push(qt.rowdata(details.element(),r,details.section()))});var l=qt.grid(r,c);return{grid:o(l),access:o(t),all:o(n)}},getAt:function(e,t,n){var r=e.access()[gn(t,n)];return void 0!==r?k.some(r):k.none()},findItem:function(e,t,n){var r=hn(e,function(e){return n(t,e.element())});return r.length>0?k.some(r[0]):k.none()},filterItems:hn,justCells:function(e){var t=map(e.all(),function(e){return e.cells()});return U(t)}},vn=re("minRow","minCol","maxRow","maxCol"),bn=function(e,t,n){var r=e[n].element(),td=Me.fromTag("td");Mt(td,Me.fromTag("br")),(t?Mt:Bt)(r,td)},yn=function(table,e){var t=function(t){return yt(t.element(),e)},n=dn(table),r=pn.generate(n),o=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),o=n,c=0,l=0;return Q(e.access(),function(e){if(t(e)){var n=e.row(),f=n+e.rowspan()-1,d=e.column(),m=d+e.colspan()-1;n<r?r=n:f>c&&(c=f),d<o?o=d:m>l&&(l=m)}}),vn(r,o,c,l)}(r,t),c="th:not("+e+"),td:not("+e+")",l=on.filterFirstLayer(table,"th,td",function(e){return yt(e,c)});return I(l,Ht),function(e,t,n,r){for(var o=t.grid().columns(),c=t.grid().rows(),i=0;i<c;i++)for(var l=!1,f=0;f<o;f++)i<n.minRow()||i>n.maxRow()||f<n.minCol()||f>n.maxCol()||(pn.getAt(t,i,f).filter(r).isNone()?bn(e,l,i):l=!0)}(n,r,o,t),function(table,e){var t=filter(on.firstLayer(table,"tr"),function(e){return 0===e.dom().childElementCount});I(t,Ht),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||I(on.firstLayer(table,"th,td"),function(e){Te(e,"rowspan"),Te(e,"colspan")}),Te(table,"width"),Te(table,"height"),Ue(table,"width"),Ue(table,"height")}(table,o),table},xn=function(e,t){var n=function(element){return e(element)?k.from(element.dom().nodeValue):k.none()},r=pt.detect().browser,o=r.isIE()&&10===r.version.major?function(element){try{return n(element)}catch(e){return k.none()}}:n;return{get:function(element){if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return o(element).getOr("")},getOption:o,set:function(element,n){if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom().nodeValue=n}}}(ye,"text"),wn=function(element){return xn.get(element)},Cn=function(element){return xn.getOption(element)},Sn=function(element,e){xn.set(element,e)},kn=function(element){return"img"===ge(element)?1:Cn(element).fold(function(){return _t(element).length},function(e){return e.length})},On=["img","br"],Tn=function(e){return Cn(e).filter(function(text){return 0!==text.trim().length||text.indexOf("")>-1}).isSome()||B(On,ge(e))},En=function(element){return e=Tn,(t=function(n){for(var i=0;i<n.childNodes.length;i++){if(e(Me.fromDom(n.childNodes[i])))return k.some(Me.fromDom(n.childNodes[i]));var r=t(n.childNodes[i]);if(r.isSome())return r}return k.none()})(element.dom());var e,t},Nn=function(element){return _n(element,Tn)},_n=function(e,t){var n=function(element){for(var e=_t(element),i=e.length-1;i>=0;i--){var r=e[i];if(t(r))return k.some(r);var o=n(r);if(o.isSome())return o}return k.none()};return n(e)},An=function(e,t){return Me.fromDom(e.dom().cloneNode(t))},Dn=function(e){return An(e,!1)},Rn=function(e){return An(e,!0)},Bn=function(e,t){var n=function(e,t){var n=Me.fromTag(t),r=Ee(e);return Se(n,r),n}(e,t),r=_t(Rn(e));return Pt(n,r),n},Mn=function(){var td=Me.fromTag("td");return Mt(td,Me.fromTag("br")),td},In=function(e,t,n){var r=Bn(e,t);return Q(n,function(e,t){null===e?Te(r,t):Ce(r,t,e)}),r},zn=function(e){return e},Pn=function(e){return function(){return Me.fromTag("tr",e.dom())}},Ln=function(e,t,n){return{row:Pn(t),cell:function(t){var source,r,o,c,l=kt(t.element()),td=Me.fromTag(ge(t.element()),l.dom()),f=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),d=f.length>0?function(e,t,n){return En(e).map(function(r){var o=n.join(","),c=Yt(r,o,function(element){return wt(element,e)});return P(c,function(e,t){var n=Dn(t);return Te(n,"contenteditable"),Mt(e,n),n},t)}).getOr(t)}(t.element(),td,f):td;return Mt(d,Me.fromTag("br")),source=t.element(),r=td,o=source.dom(),c=r.dom(),De(o)&&De(c)&&(c.style.cssText=o.style.cssText),Ue(td,"height"),1!==t.colspan()&&Ue(t.element(),"width"),e(t.element(),td),td},replace:In,gap:Mn}},Hn=function(e){return{row:Pn(e),cell:Mn,replace:zn,gap:Mn}},Fn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Vn(){return{up:o({selector:Zt,closest:nn,predicate:Qt,all:Tt}),down:o({selector:Kt,predicate:Gt}),styles:o({get:Fe,getRaw:je,set:Le,remove:Ue}),attrs:o({get:ke,set:Ce,remove:Te,copyTo:function(source,e){var t=Ee(source);Se(e,t)}}),insert:o({before:Dt,after:Rt,afterAll:zt,append:Mt,appendAll:Pt,prepend:Bt,wrap:It}),remove:o({unwrap:Ft,remove:Ht}),create:o({nu:Me.fromTag,clone:function(element){return Me.fromDom(element.dom().cloneNode(!1))},text:Me.fromText}),query:o({comparePosition:function(element,e){return element.dom().compareDocumentPosition(e.dom())},prevSibling:Et,nextSibling:Nt}),property:o({children:_t,name:ge,parent:Ot,document:function(element){return element.dom().ownerDocument},isText:ye,isComment:ve,isElement:be,getText:wn,setText:Sn,isBoundary:function(element){return!!be(element)&&("body"===ge(element)||B(Fn,ge(element)))},isEmptyTag:function(element){return!!be(element)&&B(["br","img","hr","input"],ge(element))}}),eq:wt,is:St}}var jn=re("left","right"),Un=function(e,t,n){var r=e.property().children(t);return F(r,l(e.eq,n)).map(function(e){return{before:o(r.slice(0,e)),after:o(r.slice(e+1))}})},Wn=function(e,t,n){return Un(e,t,n).map(function(r){var o=e.create().clone(t);return e.insert().appendAll(o,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,o),jn(o,t)})},$n=function(e,t,n){return Un(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),jn(t,r)})},qn=function(e,t,n,r){var o=re("first","second","splits"),c=function(t,l,f){var d=o(t,k.none(),f);return n(t)?o(t,l,f):e.property().parent(t).bind(function(o){return r(e,o,t).map(function(e){var t=[{first:e.left,second:e.right}],r=n(o)?o:e.left();return c(r,k.some(e.right()),f.concat(t))}).getOr(d)})};return c(t,k.none(),[])},Gn=function(e,t,head,n){var r=t(e,head);return P(n,function(b,a){var n=t(e,a);return Yn(e,b,n)},r)},Yn=function(e,t,n){return t.bind(function(s){return n.filter(l(e.eq,s))})},Xn=function(e,t,n){return n.length>0?function(e,t,n,r){return r(e,t,n[0],n.slice(1))}(e,t,n,Gn):k.none()},Kn=function(e,t){return l(e.eq,t)},Jn=function(e,t,n,r){var c=void 0!==r?r:o(!1),l=[t].concat(e.up().all(t)),f=[n].concat(e.up().all(n)),d=function(path){return F(path,c).fold(function(){return path},function(e){return path.slice(0,e+1)})},m=d(l),h=d(f),v=H(m,function(t){return M(h,Kn(e,t))});return{firstpath:o(m),secondpath:o(h),shared:o(v)}},Qn=function(e,t,n){var r=Jn(e,t,n);return r.shared().bind(function(t){return function(e,t,n,r){var o=e.property().children(t);if(e.eq(t,n[0]))return k.some([n[0]]);if(e.eq(t,r[0]))return k.some([r[0]]);var c=function(n){var r=Y(n),c=F(r,Kn(e,t)).getOr(-1),l=c<r.length-1?r[c+1]:r[c];return F(o,Kn(e,l))},l=c(n),f=c(r);return l.bind(function(e){return f.map(function(t){var n=Math.min(e,t),r=Math.max(e,t);return o.slice(n,r+1)})})}(e,t,r.firstpath(),r.secondpath())})},Zn=Jn,er=function(e,t,n){return Xn(e,t,n)},nr=function(e,t,n){return Qn(e,t,n)},rr=function(e,t,n,r){return Zn(e,t,n,r)},or=function(e,t,n){return Wn(e,t,n)},ir=function(e,t,n){return $n(e,t,n)},ar=function(e,t,n,r){return qn(e,t,n,r)},ur=Vn(),cr={sharedOne:function(e,t){return er(ur,function(t,element){return e(element)},t)},subset:function(e,t){return nr(ur,e,t)},ancestors:function(e,t,n){return rr(ur,e,t,n)},breakToLeft:function(e,t){return or(ur,e,t)},breakToRight:function(e,t){return ir(ur,e,t)},breakPath:function(e,t,n){return ar(ur,e,t,function(u,p,e){return n(p,e)})}},sr=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},lr=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),c=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&c>=e.startRow()},fr=function(e,t){for(var n=!0,r=l(sr,t),i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)n=n&&pn.getAt(e,i,o).exists(r);return n?k.some(t):k.none()},dr=function(e,t,n){var r=pn.findItem(e,t,wt),o=pn.findItem(e,n,wt);return r.bind(function(e){return o.map(function(t){return n=e,r=t,qt.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},mr=dr,gr=function(e,t,n){return dr(e,t,n).bind(function(t){return fr(e,t)})},pr=function(e,t,n,r){return pn.findItem(e,t,wt).bind(function(t){var o=n>0?t.row()+t.rowspan()-1:t.row(),c=r>0?t.column()+t.colspan()-1:t.column();return pn.getAt(e,o+n,c+r).map(function(e){return e.element()})})},vr=function(e,t,n){return mr(e,t,n).map(function(t){var n=pn.filterItems(e,l(lr,t));return map(n,function(e){return e.element()})})},yr=function(e,t){return pn.findItem(e,t,function(e,t){return Ct(t,e)}).bind(function(e){return e.element()})},xr=function(table){var e=dn(table);return pn.generate(e)},wr=function(e,t,n){return fn.table(e).bind(function(table){var r=xr(table);return pr(r,e,t,n)})},Cr=function(table,e,t){var n=xr(table);return vr(n,e,t)},Sr=function(table,e,t,n,r){var o=xr(table),c=wt(table,t)?e:yr(o,e),l=wt(table,r)?n:yr(o,n);return vr(o,c,l)},kr=function(table,e,t){var n=xr(table);return gr(n,e,t)},Or=function(e,t){return Zt(e,"table")},Tr=se(["boxes","start","finish"],[]),Er=function(e,t,n){var r=function(e){return function(element){return n(element)||wt(element,e)}};return wt(e,t)?k.some(Tr({boxes:k.some([e]),start:e,finish:t})):Or(e).bind(function(o){return Or(t).bind(function(c){if(wt(o,c))return k.some(Tr({boxes:Cr(o,e,t),start:e,finish:t}));if(Ct(o,c)){var l=(f=Yt(t,"td,th",r(o))).length>0?f[f.length-1]:t;return k.some(Tr({boxes:Sr(o,e,o,t,c),start:e,finish:l}))}if(Ct(c,o)){var f,d=(f=Yt(e,"td,th",r(c))).length>0?f[f.length-1]:e;return k.some(Tr({boxes:Sr(c,e,o,t,c),start:e,finish:d}))}return cr.ancestors(e,t).shared().bind(function(l){return nn(l,"table",n).bind(function(n){var l=Yt(t,"td,th",r(n)),f=l.length>0?l[l.length-1]:t,d=Yt(e,"td,th",r(n)),m=d.length>0?d[d.length-1]:e;return k.some(Tr({boxes:Sr(n,e,o,t,c),start:m,finish:f}))})})})})},Nr={identify:Er,retrieve:function(e,t){var n=Kt(e,t);return n.length>0?k.some(n):k.none()},shiftSelection:function(e,t,n,r,c){return function(e,t){return H(e,function(e){return yt(e,t)})}(e,c).bind(function(e){return wr(e,t,n).bind(function(e){return function(e,t){return Zt(e,"table").bind(function(table){return tn(table,t).bind(function(t){return Er(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:o(t),start:o(e.start()),finish:o(e.finish())}})})})})}(e,r)})})},getEdges:function(e,t,n){return tn(e,t).bind(function(t){return tn(e,n).bind(function(e){return cr.sharedOne(Or,[t,e]).map(function(n){return{first:o(t),last:o(e),table:o(n)}})})})}},_r=function(e,t){return Nr.retrieve(e,t)},Ar=function(e,t,n){return Nr.getEdges(e,t,n).bind(function(t){var n=function(t){return wt(e,t)},r=Zt(t.first(),"thead,tfoot,tbody,table",n),o=Zt(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return o.bind(function(n){return wt(e,n)?kr(t.table(),t.first(),t.last()):k.none()})})})},Dr="data-mce-selected",Rr={selected:o(Dr),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},Br=function(t){if(!N(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return I(t,function(o,c){var l=K(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==r[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!N(d))throw new Error("case arguments must be an array");n.push(f),r[f]=function(){var r=arguments.length;if(r!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+r);for(var o=new Array(r),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var t=K(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!$(n,function(e){return B(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[f].apply(null,o)},log:function(label){e.console.log(label,{constructors:n,constructor:f,params:o})}}}}),r},Mr=Br([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Ir={cata:function(e,t,n,r){return e.fold(t,n,r)},none:Mr.none,multiple:Mr.multiple,single:Mr.single},zr=function(e,t){return Ir.cata(t.get(),o([]),c,o([e]))},Pr=function(table,e){return Ir.cata(e.get(),k.none,function(e,t){return 0===e.length?k.none():Ar(table,Rr.firstSelectedSelector(),Rr.lastSelectedSelector()).bind(function(t){return e.length>1?k.some({bounds:o(t),cells:o(e)}):k.none()})},k.none)},Lr=function(e,t){var n=zr(e,t);return n.length>0&&$(n,function(e){return Oe(e,"rowspan")&&parseInt(ke(e,"rowspan"),10)>1||Oe(e,"colspan")&&parseInt(ke(e,"colspan"),10)>1})?k.some(n):k.none()},Hr=zr,Fr=function(e){return{element:o(e),mergable:k.none,unmergable:k.none,selection:o([e])}},Vr=re("element","clipboard","generators"),jr={noMenu:Fr,forMenu:function(e,table,t){return{element:o(t),mergable:o(Pr(table,e)),unmergable:o(Lr(t,e)),selection:o(Hr(t,e))}},notCell:function(element){return Fr(element)},paste:Vr,pasteRows:function(e,table,t,n,r){return{element:o(t),mergable:k.none,unmergable:k.none,selection:o(Hr(t,e)),clipboard:o(n),generators:o(r)}}},Ur={registerEvents:function(t,r,o,c){t.on("BeforeGetContent",function(e){!0===e.selection&&Ir.cata(r.get(),n,function(n){e.preventDefault(),function(e){return fn.table(e[0]).map(Rn).map(function(e){return[yn(e,Rr.attributeSelector())]})}(n).each(function(n){e.content="text"===e.format?function(e){return map(e,function(element){return element.dom().innerText}).join("")}(n):function(e,t){return map(t,function(t){return e.selection.serializer.serialize(t.dom(),{})}).join("")}(t,n)})},n)}),t.on("BeforeSetContent",function(n){!0===n.selection&&!0===n.paste&&k.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(r){var l=Me.fromDom(r);fn.table(l).each(function(table){var html,r,div,f=filter((html=n.content,(div=(r||e.document).createElement("div")).innerHTML=html,_t(Me.fromDom(div))),function(content){return"meta"!==ge(content)});if(1===f.length&&"table"===ge(f[0])){n.preventDefault();var d=Me.fromDom(t.getDoc()),m=Hn(d),h=jr.paste(l,f[0],m);o.pasteCells(table,h).each(function(e){t.selection.setRng(e),t.focus(),c.clear(table)})}})})})}};function Wr(e,t){var n=function(element){var n=t(element);if(n<=0||null===n){var r=Fe(element,e);return parseFloat(r)||0}return n},r=function(element,e){return L(e,function(e,t){var n=Fe(element,t),r=void 0===n?0:parseInt(n,10);return isNaN(r)?e:e+r},0)};return{set:function(element,t){if(!D(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);var n=element.dom();De(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:r,max:function(element,e,t){var n=r(element,t);return e>n?e-n:0}}}var $r=Wr("height",function(element){var e=element.dom();return Ie(element)?e.getBoundingClientRect().height:e.offsetHeight}),qr=function(element){return $r.get(element)},Gr=function(element){return $r.getOuter(element)},Yr=Wr("width",function(element){return element.dom().offsetWidth}),Xr=function(element){return Yr.get(element)},Kr=function(element){return Yr.getOuter(element)},Jr=pt.detect(),Qr=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(Fe(e,t),n)},Zr=function(e){return Jr.browser.isIE()||Jr.browser.isEdge()?function(e){var t=Qr(e,"padding-top",0),n=Qr(e,"padding-bottom",0),r=Qr(e,"border-top-width",0),o=Qr(e,"border-bottom-width",0),c=e.dom().getBoundingClientRect().height;return"border-box"===Fe(e,"box-sizing")?c:c-t-n-(r+o)}(e):Qr(e,"height",qr(e))},eo=/(\d+(\.\d+)?)(\w|%)*/,to=/(\d+(\.\d+)?)%/,no=/(\d+(\.\d+)?)px|em/,ro=function(e,t){Le(e,"height",t+"px")},oo=function(e,t,n,r){var o,c,l=parseInt(e,10);return Ne(o=e,c="%",o.length-c.length)&&"table"!==ge(t)?function(e,t,n,r){var o=fn.table(e).map(function(table){var e=n(table);return Math.floor(t/100*e)}).getOr(t);return r(e,o),o}(t,l,n,r):l},io=function(e){var t=function(e){return je(e,"height").getOrThunk(function(){return Zr(e)+"px"})}(e);return t?oo(t,e,qr,ro):qr(e)},ao=function(e,t){return Oe(e,t)?parseInt(ke(e,t),10):1},uo=function(element){return je(element,"width").fold(function(){return k.from(ke(element,"width"))},function(e){return k.some(e)})},co=function(e,t){return e/t.pixelWidth()*100},so={percentageBasedSizeRegex:o(to),pixelBasedSizeRegex:o(no),setPixelWidth:function(e,t){Le(e,"width",t+"px")},setPercentageWidth:function(e,t){Le(e,"width",t+"%")},setHeight:ro,getPixelWidth:function(e,t){return uo(e).fold(function(){return Xr(e)},function(n){return function(element,e,t){if(no.test(e)){var n=no.exec(e);return parseInt(n[1],10)}if(to.test(e)){var r=to.exec(e);return function(e,t){return e/100*t.pixelWidth()}(parseFloat(r[1]),t)}return Xr(element)}(e,n,t)})},getPercentageWidth:function(e,t){return uo(e).fold(function(){var n=Xr(e);return co(n,t)},function(n){return function(element,e,t){if(to.test(e)){var n=to.exec(e);return parseFloat(n[1])}var r=Xr(element);return co(r,t)}(e,n,t)})},getGenericWidth:function(e){return uo(e).bind(function(e){if(eo.test(e)){var t=eo.exec(e);return k.some({width:o(t[1]),unit:o(t[3])})}return k.none()})},setGenericWidth:function(e,t,n){Le(e,"width",t+n)},getHeight:function(e){return function(e,t,n){return n(e)/ao(e,t)}(e,"rowspan",io)},getRawWidth:uo},lo=function(main,e){so.getGenericWidth(main).each(function(t){var n=t.width()/2;so.setGenericWidth(main,n,t.unit()),so.setGenericWidth(e,n,t.unit())})},fo=function(e,t){return{left:o(e),top:o(t),translate:function(n,r){return fo(e+n,t+r)}}},mo=fo,go=function(a,b){return void 0!==a?a:void 0!==b?b:0},ho=function(element){var t=element.dom().ownerDocument,body=t.body,n=function(element){var t=element.dom();return t===t.window&&element instanceof e.Window?element:xe(element)?t.defaultView||t.parentWindow:null}(Me.fromDom(t)),html=t.documentElement,r=go(n.pageYOffset,html.scrollTop),o=go(n.pageXOffset,html.scrollLeft),c=go(html.clientTop,body.clientTop),l=go(html.clientLeft,body.clientLeft);return po(element).translate(o-l,r-c)},po=function(element){var t=element.dom(),n=t.ownerDocument,body=n.body,html=Me.fromDom(n.documentElement);return body===t?mo(body.offsetLeft,body.offsetTop):function(element,t){var n=t||Me.fromDom(e.document.documentElement);return Qt(element,l(wt,n)).isSome()}(element,html)?function(e){var t=e.getBoundingClientRect();return mo(t.left,t.top)}(t):mo(0,0)},vo=re("row","y"),bo=re("col","x"),yo=function(e){return ho(e).left()+Kr(e)},xo=function(e){return ho(e).left()},wo=function(e,t){return bo(e,xo(t))},Co=function(e,t){return bo(e,yo(t))},So=function(e){return ho(e).top()},ko=function(e,t,n){if(0===n.length)return[];var r=map(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),o=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([o])},Oo={delta:c,positions:l(ko,function(e,t){return vo(e,So(t))},function(e,t){return vo(e,So(t)+Gr(t))}),edge:So},To={delta:c,edge:xo,positions:l(ko,wo,Co)},Eo={height:Oo,rtl:{delta:function(e,t){return-e},edge:yo,positions:l(ko,Co,wo)},ltr:To},No={ltr:Eo.ltr,rtl:Eo.rtl};function _o(e){var t=function(table){return e(table).isRtl()?No.rtl:No.ltr};return{delta:function(e,table){return t(table).delta(e,table)},edge:function(e){return t(e).edge(e)},positions:function(e,table){return t(table).positions(e)}}}var Ao,Do=function(table){var input=dn(table);return pn.generate(input).grid()},Ro=Object.prototype.hasOwnProperty,Bo=(Ao=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)Ro.call(r,o)&&(t[o]=Ao(t[o],r[o]))}return t}),Mo=function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t},Io=function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i],i);if(n.isSome())return n}return k.none()},zo=function(element,e,t,n){t===n?Te(element,e):Ce(element,e,t)},Po=function(table,e){var t=[],n=[],r=function(e,r){e.length>0?function(e,r){var section=en(table,r).getOrThunk(function(){var e=Me.fromTag(r,kt(table).dom());return Mt(table,e),e});Lt(section);var o=map(e,function(e){e.isNew()&&t.push(e.element());var tr=e.element();return Lt(tr),I(e.cells(),function(e){e.isNew()&&n.push(e.element()),zo(e.element(),"colspan",e.colspan(),1),zo(e.element(),"rowspan",e.rowspan(),1),Mt(tr,e.element())}),tr});Pt(section,o)}(e,r):function(e){en(table,e).each(Ht)}(r)},c=[],l=[],f=[];return I(e,function(e){switch(e.section()){case"thead":c.push(e);break;case"tbody":l.push(e);break;case"tfoot":f.push(e)}}),r(c,"thead"),r(l,"tbody"),r(f,"tfoot"),{newRows:o(t),newCells:o(n)}},Lo=function(e){return map(e,function(e){var tr=Dn(e.element());return I(e.cells(),function(e){var t=Rn(e.element());zo(t,"colspan",e.colspan(),1),zo(t,"rowspan",e.rowspan(),1),Mt(tr,t)}),tr})},Ho=function(element,e){var t=ke(element,e);return void 0===t||""===t?[]:t.split(" ")},Fo=function(element){return void 0!==element.dom().classList},Vo=function(element,e){return function(element,e,t){var n=Ho(element,e).concat([t]);return Ce(element,e,n.join(" ")),!0}(element,"class",e)},jo=function(element,e){return function(element,e,t){var n=filter(Ho(element,e),function(e){return e!==t});return n.length>0?Ce(element,e,n.join(" ")):Te(element,e),!1}(element,"class",e)},Uo=function(element,e){Fo(element)?element.dom().classList.add(e):Vo(element,e)},Wo=function(element){0===(Fo(element)?element.dom().classList:function(element){return Ho(element,"class")}(element)).length&&Te(element,"class")},$o=function(element,e){return Fo(element)&&element.dom().classList.contains(e)},qo=function(e,t){for(var n=[],i=0;i<e;i++)n.push(t(i));return n},Go=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},Yo=function(e,t){if(t<0||t>=e.length-1)return k.none();var n=e[t].fold(function(){var n=Y(e.slice(0,t));return Io(n,function(a,i){return a.map(function(e){return{value:e,delta:i+1}})})},function(e){return k.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return Io(n,function(a,i){return a.map(function(e){return{value:e,delta:i+1}})})},function(e){return k.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},Xo=function(e,t,n){var r=e();return H(r,t).orThunk(function(){return k.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},Ko=function(e){var t=e.grid(),n=Go(0,t.columns()),r=Go(0,t.rows());return map(n,function(col){return Xo(function(){return W(r,function(t){return pn.getAt(e,t,col).filter(function(e){return e.column()===col}).fold(o([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return pn.getAt(e,0,col)})})},Jo=function(e){var t=e.grid(),n=Go(0,t.rows()),r=Go(0,t.columns());return map(n,function(t){return Xo(function(){return W(r,function(n){return pn.getAt(e,t,n).filter(function(e){return e.row()===t}).fold(o([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return pn.getAt(e,t,0)})})},Qo=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Zo=Qo("ephox-snooker"),ei={resolve:Zo.resolve},ti=function(e,t,n,r,o){var c=Me.fromTag("div");return He(c,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Se(c,{"data-column":e,role:"presentation"}),c},ni=function(e,t,n,r,o){var c=Me.fromTag("div");return He(c,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Se(c,{"data-row":e,role:"presentation"}),c},ri=ei.resolve("resizer-bar"),oi=ei.resolve("resizer-rows"),ii=ei.resolve("resizer-cols"),ai=function(e){var t=Kt(e.parent(),"."+ri);I(t,Ht)},ui=function(e,t,n){var r=e.origin();I(t,function(t,i){t.each(function(t){var o=n(r,t);Uo(o,ri),Mt(e.parent(),o)})})},ci=function(e,table,t,n,r,o){var c=ho(table);!function(e,t,n,r){ui(e,t,function(e,t){var o=ni(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Uo(o,oi),o})}(e,t.length>0?r.positions(t,table):[],c,Kr(table)),function(e,t,n,r){ui(e,t,function(e,t){var o=ti(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Uo(o,ii),o})}(e,n.length>0?o.positions(n,table):[],c,Gr(table))},si=function(e,t){var n=Kt(e.parent(),"."+ri);I(n,t)},fi={refresh:function(e,table,t,n){ai(e);var r=dn(table),o=pn.generate(r),c=Jo(o),l=Ko(o);ci(e,table,c,l,t,n)},hide:function(e){si(e,function(e){Le(e,"display","none")})},show:function(e){si(e,function(e){Le(e,"display","block")})},destroy:ai,isRowBar:function(element){return $o(element,oi)},isColBar:function(element){return $o(element,ii)}},di=function(e,t){return qt.rowcells(t,e.section())},mi=function(e,t){return e.cells()[t]},gi={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),c=r.slice(t),l=o.concat([n]).concat(c);return di(e,l)},setCells:di,mutateCell:function(e,t,n){e.cells()[t]=n},getCell:mi,getCellElement:function(e,t){return mi(e,t).element()},mapCells:function(e,t){var n=e.cells(),r=map(n,t);return qt.rowcells(r,e.section())},cellLength:function(e){return e.cells().length}},hi=function(e,t){if(0===e.length)return 0;var n=e[0];return F(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},pi=function(e,t,n,r){var c=function(e,t){return e[t]}(e,t).cells().slice(n),l=hi(c,r),f=function(e,t){return map(e,function(e){return gi.getCell(e,t)})}(e,n).slice(t),d=hi(f,r);return{colspan:o(l),rowspan:o(d)}},vi=function(e,t){var n=map(e,function(e,t){return map(e.cells(),function(col,e){return!1})});return map(e,function(r,o){var details=W(r.cells(),function(r,c){if(!1===n[o][c]){var l=pi(e,o,c,t);return function(e,t,r,o){for(var c=e;c<e+r;c++)for(var l=t;l<t+o;l++)n[c][l]=!0}(o,c,l.rowspan(),l.colspan()),[qt.detailnew(r.element(),l.rowspan(),l.colspan(),r.isNew())]}return[]});return qt.rowdetails(details,r.section())})},bi=function(e,t,n){for(var r=[],i=0;i<e.grid().rows();i++){for(var o=[],c=0;c<e.grid().columns();c++){var element=pn.getAt(e,i,c).map(function(e){return qt.elementnew(e.element(),n)}).getOrThunk(function(){return qt.elementnew(t.gap(),!0)});o.push(element)}var l=qt.rowcells(o,e.all()[i].section());r.push(l)}return r},yi=function(e,t){return map(e,function(details){var e=function(details){return Io(details,function(e){return Ot(e.element()).map(function(e){var t=Ot(e).isNone();return qt.elementnew(e,t)})}).getOrThunk(function(){return qt.elementnew(t.row(),!0)})}(details.details());return qt.rowdatanew(e.element(),details.details(),details.section(),e.isNew())})},xi=function(e,t){var n=vi(e,wt);return yi(n,t)},wi=function(e,element){var t=U(map(e.all(),function(e){return e.cells()}));return H(t,function(e){return wt(element,e.element())})},Ci=function(e,t,n,r,c){return function(l,table,f,d,m){var input=dn(table),h=pn.generate(input);return t(h,f).map(function(t){var n=function(e,t){return bi(e,t,!1)}(h,d),r=e(n,t,wt,c(d)),l=xi(r.grid(),d);return{grid:o(l),cursor:r.cursor}}).fold(function(){return k.none()},function(e){var t=Po(table,e.grid());return n(table,e.grid(),m),r(table),fi.refresh(l,table,Eo.height,m),k.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},Si=xi,ki=function(e,t){return fn.cell(t.element()).bind(function(t){return wi(e,t)})},Oi=function(e,t){var details=map(t.selection(),function(t){return fn.cell(t).bind(function(t){return wi(e,t)})}),n=Mo(details);return n.length>0?k.some(n):k.none()},Ti=function(e,t){return fn.cell(t.element()).bind(function(n){return wi(e,n).map(function(details){return Bo(details,{generators:t.generators,clipboard:t.clipboard})})})},Ei=function(e,t){var details=map(t.selection(),function(t){return fn.cell(t).bind(function(t){return wi(e,t)})}),n=Mo(details);return n.length>0?k.some(Bo({cells:n},{generators:t.generators,clipboard:t.clipboard})):k.none()},Ni=function(e,t){return t.mergable()},_i=function(e,t){return t.unmergable()},Ai=function(e){return{is:function(t){return e===t},isValue:v,isError:h,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return Ai(e)},orThunk:function(t){return Ai(e)},fold:function(t,n){return n(e)},map:function(t){return Ai(t(e))},mapError:function(t){return Ai(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return k.some(e)}}},Di=function(e){return{is:h,isValue:h,isError:v,getOr:c,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Di(e)},mapError:function(t){return Di(t(e))},each:n,bind:function(t){return Di(e)},exists:h,forall:v,toOption:k.none}},Ri={value:Ai,error:Di},Bi=function(e,t){return map(e,function(){return qt.elementnew(t.cell(),!0)})},Mi=function(e,t,n){return e.concat(qo(t,function(t){return gi.setCells(e[e.length-1],Bi(e[e.length-1].cells(),n))}))},Ii=function(e,t,n){return map(e,function(e){return gi.setCells(e,e.cells().concat(Bi(Go(0,t),n)))})},zi=function(e,t,n){if(e.row()>=t.length||e.column()>gi.cellLength(t[0]))return Ri.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),c=r[0].cells().slice(e.column()),l=gi.cellLength(n[0]),f=n.length;return Ri.value({rowDelta:o(r.length-f),colDelta:o(c.length-l)})},Pi=function(e,t){var n=gi.cellLength(e[0]),r=gi.cellLength(t[0]);return{rowDelta:o(0),colDelta:o(n-r)}},Li=function(e,t,n){var r=t.colDelta()<0?Ii:c;return(t.rowDelta()<0?Mi:c)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Hi=function(e,t,n,r){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)gi.mutateCell(e[i],o,qt.elementnew(r(),!1));return e},Fi=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var c=0;c<gi.cellLength(e[0]);c++){var l=n(gi.getCellElement(e[i],c),t);!0===l&&!1===o?gi.mutateCell(e[i],c,qt.elementnew(r(),!0)):!0===l&&(o=!1)}return e},Vi=function(e,t,n,r){if(t>0&&t<e.length){var o=function(e,t){return L(e,function(e,n){return M(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])}(e[t-1].cells(),n);I(o,function(o){for(var c=k.none(),l=function(i){for(var t=function(t){var l=e[i].cells()[t];n(l.element(),o.element())&&(c.isNone()&&(c=k.some(r())),c.each(function(sub){gi.mutateCell(e[i],t,qt.elementnew(sub,!0))}))},l=0;l<gi.cellLength(e[0]);l++)t(l)},i=t;i<e.length;i++)l(i)})}return e},ji=function(e,t,col,n){var r=l(n,gi.getCell(e[t],col).element()),o=e[t];return e.length>1&&gi.cellLength(o)>1&&(col>0&&r(gi.getCellElement(o,col-1))||col<o.length-1&&r(gi.getCellElement(o,col+1))||t>0&&r(gi.getCellElement(e[t-1],col))||t<e.length-1&&r(gi.getCellElement(e[t+1],col)))},Ui=function(e,t,n,r,o){return zi(e,t,n).map(function(c){var l=Li(t,c,r);return function(e,t,n,r,o){for(var c=e.row(),l=e.column(),f=c+n.length,d=l+gi.cellLength(n[0]),m=c;m<f;m++)for(var h=l;h<d;h++){ji(t,m,h,o)&&Fi(t,gi.getCellElement(t[m],h),o,r.cell);var v=gi.getCellElement(n[m-c],h-l),y=r.replace(v);gi.mutateCell(t[m],h,qt.elementnew(y,!0))}return t}(e,l,n,r,o)})},Wi=function(e,t,n,r,o){Vi(t,e,o,r.cell);var c=Pi(n,t),l=Li(n,c,r),f=Pi(t,l),d=Li(t,f,r);return d.slice(0,e).concat(l).concat(d.slice(e,d.length))},$i=function(e,t,n,r,o){var c=e.slice(0,t),l=e.slice(t),f=gi.mapCells(e[n],function(n,c){return t>0&&t<e.length&&r(gi.getCellElement(e[t-1],c),gi.getCellElement(e[t],c))?gi.getCell(e[t],c):qt.elementnew(o(n.element(),r),!0)});return c.concat([f]).concat(l)},qi=function(e,t,n,r,o){return map(e,function(e){var sub=t>0&&t<gi.cellLength(e)&&r(gi.getCellElement(e,t-1),gi.getCellElement(e,t))?gi.getCell(e,t):qt.elementnew(o(gi.getCellElement(e,n),r),!0);return gi.addCell(e,t,sub)})},Gi=function(e,t,n,r,o){var c=n+1;return map(e,function(e,i){var sub=i===t?qt.elementnew(o(gi.getCellElement(e,n),r),!0):gi.getCell(e,n);return gi.addCell(e,c,sub)})},Yi=function(e,t,n,r,o){var c=t+1,l=e.slice(0,c),f=e.slice(c),d=gi.mapCells(e[t],function(e,i){return i===n?qt.elementnew(o(e.element(),r),!0):e});return l.concat([d]).concat(f)},Xi=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Ki=function(e,t,n){var r=map(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return qt.rowcells(r,e.section())});return filter(r,function(e){return e.cells().length>0})},Ji=function(element){return element.dom().textContent},Qi=function(e,t,n,r){return map(e,function(e){return gi.mapCells(e,function(e){return function(e){return M(t,function(t){return n(e.element(),t.element())})}(e)?qt.elementnew(r(e.element(),n),!0):e})})},Zi=function(e,t,n,r){return void 0!==gi.getCellElement(e[t],n)&&t>0&&r(gi.getCellElement(e[t-1],n),gi.getCellElement(e[t],n))},ea=function(e,t,n){return t>0&&n(gi.getCellElement(e,t-1),gi.getCellElement(e,t))},ta=function(e,t,n,r){var o=W(e,function(r,i){return Zi(e,i,t,n)||ea(r,t,n)?[]:[gi.getCell(r,t)]});return Qi(e,o,n,r)},na=function(e,t,n,r){var o=e[t],c=W(o.cells(),function(r,i){return Zi(e,t,i,n)||ea(o,i,n)?[]:[r]});return Qi(e,c,n,r)},ra=function(e,t,n,r){var o=z(e,function(e){return ge(gi.getCell(e,t).element())});return W(o,function(e){return"th"===ge(gi.getCell(e[0],t).element())?e:function(e){var o=map(e,function(e){var n=gi.getCell(e,t);return{row:e,text:Ji(n.element())}}),c=X(o,function(e,t){var o=n(e.text,t.text);return r?o:-1*o});return map(c,function(e){return e.row})}(e)})},oa=function(e,t,n,r){var o=e[t].cells(),c=map(o,function(e){return Ji(e.element())}),l=map(e,function(e){return{zippedCells:map(e.cells(),function(e,i){return{cell:e,reference:o[i],referenceText:c[i]}}),section:e.section()}});return map(l,function(e){var t=z(e.zippedCells,function(e){return ge(e.reference.element())}),o=W(t,function(e){return"th"===ge(e[0].reference.element())?e:X(e,function(e,t){var o=n(e.referenceText,t.referenceText);return r?o:-1*o})}),c=map(o,function(e){return e.cell});return qt.rowcells(c,e.section)})},ia=function(e){return{fold:e}},aa=function(){return ia(function(e,t,n,r,o){return e()})},ua=function(e){return ia(function(t,n,r,o,c){return n(e)})},ca=function(e,t){return ia(function(n,r,o,c,l){return o(e,t)})},sa=function(e,t,n){return ia(function(r,o,c,l,f){return l(e,t,n)})},la=function(e,t){return ia(function(n,r,o,c,l){return l(e,t)})},fa=function(input,e,t,n){var r=input.slice(0),c=function(input,e){return 0===input.length?aa():1===input.length?ua(0):0===e?ca(0,1):e===input.length-1?la(e-1,e):e>0&&e<input.length-1?sa(e-1,e,e+1):aa()}(input,e),l=function(e){return map(e,o(0))},f=o(l(r)),d=function(e,o){if(t>=0){var c=Math.max(n.minCellWidth(),r[o]-t);return l(r.slice(0,e)).concat([t,c-r[o]]).concat(l(r.slice(o+1)))}var f=Math.max(n.minCellWidth(),r[e]+t),d=r[e]-f;return l(r.slice(0,e)).concat([f-r[e],d]).concat(l(r.slice(o+1)))},m=d;return c.fold(f,function(e){return n.singleColumnWidth(r[e],t)},m,function(e,t,n){return d(t,n)},function(e,o){if(t>=0)return l(r.slice(0,o)).concat([t]);var c=Math.max(n.minCellWidth(),r[o]+t);return l(r.slice(0,o)).concat([c-r[o]])})},da=function(e,t){return Oe(e,t)&&parseInt(ke(e,t),10)>1},ma={hasColspan:function(e){return da(e,"colspan")},hasRowspan:function(e){return da(e,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(element,e){return parseInt(Fe(element,e),10)}},ga=function(e,t,n){return je(e,t).fold(function(){return n(e)+"px"},function(e){return e})},ha=function(e){return ga(e,"width",so.getPixelWidth)},pa=function(e){return ga(e,"height",so.getHeight)},va=function(e,t,n,r,o){var c=Ko(e),l=map(c,function(e){return e.map(t.edge)});return map(c,function(e,t){return e.filter(d(ma.hasColspan)).fold(function(){var e=Yo(l,t);return r(e)},function(e){return n(e,o)})})},ba=function(e){return e.map(function(e){return e+"px"}).getOr("")},ya=function(e,t,n,r){var o=Jo(e),c=map(o,function(e){return e.map(t.edge)});return map(o,function(e,t){return e.filter(d(ma.hasRowspan)).fold(function(){var e=Yo(c,t);return r(e)},function(e){return n(e)})})},xa={getRawWidths:function(e,t){return va(e,t,ha,ba)},getPixelWidths:function(e,t,n){return va(e,t,so.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return va(e,t,so.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return ya(e,t,so.getHeight,function(e){return e.getOrThunk(ma.minHeight)})},getRawHeights:function(e,t){return ya(e,t,pa,ba)}},wa=function(e,t,n){for(var r=0,i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},Ca=function(e,t){var n=pn.justCells(e);return map(n,function(e){var n=wa(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:o(n),colspan:e.colspan}})},Sa=function(e,t){var n=pn.justCells(e);return map(n,function(e){var n=wa(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:o(n),rowspan:e.rowspan}})},ka=function(e,t){return map(e.all(),function(e,i){return{element:e.element,height:o(t[i])}})},Oa=function(e){var t=parseInt(e,10),n=c;return{width:o(t),pixelWidth:o(t),getWidths:xa.getPixelWidths,getCellDelta:n,singleColumnWidth:function(e,t){return[Math.max(ma.minWidth(),e+t)-e]},minCellWidth:ma.minWidth,setElementWidth:so.setPixelWidth,setTableWidth:function(table,e,t){var n=P(e,function(b,a){return b+a},0);so.setPixelWidth(table,n)}}},Ta=function(element,e){if(so.percentageBasedSizeRegex().test(e))return function(e,element){var t=parseFloat(e),n=Xr(element);return{width:o(t),pixelWidth:o(n),getWidths:xa.getPercentageWidths,getCellDelta:function(e){return e/n*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return ma.minWidth()/n*100},setElementWidth:so.setPercentageWidth,setTableWidth:function(table,e,n){var r=t+n;so.setPercentageWidth(table,r)}}}(so.percentageBasedSizeRegex().exec(e)[1],element);if(so.pixelBasedSizeRegex().test(e)){var t=so.pixelBasedSizeRegex().exec(e);return Oa(t[1])}var n=Xr(element);return Oa(n)},Ea=function(element){return so.getRawWidth(element).fold(function(){var e=Xr(element);return Oa(e)},function(e){return Ta(element,e)})},Na=function(e){return pn.generate(e)},_a=function(table){var e=dn(table);return Na(e)},Aa={adjustWidth:function(table,e,t,n){var r=Ea(table),o=r.getCellDelta(e),c=_a(table),l=r.getWidths(c,n,r),f=fa(l,t,o,r),d=map(f,function(e,i){return e+l[i]}),m=Ca(c,d);I(m,function(e){r.setElementWidth(e.element(),e.width())}),t===c.grid().columns()-1&&r.setTableWidth(table,d,o)},adjustHeight:function(table,e,t,n){var r=_a(table),o=xa.getPixelHeights(r,n),c=map(o,function(n,i){return t===i?Math.max(e+n,ma.minHeight()):n}),l=Sa(r,c),f=ka(r,c);I(f,function(e){so.setHeight(e.element(),e.height())}),I(l,function(e){so.setHeight(e.element(),e.height())});var d=P(c,function(b,a){return b+a},0);so.setHeight(table,d)},adjustWidthTo:function(table,e,t){var n=Ea(table),r=Na(e),o=n.getWidths(r,t,n),c=Ca(r,o);I(c,function(e){n.setElementWidth(e.element(),e.width())});var l=P(o,function(b,a){return a+b},0);c.length>0&&n.setTableWidth(table,l)}},Da=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return ue("required",t),ce(t),function(r){var o=K(r);$(t,function(e){return B(o,e)})||ie(t,o),e(t,o);var c=filter(t,function(e){return!n.validate(r[e],e)});return c.length>0&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+oe(e).join(", ")+") were not.")}(c,n.label),r}},Ra=function(e,t){var n=filter(t,function(t){return!B(e,t)});n.length>0&&ae(n)},Ba=function(e){return function(e,t){return Da(e,t,{validate:A,label:"function"})}(Ra,e)},Ma=function(element){var e=Oe(element,"colspan")?parseInt(ke(element,"colspan"),10):1,t=Oe(element,"rowspan")?parseInt(ke(element,"rowspan"),10):1;return{element:o(element),colspan:o(e),rowspan:o(t)}},Ia=Ba(["cell","row","replace","gap"]),za=function(e,n){Ia(e);var r=t(k.none()),o=void 0!==n?n:Ma,c=function(element){return function(data){return e.cell(data)}(o(element))},l=function(element){var e=c(element);return r.get().isNone()&&r.set(k.some(e)),f=k.some({item:element,replacement:e}),e},f=k.none();return{getOrInit:function(element,e){return f.fold(function(){return l(element)},function(p){return e(element,p.item)?p.replacement:l(element)})},cursor:r.get}},Pa=function(e,n){return function(r){var o=t(k.none());Ia(r);var c=[],l=function(element){var t=r.replace(element,n,{scope:e});return c.push({item:element,sub:t}),o.get().isNone()&&o.set(k.some(t)),t};return{replaceOrInit:function(element,e){return function(element,e){return H(c,function(t){return e(t.item,element)})}(element,e).fold(function(){return l(element)},function(p){return e(element,p.item)?p.sub:l(element)})},cursor:o.get}}},La=function(e){Ia(e);var n=t(k.none());return{combine:function(t){return n.get().isNone()&&n.set(k.some(t)),function(){var n=e.cell({element:o(t),colspan:o(1),rowspan:o(1)});return Ue(n,"width"),Ue(t,"width"),n}},cursor:n.get}},Ha=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Fa=function(e,t){var n=e.property().name(t);return B(Ha,n)},Va=function(e,t){return B(["br","img","hr","input"],e.property().name(t))},ja=Fa,Ua=function(e,t){var n=e.property().name(t);return B(["ol","ul"],n)},Wa=Va,$a=Vn(),qa=function(element){return ja($a,element)},Ga=function(element){return Ua($a,element)},Ya=function(element){return Wa($a,element)},Xa=function(e){var content,t=function(e){return"br"===ge(e)},n=function(e){return Nn(e).bind(function(n){var r=Nt(n).map(function(e){return!!qa(e)||(Ya(e)?"img"!==ge(e):void 0)}).getOr(!1);return Ot(n).map(function(o){return!0===r||"li"===ge(c=o)||Qt(c,Ga).isSome()||t(n)||qa(o)&&!wt(e,o)?[]:[Me.fromTag("br")];var c})}).getOr([])},r=0===(content=W(e,function(e){var r=_t(e);return function(e){return $(e,function(e){return t(e)||ye(e)&&0===wn(e).trim().length})}(r)?[]:r.concat(n(e))})).length?[Me.fromTag("br")]:content;Lt(e[0]),Pt(e[0],r)},Ka=function(table){0===fn.cells(table).length&&Ht(table)},Ja=re("grid","cursor"),Qa=function(e,t,n){return Za(e,t,n).orThunk(function(){return Za(e,0,0)})},Za=function(e,t,n){return k.from(e[t]).bind(function(e){return k.from(e.cells()[n]).bind(function(e){return k.from(e.element())})})},eu=function(e,t,n){return Ja(e,Za(e,t,n))},tu=function(details){return L(details,function(e,t){return M(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},nu=function(details){return L(details,function(e,t){return M(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},ru=function(e,t,n){var r=mn(e,n),o=pn.generate(r);return bi(o,t,!0)},ou=function(e){return function(t,table,r,o,c,l,f){return Ci(function(t,n,r,o){return e(t,n,l,f)},ki,n,n,za)(t,table,r,o,c)}},iu=Aa.adjustWidthTo,au={insertRowBefore:Ci(function(e,t,n,r){var o=t.row(),c=t.row(),l=$i(e,c,o,n,r.getOrInit);return eu(l,c,t.column())},ki,n,n,za),insertRowsBefore:Ci(function(e,details,t,n){var r=details[0].row(),o=details[0].row(),c=tu(details),l=L(c,function(e,c){return $i(e,o,r,t,n.getOrInit)},e);return eu(l,o,details[0].column())},Oi,n,n,za),insertRowAfter:Ci(function(e,t,n,r){var o=t.row(),c=t.row()+t.rowspan(),l=$i(e,c,o,n,r.getOrInit);return eu(l,c,t.column())},ki,n,n,za),insertRowsAfter:Ci(function(e,details,t,n){var r=tu(details),o=r[r.length-1].row(),c=r[r.length-1].row()+r[r.length-1].rowspan(),l=L(r,function(e,r){return $i(e,c,o,t,n.getOrInit)},e);return eu(l,c,details[0].column())},Oi,n,n,za),insertColumnBefore:Ci(function(e,t,n,r){var o=t.column(),c=t.column(),l=qi(e,c,o,n,r.getOrInit);return eu(l,t.row(),c)},ki,iu,n,za),insertColumnsBefore:Ci(function(e,details,t,n){var r=nu(details),o=r[0].column(),c=r[0].column(),l=L(r,function(e,r){return qi(e,c,o,t,n.getOrInit)},e);return eu(l,details[0].row(),c)},Oi,iu,n,za),insertColumnAfter:Ci(function(e,t,n,r){var o=t.column(),c=t.column()+t.colspan(),l=qi(e,c,o,n,r.getOrInit);return eu(l,t.row(),c)},ki,iu,n,za),insertColumnsAfter:Ci(function(e,details,t,n){var r=details[details.length-1].column(),o=details[details.length-1].column()+details[details.length-1].colspan(),c=nu(details),l=L(c,function(e,c){return qi(e,o,r,t,n.getOrInit)},e);return eu(l,details[0].row(),o)},Oi,iu,n,za),splitCellIntoColumns:Ci(function(e,t,n,r){var o=Gi(e,t.row(),t.column(),n,r.getOrInit);return eu(o,t.row(),t.column())},ki,iu,n,za),splitCellIntoRows:Ci(function(e,t,n,r){var o=Yi(e,t.row(),t.column(),n,r.getOrInit);return eu(o,t.row(),t.column())},ki,n,n,za),eraseColumns:Ci(function(e,details,t,n){var r=nu(details),o=Ki(e,r[0].column(),r[r.length-1].column()),cursor=Qa(o,details[0].row(),details[0].column());return Ja(o,cursor)},Oi,iu,Ka,za),eraseRows:Ci(function(e,details,t,n){var r=tu(details),o=Xi(e,r[0].row(),r[r.length-1].row()),cursor=Qa(o,details[0].row(),details[0].column());return Ja(o,cursor)},Oi,n,Ka,za),makeColumnHeader:Ci(function(e,t,n,r){var o=ta(e,t.column(),n,r.replaceOrInit);return eu(o,t.row(),t.column())},ki,n,n,Pa("row","th")),unmakeColumnHeader:Ci(function(e,t,n,r){var o=ta(e,t.column(),n,r.replaceOrInit);return eu(o,t.row(),t.column())},ki,n,n,Pa(null,"td")),makeRowHeader:Ci(function(e,t,n,r){var o=na(e,t.row(),n,r.replaceOrInit);return eu(o,t.row(),t.column())},ki,n,n,Pa("col","th")),unmakeRowHeader:Ci(function(e,t,n,r){var o=na(e,t.row(),n,r.replaceOrInit);return eu(o,t.row(),t.column())},ki,n,n,Pa(null,"td")),mergeCells:Ci(function(e,t,n,r){var c=t.cells();Xa(c);var l=Hi(e,t.bounds(),n,o(c[0]));return Ja(l,k.from(c[0]))},Ni,n,n,La),unmergeCells:Ci(function(e,t,n,r){var o=P(t,function(b,e){return Fi(b,e,n,r.combine(e))},e);return Ja(o,k.from(t[0]))},_i,iu,n,La),pasteCells:Ci(function(e,t,n,r){var table,o,c,l,f=(table=t.clipboard(),o=t.generators(),c=dn(table),l=pn.generate(c),bi(l,o,!0)),d=qt.address(t.row(),t.column());return Ui(d,e,f,t.generators(),n).fold(function(){return Ja(e,k.some(t.element()))},function(e){var cursor=Qa(e,t.row(),t.column());return Ja(e,cursor)})},Ti,iu,n,za),pasteRowsBefore:Ci(function(e,t,n,r){var o=e[t.cells[0].row()],c=t.cells[0].row(),l=ru(t.clipboard(),t.generators(),o),f=Wi(c,e,l,t.generators(),n),cursor=Qa(f,t.cells[0].row(),t.cells[0].column());return Ja(f,cursor)},Ei,n,n,za),pasteRowsAfter:Ci(function(e,t,n,r){var o=e[t.cells[0].row()],c=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),l=ru(t.clipboard(),t.generators(),o),f=Wi(c,e,l,t.generators(),n),cursor=Qa(f,t.cells[0].row(),t.cells[0].column());return Ja(f,cursor)},Ei,n,n,za),sortRows:ou(function(e,t,n,r){var o=ra(e,t.column(),n,r);return eu(o,t.row(),t.column())}),sortColumns:ou(function(e,t,n,r){var o=oa(e,t.row(),n,r);return eu(o,t.row(),t.column())})},uu=function(e){return Me.fromDom(e.getBody())},cu=function(e){return e.getBoundingClientRect().width},su=function(e){return e.getBoundingClientRect().height},lu=function(e){return function(element){return wt(element,uu(e))}},fu=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},du=function(table){var e=Kt(table,"td[data-mce-style],th[data-mce-style]");Te(table,"data-mce-style"),I(e,function(e){Te(e,"data-mce-style")})},mu={isRtl:o(!1)},gu={isRtl:o(!0)},hu={directionAt:function(element){return"rtl"===function(element){return"rtl"===Fe(element,"direction")?"rtl":"ltr"}(element)?gu:mu}},pu={"border-collapse":"collapse",width:"100%"},vu={border:"1"},bu=function(e){return e.getParam("table_default_attributes",vu,"object")},yu=function(e){return e.getParam("table_default_styles",pu,"object")},xu=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},wu=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Cu=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Su=function(e){return e.getParam("table_advtab",!0,"boolean")},ku=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Ou=function(e){return e.getParam("table_class_list",[],"array")},Tu=function(e){return!1===e.getParam("table_responsive_width")},Eu=function(e,t){return e.fire("newrow",{node:t})},Nu=function(e,t){return e.fire("newcell",{node:t})},_u=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},Au=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Du=function(e,t){var r=function(e){return"table"===ge(uu(e))},o=function(e){var t=e.getParam("table_clone_elements");return E(t)?k.some(t.split(/[ ,]/)):Array.isArray(t)?k.some(t):k.none()}(e),c=function(t,n,r,c){return function(table,l){du(table);var f=c(),d=Me.fromDom(e.getDoc()),m=_o(hu.directionAt),h=Ln(r,d,o);return n(table)?t(f,table,l,h,m).bind(function(t){return I(t.newRows(),function(t){Eu(e,t.dom())}),I(t.newCells(),function(t){Nu(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):k.none()}};return{deleteRow:c(au.eraseRows,function(table){var t=Do(table);return!1===r(e)||t.rows()>1},n,t),deleteColumn:c(au.eraseColumns,function(table){var t=Do(table);return!1===r(e)||t.columns()>1},n,t),insertRowsBefore:c(au.insertRowsBefore,v,n,t),insertRowsAfter:c(au.insertRowsAfter,v,n,t),insertColumnsBefore:c(au.insertColumnsBefore,v,lo,t),insertColumnsAfter:c(au.insertColumnsAfter,v,lo,t),mergeCells:c(au.mergeCells,v,n,t),unmergeCells:c(au.unmergeCells,v,n,t),pasteRowsBefore:c(au.pasteRowsBefore,v,n,t),pasteRowsAfter:c(au.pasteRowsAfter,v,n,t),pasteCells:c(au.pasteCells,v,n,t)}},Ru=function(table,e,t){var n=dn(table),r=pn.generate(n);return Oi(r,e).map(function(e){var n=bi(r,t,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),o=Si(n,t);return Lo(o)})},Bu=tinymce.util.Tools.resolve("tinymce.util.Tools"),Mu=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},Iu=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},zu=function(e,t){Bu.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},Pu=function(e,t){Bu.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},Lu=function(e,t,n){var r;return r=function(t,r){for(var i=0;i<r.length;i++){var o=e.getStyle(r[i],n);if(void 0===t&&(t=o),t!==o)return""}return t}(r,e.select("td,th",t))},Hu=function(){return(Hu=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},Fu=function(e,t){var n=function(t){return Ae(t,"rgb")?e.toHex(t):t};return{borderstyle:je(Me.fromDom(t),"border-style").getOr(""),bordercolor:je(Me.fromDom(t),"border-color").map(n).getOr(""),backgroundcolor:je(Me.fromDom(t),"background-color").map(n).getOr("")}},Vu=function(e,t,n,r,o){var c={};return Bu.each(e.split(" "),function(e){r.formatter.matchNode(o,t+e)&&(c[n]=e)}),c[n]||(c[n]=""),c},ju=l(Vu,"left center right"),Uu=l(Vu,"top middle bottom"),Wu=function(e,t,n){var r=function(e,output){return output=output||[],Bu.each(e,function(e){var n={text:e.text||e.title};e.menu?n.menu=r(e.menu):(n.value=e.value,t&&t(n)),output.push(n)}),output};return r(e,n||[])},$u=function(data){var e=data[0],t=data.slice(1),n=K(e);return I(t,function(t){I(n,function(n){Q(t,function(t,r,o){var c=e[n];""!==c&&n===r&&c!==t&&(e[n]="")})})}),e},qu=function(){return{title:"Advanced",items:[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}]}},Gu=function(e,t,n){var r=e.dom;return Hu({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"),cellpadding:r.getAttrib(t,"cellpadding")||Lu(e.dom,t,"padding"),border:function(t,n){var r=je(Me.fromDom(n),"border-width");return ku(e)&&r.isSome()?r.getOr(""):t.getAttrib(n,"border")||Lu(e.dom,n,"border-width")||Lu(e.dom,n,"border")}(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class","")},ju("align","align",e,t),n?Fu(r,t):{})},Yu=function(e,t,n){var r=e.dom;return Hu({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),class:r.getAttrib(t,"class",""),align:"",type:t.parentNode.nodeName.toLowerCase()},ju("align","align",e,t),n?Fu(r,t):{})},Xu=function(e,t,n){var r=e.dom;return Hu({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),celltype:t.nodeName.toLowerCase(),class:r.getAttrib(t,"class","")},ju("align","halign",e,t),Uu("valign","valign",e,t),n?Fu(r,t):{})},Ku=function(e,t){var n,r,o,style=yu(e),c=bu(e),l=e.dom,f=t?function(e){var t=function(t){return Ae(t,"rgb")?e.toHex(t):t},n=te(style,"border-style").getOr(""),r=te(style,"border-color").getOr(""),o=te(style,"background-color").getOr("");return{borderstyle:n,bordercolor:t(r),backgroundcolor:t(o)}}(l):{};return Hu({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},style,c,f,(o=style["border-width"],ku(e)&&o?{border:o}:te(c,"border").fold(function(){return{}},function(e){return{border:e}})),(n=te(style,"border-spacing").or(te(c,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),r=te(style,"border-padding").or(te(c,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),Hu({},n,r)))},Ju=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],Qu=function(e){return function(e){var t=function(e){return e.getParam("table_cell_class_list",[],"array")}(e),n=Wu(t,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})});return t.length>0?k.some({name:"class",type:"selectbox",label:"Class",items:n}):k.none()}(e).fold(function(){return Ju},function(e){return Ju.concat(e)})},Zu={normal:function(e,t){return{setAttrib:function(n,r){e.setAttrib(t,n,r)},setStyle:function(n,r){e.setStyle(t,n,r)}}},ifTruthy:function(e,t){return{setAttrib:function(n,r){r&&e.setAttrib(t,n,r)},setStyle:function(n,r){r&&e.setStyle(t,n,r)}}}},ec=function(e,data){e.setAttrib("scope",data.scope),e.setAttrib("class",data.class),e.setStyle("width",fu(data.width)),e.setStyle("height",fu(data.height))},tc=function(e,data){e.setStyle("background-color",data.backgroundcolor),e.setStyle("border-color",data.bordercolor),e.setStyle("border-style",data.borderstyle)},nc=function(e,t,data){var n=e.dom,r=data.celltype&&t[0].nodeName.toLowerCase()!==data.celltype?n.rename(t[0],data.celltype):t[0],o=Zu.normal(n,r);ec(o,data),wu(e)&&tc(o,data),zu(e,r),Pu(e,r),data.halign&&Mu(e,r,data.halign),data.valign&&Iu(e,r,data.valign)},rc=function(e,t,data){var n=e.dom;Bu.each(t,function(t){data.celltype&&t.nodeName.toLowerCase()!==data.celltype&&(t=n.rename(t,data.celltype));var r=Zu.ifTruthy(n,t);ec(r,data),wu(e)&&tc(r,data),data.halign&&Mu(e,t,data.halign),data.valign&&Iu(e,t,data.valign)})},oc=function(e,t,n){var data=n.getData();n.close(),e.undoManager.transact(function(){(1===t.length?nc:rc)(e,t,data),e.focus()})},ic=function(e){var t,n=[];if(n=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!n.length&&t&&n.push(t),t=t||n[0]){var r=Bu.map(n,function(t){return Xu(e,t,wu(e))}),data=$u(r),o={type:"tabpanel",tabs:[{title:"General",items:Qu(e)},qu()]},c={type:"panel",items:[{type:"grid",columns:2,items:Qu(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:wu(e)?o:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:l(oc,e,n)})}},ac=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],uc=function(e){return function(e){var t=function(e){return e.getParam("table_row_class_list",[],"array")}(e),n=Wu(t,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})});return t.length>0?k.some({name:"class",type:"selectbox",label:"Class",items:n}):k.none()}(e).fold(function(){return ac},function(e){return ac.concat(e)})},cc=function(e,t,n,r){var o=e.dom,data=r.getData();r.close();var c=1===t.length?Zu.normal:Zu.ifTruthy;e.undoManager.transact(function(){Bu.each(t,function(t){data.type!==t.parentNode.nodeName.toLowerCase()&&function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,c=e.select(n,r)[0];c||(c=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(c,r.firstChild):r.insertBefore(c,r.firstChild):r.appendChild(c)),c.appendChild(t),o.hasChildNodes()||e.remove(o)}(e.dom,t,data.type);var r=c(o,t);r.setAttrib("scope",data.scope),r.setAttrib("class",data.class),r.setStyle("height",fu(data.height)),Cu(e)&&function(e,data){e.setStyle("background-color",data.backgroundcolor),e.setStyle("border-color",data.bordercolor),e.setStyle("border-style",data.borderstyle)}(r,data),data.align!==n.align&&(zu(e,t),Mu(e,t,data.align))}),e.focus()})},sc=function(e){var t,n,r=e.dom,o=[];if((t=r.getParent(e.selection.getStart(),"table"))&&(n=r.getParent(e.selection.getStart(),"td,th"),Bu.each(t.rows,function(e){Bu.each(e.cells,function(t){if((r.getAttrib(t,"data-mce-selected")||t===n)&&o.indexOf(e)<0)return o.push(e),!1})}),o[0])){var c=Bu.map(o,function(t){return Yu(e,t,Cu(e))}),data=$u(c),f={type:"tabpanel",tabs:[{title:"General",items:uc(e)},qu()]},d={type:"panel",items:[{type:"grid",columns:2,items:uc(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Cu(e)?f:d,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:l(cc,e,o,data)})}},lc=tinymce.util.Tools.resolve("tinymce.Env"),fc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},dc=function(e,t,n,r,o){void 0===o&&(o=fc);var table=Me.fromTag("table");He(table,o.styles),Se(table,o.attributes);var tbody=Me.fromTag("tbody");Mt(table,tbody);for(var c=[],i=0;i<e;i++){for(var tr=Me.fromTag("tr"),l=0;l<t;l++){var td=i<n||l<r?Me.fromTag("th"):Me.fromTag("td");l<r&&Ce(td,"scope","row"),i<n&&Ce(td,"scope","col"),Mt(td,Me.fromTag("br")),o.percentages&&Le(td,"width",100/t+"%"),Mt(tr,td)}c.push(tr)}return Pt(tbody,c),table},mc=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},gc=function(e,t,n){var r,o=yu(e),c={styles:o,attributes:bu(e),percentages:(r=o.width,E(r)&&-1!==r.indexOf("%")&&!Tu(e))},table=dc(n,t,0,0,c);Ce(table,"data-mce-id","__mce");var element,f,d,html=(element=table,f=Me.fromTag("div"),d=Me.fromDom(element.dom().cloneNode(!0)),Mt(f,d),function(element){return element.dom().innerHTML}(f));return e.insertContent(html),tn(uu(e),'table[data-mce-id="__mce"]').map(function(table){return Tu(e)&&Le(table,"width",Fe(table,"width")),Te(table,"data-mce-id"),function(e,table){I(Kt(table,"tr"),function(t){Eu(e,t.dom()),I(Kt(t,"th,td"),function(t){Nu(e,t.dom())})})}(e,table),function(e,t){tn(t,"td,th").each(l(mc,e))}(e,table),table.dom()}).getOr(null)},hc=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var i=0;i<t.children.length;i++)hc(e,t.children[i],n,r)},pc=function(e,t,n){var r,o=e.dom,data=n.getData();n.close(),""===data.class&&delete data.class,e.undoManager.transact(function(){if(!t){var n=parseInt(data.cols,10)||1,c=parseInt(data.rows,10)||1;t=gc(e,n,c)}!function(e,t,data){var n,r=e.dom,o={},c={};if(o.class=data.class,c.height=fu(data.height),r.getAttrib(t,"width")&&!ku(e)?o.width=(n=data.width)?n.replace(/px$/,""):"":c.width=fu(data.width),ku(e)?(c["border-width"]=fu(data.border),c["border-spacing"]=fu(data.cellspacing)):(o.border=data.border,o.cellpadding=data.cellpadding,o.cellspacing=data.cellspacing),ku(e)&&t.children)for(var i=0;i<t.children.length;i++)hc(r,t.children[i],{"border-width":fu(data.border),padding:fu(data.cellpadding)}),Su(e)&&hc(r,t.children[i],{"border-color":data.bordercolor});Su(e)&&(c["background-color"]=data.backgroundcolor,c["border-color"]=data.bordercolor,c["border-style"]=data.borderstyle),o.style=r.serializeStyle(Bo(yu(e),c)),r.setAttribs(t,Bo(bu(e),o))}(e,t,data),(r=o.select("caption",t)[0])&&!data.caption&&o.remove(r),!r&&data.caption&&((r=o.create("caption")).innerHTML=lc.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),""===data.align?zu(e,t):Mu(e,t,data.align),e.focus(),e.addVisual()})},vc=function(e,t){var n,r=e.dom,data=Ku(e,Su(e));!1===t?(n=r.getParent(e.selection.getStart(),"table"))?data=Gu(e,n,Su(e)):Su(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor=""):(data.cols="1",data.rows="1",Su(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor=""));var o=Ou(e).length>0;o&&data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,""));var c=t?[{type:"input",name:"cols",label:"Cols"},{type:"input",name:"rows",label:"Rows"}]:[],f=function(e){return e.getParam("table_appearance_options",!0,"boolean")}(e)?[{type:"input",name:"cellspacing",label:"Cell spacing"},{type:"input",name:"cellpadding",label:"Cell padding"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],d=o?[{type:"selectbox",name:"class",label:"Class",items:Wu(Ou(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}]:[],m={type:"grid",columns:2,items:c.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(f).concat([{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(d)},h={type:"panel",items:[m]},v={type:"tabpanel",tabs:[{title:"General",items:[m]},qu()]},y=Su(e)?v:h;e.windowManager.open({title:"Table Properties",size:"normal",body:y,onSubmit:l(pc,e,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data})},bc=function(e){return function(t){return k.from(t.dom.getParent(t.selection.getStart(),e)).map(Me.fromDom)}},yc=bc("th,td"),xc=bc("th,td,caption"),wc=Bu.each,Cc={registerCommands:function(e,t,r,o,c){var f=lu(e),m=function(e){return fn.table(e,f)},h=function(table){return{width:cu(table.dom()),height:cu(table.dom())}},v=function(t){yc(e).each(function(n){m(n).each(function(table){var c=jr.forMenu(o,table,n),l=h(table);t(table,c).each(function(t){!function(e,t,table){var n=h(table);t.width===n.width&&t.height===n.height||(_u(e,table.dom(),t.width,t.height),Au(e,table.dom(),n.width,n.height))}(e,l,table),e.selection.setRng(t),e.focus(),r.clear(table),du(table)})})})},y=function(t){return yc(e).map(function(t){return m(t).bind(function(table){var r=Me.fromDom(e.getDoc()),c=jr.forMenu(o,table,t),l=Ln(n,r,k.none());return Ru(table,c,l)})})},x=function(t){c.get().each(function(n){var c=map(n,function(e){return Rn(e)});yc(e).each(function(n){m(n).each(function(table){var l=Me.fromDom(e.getDoc()),f=Hn(l),d=jr.pasteRows(o,table,n,c,f);t(table,d).each(function(t){e.selection.setRng(t),e.focus(),r.clear(table)})})})})};wc({mceTableSplitCells:function(){v(t.unmergeCells)},mceTableMergeCells:function(){v(t.mergeCells)},mceTableInsertRowBefore:function(){v(t.insertRowsBefore)},mceTableInsertRowAfter:function(){v(t.insertRowsAfter)},mceTableInsertColBefore:function(){v(t.insertColumnsBefore)},mceTableInsertColAfter:function(){v(t.insertColumnsAfter)},mceTableDeleteCol:function(){v(t.deleteColumn)},mceTableDeleteRow:function(){v(t.deleteRow)},mceTableCutRow:function(e){y().each(function(e){c.set(e),v(t.deleteRow)})},mceTableCopyRow:function(e){y().each(function(e){c.set(e)})},mceTablePasteRowBefore:function(e){x(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){x(t.pasteRowsAfter)},mceTableDelete:function(){xc(e).each(function(t){fn.table(t,f).filter(d(f)).each(function(table){var cursor=Me.fromText("");if(Rt(table,cursor),Ht(table),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var t=e.dom.createRng();t.setStart(cursor.dom(),0),t.setEnd(cursor.dom(),0),e.selection.setRng(t),e.nodeChanged()}})})}},function(t,n){e.addCommand(n,t)}),wc({mceInsertTable:l(vc,e,!0),mceTableProps:l(vc,e,!1),mceTableRowProps:l(sc,e),mceTableCellProps:l(ic,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})}},Sc=function(element){var e=k.from(element.dom().documentElement).map(Me.fromDom).getOr(element);return{parent:o(e),view:o(element),origin:o(mo(0,0))}},kc=function(e,t){return{parent:o(t),view:o(e),origin:o(mo(0,0))}};function Oc(e){var t=re.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=filter(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);I(n,function(t){t(e)})}}}var Tc={create:function(e){return{registry:Z(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:Z(e,function(e){return e.trigger})}}},Ec={mode:Ba(["compare","extract","mutate","sink"]),sink:Ba(["element","start","stop","destroy"]),api:Ba(["forceDrop","drop","move","delayDrop"])},Nc={resolve:Qo("ephox-dragster").resolve},_c=function(filter,e){return function(t){if(filter(t)){var n=Me.fromDom(t.target),c=function(){t.stopPropagation()},l=function(){t.preventDefault()},f=r(l,c),d=function(e,t,n,r,c,l,f){return{target:o(e),x:o(t),y:o(n),stop:r,prevent:c,kill:l,raw:o(f)}}(n,t.clientX,t.clientY,c,l,f,t);e(d)}}},Ac=function(element,e,filter,t){return function(element,e,filter,t,n){var r=_c(filter,t);return element.dom().addEventListener(e,r,n),{unbind:l(Dc,element,e,r,n)}}(element,e,filter,t,!1)},Dc=function(element,e,t,n){element.dom().removeEventListener(e,t,n)},Rc=o(!0),Bc=function(element,e,t){return Ac(element,e,Rc,t)},Mc=Ec.mode({compare:function(e,t){return mo(t.left()-e.left(),t.top()-e.top())},extract:function(e){return k.some(mo(e.x(),e.y()))},sink:function(e,t){var n=function(e){var t=Bo({layerClass:Nc.resolve("blocker")},e),div=Me.fromTag("div");return Ce(div,"role","presentation"),He(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Uo(div,Nc.resolve("blocker")),Uo(div,t.layerClass),{element:function(){return div},destroy:function(){Ht(div)}}}(t),r=Bc(n.element(),"mousedown",e.forceDrop),o=Bc(n.element(),"mouseup",e.drop),c=Bc(n.element(),"mousemove",e.move),l=Bc(n.element(),"mouseout",e.delayDrop);return Ec.sink({element:n.element,start:function(e){Mt(e,n.element())},stop:function(){Ht(n.element())},destroy:function(){n.destroy(),o.unbind(),c.unbind(),l.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function Ic(){var e=k.none(),t=Tc.create({move:Oc(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(data){(function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=k.some(n),r})(r,data).each(function(e){t.trigger.move(e)})})},reset:function(){e=k.none()},events:t.registry}}function zc(){var e={onEvent:function(e,t){},reset:n},t=Ic(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(e,t){r.onEvent(e,t)},events:t.events}}var Pc=function(t,n,r){var o,c,l,f=!1,d=Tc.create({start:Oc([]),stop:Oc([])}),m=zc(),h=function(){x.stop(),m.isOn()&&(m.off(),d.trigger.stop())},v=(o=h,c=200,l=null,{cancel:function(){null!==l&&(e.clearTimeout(l),l=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==l&&e.clearTimeout(l),l=e.setTimeout(function(){o.apply(null,t),l=null},c)}});m.events.move.bind(function(e){n.mutate(t,e.info())});var y=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(f)return e.apply(null,t)}},x=n.sink(Ec.api({forceDrop:h,drop:y(h),move:y(function(e,t){v.cancel(),m.onEvent(e,n)}),delayDrop:y(v.throttle)}),r);return{element:x.element,go:function(e){x.start(e),m.on(),d.trigger.start()},on:function(){f=!0},off:function(){f=!1},destroy:function(){x.destroy()},events:d.registry}},Lc={transform:function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:Mc;return Pc(e,r,t)}},Hc=function(e,t,n){return nn(e,t,n).isSome()};function Fc(){var e=Tc.create({drag:Oc(["xDelta","yDelta","target"])}),t=k.none(),n=function(){var e=Tc.create({drag:Oc(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=k.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}var Vc=ei.resolve("resizer-bar-dragging");function jc(e,t){var n=Eo.height,r=function(e,t,n){var r=Fc(),o=Lc.transform(r,{}),c=k.none(),f=function(element,e){return k.from(ke(element,e))};r.events.drag.bind(function(e){f(e.target(),"data-row").each(function(t){var n=ma.getInt(e.target(),"top");Le(e.target(),"top",n+e.yDelta()+"px")}),f(e.target(),"data-column").each(function(t){var n=ma.getInt(e.target(),"left");Le(e.target(),"left",n+e.xDelta()+"px")})});var d=function(e,t){return ma.getInt(e,t)-parseInt(ke(e,"data-initial-"+t),10)};o.events.stop.bind(function(){r.get().each(function(r){c.each(function(table){f(r,"data-row").each(function(e){var t=d(r,"top");Te(r,"data-initial-top"),x.trigger.adjustHeight(table,t,parseInt(e,10))}),f(r,"data-column").each(function(e){var t=d(r,"left");Te(r,"data-initial-left"),x.trigger.adjustWidth(table,t,parseInt(e,10))}),fi.refresh(e,table,n,t)})})});var m=function(t,n){x.trigger.startAdjust(),r.assign(t),Ce(t,"data-initial-"+n,parseInt(Fe(t,n),10)),Uo(t,Vc),Le(t,"opacity","0.2"),o.go(e.parent())},h=Bc(e.parent(),"mousedown",function(e){fi.isRowBar(e.target())&&m(e.target(),"top"),fi.isColBar(e.target())&&m(e.target(),"left")}),v=function(t){return wt(t,e.view())},y=Bc(e.view(),"mouseover",function(r){"table"===ge(r.target())||Hc(r.target(),"table",v)?(c="table"===ge(r.target())?k.some(r.target()):Zt(r.target(),"table",v)).each(function(r){fi.refresh(e,r,n,t)}):Ie(r.target())&&fi.destroy(e)}),x=Tc.create({adjustHeight:Oc(["table","delta","row"]),adjustWidth:Oc(["table","delta","column"]),startAdjust:Oc([])});return{destroy:function(){h.unbind(),y.unbind(),o.destroy(),fi.destroy(e)},refresh:function(r){fi.refresh(e,r,n,t)},on:o.on,off:o.off,hideBars:l(fi.hide,e),showBars:l(fi.show,e),events:x.registry}}(e,t,n),o=Tc.create({beforeResize:Oc(["table"]),afterResize:Oc(["table"]),startDrag:Oc([])});return r.events.adjustHeight.bind(function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta());Aa.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Aa.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}var Uc=function(e,t){return e.inline?kc(uu(e),function(){var e=Me.fromTag("div");return He(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Mt(body(),e),e}()):Sc(Me.fromDom(e.getDoc()))},Wc=function(e,t){e.inline&&Ht(t.parent())},$c=function(e){var t,n,r=k.none(),o=k.none(),c=k.none(),l=/(\d+(\.\d+)?)%/,f=function(e){return"TABLE"===e.nodeName};return e.on("init",function(){var t=_o(hu.directionAt),n=Uc(e);if(c=k.some(n),function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t}(e)&&function(e){return e.getParam("table_resize_bars",!0,"boolean")}(e)){var l=jc(n,t);l.on(),l.events.startDrag.bind(function(t){r=k.some(e.selection.getRng())}),l.events.beforeResize.bind(function(t){var n=t.table().dom();_u(e,n,cu(n),su(n))}),l.events.afterResize.bind(function(t){var table=t.table(),n=table.dom();du(table),r.each(function(t){e.selection.setRng(t),e.focus()}),Au(e,n,cu(n),su(n)),e.undoManager.add()}),o=k.some(l)}}),e.on("ObjectResizeStart",function(r){var o,c=r.target;f(c)&&(t=r.width,o=c,n=e.dom.getStyle(o,"width")||e.dom.getAttrib(o,"width"))}),e.on("ObjectResized",function(r){var o=r.target;if(f(o)){var table=o;if(l.test(n)){var c=parseFloat(l.exec(n)[1]),d=r.width*c/t;e.dom.setStyle(table,"width",d+"%")}else{var m=[];Bu.each(table.rows,function(t){Bu.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);m.push({cell:t,width:n})})}),Bu.each(m,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:function(){return o},lazyWire:function(){return c.getOr(Sc(Me.fromDom(e.getBody())))},destroy:function(){o.each(function(e){e.destroy()}),c.each(function(t){Wc(e,t)})}}},qc=function(e){return{fold:e}},Gc=function(e){return qc(function(t,n,r,o){return t(e)})},Yc=function(e){return qc(function(t,n,r,o){return n(e)})},Xc=function(e,t){return qc(function(n,r,o,c){return o(e,t)})},Kc=function(e){return qc(function(t,n,r,o){return o(e)})},Jc=function(e,t){return fn.table(e,t).bind(function(table){var t=fn.cells(table);return F(t,function(t){return wt(e,t)}).map(function(e){return{index:o(e),all:o(t)}})})},Qc=function(e,t){return Jc(e,t).fold(function(){return Gc(e)},function(t){return t.index()+1<t.all().length?Xc(e,t.all()[t.index()+1]):Kc(e)})},Zc=function(e,t){return Jc(e,t).fold(function(){return Gc()},function(t){return t.index()-1>=0?Xc(e,t.all()[t.index()-1]):Yc(e)})},es=Br([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ts={before:es.before,on:es.on,after:es.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(c,c,c)}},ns=Br([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),rs=re("start","soffset","finish","foffset"),os=function(e){var t,n=function(e){return e.match({domRange:function(e){return Me.fromDom(e.startContainer)},relative:function(e,t){return ts.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return t=n.dom().ownerDocument.defaultView,Me.fromDom(t)},is=(ns.domRange,ns.relative),as=ns.exact,us=function(e,t,n,r){var o=function(e,t,n,r){var o=kt(e).dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o}(e,t,n,r),c=wt(e,n)&&t===r;return o.collapsed&&!c},cs=function(e,element){e.selectNodeContents(element.dom())},ss=function(e,t,n){var r,o=e.document.createRange();return r=o,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})}(o,n),o},ls=function(e,t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},fs=function(rect){return{left:o(rect.left),top:o(rect.top),right:o(rect.right),bottom:o(rect.bottom),width:o(rect.width),height:o(rect.height)}},ds=Br([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ms=function(e,t,n){return t(Me.fromDom(n.startContainer),n.startOffset,Me.fromDom(n.endContainer),n.endOffset)},gs=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return ds.rtl(Me.fromDom(e.endContainer),e.endOffset,Me.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return ms(0,ds.ltr,n)}):ms(0,ds.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:o(e),rtl:k.none}},relative:function(t,n){return{ltr:Re(function(){return ss(e,t,n)}),rtl:Re(function(){return k.some(ss(e,n,t))})}},exact:function(t,n,r,o){return{ltr:Re(function(){return ls(e,t,n,r,o)}),rtl:Re(function(){return k.some(ls(e,r,o,t,n))})}}})}(e,t))},hs=function(e,t){return gs(e,t).match({ltr:function(t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},rtl:function(t,n,r,o){var c=e.document.createRange();return c.setStart(r.dom(),o),c.setEnd(t.dom(),n),c}})},ps=(ds.ltr,ds.rtl,function(rect,e,t){return e>=rect.left&&e<=rect.right&&t>=rect.top&&t<=rect.bottom}),vs=function(e,t,n,r,rect){var o=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},c=wn(t).length,l=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var c=r,i=1;i<o;i++){var rect=e(i),l=Math.abs(t-rect.left);if(n<=rect.bottom){if(n<rect.top||l>c)return i-1;c=l}}return 0}(function(e){return o(e).getBoundingClientRect()},n,r,rect.right,c);return o(l)},bs=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var c=o.getClientRects();return Io(c,function(rect){return ps(rect,n,r)?k.some(rect):k.none()}).map(function(rect){return vs(e,t,n,r,rect)})},ys=function(e,t,n,r){var o=e.dom().createRange(),c=_t(t);return Io(c,function(t){return o.selectNode(t.dom()),ps(o.getBoundingClientRect(),n,r)?xs(e,t,n,r):k.none()})},xs=function(e,t,n,r){return(ye(t)?bs:ys)(e,t,n,r)},ws=function(rect,e){return e-rect.left<rect.right-e},Cs=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Ss=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var rect=r.getBoundingClientRect(),o=ws(rect,n);return(!0===o?En:Nn)(t).map(function(t){return Cs(e,t,o)})},ks=function(e,t,n){var rect=t.dom().getBoundingClientRect(),r=ws(rect,n);return k.some(Cs(e,t,r))},Os=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var rect=o.getBoundingClientRect();return function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var rect=o.getBoundingClientRect(),c=Math.max(rect.left,Math.min(rect.right,n)),l=Math.max(rect.top,Math.min(rect.bottom,r));return xs(e,t,c,l)}(e,t,Math.max(rect.left,Math.min(rect.right,n)),Math.max(rect.top,Math.min(rect.bottom,r)))},Ts=document.caretPositionFromPoint?function(e,t,n){return k.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return k.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),k.some(n)})}:document.caretRangeFromPoint?function(e,t,n){return k.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return Me.fromPoint(e,t,n).bind(function(r){var o=function(){return function(e,t,n){return(0===_t(t).length?ks:Ss)(e,t,n)}(e,r,t)};return 0===_t(r).length?o():Os(e,r,t,n).orThunk(o)})},Es=function(element,e){var t=ge(element);return"input"===t?ts.after(element):B(["br","img"],t)?0===e?ts.before(element):ts.after(element):ts.on(element,e)},Ns=function(e,t){var n=e.fold(ts.before,Es,ts.after),r=t.fold(ts.before,Es,ts.after);return is(n,r)},_s=function(e,t,n,r){var o=Es(e,t),c=Es(n,r);return is(o,c)},As=function(e,t){k.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Ds=function(e,t,n,r,o){var c=ls(e,t,n,r,o);As(e,c)},Rs=function(e,t){return gs(e,t).match({ltr:function(t,n,r,o){Ds(e,t,n,r,o)},rtl:function(t,n,r,o){var c=e.getSelection();if(c.setBaseAndExtent)c.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(c.extend)try{!function(e,t,n,r,o,c){t.collapse(n.dom(),r),t.extend(o.dom(),c)}(0,c,t,n,r,o)}catch(c){Ds(e,r,o,t,n)}else Ds(e,r,o,t,n)}})},Bs=function(e,t,n,r,o){var c=_s(t,n,r,o);Rs(e,c)},Ms=function(e,t,n){var r=Ns(t,n);Rs(e,r)},Is=function(e){var t=os(e).dom(),n=function(e,n,r,o){return ls(t,e,n,r,o)},r=function(e){return e.match({domRange:function(e){var t=Me.fromDom(e.startContainer),n=Me.fromDom(e.endContainer);return _s(t,e.startOffset,n,e.endOffset)},relative:Ns,exact:_s})}(e);return gs(t,r).match({ltr:n,rtl:n})},zs=function(e){var t=Me.fromDom(e.anchorNode),n=Me.fromDom(e.focusNode);return us(t,e.anchorOffset,n,e.focusOffset)?k.some(rs(t,e.anchorOffset,n,e.focusOffset)):function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return k.some(rs(Me.fromDom(t.startContainer),t.startOffset,Me.fromDom(n.endContainer),n.endOffset))}return k.none()}(e)},Ps=function(e,element){var t=function(e,element){var t=e.document.createRange();return cs(t,element),t}(e,element);As(e,t)},Ls=function(e){return function(e){return k.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(zs)}(e).map(function(e){return as(e.start(),e.soffset(),e.finish(),e.foffset())})},Hs=function(e,t){return function(e){var t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?k.some(rect).map(fs):k.none()}(hs(e,t))},Fs=function(e,t,n){return function(e,t,n){var r=Me.fromDom(e.document);return Ts(r,t,n).map(function(e){return rs(Me.fromDom(e.startContainer),e.startOffset,Me.fromDom(e.endContainer),e.endOffset)})}(e,t,n)},Vs=function(e){e.getSelection().removeAllRanges()},js=tinymce.util.Tools.resolve("tinymce.util.VK"),Us=function(e,t,n,r){return Gs(e,t,Qc(n),r)},Ws=function(e,t,n,r){return Gs(e,t,Zc(n),r)},$s=function(e,t){var n=as(t,0,t,0);return Is(n)},qs=function(e,table){var t,n=Kt(table,"tr");return(t=n,0===t.length?k.none():k.some(t[t.length-1])).bind(function(e){return tn(e,"td,th").map(function(e){return $s(0,e)})})},Gs=function(e,t,n,r,o){return n.fold(k.none,k.none,function(e,t){return En(t).map(function(e){return $s(0,e)})},function(n){return fn.table(n,t).bind(function(table){var t=jr.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(table,t)}),qs(0,table)})})},Ys=["table","li","dl"],Xs={handle:function(e,t,n,r){if(e.keyCode===js.TAB){var o=uu(t),c=function(element){var e=ge(element);return wt(element,o)||B(Ys,e)},l=t.selection.getRng();if(l.collapsed){var f=Me.fromDom(l.startContainer);fn.cell(f,c).each(function(o){e.preventDefault(),(e.shiftKey?Ws:Us)(t,c,o,n,r).each(function(e){t.selection.setRng(e)})})}}}},Ks={response:re("selection","kill")},Js=function(e){return function(t){return t===e}},Qs=Js(38),Zs=Js(40),el={ltr:{isBackward:Js(37),isForward:Js(39)},rtl:{isBackward:Js(39),isForward:Js(37)},isUp:Qs,isDown:Zs,isNavigation:function(e){return e>=37&&e<=40}},tl={convertToRange:function(e,t){var n=hs(e,t);return{start:o(Me.fromDom(n.startContainer)),soffset:o(n.startOffset),finish:o(Me.fromDom(n.endContainer)),foffset:o(n.endOffset)}},makeSitus:function(e,t,n,r){return{start:o(ts.on(e,t)),finish:o(ts.on(n,r))}}},nl=(pt.detect().browser.isSafari(),function(t){var n=void 0!==t?t.dom():e.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return mo(r,o)}),rl=function(t,n,r){(void 0!==r?r.dom():e.document).defaultView.scrollBy(t,n)};function il(e){return{elementFromPoint:function(t,n){return Me.fromPoint(Me.fromDom(e.document),t,n)},getRect:function(element){return element.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,o){var c=as(t,n,r,o);return Hs(e,c).map(function(e){return Z(e,m)})},getSelection:function(){return Ls(e).map(function(t){return tl.convertToRange(e,t)})},fromSitus:function(t){var n=is(t.start(),t.finish());return tl.convertToRange(e,n)},situsFromPoint:function(t,n){return Fs(e,t,n).map(function(e){return{start:o(ts.on(e.start(),e.soffset())),finish:o(ts.on(e.finish(),e.foffset()))}})},clearSelection:function(){Vs(e)},setSelection:function(t){Bs(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){Ms(e,t,n)},selectContents:function(element){Ps(e,element)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return nl(Me.fromDom(e.document)).top()},scrollBy:function(t,n){rl(t,n,Me.fromDom(e.document))}}}var al=function(e,t,n,r,o){return wt(n,r)?k.none():Nr.identify(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),k.some(Ks.response(k.some(tl.makeSitus(n,0,n,kn(n))),!0))):k.none()})},cl={sync:function(e,t,n,r,o,c,l){return wt(n,o)&&r===c?k.none():nn(n,"td,th",t).bind(function(s){return nn(o,"td,th",t).bind(function(n){return al(e,t,s,n,l)})})},detect:al,update:function(e,t,n,r,o){return Nr.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})}},sl=se(["left","top","right","bottom"],[]),ll={nu:sl,moveUp:function(e,t){return sl({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return sl({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return sl({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return sl({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return sl({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},fl=function(rect){return ll.nu({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom})},ml=function(e,element){return k.some(e.getRect(element))},gl=function(e,element,t){return be(element)?ml(e,element).map(fl):ye(element)?function(e,element,t){return t>=0&&t<kn(element)?e.getRangedRect(element,t,element,t+1):t>0?e.getRangedRect(element,t-1,element,t):k.none()}(e,element,t).map(fl):k.none()},hl=function(e,element){return be(element)?ml(e,element).map(fl):ye(element)?e.getRangedRect(element,0,element,kn(element)).map(fl):k.none()},pl=re("item","mode"),vl=function(e,t,n,r){return void 0===r&&(r=bl),e.property().parent(t).map(function(p){return pl(p,r)})},bl=function(e,t,n,r){return void 0===r&&(r=yl),n.sibling(e,t).map(function(p){return pl(p,r)})},yl=function(e,t,n,r){void 0===r&&(r=yl);var o=e.property().children(t);return n.first(o).map(function(e){return pl(e,r)})},xl=[{current:vl,next:bl,fallback:k.none()},{current:bl,next:yl,fallback:k.some(vl)},{current:yl,next:yl,fallback:k.some(bl)}],wl=function(e,t,n,r,o){return void 0===o&&(o=xl),H(o,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return wl(e,t,n,r)})})})},Cl=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?k.some(e[e.length-1]):k.none()}}},Sl=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?k.some(e[0]):k.none()}}},kl=function(e,t,n,r,o,c){return wl(e,t,r,o).bind(function(t){return c(t.item())?k.none():n(t.item())?k.some(t.item()):kl(e,t.item(),n,t.mode(),o,c)})},Ol=function(e){return function(element){return 0===e.property().children(element).length}},Tl=function(e,t,n,r){return kl(e,t,n,bl,Cl(),r)},El=function(e,t,n,r){return kl(e,t,n,bl,Sl(),r)},Nl=Vn(),_l=function(element,e){return function(e,t,n){return Tl(e,t,Ol(e),n)}(Nl,element,e)},Al=function(element,e){return function(e,t,n){return El(e,t,Ol(e),n)}(Nl,element,e)},Dl=Br([{none:[]},{retry:["caret"]}]),Rl=function(e,element,t){return(n=element,r=qa,Jt(function(s){return r(s)},Qt,n,r,c)).fold(o(!1),function(n){return hl(e,n).exists(function(e){return function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()}(t,e)})});var n,r,c},Bl={point:ll.getTop,adjuster:function(e,element,t,n,r){var o=ll.moveUp(r,5);return Math.abs(t.top()-n.top())<1?Dl.retry(o):t.bottom()<r.top()?Dl.retry(o):t.bottom()===r.top()?Dl.retry(ll.moveUp(r,1)):Rl(e,element,r)?Dl.retry(ll.translate(o,5,0)):Dl.none()},move:ll.moveUp,gather:_l},Ml={point:ll.getBottom,adjuster:function(e,element,t,n,r){var o=ll.moveDown(r,5);return Math.abs(t.bottom()-n.bottom())<1?Dl.retry(o):t.top()>r.bottom()?Dl.retry(o):t.top()===r.bottom()?Dl.retry(ll.moveDown(r,1)):Rl(e,element,r)?Dl.retry(ll.translate(o,5,0)):Dl.none()},move:ll.moveDown,gather:Al},Il=function(e,t,n,r,o){return 0===o?k.some(r):function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===ge(e)}).isSome()}(e,r.left(),t.point(r))?function(e,t,n,r,o){return Il(e,t,n,t.move(r,5),o)}(e,t,n,r,o-1):e.situsFromPoint(r.left(),t.point(r)).bind(function(c){return c.start().fold(k.none,function(element,c){return hl(e,element,c).bind(function(c){return t.adjuster(e,element,c,n,r).fold(k.none,function(r){return Il(e,t,n,r,o-1)})}).orThunk(function(){return k.some(r)})},k.none)})},zl=function(e,t,n){var r=e.move(n,5),o=Il(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?k.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?k.some(-e.point(t)):k.none()}(e,o,t).fold(function(){return t.situsFromPoint(o.left(),e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)})},Pl={tryUp:l(zl,Bl),tryDown:l(zl,Ml),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:o(5)},Ll=Br([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Hl=function(e){return nn(e,"tr")},Fl={verify:function(e,t,n,r,o,c,l){return nn(r,"td,th",l).bind(function(n){return nn(t,"td,th",l).map(function(t){return wt(n,t)?wt(r,n)&&kn(n)===o?c(t):Ll.none("in same cell"):cr.sharedOne(Hl,[n,t]).fold(function(){return function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right}(e,t,n)?Ll.success():c(t)},function(e){return c(t)})})}).getOr(Ll.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:Ll},Vl=re("element","offset"),jl=(re("element","deltaOffset"),re("element","start","finish"),re("begin","end"),re("element","text"),re("ancestor","descendants","element","index"),re("parent","children","element","index")),Ul=function(e,element){return F(e,l(wt,element))},Wl=function(e){return"br"===ge(e)},$l=function(e,t,n){return t(e,n).bind(function(e){return ye(e)&&0===wn(e).trim().length?$l(e,t,n):k.some(e)})},ql=function(e,element,t,n){return function(element,e){return At(element,e).filter(Wl).orThunk(function(){return At(element,e-1).filter(Wl)})}(element,t).bind(function(br){return n.traverse(br).fold(function(){return $l(br,n.gather,e).map(n.relative)},function(e){return(element=e,Ot(element).bind(function(e){var t=_t(e);return Ul(t,element).map(function(n){return jl(e,t,element,n)})})).map(function(e){return ts.on(e.parent(),e.index())});var element})})},Gl=function(e,element,t,n){return(Wl(element)?function(e,element,t){return t.traverse(element).orThunk(function(){return $l(element,t.gather,e)}).map(t.relative)}(e,element,n):ql(e,element,t,n)).map(function(e){return{start:o(e),finish:o(e)}})},Yl=function(e){return Fl.cata(e,function(e){return k.none()},function(){return k.none()},function(e){return k.some(Vl(e,0))},function(e){return k.some(Vl(e,kn(e)))})},Xl=pt.detect(),Kl=function(e,t,element,n,r,o){return 0===o?k.none():Zl(e,t,element,n,r).bind(function(c){var l=e.fromSitus(c),f=Fl.verify(e,element,n,l.finish(),l.foffset(),r.failure,t);return Fl.cata(f,function(){return k.none()},function(){return k.some(c)},function(c){return wt(element,c)&&0===n?Jl(e,element,n,ll.moveUp,r):Kl(e,t,c,0,r,o-1)},function(c){return wt(element,c)&&n===kn(c)?Jl(e,element,n,ll.moveDown,r):Kl(e,t,c,kn(c),r,o-1)})})},Jl=function(e,element,t,n,r){return gl(e,element,t).bind(function(t){return Ql(e,r,n(t,Pl.getJumpSize()))})},Ql=function(e,t,n){return Xl.browser.isChrome()||Xl.browser.isSafari()||Xl.browser.isFirefox()||Xl.browser.isEdge()?t.otherRetry(e,n):Xl.browser.isIE()?t.ieRetry(e,n):k.none()},Zl=function(e,t,element,n,r){return gl(e,element,n).bind(function(t){return Ql(e,r,t)})},ef=function(e,t,n){return function(e,t,n){return e.getSelection().bind(function(r){return Gl(t,r.finish(),r.foffset(),n).fold(function(){return k.some(Vl(r.finish(),r.foffset()))},function(o){var c=e.fromSitus(o),l=Fl.verify(e,r.finish(),r.foffset(),c.finish(),c.foffset(),n.failure,t);return Yl(l)})})}(e,t,n).bind(function(r){return Kl(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},tf=pt.detect(),nf=function(e,table){return Qt(e,function(e){return Ot(e).exists(function(p){return wt(p,table)})},t).isSome();var t},rf=function(e,t,n,r,c){return nn(r,"td,th",t).bind(function(r){return nn(r,"table",t).bind(function(table){return nf(c,table)?ef(e,t,n).bind(function(e){return nn(e.finish(),"td,th",t).map(function(t){return{start:o(r),finish:o(t),range:o(e)}})}):k.none()})})},of=function(e,t,n,r,o,c){return tf.browser.isIE()?k.none():c(r,t).orThunk(function(){return rf(e,t,n,r,o).map(function(e){var t=e.range();return Ks.response(k.some(tl.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},af=function(e,t,n,r,o,c,l){return rf(e,n,r,o,c).bind(function(e){return cl.detect(t,n,e.start(),e.finish(),l)})},uf=function(e,t){return nn(e,"tr",t).bind(function(e){return nn(e,"table",t).bind(function(table){var n=Kt(table,"tr");return wt(e,n[0])?function(element,e,t){return Tl(Nl,element,e,t)}(table,function(element){return Nn(element).isSome()},t).map(function(e){var t=kn(e);return Ks.response(k.some(tl.makeSitus(e,t,e,t)),!0)}):k.none()})})},cf=function(e,t){return nn(e,"tr",t).bind(function(e){return nn(e,"table",t).bind(function(table){var n=Kt(table,"tr");return wt(e,n[n.length-1])?function(element,e,t){return El(Nl,element,e,t)}(table,function(element){return En(element).isSome()},t).map(function(e){return Ks.response(k.some(tl.makeSitus(e,0,e,0)),!0)}):k.none()})})},sf=function(e,t){return nn(e,"td,th",t)},lf={down:{traverse:Nt,gather:Al,relative:ts.before,otherRetry:Pl.tryDown,ieRetry:Pl.ieTryDown,failure:Fl.adt.failedDown},up:{traverse:Et,gather:_l,relative:ts.before,otherRetry:Pl.tryUp,ieRetry:Pl.ieTryUp,failure:Fl.adt.failedUp}},ff=re("rows","cols"),df={mouse:function(e,t,n,r){var o=function(e,t,n,r){var cursor=k.none(),o=function(){cursor=k.none()};return{mousedown:function(e){r.clear(t),cursor=sf(e.target(),n)},mouseover:function(o){cursor.each(function(c){r.clear(t),sf(o.target(),n).each(function(o){Nr.identify(c,o,n).each(function(n){var l=n.boxes().getOr([]);(l.length>1||1===l.length&&!wt(c,o))&&(r.selectRange(t,l,n.start(),n.finish()),e.selectContents(o))})})})},mouseup:function(){cursor.each(o)}}}(il(e),t,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(e,t,n,r){var o=il(e),c=function(){return r.clear(t),k.none()};return{keydown:function(e,f,d,m,h,v){var y=e.raw().which,x=!0===e.raw().shiftKey;return Nr.retrieve(t,r.selectedSelector()).fold(function(){return el.isDown(y)&&x?l(af,o,t,n,lf.down,m,f,r.selectRange):el.isUp(y)&&x?l(af,o,t,n,lf.up,m,f,r.selectRange):el.isDown(y)?l(of,o,n,lf.down,m,f,cf):el.isUp(y)?l(of,o,n,lf.up,m,f,uf):k.none},function(e){var n=function(n){return function(){return Io(n,function(n){return cl.update(n.rows(),n.cols(),t,e,r)}).fold(function(){return Nr.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=el.isDown(y)||v.isForward(y)?ts.after:ts.before;return o.setRelativeSelection(ts.on(e.first(),0),n(e.table())),r.clear(t),Ks.response(k.none(),!0)})},function(e){return k.some(Ks.response(k.none(),!0))})}};return el.isDown(y)&&x?n([ff(1,0)]):el.isUp(y)&&x?n([ff(-1,0)]):v.isBackward(y)&&x?n([ff(0,-1),ff(-1,0)]):v.isForward(y)&&x?n([ff(0,1),ff(1,0)]):el.isNavigation(y)&&!1===x?c:k.none})()},keyup:function(e,o,c,l,f){return Nr.retrieve(t,r.selectedSelector()).fold(function(){var d=e.raw().which;return 0==(!0===e.raw().shiftKey)?k.none():el.isNavigation(d)?cl.sync(t,n,o,c,l,f,r.selectRange):k.none()},k.none)}}}},mf=function(element,e){I(e,function(e){!function(element,e){Fo(element)?element.dom().classList.remove(e):jo(element,e),Wo(element)}(element,e)})},gf={byClass:function(e){var t,n,r=(t=e.selected(),function(element){Uo(element,t)}),o=(n=[e.selected(),e.lastSelected(),e.firstSelected()],function(element){mf(element,n)}),c=function(t){var n=Kt(t,e.selectedSelector());I(n,o)};return{clear:c,selectRange:function(t,n,o,l){c(t),I(n,r),Uo(o,e.firstSelected()),Uo(l,e.lastSelected())},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:function(e){var t=function(element){Te(element,e.selected()),Te(element,e.firstSelected()),Te(element,e.lastSelected())},n=function(element){Ce(element,e.selected(),"1")},r=function(n){var r=Kt(n,e.selectedSelector());I(r,t)};return{clear:r,selectRange:function(t,o,c,l){r(t),I(o,n),Ce(c,e.firstSelected(),"1"),Ce(l,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},hf=function(e){return!1===$o(Me.fromDom(e.target),"ephox-snooker-resizer-bar")},pf=function(e){return{get:function(){var body=uu(e);return _r(body,Rr.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Ir.none():Ir.single(e.selection)},function(e){return Ir.multiple(e)})}}},vf=function(e,n){var r=t(k.none()),o=t([]),c=function(){return xc(e).bind(function(e){return fn.table(e).map(function(table){return"caption"===ge(e)?jr.notCell(e):jr.forMenu(n,table,e)})})},l=function(){r.set(Re(c)()),I(o.get(),function(e){return e()})},f=function(e,t){var n=function(){return r.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})};return n(),o.set(o.get().concat([n])),function(){o.set(filter(o.get(),function(e){return e!==n}))}};return e.on("nodechange",l),{onSetupTable:function(e){return f(e,function(e){return!1})},onSetupCellOrRow:function(e){return f(e,function(e){return"caption"===ge(e.element())})},onSetupMergeable:function(e){return f(e,function(e){return e.mergable().isNone()})},onSetupUnmergeable:function(e){return f(e,function(e){return e.unmergable().isNone()})},resetTargets:l,targets:function(){return r.get()}}},bf={addButtons:function(e,t){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable tableprops deletetable | cell row column")}});var n=function(t){return function(){return e.execCommand(t)}};e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:n("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:n("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:n("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:n("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:n("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:n("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:n("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:n("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:n("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:n("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:n("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:n("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:n("mceTableCutRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:n("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:n("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:n("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow})},addToolbars:function(e){var t=function(e){return e.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:function(table){return e.dom.is(table,"table")&&e.getBody().contains(table)},items:t,scope:"node",position:"node"})}},yf={addMenuItems:function(e,t){var n=function(t){return function(){return e.execCommand(t)}},r=function(t){var n=t.numRows,r=t.numColumns;e.undoManager.transact(function(){gc(e,r,n)}),e.addVisual()},o={text:"Table properties",onSetup:t.onSetupTable,onAction:n("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:n("mceTableDelete")},l={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:n("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:n("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:n("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:n("mceTableRowProps"),onSetup:t.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:n("mceTableCutRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:n("mceTableCopyRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:n("mceTablePasteRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:n("mceTablePasteRowAfter"),onSetup:t.onSetupCellOrRow}]}},f={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:n("mceTableInsertColBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:n("mceTableInsertColAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:n("mceTableDeleteCol"),onSetup:t.onSetupCellOrRow}]}},d={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:n("mceTableCellProps"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:n("mceTableMergeCells"),onSetup:t.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:n("mceTableSplitCells"),onSetup:t.onSetupUnmergeable}]}};!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),e.ui.registry.addMenuItem("tableprops",o),e.ui.registry.addMenuItem("deletetable",c),e.ui.registry.addNestedMenuItem("row",l),e.ui.registry.addNestedMenuItem("column",f),e.ui.registry.addNestedMenuItem("cell",d),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(function(){return""},function(e){return"caption"===ge(e.element())?"tableprops deletetable":"cell row column | tableprops deletetable"})}})}},xf=function(e,t){return{insertTable:function(t,n){return gc(e,t,n)},setClipboardRows:function(e){return function(e,t){var n=map(e,Me.fromDom);t.set(k.from(n))}(e,t)},getClipboardRows:function(){return function(e){return e.get().fold(function(){},function(e){return map(e,function(e){return e.dom()})})}(t)}}};O.add("table",function(e){var c=$c(e),l=function(e,t){var c=se(["mousedown","mouseover","mouseup","keyup","keydown"],[]),l=k.none(),f=gf.byAttr(Rr);return e.on("init",function(d){var m=e.getWin(),body=uu(e),h=lu(e),v=df.mouse(m,body,h,f),y=df.keyboard(m,body,h,f),x=function(t,n){(function(e){return!0===e.raw().shiftKey})(t)&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=is(t.start(),t.finish()),r=hs(m,n);e.selection.setRng(r)}))},w=function(t){var n=O(t);if(n.raw().shiftKey&&el.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=Me.fromDom(r.startContainer),c=Me.fromDom(r.endContainer);y.keyup(n,o,r.startOffset,c,r.endOffset).each(function(e){x(n,e)})}},C=function(n){var r=O(n);t().each(function(e){e.hideBars()});var o=e.selection.getRng(),c=Me.fromDom(e.selection.getStart()),l=Me.fromDom(o.startContainer),f=Me.fromDom(o.endContainer),d=hu.directionAt(c).isRtl()?el.rtl:el.ltr;y.keydown(r,l,o.startOffset,f,o.endOffset,d).each(function(e){x(r,e)}),t().each(function(e){e.showBars()})},S=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},O=function(e){var t=Me.fromDom(e.target),n=function(){e.stopPropagation()},c=function(){e.preventDefault()},l=r(c,n);return{target:o(t),x:o(S(e)?e.x:null),y:o(S(e)?e.y:null),stop:n,prevent:c,kill:l,raw:o(e)}},T=function(e){return 0===e.button},E=function(e){T(e)&&hf(e)&&v.mousedown(O(e))},N=function(e){var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!hf(e)||v.mouseover(O(e))},_=function(e){T(e)&&hf(e)&&v.mouseup(O(e))};e.on("mousedown",E),e.on("mouseover",N),e.on("mouseup",_),e.on("keyup",w),e.on("keydown",C),e.on("nodechange",function(){var t=e.selection,r=Me.fromDom(t.getStart()),o=Me.fromDom(t.getEnd());cr.sharedOne(fn.table,[r,o]).fold(function(){f.clear(body)},n)}),l=k.some(c({mousedown:E,mouseover:N,mouseup:_,keyup:w,keydown:C}))}),{clear:f.clear,destroy:function(){l.each(function(e){})}}}(e,c.lazyResize),f=Du(e,c.lazyWire),d=pf(e),m=vf(e,d),h=t(k.none());return Cc.registerCommands(e,f,l,d,h),Ur.registerEvents(e,d,f,l),yf.addMenuItems(e,m),bf.addButtons(e,m),bf.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(Rr.firstSelected()),e.serializer.addTempAttr(Rr.lastSelected())}),xu(e)&&e.on("keydown",function(t){Xs.handle(t,e,f,c.lazyWire)}),e.on("remove",function(){c.destroy(),l.destroy()}),xf(e,h)})}(window)},function(e,t){!function(e){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("contextmenu",function(){e.console.warn("Context menu plugin is now built in to the core editor, please remove it from your editor configuration")})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(e,t){var n,r=e.dom,o=e.selection.getSelectedBlocks();o.length&&(n=r.getAttrib(o[0],"dir"),f.each(o,function(e){r.getParent(e.parentNode,'*[dir="'+t+'"]',r.getRoot())||r.setAttrib(e,"dir",n!==t?t:null)}),e.nodeChanged())},m=function(e){e.addCommand("mceDirectionLTR",function(){d(e,"ltr")}),e.addCommand("mceDirectionRTL",function(){d(e,"rtl")})},h=function(e){return function(){return e}},v=h(!1),y=h(!0),x=v,w=y,C=function(){return S},S=(o={fold:function(e,s){return e()},is:x,isSome:x,isNone:w,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:C,ap:C,each:function(){},bind:C,flatten:C,exists:x,forall:w,filter:C,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:h("none()")},Object.freeze&&Object.freeze(o),o),k=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:w,isNone:x,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(a))},ap:function(e){return e.fold(C,function(e){return k(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:S},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(x,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},O=function(e){return null==e?S:k(e)},T=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:h(e)}},E={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return T(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return T(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return T(n)},fromDom:T,fromPoint:function(e,t,n){var r=e.dom();return O(r.elementFromPoint(t,n)).map(T)}},N=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}}("function"),_=(Array.prototype.slice,N(Array.from)&&Array.from,e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE),A=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,c=_,function(element){return function(element){return element.dom().nodeType}(element)===c}),D=function(element,t){var n=element.dom(),r=e.window.getComputedStyle(n).getPropertyValue(t),o=""!==r||function(element){var e=A(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)}(element)?r:R(n,t);return null===o?void 0:o},R=function(e,t){return function(e){return void 0!==e.style}(e)?e.style.getPropertyValue(t):""},B=function(e,t){return function(n){var r=function(e){var element=E.fromDom(e.element);n.setActive(function(element){return"rtl"===D(element,"direction")?"rtl":"ltr"}(element)===t)};return e.on("nodeChange",r),function(){return e.off("nodeChange",r)}}},M=function(e){e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return e.execCommand("mceDirectionLTR")},onSetup:B(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return e.execCommand("mceDirectionRTL")},onSetup:B(e,"rtl")})};l.add("directionality",function(e){m(e),M(e)})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c,l,f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},m=function(e){return function(){return e}},h=function(e){return e},v=m(!1),y=m(!0),x=v,w=y,C=function(){return S},S=(o={fold:function(e,s){return e()},is:x,isSome:x,isNone:w,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:C,ap:C,each:function(){},bind:C,flatten:C,exists:x,forall:w,filter:C,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:m("none()")},Object.freeze&&Object.freeze(o),o),k=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:w,isNone:x,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(a))},ap:function(e){return e.fold(C,function(e){return k(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:S},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(x,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},O={some:k,none:C,from:function(e){return null==e?S:k(e)}},T=(c="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===c}),map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},E=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return O.some(i);return O.none()},N=(Array.prototype.slice,T(Array.from)&&Array.from,function(e,t){return-1!==e.indexOf(t)}),_=function(e,t){return N(e.title.toLowerCase(),t)||(n=e.keywords,E(n,function(e){return N(e.toLowerCase(),t)}).isSome());var n},A=function(e,pattern,t){for(var n=[],r=pattern.toLowerCase(),o=t.fold(function(){return v},function(e){return function(t){return t>=e}}),i=0;i<e.length&&(0!==pattern.length&&!_(e[i],r)||(n.push({value:e[i].char,text:e[i].title,icon:e[i].char}),!o(n.length)));i++);return n},D=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return D(n())}}},R=void 0!==e.window?e.window:Function("return this;")(),B=Object.keys,M=Object.hasOwnProperty,I=function(e,t){for(var n=B(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},z=function(e,t){var n={};return I(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},P=function(e){return{is:function(t){return e===t},isValue:y,isError:v,getOr:m(e),getOrThunk:m(e),getOrDie:m(e),or:function(t){return P(e)},orThunk:function(t){return P(e)},fold:function(t,n){return n(e)},map:function(t){return P(t(e))},mapError:function(t){return P(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return O.some(e)}}},L=function(e){return{is:v,isValue:v,isError:y,getOr:h,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return L(e)},mapError:function(t){return L(t(e))},each:d,bind:function(t){return L(e)},exists:v,forall:y,toOption:O.none}},H={value:P,error:L},F=Object.prototype.hasOwnProperty,V=(l=function(e,t){return t},function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];if(0===e.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)F.call(r,o)&&(t[o]=l(t[o],r[o]))}return t}),j=tinymce.util.Tools.resolve("tinymce.dom.ScriptLoader"),U=tinymce.util.Tools.resolve("tinymce.util.Promise"),W=tinymce.util.Tools.resolve("tinymce.util.Delay"),$=function(e,t){return e.getParam("emoticons_database_url",t+"/js/emojis"+e.suffix+".js")},G=function(e){return e.getParam("emoticons_append",{},"object")},Y="All",X={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},K="emoticons_plugin_database",J=function(e,t){return n=e,r=t,M.call(n,r)?e[t]:t;var n,r},Q=function(e){var t,n=G(e);return t=function(e){return V({keywords:[],category:"user"},e)},z(n,function(e,i,n){return{k:i,v:t(e,i,n)}})},Z=function(t,n){var r=D(O.none()),o=D(O.none());t.on("init",function(){j.ScriptLoader.loadScript(n,function(){(function(e){if(R.tinymce[K]){var t=H.value(R.tinymce[K]);return delete R.tinymce[K],t}return H.error("URL "+e+" did not contain the expected format for emoticons")})(n).fold(function(t){e.console.log(t),r.set(O.some({})),o.set(O.some([]))},function(e){var n=Q(t);!function(e){var t={},n=[];I(e,function(e,title){var r={title:title,keywords:e.keywords,char:e.char,category:J(X,e.category)},o=void 0!==t[r.category]?t[r.category]:[];t[r.category]=o.concat([r]),n.push(r)}),r.set(O.some(t)),o.set(O.some(n))}(V(e,n))})},function(){})});var c=function(){return o.get().getOr([])},l=function(){return r.get().isSome()&&o.get().isSome()};return{listCategories:function(){return[Y].concat(B(r.get().getOr({})))},hasLoaded:l,waitForLoad:function(){return l()?U.resolve(!0):new U(function(t,r){var o=3,c=W.setInterval(function(){l()?(W.clearInterval(c),t(!0)):--o<0&&(e.console.log("Could not load emojis from url: "+n),W.clearInterval(c),r(!1))},500)})},listAll:c,listCategory:function(e){return e===Y?c():r.get().bind(function(t){return O.from(t[e])}).getOr([])}}},ee=function(t,n){var r,o,c,l={pattern:"",results:A(n.listAll(),"",O.some(300))},f=(r=function(e){!function(e,t){var r=e.getData(),o=n.listCategory(t),c=A(o,r.pattern,t===Y?O.some(300):O.none());e.setData({results:c})}(e,d.get())},o=200,c=null,{cancel:function(){null!==c&&(e.clearTimeout(c),c=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==c&&e.clearTimeout(c),c=e.setTimeout(function(){r.apply(null,t),c=null},o)}}),d=D(Y),m={label:"Search",type:"input",name:"pattern"},h={type:"collection",name:"results"},v=function(){return{title:"Emoticons",size:"normal",body:{type:"tabpanel",tabs:map(n.listCategories(),function(e){return{title:e,items:[m,h]}})},initialData:l,onTabChange:function(e,title){d.set(title),f.throttle(e)},onChange:f.throttle,onAction:function(e,n){"results"===n.name&&(function(e,t){e.insertContent(t)}(t,n.value),e.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}},y=t.windowManager.open(v());y.focus("pattern"),n.hasLoaded()||(y.block("Loading emoticons..."),n.waitForLoad().then(function(){y.redial(v()),f.throttle(y),y.focus("pattern"),y.unblock()}).catch(function(e){y.redial({title:"Emoticons",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"<p>Could not load emoticons</p>"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),y.focus("pattern"),y.unblock()}))},te=function(e,t){var n=function(){return ee(e,t)};e.ui.registry.addButton("emoticons",{tooltip:"Emoticons",icon:"emoji",onAction:n}),e.ui.registry.addMenuItem("emoticons",{text:"Emoticons...",icon:"emoji",onAction:n})};f.add("emoticons",function(e,t){var n=$(e,t),r=Z(e,n);te(e,r),function(e,t){e.ui.registry.addAutocompleter("emoticons",{ch:":",columns:"auto",minChars:2,fetch:function(pattern,e){return t.waitForLoad().then(function(){var n=t.listAll();return A(n,pattern,O.some(e))})},onAction:function(t,n,r){e.selection.setRng(n),e.insertContent(r),t.hide()}})}(e,r)})}(window)},function(e,t){!function(){"use strict";var e,t,n,r,o,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(e){return function(){return e}},f=l(!1),d=l(!0),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.util.XHR"),v=function(e){return e.getParam("template_cdate_classes","cdate")},y=function(e){return e.getParam("template_mdate_classes","mdate")},x=function(e){return e.getParam("template_selected_content_classes","selcontent")},w=function(e){return e.getParam("template_preview_replace_values")},C=function(e){return e.getParam("template_replace_values")},S=function(e){return e.templates},k=function(e){return e.getParam("template_cdate_format",e.translate("%Y-%m-%d"))},O=function(e){return e.getParam("template_mdate_format",e.translate("%Y-%m-%d"))},T=function(e,t){if((e=""+e).length<t)for(var i=0;i<t-e.length;i++)e="0"+e;return e},E=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",T(n.getMonth()+1,2))).replace("%d",T(n.getDate(),2))).replace("%H",""+T(n.getHours(),2))).replace("%M",""+T(n.getMinutes(),2))).replace("%S",""+T(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(l[n.getMonth()]))).replace("%b",""+e.translate(c[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},N=function(html,e){return m.each(e,function(e,t){"function"==typeof e&&(e=e(t)),html=html.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),html},_=function(e,t){var n=e.dom,r=C(e);m.each(n.select("*",t),function(e){m.each(r,function(t,o){n.hasClass(e,o)&&"function"==typeof r[o]&&r[o](e)})})},A=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},D=function(e,t){return function(){var n=S(e);"function"!=typeof n?"string"==typeof n?h.send({url:n,success:function(text){t(JSON.parse(text))}}):t(n):n(t)}},R=N,B=_,M=function(e,t,html){var n,r,o=e.dom,c=e.selection.getContent();html=N(html,C(e)),n=o.create("div",null,html),(r=o.select(".mceTmpl",n))&&r.length>0&&(n=o.create("div",null)).appendChild(r[0].cloneNode(!0)),m.each(o.select("*",n),function(t){A(t,v(e).replace(/\s+/g,"|"))&&(t.innerHTML=E(e,k(e))),A(t,y(e).replace(/\s+/g,"|"))&&(t.innerHTML=E(e,O(e))),A(t,x(e).replace(/\s+/g,"|"))&&(t.innerHTML=c)}),_(e,n),e.execCommand("mceInsertContent",!1,n.innerHTML),e.addVisual()},I=function(e){e.addCommand("mceInsertTemplate",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(M,e))},z=function(e){e.on("PreProcess",function(t){var n=e.dom,r=O(e);m.each(n.select("div",t.node),function(t){n.hasClass(t,"mceTmpl")&&(m.each(n.select("*",t),function(t){n.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=E(e,r))}),B(e,t))})})},P=f,L=d,H=function(){return F},F=(r={fold:function(e,s){return e()},is:P,isSome:P,isNone:L,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:H,ap:H,each:function(){},bind:H,flatten:H,exists:P,forall:L,filter:H,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:l("none()")},Object.freeze&&Object.freeze(r),r),V=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:L,isNone:P,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return V(e(a))},ap:function(e){return e.fold(H,function(e){return V(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:F},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(P,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},j={some:V,none:H,from:function(e){return null==e?F:V(e)}},U=(o="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===o}),W=(Array.prototype.slice,U(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Promise")),$=Object.hasOwnProperty,G=function(e,t){return $.call(e,t)},Y={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},X=function(html){return html.replace(/["'<>&]/g,function(e){return(t=Y,n=e,G(t,n)?j.from(t[n]):j.none()).getOr(e);var t,n})},K=function(e,t){var n=function(e){return function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r}(e,function(e){return{text:e.text,value:e.text}})},r=function(e,t){return function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return j.some(r)}return j.none()}(e,function(e){return e.text===t})},o=function(e){return new W(function(t,n){e.value.url?h.send({url:e.value.url,success:function(html){t(html)},error:function(e){n(e)}}):t(e.value.content)})},c=function(e,t){return function(n,c){if("template"===c.name){var l=n.getData().template;r(e,l).each(function(e){n.block("Loading..."),o(e).then(function(r){t(n,e,r),n.unblock()})})}}},l=function(t){return function(n){var data=n.getData();r(t,data.template).each(function(t){o(t).then(function(t){M(e,!1,t),n.close()})})}};(function(){if(!t||0===t.length){var n=e.translate("No templates defined.");return e.notificationManager.open({text:n,type:"info"}),j.none()}return j.from(m.map(t,function(template,e){return{selected:0===e,text:template.title,value:{url:template.url,content:template.content,description:template.description}}}))})().each(function(t){var r=n(t),f=function(e,n){return{title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:l(t),onChange:c(t,d)}},d=function(t,template,n){var content=function(e,html){if(-1===html.indexOf("<html>")){var t="";m.each(e.contentCSS,function(n){t+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(n)+'">'});var n=e.settings.body_class||"";-1!==n.indexOf("=")&&(n=(n=e.getParam("body_class","","hash"))[e.id]||""),html="<!DOCTYPE html><html><head>"+t+'</head><body class="'+n+'">'+html+"</body></html>"}return R(html,w(e))}(e,n),o=[{type:"selectbox",name:"template",label:"Templates",items:r},{type:"htmlpanel",html:'<p aria-live="polite">'+X(template.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],c={template:template.text,preview:content};t.unblock(),t.redial(f(o,c)),t.focus("template")},h=e.windowManager.open(f([],{template:"",preview:""}));h.block("Loading..."),o(t[0]).then(function(e){d(h,t[0],e)})})},J=function(e){return function(t){K(e,t)}},Q=function(e){e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:D(e.settings,J(e))}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:D(e.settings,J(e))})};c.add("template",function(e){Q(e),I(e),z(e)})}()},function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(t.settings.plugins)||!n.get("powerpaste")||(void 0!==e.window.console&&e.window.console.log&&e.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},o=function(e,t){return{clipboard:e,quirks:t}},c=function(e,html,t,n){return e.fire("PastePreProcess",{content:html,internal:t,wordContent:n})},l=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},f=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},d=function(e,t){return e.fire("paste",{ieFake:t})},m=function(e,t){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),f(e,!1)):(t.pasteFormat.set("text"),f(e,!0)),e.focus()},h=function(e,t){e.addCommand("mceTogglePlainTextPaste",function(){m(e,t)}),e.addCommand("mceInsertClipboardContent",function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)})},v=tinymce.util.Tools.resolve("tinymce.Env"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),x=tinymce.util.Tools.resolve("tinymce.util.Tools"),w=tinymce.util.Tools.resolve("tinymce.util.VK"),C="\x3c!-- x-tinymce/html --\x3e",S={mark:function(html){return C+html},unmark:function(html){return html.replace(C,"")},isMarked:function(html){return-1!==html.indexOf(C)},internalHtmlMime:function(){return"x-tinymce/html"}},k=tinymce.util.Tools.resolve("tinymce.html.Entities"),O=function(text){return text.replace(/\r?\n/g,"<br>")},T=function(text,e,t){var n=text.split(/\n\n/),r=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+k.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"}(e,t),o="</"+e+">",c=x.map(n,function(p){return p.split(/\n/).join("<br />")});return 1===c.length?c[0]:x.map(c,function(p){return r+p+o}).join("")},E={isPlainText:function(text){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(text)},convert:function(text,e,t){return e?T(text,e,t):O(text)},toBRs:O,toBlockElements:T},N=tinymce.util.Tools.resolve("tinymce.html.DomParser"),_=tinymce.util.Tools.resolve("tinymce.html.Node"),A=tinymce.util.Tools.resolve("tinymce.html.Schema"),D=tinymce.util.Tools.resolve("tinymce.html.Serializer"),R={shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}};function filter(content,e){return x.each(e,function(e){content=e.constructor===RegExp?content.replace(e,""):content.replace(e[0],e[1])}),content}var B={filter:filter,innerText:function(html){var e=A(),t=N({},e),text="",n=e.getShortEndedElements(),r=x.makeMap("script noscript style textarea video audio iframe object"," "),o=e.getBlockElements();return html=filter(html,[/<!\[[^\]]+\]>/g]),function e(t){var c=t.name,l=t;if("br"!==c){if("wbr"!==c)if(n[c]&&(text+=" "),r[c])text+=" ";else{if(3===t.type&&(text+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);o[c]&&l.next&&(text+="\n","p"===c&&(text+="\n"))}}else text+="\n"}(t.parse(html)),text},trimHtml:function(html){return html=filter(html,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==e.navigator.userAgent.indexOf(" Edge/")}};function M(text){var e,t;return t=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],text=text.replace(/^[\u00a0 ]+/,""),x.each(t,function(pattern){if(pattern.test(text))return e=!0,!1}),e}function I(e){var t,n,r=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=o(e)}while(e=e.next);return t}function c(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!c(e,t))return!1}while(e=e.next);return!0}function l(e,o,l){var f=e._listLevel||r;f!==r&&(f<r?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===o?t.append(e):(n=n||t,t=new _(o,1),l>1&&t.attr("start",""+l),e.wrap(t)),e.name="li",f>r&&n&&n.lastChild.append(t),r=f,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{e(t)}while(t=t.next)}(e),c(e,/^\u00a0+/),c(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),c(e,/^\u00a0+/)}for(var f=[],d=e.firstChild;null!=d;)if(f.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==e;)d=d.walk();for(var i=0;i<f.length;i++)if("p"===(e=f[i]).name&&e.firstChild){var m=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(m)){l(e,"ul");continue}if(M(m)){var h=/([0-9]+)\./.exec(m),v=1;h&&(v=parseInt(h[1],10)),l(e,"ol",v);continue}if(e._listLevel){l(e,"ul",1);continue}t=null}else n=t,t=null}function z(e,t,n,r){var o,c={},l=e.dom.parseStyle(r);return x.each(l,function(l,f){switch(f){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(l)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":f="text-align";break;case"vert-align":f="vertical-align";break;case"font-color":case"mso-foreground":f="color";break;case"mso-background":case"mso-highlight":f="background";break;case"font-weight":case"font-style":return void("normal"!==l&&(c[f]=l));case"mso-element":if(/^(comment|comment-list)$/i.test(l))return void n.remove()}0!==f.indexOf("mso-comment")?0!==f.indexOf("mso-")&&("all"===R.getRetainStyleProps(e)||t&&t[f])&&(c[f]=l):n.remove()}),/(bold)/i.test(c["font-weight"])&&(delete c["font-weight"],n.wrap(new _("b",1))),/(italic)/i.test(c["font-style"])&&(delete c["font-style"],n.wrap(new _("i",1))),(c=e.dom.serializeStyle(c,n.name))||null}var P,L,H,F,V,j={preProcess:function(e,content){return R.shouldUseDefaultFilters(e)?function(e,content){var t,n;(t=R.getRetainStyleProps(e))&&(n=x.makeMap(t.split(/[, ]/))),content=B.filter(content,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var r=R.getWordValidElements(e),o=A({valid_elements:r,valid_children:"-li[p]"});x.each(o.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var c=N({},o);c.addAttributeFilter("style",function(t){for(var r,i=t.length;i--;)(r=t[i]).attr("style",z(e,n,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()}),c.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)n=(t=e[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),c.addNodeFilter("del",function(e){for(var i=e.length;i--;)e[i].remove()}),c.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(n=(t=e[i]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var l=c.parse(content);return R.shouldConvertWordFakeLists(e)&&I(l),content=D({validate:e.settings.validate},o).serialize(l)}(e,content):content},isWordContent:function(content){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(content)||/class="OutlineElement/.test(content)||/id="?docs\-internal\-guid\-/.test(content)}},U=function(content,e){return{content:content,cancelled:e}},W=function(e,content,t,n){var r=c(e,content,t,n);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?function(e,html,t,n){var r=e.dom.create("div",{style:"display:none"},html),o=l(e,r,t,n);return U(o.node.innerHTML,o.isDefaultPrevented())}(e,r.content,t,n):U(r.content,r.isDefaultPrevented())},$=function(e,html,t){var n=j.isWordContent(html),content=n?j.preProcess(e,html):html;return W(e,content,t,n)},G=function(e,html){return e.insertContent(function(e,html){var body=e.dom.create("body",{},html);return x.each(body.querySelectorAll("meta"),function(e){return e.parentNode.removeChild(e)}),body.innerHTML}(e,html),{merge:R.shouldMergeFormats(e),paste:!0}),!0},Y=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},X=function(e){return Y(e)&&/.(gif|jpe?g|png)$/.test(e)},K=function(e,html,t){return!(!1!==e.selection.isCollapsed()||!Y(html))&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0}(e,html,t)},J=function(e,html,t){return!!X(html)&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0}(e,html,t)},Q=function(e,html){!1===R.isSmartPasteEnabled(e)?G(e,html):function(e,html){x.each([K,J,G],function(t){return!0!==t(e,html,G)})}(e,html)},Z=function(e){return function(){return e}},ee=Z(!1),te=Z(!0),ne=ee,re=te,oe=function(){return ie},ie=(F={fold:function(e,s){return e()},is:ne,isSome:ne,isNone:re,getOr:H=function(e){return e},getOrThunk:L=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:H,orThunk:L,map:oe,ap:oe,each:function(){},bind:oe,flatten:oe,exists:ne,forall:re,filter:oe,equals:P=function(e){return e.isNone()},equals_:P,toArray:function(){return[]},toString:Z("none()")},Object.freeze&&Object.freeze(F),F),ae=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:re,isNone:ne,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return ae(e(a))},ap:function(e){return e.fold(oe,function(e){return ae(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:ie},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(ne,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},ue={some:ae,none:oe,from:function(e){return null==e?ie:ae(e)}},ce=(V="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===V}),map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},se=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},le=Array.prototype.slice,fe=ce(Array.from)?Array.from:function(e){return le.call(e)},de=function(t){var data=ue.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){se(e,l)},l=function(t){data.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){data=ue.some(e),c(n),n=[]}),{get:r,map:function(e){return de(function(t){r(function(data){t(e(data))})})},isReady:o}},me={nu:de,pure:function(a){return de(function(e){e(a)})}},ge=function(t){var n=function(n){var r;t((r=n,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this;e.setTimeout(function(){r.apply(o,t)},0)}))},r=function(){return me.nu(n)};return{map:function(e){return ge(function(t){n(function(a){var n=e(a);t(n)})})},bind:function(e){return ge(function(t){n(function(a){e(a).get(t)})})},anonBind:function(e){return ge(function(t){n(function(a){e.get(t)})})},toLazy:r,toCached:function(){var e=null;return ge(function(t){null===e&&(e=r()),e.get(t)})},get:n}},he={nu:ge,pure:function(a){return ge(function(e){e(a)})}},pe=function(e,t){return t(function(t){var n=[],r=0;0===e.length?t([]):se(e,function(o,i){o.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(i))})})},ve=function(e,t){return function(e){return pe(e,he.nu)}(map(e,t))},be=function(e,html,t){var n=t||S.isMarked(html),r=$(e,S.unmark(html),n);!1===r.cancelled&&Q(e,r.content)},ye=function(e,text){text=e.dom.encode(text).replace(/\r\n/g,"\n"),text=E.convert(text,e.settings.forced_root_block,e.settings.forced_root_block_attrs),be(e,text,!1)},xe=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var i=0;i<e.types.length;i++){var r=e.types[i];try{t[r]=e.getData(r)}catch(e){t[r]=""}}}return t},we=function(e,t){return t in e&&e[t].length>0},Ce=function(content){return we(content,"text/html")||we(content,"text/plain")},Se=B.createIdGenerator("mceclip"),ke=function(t,n,r){var o,c="paste"===n.type?n.clipboardData:n.dataTransfer;if(t.settings.paste_data_images&&c){var l=function(e){var t=e.items?map(fe(e.items),function(e){return e.getAsFile()}):[],n=e.files?fe(e.files):[];return function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n}(t.length>0?t:n,function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)})}(c);if(l.length>0)return n.preventDefault(),(o=l,ve(o,function(e){return he.nu(function(t){var n=e.getAsFile?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})},r.readAsDataURL(n)})})).get(function(n){r&&t.selection.setRng(r),se(n,function(n){!function(t,n){var r,o,c,l,f=(r=n.uri,-1!==(o=r.indexOf(","))?r.substr(o+1):null),d=Se(),m=t.settings.images_reuse_filename&&n.blob.name?function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null}(t,n.blob.name):d,img=new e.Image;if(img.src=n.uri,c=t.settings,l=img,!c.images_dataimg_filter||c.images_dataimg_filter(l)){var h,v=t.editorUpload.blobCache,y=void 0;(h=v.findFirst(function(e){return e.base64()===f}))?y=h:(y=v.create(d,n.blob,f,m),v.add(y)),be(t,'<img src="'+y.blobUri()+'">',!1)}else be(t,'<img src="'+n.uri+'">',!1)}(t,n)})}),!0}return!1},Oe=function(e){return w.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Te=function(t,n,r){var o,c=0;function l(e,r,o,c){var content,l;we(e,"text/html")?content=e["text/html"]:(content=n.getHtml(),c=c||S.isMarked(content),n.isDefaultContent(content)&&(o=!0)),content=B.trimHtml(content),n.remove(),l=!1===c&&E.isPlainText(content),content.length&&!l||(o=!0),o&&(content=we(e,"text/plain")&&l?e["text/plain"]:B.innerText(content)),n.isDefaultContent(content)?r||t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?ye(t,content):be(t,content,c)}t.on("keydown",function(r){function l(e){Oe(e)&&!e.isDefaultPrevented()&&n.remove()}if(Oe(r)&&!r.isDefaultPrevented()){if((o=r.shiftKey&&86===r.keyCode)&&v.webkit&&-1!==e.navigator.userAgent.indexOf("Version/"))return;if(r.stopImmediatePropagation(),c=(new Date).getTime(),v.ie&&o)return r.preventDefault(),void d(t,!0);n.remove(),n.create(),t.once("keyup",l),t.once("paste",function(){t.off("keyup",l)})}}),t.on("paste",function(f){var d=(new Date).getTime(),m=function(e,t){var content=xe(t.clipboardData||e.getDoc().dataTransfer);return B.isMsEdge()?x.extend(content,{"text/html":""}):content}(t,f),h=(new Date).getTime()-d,w=(new Date).getTime()-c-h<1e3,C="text"===r.get()||o,k=we(m,S.internalHtmlMime());o=!1,f.isDefaultPrevented()||function(t){var n=t.clipboardData;return-1!==e.navigator.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}(f)?n.remove():Ce(m)||!ke(t,f,n.getLastRng()||t.selection.getRng())?(w||f.preventDefault(),!v.ie||w&&!f.ieFake||we(m,"text/html")||(n.create(),t.dom.bind(n.getEl(),"paste",function(e){e.stopPropagation()}),t.getDoc().execCommand("Paste",!1,null),m["text/html"]=n.getHtml()),we(m,"text/html")?(f.preventDefault(),k||(k=S.isMarked(m["text/html"])),l(m,w,C,k)):y.setEditorTimeout(t,function(){l(m,w,C,k)},0)):n.remove()})},Ee=function(t){return v.ie&&t.inline?e.document.body:t.getBody()},Ne=function(e,t,n){(function(e){return Ee(e)!==e.getBody()})(e)&&e.dom.bind(t,"paste keyup",function(t){De(e,n)||e.fire("paste")})},_e=function(e){return e.dom.get("mcepastebin")},Ae=function(e,content){return content===e},De=function(e,t){var n,r=_e(e);return(n=r)&&"mcepastebin"===n.id&&Ae(t,r.innerHTML)},Re=function(e){var n=t(null);return{create:function(){return function(e,t,n){var r,o=e.dom,body=e.getBody();t.set(e.selection.getRng()),r=e.dom.add(Ee(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(v.ie||v.gecko)&&o.setStyle(r,"left","rtl"===o.getStyle(body,"direction",!0)?65535:-65535),o.bind(r,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Ne(e,r,n),r.focus(),e.selection.select(r,!0)}(e,n,"%MCEPASTEBIN%")},remove:function(){return function(e,t){if(_e(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,n)},getEl:function(){return _e(e)},getHtml:function(){return function(e){var t,n,i,r,o,c=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=x.grep(Ee(e).childNodes,function(e){return"mcepastebin"===e.id}),t=n.shift(),x.each(n,function(e){c(t,e)}),i=(r=e.dom.select("div[id=mcepastebin]",t)).length-1;i>=0;i--)o=e.dom.create("div"),t.insertBefore(o,r[i]),c(o,r[i]);return t?t.innerHTML:""}(e)},getLastRng:function(){return function(e){return e.get()}(n)},isDefault:function(){return De(e,"%MCEPASTEBIN%")},isDefaultContent:function(content){return Ae("%MCEPASTEBIN%",content)}}},Be=function(e,t){var n=Re(e);return e.on("preInit",function(){return function(e,t,n){var r;Te(e,t,n),e.parser.addNodeFilter("img",function(t,n,o){var c=function(e){e.attr("data-mce-object")||r===v.transparentSrc||e.remove()},l=function(e){return 0===e.indexOf("webkit-fake-url")},f=function(e){return 0===e.indexOf("data:")};if(!e.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(o))for(var i=t.length;i--;)(r=t[i].attributes.map.src)&&(l(r)?c(t[i]):!e.settings.allow_html_data_urls&&f(r)&&c(t[i]))})}(e,n,t)}),{pasteFormat:t,pasteHtml:function(html,t){return be(e,html,t)},pasteText:function(text){return ye(e,text)},pasteImageData:function(t,n){return ke(e,t,n)},getDataTransferItems:xe,hasHtmlOrText:Ce,hasContentType:we}},Me=function(){},Ie=function(e,html,text){if(!function(e){return!1===v.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==B.isMsEdge()}(e))return!1;try{return e.clearData(),e.setData("text/html",html),e.setData("text/plain",text),e.setData(S.internalHtmlMime(),html),!0}catch(e){return!1}},ze=function(e,data,t,n){Ie(e.clipboardData,data.html,data.text)?(e.preventDefault(),n()):t(data.html,n)},Pe=function(e){return function(html,t){var n=S.mark(html),r=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=e.dom.create("div",{contenteditable:"true"},n);e.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(o),e.dom.add(e.getBody(),r);var c=e.selection.getRng();o.focus();var l=e.dom.createRng();l.selectNodeContents(o),e.selection.setRng(l),y.setTimeout(function(){e.selection.setRng(c),r.parentNode.removeChild(r),t()},0)}},Le=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},He=function(e){return!e.selection.isCollapsed()||function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())}(e)},Fe=function(e){e.on("cut",function(e){return function(t){He(e)&&ze(t,Le(e),Pe(e),function(){y.setTimeout(function(){e.execCommand("Delete")},0)})}}(e)),e.on("copy",function(e){return function(t){He(e)&&ze(t,Le(e),Pe(e),Me)}}(e))},Ve=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),je=function(e,t){return Ve.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Ue=function(e,t){e.focus(),e.selection.setRng(t)},We=function(e,t,n){R.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),R.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(r){var o,c;if(c=je(e,r),!r.isDefaultPrevented()&&!n.get()){o=t.getDataTransferItems(r.dataTransfer);var l,f=t.hasContentType(o,S.internalHtmlMime());if((t.hasHtmlOrText(o)&&(!(l=o["text/plain"])||0!==l.indexOf("file://"))||!t.pasteImageData(r,c))&&c&&R.shouldFilterDrop(e)){var d=o["mce-internal"]||o["text/html"]||o["text/plain"];d&&(r.preventDefault(),y.setEditorTimeout(e,function(){e.undoManager.transact(function(){o["mce-internal"]&&e.execCommand("Delete"),Ue(e,c),d=B.trimHtml(d),o["text/html"]?t.pasteHtml(d,f):t.pasteText(d)})}))}}}),e.on("dragstart",function(e){n.set(!0)}),e.on("dragover dragend",function(t){R.shouldPasteDataImages(e)&&!1===n.get()&&(t.preventDefault(),Ue(e,je(e,t))),"dragend"===t.type&&n.set(!1)})},$e=function(e){var t=e.plugins.paste,n=R.getPreProcess(e);n&&e.on("PastePreProcess",function(e){n.call(t,t,e)});var r=R.getPostProcess(e);r&&e.on("PastePostProcess",function(e){r.call(t,t,e)})};function qe(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function Ge(e,html){if(!j.isWordContent(html))return html;var t=[];x.each(e.schema.getBlockElements(),function(e,n){t.push(n)});var n=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+t.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return html=B.filter(html,[[n,"$1"]]),html=B.filter(html,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function Ye(e,content,t,n){if(n||t)return content;var r,o=R.getWebkitStyles(e);if(!1===R.shouldRemoveWebKitStyles(e)||"all"===o)return content;if(o&&(r=o.split(/[, ]/)),r){var c=e.dom,l=e.selection.getNode();content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,o){var f=c.parseStyle(c.decode(n)),d={};if("none"===r)return t+o;for(var i=0;i<r.length;i++){var m=f[r[i]],h=c.getStyle(l,r[i],!0);/color/.test(r[i])&&(m=c.toHex(m),h=c.toHex(h)),h!==m&&(d[r[i]]=m)}return(d=c.serializeStyle(d,"span"))?t+' style="'+d+'"'+o:t+o})}else content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return content=content.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function Xe(e,t){e.$("a",t).find("font,u").each(function(i,t){e.dom.remove(t,!0)})}var Ke=function(e){v.webkit&&qe(e,Ye),v.ie&&(qe(e,Ge),function(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}(e,Xe))},Je=function(e,t){return function(n){n.setActive("text"===t.pasteFormat.get());var r=function(e){return n.setActive(e.state)};return e.on("PastePlainTextToggle",r),function(){return e.off("PastePlainTextToggle",r)}}},Qe=function(e,t){e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:Je(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:Je(e,t)})};n.add("paste",function(e){if(!1===r(e)){var n=t(!1),c=t(R.isPasteAsTextEnabled(e)?"text":"html"),l=Be(e,c),f=Ke(e);return Qe(e,l),h(e,l),$e(e),Fe(e),We(e,l,n),o(l,f)}})}(window)},function(e,t){!function(e){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("textcolor",function(){e.console.warn("Text color plugin is now built in to the core editor, please remove it from your editor configuration")})}(window)},function(e,t){!function(e){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("colorpicker",function(){e.console.warn("Color picker plugin is now built in to the core editor, please remove it from your editor configuration")})}(window)},function(e,t){!function(e){"use strict";var t,n,r,o,c,l=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return l(n())}}},f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},m=function(e){return function(){return e}},h=function(e){return e},v=m(!1),y=m(!0),x=v,w=y,C=function(){return S},S=(o={fold:function(e,s){return e()},is:x,isSome:x,isNone:w,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:n,map:C,ap:C,each:function(){},bind:C,flatten:C,exists:x,forall:w,filter:C,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:m("none()")},Object.freeze&&Object.freeze(o),o),k=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:w,isNone:x,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(a))},ap:function(e){return e.fold(C,function(e){return k(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:S},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(x,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},O={some:k,none:C,from:function(e){return null==e?S:k(e)}},T=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},E=T("string"),N=T("object"),_=T("array"),A=T("function"),D=void 0===(c=Array.prototype.indexOf)?function(e,t){return B(e,t)}:function(e,t){return c.call(e,t)},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},R=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},B=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return i;return-1},M=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i,e))return!1;return!0},I=Array.prototype.slice,z=(A(Array.from)&&Array.from,Object.keys),P=Object.hasOwnProperty,L=function(e,t){return P.call(e,t)},H=(function(t){if(!_(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};R(t,function(o,c){var l=z(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==r[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!_(d))throw new Error("case arguments must be an array");n.push(f),r[f]=function(){var r=arguments.length;if(r!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+r);for(var o=new Array(r),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var t=z(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!M(n,function(e){return D(t,e)>-1}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[f].apply(null,o)},log:function(label){e.console.log(label,{constructors:n,constructor:f,params:o})}}}})}([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return R(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),F=function(e){return{is:function(t){return e===t},isValue:y,isError:v,getOr:m(e),getOrThunk:m(e),getOrDie:m(e),or:function(t){return F(e)},orThunk:function(t){return F(e)},fold:function(t,n){return n(e)},map:function(t){return F(t(e))},mapError:function(t){return F(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return O.some(e)}}},V=function(e){return{is:v,isValue:v,isError:y,getOr:h,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return V(e)},mapError:function(t){return V(t(e))},each:d,bind:function(t){return V(e)},exists:v,forall:y,toOption:O.none}},j={value:F,error:V},U=function(pattern){return"inline-command"===pattern.type||"inline-format"===pattern.type},W=function(pattern){return"block-command"===pattern.type||"block-format"===pattern.type},$=function(e){return t=e,n=function(a,b){return a.start.length===b.start.length?0:a.start.length>b.start.length?-1:1},(r=I.call(t,0)).sort(n),r;var t,n,r},G=function(pattern){var e=function(e){return j.error({message:e,pattern:pattern})},t=function(t,n,r){if(void 0!==pattern.format){var o=void 0;if(_(pattern.format)){if(!M(pattern.format,E))return e(t+" pattern has non-string items in the `format` array");o=pattern.format}else{if(!E(pattern.format))return e(t+" pattern has non-string `format` parameter");o=[pattern.format]}return j.value(n(o))}return void 0!==pattern.cmd?E(pattern.cmd)?j.value(r(pattern.cmd,pattern.value)):e(t+" pattern has non-string `cmd` parameter"):e(t+" pattern is missing both `format` and `cmd` parameters")};if(!N(pattern))return e("Raw pattern is not an object");if(!E(pattern.start))return e("Raw pattern is missing `start` parameter");if(void 0!==pattern.end){if(!E(pattern.end))return e("Inline pattern has non-string `end` parameter");if(0===pattern.start.length&&0===pattern.end.length)return e("Inline pattern has empty `start` and `end` parameters");var n=pattern.start,r=pattern.end;return 0===r.length&&(r=n,n=""),t("Inline",function(e){return{type:"inline-format",start:n,end:r,format:e}},function(e,t){return{type:"inline-command",start:n,end:r,cmd:e,value:t}})}return void 0!==pattern.replacement?E(pattern.replacement)?0===pattern.start.length?e("Replacement pattern has empty `start` parameter"):j.value({type:"inline-command",start:"",end:pattern.start,cmd:"mceInsertContent",value:pattern.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===pattern.start.length?e("Block pattern has empty `start` parameter"):t("Block",function(e){return{type:"block-format",start:pattern.start,format:e[0]}},function(e,t){return{type:"block-command",start:pattern.start,cmd:e,value:t}})},Y=function(pattern){return"block-command"===pattern.type?{start:pattern.start,cmd:pattern.cmd,value:pattern.value}:"block-format"===pattern.type?{start:pattern.start,format:pattern.format}:"inline-command"===pattern.type?"mceInsertContent"===pattern.cmd&&""===pattern.start?{start:pattern.end,replacement:pattern.value}:{start:pattern.start,end:pattern.end,cmd:pattern.cmd,value:pattern.value}:"inline-format"===pattern.type?{start:pattern.start,end:pattern.end,format:1===pattern.format.length?pattern.format[0]:pattern.format}:void 0},X=function(e){return{inlinePatterns:filter(e,U),blockPatterns:$(filter(e,W))}},K=function(e){return{setPatterns:function(t){var n=H(map(t,G));if(n.errors.length>0){var r=n.errors[0];throw new Error(r.message+":\n"+JSON.stringify(r.pattern,null,2))}e.set(X(n.values))},getPatterns:function(){return map(e.get().inlinePatterns,Y).concat(map(e.get().blockPatterns,Y))}}},J=void 0!==e.window?e.window:Function("return this;")(),Q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=J.console;n&&(n.error?n.error.apply(n,e):n.log.apply(n,e))},Z=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],ee=function(e){var t,n,r=(t=e,n="textpattern_patterns",L(t,n)?O.from(t[n]):O.none()).getOr(Z);if(!_(r))return Q("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var o=H(map(r,G));return R(o.errors,function(e){return Q(e.message,e.pattern)}),X(o.values)},te=tinymce.util.Tools.resolve("tinymce.util.Delay"),ne=tinymce.util.Tools.resolve("tinymce.util.VK"),re=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},oe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ie=tinymce.util.Tools.resolve("tinymce.util.Tools"),ae=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ue=e.Node.TEXT_NODE,ce=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(e){return e.nodeType===ae}),se=function(e){return e.nodeType===ue},le=function(e,t,n){if(n<0||n>t.data.length)return O.none();for(var p=[n],r=t;r!==e&&r.parentNode;){for(var o=r.parentNode,i=0;i<o.childNodes.length;i++)if(o.childNodes[i]===r){p.push(i);break}r=o}return r===e?O.some(p.reverse()):O.none()},fe=function(e,t,n,r,o){return le(e,t,n).bind(function(t){return le(e,r,o).map(function(e){return{start:t,end:e}})})},de=function(e,path){var t,n,r,o=path.slice(),c=o.pop();return(t=o,n=function(e,t){return e.bind(function(e){return O.from(e.childNodes[t])})},r=O.some(e),R(t,function(e){r=n(r,e)}),r).bind(function(e){return se(e)&&c>=0&&c<=e.data.length?O.some({node:e,offset:c}):O.none()})},me=function(e,t,n){if(se(e)&&t>0)return O.some({node:e,offset:t});var r;if(t>0)r=e.childNodes[t-1];else for(var o=e;o&&o!==n&&!r;o=o.parentNode)r=o.previousSibling;var c=new oe(r,n);for(o=c.current();o;o=c.prev())if(se(o)&&o.length>0)return O.some({node:o,offset:o.length});return O.none()},ge=function(e,pattern,t,n,r,o){return void 0===o&&(o=!1),0!==pattern.start.length||o?me(t,n,r).filter(function(t){return e.getParent(t.node,e.isBlock)===r}).bind(function(t){var n=t.node,c=t.offset,text=n.data.substring(0,c),l=text.lastIndexOf(pattern.start);return-1===l?-1!==text.indexOf(pattern.end)?O.none():ge(e,pattern,n,0,r,o&&0===text.length):-1!==text.indexOf(pattern.end,l+pattern.start.length)?O.none():o&&l+pattern.start.length===text.length?O.none():O.some({node:n,offset:l})}):O.some({node:t,offset:n})},he=function(e,t,n,r,o){return me(n,r,o).bind(function(n){for(var r=n.node,c=n.offset,text=r.data.substring(0,c),l=function(i){var n,l,pattern=t[i];if(n=text,l=pattern.end,!re(n,l,n.length-l.length))return"continue";var f=c-pattern.end.length,d=pattern.start.length>0&&pattern.end.length>0,m=(d?O.some(!0):O.none()).bind(function(){var n=t.slice();return n.splice(i,1),he(e,n,r,f,o)}).fold(function(){return ge(e,pattern,r,f,o,d).map(function(t){var n=t.node,o=t.offset,l=fe(e.getRoot(),n,o,r,c).getOrDie("Internal constraint violation");return[{pattern:pattern,range:l}]})},function(t){var n,l,f=(n=e.getRoot(),l=t[t.length-1].range,de(n,l.start).bind(function(e){var t=e.node,r=e.offset;return de(n,l.end).map(function(e){var n=e.node,o=e.offset;return{startNode:t,startOffset:r,endNode:n,endOffset:o}})})).getOrDie("Internal constraint violation");return ge(e,pattern,f.startNode,f.startOffset,o).map(function(n){var o=n.node,l=n.offset,f=fe(e.getRoot(),o,l,r,c).getOrDie("Internal constraint violation");return t.concat([{pattern:pattern,range:f}])})});return m.isSome()?{value:m}:void 0},i=0;i<t.length;i++){var f=l(i);if("object"==typeof f)return f.value}return O.none()})},pe=function(e,t,n,r){if(!1===n.collapsed)return[];var o=e.getParent(n.startContainer,e.isBlock);return he(e,t,n.startContainer,n.startOffset-(r?1:0),o).getOr([])},ve=0,be=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(!r.isSome())return O.none();n.push(r.getOrDie())}return O.some(t.apply(null,n))},ye=function(e,t){for(var n,time,r=e.dom,o=function(e){return r.create("span",{"data-mce-type":"bookmark",id:e})},c=function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();return be(e,n)}(O.from(r.select("#"+e.start)[0]),O.from(r.select("#"+e.end)[0]),function(e,t){var n=r.createRng();return n.setStartAfter(e),function(e,t,n){for(var r=new oe(e,n);r.next();){var o=r.current();if(!se(o)||0!==o.data.length)return o===t}return!1}(e,t,r.getRoot())?n.collapse(!0):n.setEndBefore(t),n})},l=(n="mce_",time=(new Date).getTime(),n+"_"+Math.floor(1e9*Math.random())+ ++ve+String(time)),f=map(t,function(e,i){return{start:l+"_"+i+"_start",end:l+"_"+i+"_end"}}),cursor=e.selection.getBookmark(),i=t.length-1;i>=0;i--){var d=t[i],pattern=d.pattern,m=d.range,h=de(r.getRoot(),m.end).getOrDie("Failed to resolve range["+i+"].end"),v=h.node,y=h.offset,x=0===y?v:v.splitText(y);x.parentNode.insertBefore(o(f[i].end),x),pattern.start.length>0&&v.deleteData(y-pattern.end.length,pattern.end.length)}for(i=0;i<t.length;i++){var w=t[i],C=(pattern=w.pattern,m=w.range,de(r.getRoot(),m.start).getOrDie("Failed to resolve range.start")),S=C.node,k=C.offset,T=0===k?S:S.splitText(k);T.parentNode.insertBefore(o(f[i].start),T),pattern.start.length>0?T.deleteData(0,pattern.start.length):T.deleteData(0,pattern.end.length)}var E=function(i){var pattern=t[i].pattern;c(f[i]).each(function(t){e.selection.setRng(t),"inline-format"===pattern.type?pattern.format.forEach(function(t){e.formatter.apply(t)}):e.execCommand(pattern.cmd,!1,pattern.value)}),r.remove(f[i].start),r.remove(f[i].end)};for(i=0;i<t.length;i++)E(i);e.selection.moveToBookmark(cursor)},xe=function(e,pattern){var t=e.dom,n=e.selection.getRng(),r=t.getParent(n.startContainer,t.isBlock);if(r&&t.is(r,"p")&&ce(r)){for(var o,c,l,f,d=new oe(r,r);o=d.next();)if(se(o)){c=o;break}if(c&&(l=c.data,f=pattern.start,re(l,f,0)&&ie.trim(r.textContent).length!==pattern.start.length)){var cursor=e.selection.getBookmark();if("block-format"===pattern.type){var m=e.formatter.get(pattern.format);m&&m[0].block&&e.undoManager.transact(function(){c.deleteData(0,pattern.start.length),e.selection.select(r),e.formatter.apply(pattern.format)})}else"block-command"===pattern.type&&e.undoManager.transact(function(){c.deleteData(0,pattern.start.length),e.selection.select(r),e.execCommand(pattern.cmd,!1,pattern.value)});e.selection.moveToBookmark(cursor)}}},we=function(e,t,n){for(var i=0;i<e.length;i++)if(n(e[i],t))return!0},Ce=function(e,t){var n=pe(e.dom,t.inlinePatterns,e.selection.getRng(),!1),r=function(e,t,n){var r=e.getParent(n.startContainer,e.isBlock);if(!e.is(r,"p")||!ce(r))return O.none();for(var o,c,l=new oe(r,r);o=l.next();)if(se(o)){c=o;break}if(!c)return O.none();var pattern=function(e,text){for(var i=0;i<e.length;i++){var pattern=e[i];if(0===text.indexOf(pattern.start)&&(!pattern.end||text.lastIndexOf(pattern.end)===text.length-pattern.end.length))return pattern}}(t,c.data);return pattern?ie.trim(r.textContent).length===pattern.start.length?O.none():O.some(pattern):O.none()}(e.dom,t.blockPatterns,e.selection.getRng());return!(!e.selection.isCollapsed()||!(n.length>0||r.isSome())||(e.undoManager.add(),e.undoManager.extra(function(){e.execCommand("mceInsertNewLine")},function(){e.insertContent("\ufeff"),ye(e,n),r.each(function(pattern){return xe(e,pattern)});var t=e.selection.getRng(),o=e.dom.getParent(t.startContainer,e.dom.isBlock),c=me(t.startContainer,t.startOffset,o);e.execCommand("mceInsertNewLine"),c.each(function(s){"\ufeff"===s.node.data.charAt(s.offset-1)&&(s.node.deleteData(s.offset-1,1),e.dom.isEmpty(s.node.parentNode)&&e.dom.remove(s.node.parentNode))})}),0))},Se=function(e,t){var n=pe(e.dom,t.inlinePatterns,e.selection.getRng(),!0);n.length>0&&e.undoManager.transact(function(){ye(e,n)})},ke=function(e,t){return we(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},Oe=function(e,t){return we(e,t,function(code,e){return code===e.keyCode&&!1===ne.modifierPressed(e)})},Te=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",function(n){13!==n.keyCode||ne.modifierPressed(n)||Ce(e,t.get())&&n.preventDefault()},!0),e.on("keyup",function(n){Oe(r,n)&&Se(e,t.get())}),e.on("keypress",function(r){ke(n,r)&&te.setEditorTimeout(e,function(){Se(e,t.get())})})};f.add("textpattern",function(e){var t=l(ee(e.settings));return Te(e,t),K(t)})}(window)},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=function(e){return e.getParam("min_height",e.getElement().offsetHeight,"number")},c=function(e){return e.getParam("max_height",0,"number")},l=function(e){return e.getParam("autoresize_overflow_padding",1,"number")},f=function(e){return e.getParam("autoresize_bottom_margin",50,"number")},d=function(e){return e.getParam("autoresize_on_init",!0,"boolean")},m=function(e,t,n,o,c){r.setEditorTimeout(e,function(){y(e,t),n--?m(e,t,n,o,c):c&&c()},o)},h=function(e,t){var body=e.getBody();body&&(body.style.overflowY=t?"":"hidden",t||(body.scrollTop=0))},v=function(e,t,n,r){var o=parseInt(e.getStyle(t,n,r),10);return isNaN(o)?0:o},y=function(e,t){var r,l,f,d=e.dom,m=e.getDoc();if(m)if(function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}(e))h(e,!0);else{var body=m.body;l=o(e);var x=v(d,body,"margin-top",!0),w=v(d,body,"margin-bottom",!0);(f=body.offsetHeight+x+w)<0&&(f=0);var C=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;f+C>o(e)&&(l=f+C);var S=c(e);S&&l>S?(l=S,h(e,!0)):h(e,!1),l!==t.get()&&(r=l-t.get(),d.setStyle(e.getContainer(),"height",l+"px"),t.set(l),n.webkit&&r<0&&y(e,t))}},x={setup:function(e,t){e.on("init",function(){var t=l(e),n=f(e);e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t,paddingBottom:n,"min-height":0})}),e.on("nodechange setcontent keyup FullscreenStateChanged",function(n){y(e,t)}),d(e)&&e.on("init",function(){m(e,t,20,100,function(){m(e,t,5,1e3)})})},resize:y},w=function(e,t){e.addCommand("mceAutoResize",function(){x.resize(e,t)})};t.add("autoresize",function(t){if(t.settings.hasOwnProperty("resize")||(t.settings.resize=!1),!t.inline){var n=e(0);w(t,n),x.setup(t,n)}})}()},function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isFullscreen:function(){return null!==e.get()}}},o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(e,t){e.fire("FullscreenStateChanged",{state:t})},l=o.DOM,f=function(t,n){var r,o,iframe,f,d,m,body=e.document.body,h=e.document.documentElement,v=n.get(),y=function(){var t,n,r,body;l.setStyle(iframe,"height",(r=e.window,body=e.document.body,body.offsetWidth&&(t=body.offsetWidth,n=body.offsetHeight),r.innerWidth&&r.innerHeight&&(t=r.innerWidth,n=r.innerHeight),{w:t,h:n}).h-(o.clientHeight-iframe.clientHeight))},x=function(){l.unbind(e.window,"resize",y)};if(r=(o=t.getContainer()).style,f=(iframe=t.getContentAreaContainer().firstChild).style,v)f.width=v.iframeWidth,f.height=v.iframeHeight,v.containerWidth&&(r.width=v.containerWidth),v.containerHeight&&(r.height=v.containerHeight),l.removeClass(body,"tox-fullscreen"),l.removeClass(h,"tox-fullscreen"),l.removeClass(o,"tox-fullscreen"),d=v.scrollPos,e.window.scrollTo(d.x,d.y),l.unbind(e.window,"resize",v.resizeHandler),t.off("remove",v.removeHandler),n.set(null),c(t,!1);else{var w={scrollPos:(m=l.getViewPort(),{x:m.x,y:m.y}),containerWidth:r.width,containerHeight:r.height,iframeWidth:f.width,iframeHeight:f.height,resizeHandler:y,removeHandler:x};f.width=f.height="100%",r.width=r.height="",l.addClass(body,"tox-fullscreen"),l.addClass(h,"tox-fullscreen"),l.addClass(o,"tox-fullscreen"),l.bind(e.window,"resize",y),t.on("remove",x),y(),n.set(w),c(t,!0)}},d=function(e,t){e.addCommand("mceFullScreen",function(){f(e,t)})},m=function(e,t){return function(n){n.setActive(null!==t.get());var r=function(e){return n.setActive(e.state)};return e.on("FullscreenStateChanged",r),function(){return e.off("FullscreenStateChanged",r)}}},h=function(e,t){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:m(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:m(e,t)})};n.add("fullscreen",function(e){var n=t(null);return e.settings.inline?r(n):(d(e,n),h(e,n),e.addShortcut("Meta+Shift+F","","mceFullScreen"),r(n))})}(window)},function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools");function o(t,n){return l(e.document.createElement("canvas"),t,n)}function c(canvas){return canvas.getContext("2d")}function l(canvas,e,t){return canvas.width=e,canvas.height=t,canvas}var f,d,m,h,v={create:o,clone:function(canvas){var e;return c(e=o(canvas.width,canvas.height)).drawImage(canvas,0,0),e},resize:l,get2dContext:c,get3dContext:function(canvas){var e=null;try{e=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){}return e||(e=null),e}},y={getWidth:function(image){return image.naturalWidth||image.width},getHeight:function(image){return image.naturalHeight||image.height}},x=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(e,r(l,this),r(f,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(e){var t=this;null!==this._state?n(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function l(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void h(r(t,e),r(l,this),r(f,this))}this._state=!0,this._value=e,d.call(this)}catch(e){f.call(this,e)}}function f(e){this._state=!1,this._value=e,d.call(this)}function d(){for(var i=0,e=this._deferreds.length;i<e;i++)c.call(this,this._deferreds[i]);this._deferreds=null}function m(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function h(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,o){c.call(r,new m(e,n,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new t(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,function(e){o(i,e)},n)}e[i]=c,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},t}(),w=function(e){return function(){return e}},C=w(!1),S=w(!0),k=C,O=S,T=function(){return E},E=(h={fold:function(e,s){return e()},is:k,isSome:k,isNone:O,getOr:m=function(e){return e},getOrThunk:d=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:m,orThunk:d,map:T,ap:T,each:function(){},bind:T,flatten:T,exists:k,forall:O,filter:T,equals:f=function(e){return e.isNone()},equals_:f,toArray:function(){return[]},toString:w("none()")},Object.freeze&&Object.freeze(h),h),N=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:O,isNone:k,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return N(e(a))},ap:function(e){return e.fold(T,function(e){return N(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:E},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(k,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},_={some:N,none:T,from:function(e){return null==e?E:N(e)}},A=void 0!==e.window?e.window:Function("return this;")(),D=function(p,e){return function(e,t){for(var n=null!=t?t:A,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},R={getOrDie:function(e,t){var n=function(e,t){return D(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}};function B(){return new(R.getOrDie("FileReader"))}var M={atob:function(e){return R.getOrDie("atob")(e)},requestAnimationFrame:function(e){R.getOrDie("requestAnimationFrame")(e)}};function I(t){return new x(function(n,r){var o=e.URL.createObjectURL(t),image=new e.Image,c=function(){image.removeEventListener("load",l),image.removeEventListener("error",f)};function l(){c(),n(image)}function f(){c(),r("Unable to load data of type "+t.type+": "+o)}image.addEventListener("load",l),image.addEventListener("error",f),image.src=o,image.complete&&l()})}function z(t){return new x(function(n,r){var o=new e.XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200==this.status&&n(this.response)},o.onerror=function(){var e,t=this;r(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},o.send()})}function P(e){var data=e.split(","),t=/data:([^;]+)/.exec(data[0]);if(!t)return _.none();for(var n,r,o,c=t[1],l=data[1],f=M.atob(l),d=f.length,m=Math.ceil(d/1024),h=new Array(m),v=0;v<m;++v){for(var y=1024*v,x=Math.min(y+1024,d),w=new Array(x-y),C=y,i=0;C<x;++i,++C)w[i]=f[C].charCodeAt(0);h[v]=(n=w,new(R.getOrDie("Uint8Array"))(n))}return _.some((r=h,o={type:c},new(R.getOrDie("Blob"))(r,o)))}function L(e){return new x(function(t,n){P(e).fold(function(){n("uri is not base64: "+e)},t)})}function H(e){return new x(function(t){var n=B();n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}var F={blobToImage:I,imageToBlob:function(image){var e=image.src;return 0===e.indexOf("data:")?L(e):z(e)},blobToArrayBuffer:function(e){return new x(function(t){var n=B();n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})},blobToDataUri:H,blobToBase64:function(e){return H(e).then(function(e){return e.split(",")[1]})},dataUriToBlobSync:P,canvasToBlob:function(canvas,t,n){return t=t||"image/png",e.HTMLCanvasElement.prototype.toBlob?new x(function(e){canvas.toBlob(function(t){e(t)},t,n)}):L(canvas.toDataURL(t,n))},canvasToDataURL:function(e,t,n){return t=t||"image/png",e.then(function(canvas){return canvas.toDataURL(t,n)})},blobToCanvas:function(t){return I(t).then(function(image){var canvas;return function(image){e.URL.revokeObjectURL(image.src)}(image),canvas=v.create(y.getWidth(image),y.getHeight(image)),v.get2dContext(canvas).drawImage(image,0,0),canvas})},uriToBlob:function(e){return 0===e.indexOf("blob:")?z(e):0===e.indexOf("data:")?L(e):null}},V=function(image){return F.blobToImage(image)},j=function(e){return F.imageToBlob(e)};function U(e,t,n){var r=t.type;function o(t,n){return e.then(function(canvas){return F.canvasToDataURL(canvas,t,n)})}return{getType:w(r),toBlob:function(){return x.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(canvas){return F.canvasToBlob(canvas,t,n)})},toAdjustedDataURL:o,toAdjustedBase64:function(e,t){return o(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(v.clone)}}}function W(e){return F.blobToDataUri(e).then(function(t){return U(F.blobToCanvas(e),e,t)})}var $={fromBlob:W,fromCanvas:function(canvas,e){return F.canvasToBlob(canvas,e).then(function(e){return U(x.resolve(canvas),e,canvas.toDataURL())})},fromImage:function(image){return F.imageToBlob(image).then(function(e){return W(e)})},fromBlobAndUrlSync:function(e,t){return U(F.blobToCanvas(e),e,t)}};function G(e,t,n){return(e=parseFloat(e))>n?e=n:e<t&&(e=t),e}var Y=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function X(e,t){var i,n,r,o,col=[],c=new Array(10);for(i=0;i<5;i++){for(n=0;n<5;n++)col[n]=t[n+5*i];for(n=0;n<5;n++){for(o=0,r=0;r<5;r++)o+=e[n+5*r]*col[r];c[n+5*i]=o}}return c}function K(e,t){return t=G(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,G(e,0,1)})}var J={identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:K,multiply:X,adjustContrast:function(e,t){var n;return t=G(t,-1,1),X(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?Y[t]:Y[Math.floor(t)]*(1-n)+Y[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(e,t){return X(e,[1,0,0,0,t=G(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(e,t){var n;return X(e,[.3086*(1-(n=1+((t=G(t,-1,1))>0?3*t:t)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(e,t){var n,r;return t=G(t,-180,180)/180*Math.PI,X(e,[.213+.787*(n=Math.cos(t))+-.213*(r=Math.sin(t)),.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(e,t,n,r){return X(e,[t=G(t,0,2),0,0,0,0,0,n=G(n,0,2),0,0,0,0,0,r=G(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(e,t){return X(e,K([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=G(t,0,1)))},adjustGrayscale:function(e,t){return X(e,K([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=G(t,0,1)))}};function Q(e,t){return e.toCanvas().then(function(canvas){return function(canvas,e,t){var n,r=v.get2dContext(canvas);return n=function(e,t){var n,g,b,a,i,r=e.data,o=t[0],c=t[1],l=t[2],f=t[3],d=t[4],m=t[5],h=t[6],v=t[7],y=t[8],x=t[9],w=t[10],C=t[11],S=t[12],k=t[13],O=t[14],T=t[15],E=t[16],N=t[17],_=t[18],A=t[19];for(i=0;i<r.length;i+=4)n=r[i],g=r[i+1],b=r[i+2],a=r[i+3],r[i]=n*o+g*c+b*l+a*f+d,r[i+1]=n*m+g*h+b*v+a*y+x,r[i+2]=n*w+g*C+b*S+a*k+O,r[i+3]=n*T+g*E+b*N+a*_+A;return e}(r.getImageData(0,0,canvas.width,canvas.height),t),r.putImageData(n,0,0),$.fromCanvas(canvas,e)}(canvas,e.getType(),t)})}function Z(e,t){return e.toCanvas().then(function(canvas){return function(canvas,e,t){var n,r,o=v.get2dContext(canvas);return n=o.getImageData(0,0,canvas.width,canvas.height),r=o.getImageData(0,0,canvas.width,canvas.height),r=function(e,t,n){var r,o,c,l,f,d,m,g,b,h,v,y,x,w,C,S,k;function O(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(c=Math.round(Math.sqrt(n.length)),l=Math.floor(c/2),r=e.data,o=t.data,S=e.width,k=e.height,d=0;d<k;d++)for(f=0;f<S;f++){for(m=g=b=0,v=0;v<c;v++)for(h=0;h<c;h++)y=O(f+h-l,0,S-1),x=O(d+v-l,0,k-1),w=4*(x*S+y),C=n[v*c+h],m+=r[w]*C,g+=r[w+1]*C,b+=r[w+2]*C;o[w=4*(d*S+f)]=O(m,0,255),o[w+1]=O(g,0,255),o[w+2]=O(b,0,255)}return t}(n,r,t),o.putImageData(r,0,0),$.fromCanvas(canvas,e)}(canvas,e.getType(),t)})}function ee(e){return function(t,n){return t.toCanvas().then(function(canvas){return function(canvas,t,n){var r,i,o=v.get2dContext(canvas),c=new Array(256);for(i=0;i<c.length;i++)c[i]=e(i,n);return r=function(e,t){var i,n=e.data;for(i=0;i<n.length;i+=4)n[i]=t[n[i]],n[i+1]=t[n[i+1]],n[i+2]=t[n[i+2]];return e}(o.getImageData(0,0,canvas.width,canvas.height),c),o.putImageData(r,0,0),$.fromCanvas(canvas,t)}(canvas,t.getType(),n)})}}function te(e){return function(t,n){return Q(t,e(J.identity(),n))}}function ne(e){return function(t){return Z(t,e)}}te(J.adjustBrightness),te(J.adjustHue),te(J.adjustSaturation),te(J.adjustContrast),te(J.adjustGrayscale),te(J.adjustSepia),ne([0,-1,0,-1,5,-1,0,-1,0]),ne([-2,-1,0,-1,1,1,0,1,2]),ee(function(e,t){return 255*Math.pow(e/255,1-t)}),ee(function(e,t){return 255*(1-Math.exp(-e/255*t))});var re,oe={scale:function e(image,t,n){var r=y.getWidth(image),o=y.getHeight(image),c=t/r,l=n/o,f=!1;(c<.5||c>2)&&(c=c<.5?.5:2,f=!0),(l<.5||l>2)&&(l=l<.5?.5:2,f=!0);var d=function(image,e,t){return new x(function(n){var r=y.getWidth(image),o=y.getHeight(image),c=Math.floor(r*e),l=Math.floor(o*t),canvas=v.create(c,l),f=v.get2dContext(canvas);f.drawImage(image,0,0,r,o,0,0,c,l),n(canvas)})}(image,c,l);return f?d.then(function(r){return e(r,t,n)}):d}},ie={rotate:function(e,t){return e.toCanvas().then(function(canvas){return function(image,e,t){var canvas=v.create(image.width,image.height),n=v.get2dContext(canvas),r=0,o=0;return 90!=(t=t<0?360+t:t)&&270!=t||v.resize(canvas,canvas.height,canvas.width),90!=t&&180!=t||(r=canvas.width),270!=t&&180!=t||(o=canvas.height),n.translate(r,o),n.rotate(t*Math.PI/180),n.drawImage(image,0,0),$.fromCanvas(canvas,e)}(canvas,e.getType(),t)})},flip:function(e,t){return e.toCanvas().then(function(canvas){return function(image,e,t){var canvas=v.create(image.width,image.height),n=v.get2dContext(canvas);return"v"==t?(n.scale(1,-1),n.drawImage(image,0,-canvas.height)):(n.scale(-1,1),n.drawImage(image,-canvas.width,0)),$.fromCanvas(canvas,e)}(canvas,e.getType(),t)})},crop:function(e,t,n,r,o){return e.toCanvas().then(function(canvas){return function(image,e,t,n,r,o){var canvas=v.create(r,o);return v.get2dContext(canvas).drawImage(image,-t,-n),$.fromCanvas(canvas,e)}(canvas,e.getType(),t,n,r,o)})},resize:function(e,t,n){return e.toCanvas().then(function(canvas){return oe.scale(canvas,t,n).then(function(t){return $.fromCanvas(t,e.getType())})})}},ae=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),i=0,r=0;i<t;i++)r|=this.readByteAt(e+i)<<Math.abs(n+8*i);return r},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),ue={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},ce={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},se=(function(){function e(e){if(this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={},this._reader=new ae(e),this._idx=this._offsets.tiffHeader,65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(this._reader.littleEndian=18761==this.SHORT(this._idx),42!==this.SHORT(this._idx+=2))throw new Error("Invalid Exif data.");this._offsets.IFD0=this._offsets.tiffHeader+this.LONG(this._idx+=2),this._tiffTags=this.extractTags(this._offsets.IFD0,ue.tiff),"ExifIFDPointer"in this._tiffTags&&(this._offsets.exifIFD=this._offsets.tiffHeader+this._tiffTags.ExifIFDPointer,delete this._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in this._tiffTags&&(this._offsets.gpsIFD=this._offsets.tiffHeader+this._tiffTags.GPSInfoIFDPointer,delete this._tiffTags.GPSInfoIFDPointer);var t=this.LONG(this._offsets.IFD0+12*this.SHORT(this._offsets.IFD0)+2);t&&(this._offsets.IFD1=this._offsets.tiffHeader+t)}e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=null;if(this._offsets.exifIFD){try{e=this.extractTags(this._offsets.exifIFD,ue.exif)}catch(e){return null}if(e.ExifVersion&&Array.isArray(e.ExifVersion)){for(var i=0,t="";i<e.ExifVersion.length;i++)t+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=t}}return e},e.prototype.GPS=function(){var e=null;if(this._offsets.gpsIFD){try{e=this.extractTags(this._offsets.gpsIFD,ue.gps)}catch(e){return null}e.GPSVersionID&&Array.isArray(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join("."))}return e},e.prototype.thumb=function(){if(this._offsets.IFD1)try{var e=this.extractTags(this._offsets.IFD1,ue.thumb);if("JPEGInterchangeFormat"in e)return this.SEGMENT(this._offsets.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,t){var n,i,r,o,c,l,f,d,m=[],h={},v={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},y={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(n=this.SHORT(e),i=0;i<n;i++)if(m=[],f=e+2+12*i,void 0!==(r=t[this.SHORT(f)])){if(o=v[this.SHORT(f+=2)],c=this.LONG(f+=2),!(l=y[o]))throw new Error("Invalid Exif data.");if(f+=4,l*c>4&&(f=this.LONG(f)+this._offsets.tiffHeader),f+l*c>=this.length())throw new Error("Invalid Exif data.");"ASCII"!==o?(m=this.asArray(o,f,c),d=1==c?m[0]:m,ce.hasOwnProperty(r)&&"object"!=typeof d?h[r]=ce[r][d]:h[r]=d):h[r]=this.STRING(f,c).replace(/\0$/,"").trim()}return h}}(),function(e,t){return ie.rotate(e,t)}),le=function(e,t){return ie.flip(e,t)},fe=se,de=function(e){return $.fromBlob(e)},me=function(){return R.getOrDie("URL")},ge=function(e){return me().createObjectURL(e)},he=function(u){me().revokeObjectURL(u)},pe=tinymce.util.Tools.resolve("tinymce.util.Delay"),ve=tinymce.util.Tools.resolve("tinymce.util.Promise"),be=tinymce.util.Tools.resolve("tinymce.util.URI"),ye=function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},xe={getImageSize:function(img){var e,t;function n(e){return/^[0-9\.]+px$/.test(e)}return e=img.style.width,t=img.style.height,e||t?n(e)&&n(t)?{w:parseInt(e,10),h:parseInt(t,10)}:null:(e=img.width,t=img.height,e&&t?{w:parseInt(e,10),h:parseInt(t,10)}:null)},setImageSize:function(img,e){var t,n;e&&(t=img.style.width,n=img.style.height,(t||n)&&(img.style.width=e.w+"px",img.style.height=e.h+"px",img.removeAttribute("data-mce-style")),t=img.width,n=img.height,(t||n)&&(img.setAttribute("width",e.w),img.setAttribute("height",e.h)))},getNaturalImageSize:function(img){return{w:img.naturalWidth,h:img.naturalHeight}}},we=(re="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===re}),Ce=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return _.some(r)}return _.none()};Array.prototype.slice;we(Array.from)&&Array.from;var Se,ke,Oe,Te=function(e){return null!=e},Ee={traverse:function(e,path){var t;return t=path.reduce(function(e,t){return Te(e)?e[t]:void 0},e),Te(t)?t:null},readBlob:function(e){return new ve(function(t){var n=B();n.onload=function(e){var data=e.target;t(data.result)},n.readAsText(e)})},requestUrlAsBlob:function(e,t,n){return new ve(function(o){var c;(c=new(R.getOrDie("XMLHttpRequest"))).onreadystatechange=function(){4===c.readyState&&o({status:c.status,blob:this.response})},c.open("GET",e,!0),c.withCredentials=n,r.each(t,function(e,t){c.setRequestHeader(t,e)}),c.responseType="blob",c.send()})},parseJson:function(text){var e;try{e=JSON.parse(text)}catch(e){}return e}},Ne=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],_e=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],Ae=function(e){return"ImageProxy HTTP error: "+Ce(Ne,function(t){return e===t.code}).fold(w("Unknown ImageProxy error"),function(e){return e.message})},De=function(e){var t=Ae(e);return ve.reject(t)},Re=function(e){return Ce(_e,function(t){return t.type===e}).fold(w("Unknown service error"),function(e){return e.message})},Be=function(e,t){return Ee.readBlob(t).then(function(text){var e=function(text){var e=Ee.parseJson(text),t=Ee.traverse(e,["error","type"]);return"ImageProxy Service error: "+(t?Re(t):"Invalid JSON in service error message")}(text);return ve.reject(e)})},Me={handleServiceErrorResponse:function(e,t){return 400===(code=e)||403===code||500===code?Be(0,t):De(e);var code},handleHttpError:De,getHttpErrorMsg:Ae,getServiceErrorMsg:Re},Ie=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return Ee.requestUrlAsBlob(function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)}(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?Me.handleServiceErrorResponse(e.status,e.blob):ve.resolve(e.blob)})},ze=function(e,t,n){return t?Ie(e,t):function(e,t){return Ee.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?Me.handleHttpError(e.status):ve.resolve(e.blob)})}(e,n)},Pe=function(){return Le(0,0)},Le=function(e,t){return{major:e,minor:t}},He={nu:Le,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Pe():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Le(r(1),r(2))}(e,n)},unknown:Pe},Fe=function(e,t){return function(){return t===e}},Ve=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Fe("Edge",t),isChrome:Fe("Chrome",t),isIE:Fe("IE",t),isOpera:Fe("Opera",t),isFirefox:Fe("Firefox",t),isSafari:Fe("Safari",t)}},je={unknown:function(){return Ve({current:void 0,version:He.unknown()})},nu:Ve,edge:w("Edge"),chrome:w("Chrome"),ie:w("IE"),opera:w("Opera"),firefox:w("Firefox"),safari:w("Safari")},Ue=function(e,t){return function(){return t===e}},We=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ue("Windows",t),isiOS:Ue("iOS",t),isAndroid:Ue("Android",t),isOSX:Ue("OSX",t),isLinux:Ue("Linux",t),isSolaris:Ue("Solaris",t),isFreeBSD:Ue("FreeBSD",t)}},$e={unknown:function(){return We({current:void 0,version:He.unknown()})},nu:We,windows:w("Windows"),ios:w("iOS"),android:w("Android"),linux:w("Linux"),osx:w("OSX"),solaris:w("Solaris"),freebsd:w("FreeBSD")},qe=function(e,t){var n=String(t).toLowerCase();return Ce(e,function(e){return e.search(n)})},Ge=function(e,t){return qe(e,t).map(function(e){var n=He.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ye=function(e,t){return qe(e,t).map(function(e){var n=He.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Xe=function(e,t){return-1!==e.indexOf(t)},Ke=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=function(e){return function(t){return Xe(t,e)}},Qe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Xe(e,"edge/")&&Xe(e,"chrome")&&Xe(e,"safari")&&Xe(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ke],search:function(e){return Xe(e,"chrome")&&!Xe(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Xe(e,"msie")||Xe(e,"trident")}},{name:"Opera",versionRegexes:[Ke,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[Ke,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Xe(e,"safari")||Xe(e,"mobile/"))&&Xe(e,"applewebkit")}}],Ze=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Xe(e,"iphone")||Xe(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Je("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]}],et={browsers:w(Qe),oses:w(Ze)},tt=function(e){var t=et.browsers(),n=et.oses(),r=Ge(t,e).fold(je.unknown,je.nu),o=Ye(n,e).fold($e.unknown,$e.nu),c=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,c=e.isAndroid()&&3===e.version.major,l=e.isAndroid()&&4===e.version.major,f=r||c||l&&!0===/mobile/i.test(n),d=e.isiOS()||e.isAndroid(),m=d&&!f,h=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:w(r),isiPhone:w(o),isTablet:w(f),isPhone:w(m),isTouch:w(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w(h)}}(o,r,e);return{browser:r,os:o,deviceType:c}},nt={detect:(Se=function(){var t=e.navigator.userAgent;return tt(t)},Oe=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Oe||(Oe=!0,ke=Se.apply(null,e)),ke})},ot=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:w(e)}},it={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return ot(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return ot(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return ot(n)},fromDom:ot,fromPoint:function(e,t,n){var r=e.dom();return _.from(r.elementFromPoint(t,n)).map(ot)}},at=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ut=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,at),ct=(nt.detect().browser.isIE(),0),st=function(e){return(nt.detect().browser.isIE(),function(e,t){return function(e,t){var n,r;return Ce(e.dom().childNodes,(n=t,r=it.fromDom,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))})).map(it.fromDom)}(e,function(e){return function(element,e){var t=element.dom();if(t.nodeType!==ut)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}(e,t)})})(it.fromDom(e),"img")},lt=function(e,t){return e.dom.is(t,"figure")},ft=function(e,t){e.notificationManager.open({text:t,type:"error"})},mt=function(e){var t=e.selection.getNode();return lt(e,t)?st(t):_.some(it.fromDom(t))},gt=function(e,img){var t=img.src;return 0===t.indexOf("data:")||0===t.indexOf("blob:")||new be(t).host===e.documentBaseURI.host},ht=function(e,img){return-1!==r.inArray(function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")}(e),new be(img.src).host)},pt=function(e,img){var t,n=img.src;return ht(e,img)?ze(img.src,null,function(e,img){return-1!==r.inArray(function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")}(e),new be(img.src).host)}(e,img)):gt(e,img)?j(img):(n=function(e){return e.getParam("imagetools_proxy")}(e),n+=(-1===n.indexOf("?")?"?":"&")+"url="+encodeURIComponent(img.src),t=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")}(e),ze(n,t,!1))},vt=function(e,img){var t;return(t=e.editorUpload.blobCache.getByUri(img.src))?ve.resolve(t.blob()):pt(e,img)},bt=function(e,t){var n=pe.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},function(e){return e.getParam("images_upload_timeout",3e4,"number")}(e));t.set(n)},yt=function(e){pe.clearTimeout(e.get())},xt=function(e,t,n,r,o,c){return t.toBlob().then(function(l){var f,d,m,h;return m=e.editorUpload.blobCache,f=o.src,function(e){return e.getParam("images_reuse_filename",!1,"boolean")}(e)&&((h=m.getByUri(f))?(f=h.uri(),d=h.name()):d=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null}(e,f)),h=m.create({id:"imagetools"+ct++,blob:l,base64:t.toBase64(),uri:f,name:d}),m.add(h),e.undoManager.transact(function(){e.$(o).on("load",function t(){e.$(o).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(yt(r),bt(e,r))}),c&&e.$(o).attr({width:c.w,height:c.h}),e.$(o).attr({src:h.blobUri()}).removeAttr("data-mce-src")}),h})},wt=function(e,t,n,r){return function(){return mt(e).fold(function(){ft(e,"Could not find selected image")},function(img){return e._scanForImages().then(function(){return vt(e,img.dom())}).then(de).then(n).then(function(n){return xt(e,n,!1,t,img.dom(),r)},function(t){ft(e,t)})})}},Ct={rotate:function(e,t,n){return function(){var r=mt(e).fold(function(){return null},function(img){var e=xe.getImageSize(img.dom());return e?{w:e.h,h:e.w}:null});return wt(e,t,function(e){return fe(e,n)},r)()}},flip:function(e,t,n){return function(){return wt(e,t,function(e){return le(e,n)})()}},getEditableImage:function(e,t){var n=function(t){return function(t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")}(t)&&(gt(e,t)||ht(e,t)||e.settings.imagetools_proxy)};return lt(e,t)?st(t).map(function(img){return n(img.dom())?_.some(img.dom()):_.none()}):n(t)?_.some(t):_.none()},cancelTimedUpload:yt,findBlob:vt,getSelectedImage:mt,handleDialogBlob:function(e,t,img,n,r){return new ve(function(o){V(r).then(function(e){var t=xe.getNaturalImageSize(e);return n.w===t.w&&n.h===t.h||xe.getImageSize(img)&&xe.setImageSize(img,t),he(e.src),r}).then(de).then(function(n){return xt(e,n,!0,t,img)},function(){})})}},St=w("save-state"),kt=w("disable"),Ot=w("enable"),Tt=function(e,t){return function(){var n=Ct.getSelectedImage(e),r=n.map(function(e){return xe.getNaturalImageSize(e.dom())});Ct.getSelectedImage(e).each(function(img){Ct.getEditableImage(e,img.dom()).each(function(o){Ct.findBlob(e,img.dom()).then(function(o){var c=function(e){return{blob:e,url:ge(e)}}(o);e.windowManager.open({title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:c}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(o){var c=o.getData().imagetools.blob;n.each(function(n){r.each(function(r){Ct.handleDialogBlob(e,t,n.dom(),r,c)})}),o.close()},onCancel:function(){},onAction:function(e,details){switch(details.name){case St():details.value?e.enable("save"):e.disable("save");break;case kt():e.disable("save"),e.disable("cancel");break;case Ot():e.enable("cancel")}}})})})})}},Et=function(e,t){r.each({mceImageRotateLeft:Ct.rotate(e,t,-90),mceImageRotateRight:Ct.rotate(e,t,90),mceImageFlipVertical:Ct.flip(e,t,"v"),mceImageFlipHorizontal:Ct.flip(e,t,"h"),mceEditImage:Tt(e,t)},function(t,n){e.addCommand(n,t)})},Nt=function(e,t,n){e.on("NodeChange",function(r){var o=n.get();o&&o.src!==r.element.src&&(Ct.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),Ct.getEditableImage(e,r.element).each(n.set)})},_t=function(e){var t=function(t){return function(){return e.execCommand(t)}};e.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:t("mceImageRotateLeft")}),e.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:t("mceImageRotateRight")}),e.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:t("mceImageFlipVertical")}),e.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:t("mceImageFlipHorizontal")}),e.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:t("mceEditImage"),onSetup:function(t){var n=function(){Ct.getSelectedImage(e).each(function(element){var n=Ct.getEditableImage(e,element.dom()).isNone();t.setDisabled(n)})};return e.on("NodeChange",n),function(){e.off("NodeChange",n)}}}),e.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image-options",onAction:t("mceImage")}),e.ui.registry.addContextMenu("imagetools",{update:function(element){return Ct.getEditableImage(e,element).fold(function(){return[]},function(e){return[{text:"Edit image",icon:"edit-image",onAction:t("mceEditImage")}]})}})},At=function(e){e.ui.registry.addContextToolbar("imagetools",{items:ye(e),predicate:function(t){return Ct.getEditableImage(e,t).isSome()},position:"node",scope:"node"})};n.add("imagetools",function(e){var n=t(0),r=t(null);Et(e,n),_t(e),At(e),Nt(e,n,r)})}(window)},function(e,t){!function(e){"use strict";var t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},r=function(e){return function(){return e}},o=function(e){return e};function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var l,f,d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},m=function(e){return function(){throw new Error(e)}},h=r(!1),v=r(!0),y=h,x=v,w=function(){return C},C=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},o={fold:function(e,s){return e()},is:y,isSome:y,isNone:x,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:w,ap:w,each:function(){},bind:w,flatten:w,exists:y,forall:x,filter:w,equals:e,equals_:e,toArray:function(){return[]},toString:r("none()")};return Object.freeze&&Object.freeze(o),o}(),S=function(a){var e=function(){return a},t=function(){return r},n=function(e){return e(a)},r={fold:function(e,s){return s(a)},is:function(e){return a===e},isSome:x,isNone:y,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return S(e(a))},ap:function(e){return e.fold(w,function(e){return S(e(a))})},each:function(e){e(a)},bind:n,flatten:e,exists:n,forall:n,filter:function(e){return e(a)?r:C},equals:function(e){return e.is(a)},equals_:function(e,t){return e.fold(y,function(b){return t(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r},k={some:S,none:w,from:function(e){return null==e?C:S(e)}},O=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},T=O("string"),E=O("object"),N=O("array"),_=O("boolean"),A=O("function"),D=O("number"),R=void 0===(l=Array.prototype.indexOf)?function(e,t){return j(e,t)}:function(e,t){return l.call(e,t)},B=function(e,t){var n=R(e,t);return-1===n?k.none():k.some(n)},M=function(e,t){return R(e,t)>-1},I=function(e,t){return V(e,t).isSome()},z=function(e,t){for(var n=[],i=0;i<e.length;i+=t){var s=e.slice(i,i+t);n.push(s)}return n},map=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},P=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)},filter=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},L=function(e,t,n){return function(e,t){for(var i=e.length-1;i>=0;i--)t(e[i],i,e)}(e,function(e){n=t(n,e)}),n},H=function(e,t,n){return P(e,function(e){n=t(n,e)}),n},F=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r,i,e))return k.some(r)}return k.none()},V=function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return k.some(i);return k.none()},j=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i]===t)return i;return-1},U=Array.prototype.push,W=function(e){for(var t=[],i=0,n=e.length;i<n;++i){if(!Array.prototype.isPrototypeOf(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);U.apply(t,e[i])}return t},$=function(e,t){var output=map(e,t);return W(output)},G=function(e,t){for(var i=0,n=e.length;i<n;++i)if(!0!==t(e[i],i,e))return!1;return!0},Y=Array.prototype.slice,X=function(e){var t=Y.call(e,0);return t.reverse(),t},K=function(e,t){return filter(e,function(e){return!M(t,e)})},J=function(e){return[e]},head=function(e){return 0===e.length?k.none():k.some(e[0])},Q=function(e){return 0===e.length?k.none():k.some(e[e.length-1])},Z=A(Array.from)?Array.from:function(e){return Y.call(e)},ee=Object.keys,te=Object.hasOwnProperty,ne=function(e,t){for(var n=ee(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},re=function(e,t){return oe(e,function(e,i,n){return{k:i,v:t(e,i,n)}})},oe=function(e,t){var n={};return ne(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},ie=function(e,t){var n=[];return ne(e,function(e,r){n.push(t(e,r))}),n},ae=function(e){return ie(e,function(e){return e})},ue=function(e,t){return ce(e,t)?k.from(e[t]):k.none()},ce=function(e,t){return te.call(e,t)},se=function(e){return function(t){return ce(t,e)?k.from(t[e]):k.none()}},le=function(e,t){return se(t)(e)},fe=function(e,t){var n={};return n[e]=t,n},de=function(e){return{is:function(t){return e===t},isValue:v,isError:h,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(t){return de(e)},orThunk:function(t){return de(e)},fold:function(t,n){return n(e)},map:function(t){return de(t(e))},mapError:function(t){return de(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return k.some(e)}}},me=function(e){return{is:h,isValue:h,isError:v,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return m(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return me(e)},mapError:function(t){return me(t(e))},each:t,bind:function(t){return me(e)},exists:h,forall:v,toOption:k.none}},ge={value:de,error:me},he=function(t){if(!N(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return P(t,function(o,c){var l=ee(o);if(1!==l.length)throw new Error("one and only one name per case");var f=l[0],d=o[f];if(void 0!==r[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!N(d))throw new Error("case arguments must be an array");n.push(f),r[f]=function(){var r=arguments.length;if(r!==d.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+r);for(var o=new Array(r),i=0;i<o.length;i++)o[i]=arguments[i];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[c].apply(null,o)},match:function(e){var t=ee(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!G(n,function(e){return M(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[f].apply(null,o)},log:function(label){e.console.log(label,{constructors:n,constructor:f,params:o})}}}}),r},pe=(he([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),Object.prototype.hasOwnProperty),ve=function(e){return function(){for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var o=t[r];for(var c in o)pe.call(o,c)&&(n[c]=e(n[c],o[c]))}return n}},be=ve(function(e,t){return E(e)&&E(t)?be(e,t):t}),ye=ve(function(e,t){return t}),xe=function(e,t){return function(e,t){var n={};return ne(e,function(e,r){M(t,r)||(n[r]=e)}),n}(e,t)},we=function(e){return se(e)},Ce=function(e,t){return function(e,t){return function(n){return ce(n,e)?n[e]:t}}(e,t)},Se=function(e,t){return le(e,t)},ke=function(e,t){return fe(e,t)},Oe=function(e){return function(e){var t={};return P(e,function(e){t[e.key]=e.value}),t}(e)},Te=function(e,base){var t,r,o=(t=[],r=[],P(e,function(e){e.fold(function(e){t.push(e)},function(e){r.push(e)})}),{errors:t,values:r});return o.errors.length>0?function(e){return n(ge.error,W)(e)}(o.errors):function(e,base){return 0===e.length?ge.value(base):ge.value(be(base,ye.apply(void 0,e)))}(o.values,base)},Ee=function(e,t){return function(e,t){return ce(e,t)&&void 0!==e[t]&&null!==e[t]}(e,t)},Ne=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ne(n())}}},_e=function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t},Ae=function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i],i);if(n.isSome())return n}return k.none()},De=r("touchstart"),Re=r("touchmove"),Be=r("touchend"),Me=r("mousedown"),Ie=r("mousemove"),ze=r("mouseout"),Pe=r("mouseup"),Le=r("mouseover"),He=r("focusin"),Fe=r("focusout"),Ve=r("keydown"),je=r("keyup"),input=r("input"),Ue=r("change"),We=r("click"),$e=r("transitionend"),qe=r("selectstart"),Ge=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Ye=function(){return Xe(0,0)},Xe=function(e,t){return{major:e,minor:t}},Ke={nu:Xe,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Ye():function(e,t){var n=function(e,s){for(var i=0;i<e.length;i++){var t=e[i];if(t.test(s))return t}}(e,t);if(!n)return{major:0,minor:0};var r=function(i){return Number(t.replace(n,"$"+i))};return Xe(r(1),r(2))}(e,n)},unknown:Ye},Je=function(e,t){return function(){return t===e}},Qe=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Je("Edge",t),isChrome:Je("Chrome",t),isIE:Je("IE",t),isOpera:Je("Opera",t),isFirefox:Je("Firefox",t),isSafari:Je("Safari",t)}},Ze={unknown:function(){return Qe({current:void 0,version:Ke.unknown()})},nu:Qe,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r("Firefox"),safari:r("Safari")},et=function(e,t){return function(){return t===e}},tt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:et("Windows",t),isiOS:et("iOS",t),isAndroid:et("Android",t),isOSX:et("OSX",t),isLinux:et("Linux",t),isSolaris:et("Solaris",t),isFreeBSD:et("FreeBSD",t)}},nt={unknown:function(){return tt({current:void 0,version:Ke.unknown()})},nu:tt,windows:r("Windows"),ios:r("iOS"),android:r("Android"),linux:r("Linux"),osx:r("OSX"),solaris:r("Solaris"),freebsd:r("FreeBSD")},ot=function(e,t){var n=String(t).toLowerCase();return F(e,function(e){return e.search(n)})},it=function(e,t){return ot(e,t).map(function(e){var n=Ke.detect(e.versionRegexes,t);return{current:e.name,version:n}})},at=function(e,t){return ot(e,t).map(function(e){var n=Ke.detect(e.versionRegexes,t);return{current:e.name,version:n}})},ut=function(e,t){return-1!==e.indexOf(t)},ct=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,st=function(e){return function(t){return ut(t,e)}},lt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ut(e,"edge/")&&ut(e,"chrome")&&ut(e,"safari")&&ut(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ct],search:function(e){return ut(e,"chrome")&&!ut(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ut(e,"msie")||ut(e,"trident")}},{name:"Opera",versionRegexes:[ct,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:st("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:st("firefox")},{name:"Safari",versionRegexes:[ct,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ut(e,"safari")||ut(e,"mobile/"))&&ut(e,"applewebkit")}}],ft=[{name:"Windows",search:st("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ut(e,"iphone")||ut(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:st("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:st("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:st("linux"),versionRegexes:[]},{name:"Solaris",search:st("sunos"),versionRegexes:[]},{name:"FreeBSD",search:st("freebsd"),versionRegexes:[]}],mt={browsers:r(lt),oses:r(ft)},gt=function(e){var t=mt.browsers(),n=mt.oses(),o=it(t,e).fold(Ze.unknown,Ze.nu),c=at(n,e).fold(nt.unknown,nt.nu),l=function(e,t,n){var o=e.isiOS()&&!0===/ipad/i.test(n),c=e.isiOS()&&!o,l=e.isAndroid()&&3===e.version.major,f=e.isAndroid()&&4===e.version.major,d=o||l||f&&!0===/mobile/i.test(n),m=e.isiOS()||e.isAndroid(),h=m&&!d,v=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:r(o),isiPhone:r(c),isTablet:r(d),isPhone:r(h),isTouch:r(m),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:r(v)}}(c,o,e);return{browser:o,os:c,deviceType:l}},ht={detect:Ge(function(){var t=e.navigator.userAgent;return gt(t)})},pt={tap:r("alloy.tap")},vt=r("alloy.focus"),bt=r("alloy.blur.post"),yt=r("alloy.paste.post"),xt=r("alloy.receive"),wt=r("alloy.execute"),Ct=r("alloy.focus.item"),St=pt.tap,kt=ht.detect().deviceType.isTouch()?pt.tap:We,Ot=r("alloy.longpress"),Tt=r("alloy.sandbox.close"),Et=r("alloy.typeahead.cancel"),Nt=r("alloy.system.init"),_t=r("alloy.system.scroll"),At=r("alloy.system.resize"),Dt=r("alloy.system.attached"),Rt=r("alloy.system.detached"),Bt=r("alloy.system.dismissRequested"),Mt=r("alloy.focusmanager.shifted"),It=r("alloy.slotcontainer.visibility"),zt=r("alloy.change.tab"),Pt=r("alloy.dismiss.tab"),Lt=r("alloy.highlight"),Ht=r("alloy.dehighlight"),Ft=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:r(e)}},Vt={fromHtml:function(html,t){var div=(t||e.document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw e.console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return Ft(div.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return Ft(r)},fromText:function(text,t){var n=(t||e.document).createTextNode(text);return Ft(n)},fromDom:Ft,fromPoint:function(e,t,n){var r=e.dom();return k.from(r.elementFromPoint(t,n)).map(Ft)}},jt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return P(e,function(e,i){o[e]=r(t[i])}),o}},Ut=function(e){return e.slice(0).sort()},Wt=function(label,e){if(!N(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");P(e,function(a){if(!T(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},$t=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return Wt("required",e),Wt("optional",t),function(e){var t=Ut(e);F(t,function(s,i){return i<t.length-1&&s===t[i+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})}(n),function(o){var c=ee(o);G(e,function(e){return M(c,e)})||function(e,t){throw new Error("All required keys ("+Ut(e).join(", ")+") were not specified. Specified keys were: "+Ut(t).join(", ")+".")}(e,c);var l=filter(c,function(e){return!M(n,e)});l.length>0&&function(e){throw new Error("Unsupported keys for object: "+Ut(e).join(", "))}(l);var f={};return P(e,function(e){f[e]=r(o[e])}),P(t,function(e){f[e]=r(Object.prototype.hasOwnProperty.call(o,e)?k.some(o[e]):k.none())}),f}},qt=void 0!==e.window?e.window:Function("return this;")(),Gt=function(p,e){return function(e,t){for(var n=null!=t?t:qt,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(p.split("."),e)},Yt={getOrDie:function(e,t){var n=function(e,t){return Gt(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}},Xt=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),Kt=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),Jt=e.Node.TEXT_NODE,Qt=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,Kt),Zt=Xt,en=function(element,e){var t=element.dom();if(t.nodeType!==Qt)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},tn=function(e){return e.nodeType!==Qt&&e.nodeType!==Zt||0===e.childElementCount},nn=function(t,n){var base=void 0===n?e.document:n.dom();return tn(base)?[]:map(base.querySelectorAll(t),Vt.fromDom)},rn=function(e,t){return e.dom()===t.dom()},on=(ht.detect().browser.isIE(),function(element){return Vt.fromDom(element.dom().ownerDocument)}),an=function(element){var e=element.dom().ownerDocument.defaultView;return Vt.fromDom(e)},un=function(element){var e=element.dom();return k.from(e.parentNode).map(Vt.fromDom)},cn=function(element){var e=element.dom();return k.from(e.offsetParent).map(Vt.fromDom)},sn=function(element){var e=element.dom();return map(e.childNodes,Vt.fromDom)},ln=function(element,e){var t=element.dom().childNodes;return k.from(t[e]).map(Vt.fromDom)},fn=(jt("element","offset"),function(marker,element){un(marker).each(function(e){e.dom().insertBefore(element.dom(),marker.dom())})}),dn=function(marker,element){(function(element){var e=element.dom();return k.from(e.nextSibling).map(Vt.fromDom)})(marker).fold(function(){un(marker).each(function(e){gn(e,element)})},function(e){fn(e,element)})},mn=function(e,element){(function(element){return ln(element,0)})(e).fold(function(){gn(e,element)},function(t){e.dom().insertBefore(element.dom(),t.dom())})},gn=function(e,element){e.dom().appendChild(element.dom())},hn=function(e,t){P(t,function(t){gn(e,t)})},pn=function(element){element.dom().textContent="",P(sn(element),function(e){vn(e)})},vn=function(element){var e=element.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},bn=function(element){return element.dom().innerHTML},yn=function(element,content){var html,div,t=on(element).dom(),n=Vt.fromDom(t.createDocumentFragment()),r=(html=content,(div=(t||e.document).createElement("div")).innerHTML=html,sn(Vt.fromDom(div)));hn(n,r),pn(element),gn(element,n)},xn=function(element){return element.dom().nodeName.toLowerCase()},wn=function(e){return function(element){return function(element){return element.dom().nodeType}(element)===e}},Cn=wn(Kt),Sn=wn(Jt),kn=wn(Xt),On=function(t,n,r){if(!(T(r)||_(r)||D(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},Tn=function(element,e,t){On(element.dom(),e,t)},En=function(element,e){var t=element.dom();ne(e,function(e,n){On(t,n,e)})},Nn=function(element,e){var t=element.dom().getAttribute(e);return null===t?void 0:t},_n=function(element,e){var t=element.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(e)},An=function(element,e){element.dom().removeAttribute(e)},Dn=function(e){return function(e,t){return Vt.fromDom(e.dom().cloneNode(t))}(e,!1)},Rn=function(element){return function(element){var e=Vt.fromTag("div"),t=Vt.fromDom(element.dom().cloneNode(!0));return gn(e,t),bn(e)}(Dn(element))},element=function(e){return Rn(e)},Bn="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__";!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(f||(f={}));var Mn=Ne({}),In=function(t,n,r){switch(Se(Mn.get(),t).orThunk(function(){var e=ee(Mn.get());return Ae(e,function(p){return t.indexOf(p)>-1?k.some(Mn.get()[p]):k.none()})}).getOr(f.NORMAL)){case f.NORMAL:return r(Fn());case f.LOGGING:var o=function(t,n){var r=[],o=(new Date).getTime();return{logEventCut:function(e,t,n){r.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){r.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){r.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){r.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){r.push({outcome:"response",purpose:n,target:t})},write:function(){var c=(new Date).getTime();M(["mousemove","mouseover","mouseout",Nt()],t)||e.console.log(t,{event:t,time:c-o,target:n.dom(),sequence:map(r,function(s){return M(["cut","stopped","response"],s.outcome)?"{"+s.purpose+"} "+s.outcome+" at ("+element(s.target)+")":s.outcome})})}}}(t,n),output=r(o);return o.write(),output;case f.STOP:return!0}},zn=["alloy/data/Fields","alloy/debugging/Debugging"],Pn=function(e,t,n){return In(e,t,n)},Ln=function(){if(void 0!==e.window[Bn])return e.window[Bn];var t=function(e,t){var n=Mn.get();n[e]=t,Mn.set(n)};return e.window[Bn]={systems:{},lookup:function(t){var n=e.window[Bn].systems,r=ee(n);return Ae(r,function(e){return n[e].getByUid(t).toOption().map(function(e){return ke(element(e.element()),function(e){var t=function(e){var n=e.spec();return{"(original.spec)":n,"(dom.ref)":e.element().dom(),"(element)":element(e.element()),"(initComponents)":map(void 0!==n.components?n.components:[],t),"(components)":map(e.components(),t),"(bound.events)":ie(e.events(),function(e,t){return[t]}).join(", "),"(behaviours)":void 0!==n.behaviours?re(n.behaviours,function(t,n){return void 0===t?"--revoked--":{config:t.configAsRaw(),"original-config":t.initialConfig,state:e.readState(n)}}):"none"}};return t(e)}(e))})}).orThunk(function(){return k.some({error:"Systems ("+r.join(", ")+") did not contain uid: "+t})})},events:{setToNormal:function(e){t(e,f.NORMAL)},setToLogging:function(e){t(e,f.LOGGING)},setToStop:function(e){t(e,f.STOP)}}},e.window[Bn]},Hn=function(e,t){Ln().systems[e]=t},Fn=r({logEventCut:t,logEventStopped:t,logNoParent:t,logEventNoHandlers:t,logEventResponse:t,write:t}),Vn=0,jn=function(e){var time=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Vn+String(time)},Un=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Wn=function(){return(Wn=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};function $n(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&(t[p[i]]=s[p[i]])}return t}var qn,Gn=he([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Yn=function(e){return Gn.defaultedThunk(r(e))},Xn=Gn.strict,Kn=Gn.asOption,Jn=Gn.defaultedThunk,Qn=(Gn.asDefaultedOptionThunk,Gn.mergeWithThunk);!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(qn||(qn={}));var Zn=function(e,t,n){return e.stype===qn.Error?t(e.serror):n(e.svalue)},er=function(e){return{stype:qn.Value,svalue:e}},nr=function(e){return{stype:qn.Error,serror:e}},rr=function(e){return e.fold(nr,er)},or=function(e){return Zn(e,ge.error,ge.value)},ir=er,ar=function(e){var t=[],n=[];return P(e,function(e){Zn(e,function(e){return n.push(e)},function(e){return t.push(e)})}),{values:t,errors:n}},ur=nr,cr=function(e,t){return e.stype===qn.Value?t(e.svalue):e},sr=function(e,t){return e.stype===qn.Error?t(e.serror):e},lr=function(e,t){return e.stype===qn.Value?{stype:qn.Value,svalue:t(e.svalue)}:e},fr=function(e,t){return e.stype===qn.Error?{stype:qn.Error,serror:t(e.serror)}:e},dr=function(e){return n(ur,W)(e)},mr=function(e,base){var t=ar(e);return t.errors.length>0?dr(t.errors):function(e,base){return e.length>0?ir(be(base,ye.apply(void 0,e))):ir(base)}(t.values,base)},gr=function(e){var t=ar(e);return t.errors.length>0?dr(t.errors):ir(t.values)},pr=he([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),vr=he([{field:["name","presence","type"]},{state:["name"]}]),yr=function(){return Yt.getOrDie("JSON")},xr=function(e,t,n){return yr().stringify(e,t,n)},wr=function(input){return E(input)&&ee(input).length>100?" removed due to size":xr(input,null,2)},Cr=function(path,e){return ur([{path:path,getErrorInfo:e}])},Sr=he([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),kr=function(path,e,t){return le(e,t).fold(function(){return function(path,e,t){return Cr(path,function(){return'Could not find valid *strict* value for "'+e+'" in '+wr(t)})}(path,t,e)},ir)},Or=function(e,t,n){var r=le(e,t).fold(function(){return n(e)},o);return ir(r)},Tr=function(path,e,t,n){return t.fold(function(t,o,c,l){var f=function(e){var r=l.extract(path.concat([t]),n,e);return lr(r,function(e){return fe(o,n(e))})},d=function(e){return e.fold(function(){var e=fe(o,n(k.none()));return ir(e)},function(e){var r=l.extract(path.concat([t]),n,e);return lr(r,function(e){return fe(o,n(k.some(e)))})})};return c.fold(function(){return cr(kr(path,e,t),f)},function(n){return cr(Or(e,t,n),f)},function(){return cr(function(e,t){return ir(le(e,t))}(e,t),d)},function(n){return cr(function(e,t,n){var r=le(e,t).map(function(t){return!0===t?n(e):t});return ir(r)}(e,t,n),d)},function(n){var base=n(e),o=lr(Or(e,t,r({})),function(e){return be(base,e)});return cr(o,f)})},function(t,r){var o=r(e);return ir(fe(t,n(o)))})},Er=function(e){return{extract:function(path,t,n){return sr(e(n,t),function(e){return function(path,e){return Cr(path,function(){return e})}(path,e)})},toString:function(){return"val"},toDsl:function(){return pr.itemOf(e)}}},Nr=function(e){var t=ee(e);return filter(t,function(t){return Ee(e,t)})},_r=function(e){var t=Ar(e),n=L(e,function(e,t){return t.fold(function(t){return be(e,ke(t,!0))},r(e))},{});return{extract:function(path,e,r){var o=_(r)?[]:Nr(r),c=filter(o,function(e){return!Ee(n,e)});return 0===c.length?t.extract(path,e,r):function(path,e){return Cr(path,function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"})}(path,c)},toString:t.toString,toDsl:t.toDsl}},Ar=function(e){return{extract:function(path,t,n){return function(path,e,t,n){var r=map(t,function(t){return Tr(path,e,t,n)});return mr(r,{})}(path,n,e,t)},toString:function(){return"obj{\n"+map(e,function(e){return e.fold(function(e,t,n,r){return e+" -> "+r.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"},toDsl:function(){return pr.objOf(map(e,function(e){return e.fold(function(e,t,n,r){return vr.field(e,n,r)},function(e,t){return vr.state(e)})}))}}},Dr=function(e){return{extract:function(path,t,n){var r=map(n,function(a,i){return e.extract(path.concat(["["+i+"]"]),t,a)});return gr(r)},toString:function(){return"array("+e.toString()+")"},toDsl:function(){return pr.arrOf(e)}}},Rr=function(e,t){return{extract:function(path,n,r){var c=ee(r),l=function(path,t){return Dr(Er(e)).extract(path,o,t)}(path,c);return cr(l,function(e){var o=map(e,function(e){return Sr.field(e,e,Xn(),t)});return Ar(o).extract(path,n,r)})},toString:function(){return"setOf("+t.toString()+")"},toDsl:function(){return pr.setOf(e,t)}}},Br=r(Er(ir)),Mr=n(Dr,Ar),Ir=Sr.state,zr=Sr.field,Pr=function(path,e,input,t,n){return Se(t,n).fold(function(){return function(path,e,t){return Cr(path,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+wr(e)})}(path,t,n)},function(t){return Ar(t).extract(path.concat(["branch: "+n]),e,input)})},Lr=function(e,t){return{extract:function(path,n,input){return Se(input,e).fold(function(){return function(path,e){return Cr(path,function(){return'Choice schema did not contain choice key: "'+e+'"'})}(path,e)},function(e){return Pr(path,n,input,t,e)})},toString:function(){return"chooseOn("+e+"). Possible values: "+ee(t)},toDsl:function(){return pr.choiceOf(e,t)}}},Hr=Er(ir),Fr=function(e){return Er(function(t){return e(t).fold(ur,ir)})},Vr=function(e,t){return Rr(function(t){return rr(e(t))},t)},jr=function(label,e,t){return or(function(label,e,t,n){var r=e.extract([label],t,n);return fr(r,function(e){return{input:n,errors:e}})}(label,e,o,t))},Ur=function(e){return e.fold(function(e){throw new Error($r(e))},o)},Wr=function(label,e,t){return Ur(jr(label,e,t))},$r=function(e){return"Errors: \n"+(t=e.errors,n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,map(n,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))+"\n\nInput object: "+wr(e.input);var t,n},qr=function(e,t){return Lr(e,t)},Gr=r(Hr),Yr=function(e,t){return Er(function(a){var n=typeof a;return e(a)?ir(a):ur("Expected type: "+t+" but got: "+n)})},Xr=Yr(D,"number"),Kr=Yr(T,"string"),Jr=Yr(_,"boolean"),Qr=Yr(A,"function"),Zr=function(e){return Fr(function(t){return M(e,t)?ge.value(t):ge.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')})},eo=function(e){return zr(e,e,Xn(),Br())},to=function(e,t){return zr(e,e,Xn(),t)},no=function(e){return to(e,Kr)},ro=function(e,t){return zr(e,e,Xn(),Zr(t))},oo=function(e){return to(e,Qr)},io=function(e,t){return zr(e,e,Xn(),Ar(t))},ao=function(e,t){return zr(e,e,Xn(),Mr(t))},uo=function(e,t){return zr(e,e,Xn(),Dr(t))},option=function(e){return zr(e,e,Kn(),Br())},co=function(e,t){return zr(e,e,Kn(),t)},so=function(e){return co(e,Kr)},lo=function(e){return co(e,Qr)},fo=function(e,t){return zr(e,e,Kn(),Ar(t))},mo=function(e,t){return zr(e,e,Yn(t),Br())},go=function(e,t,n){return zr(e,e,Yn(t),n)},ho=function(e,t){return go(e,t,Xr)},po=function(e,t){return go(e,t,Kr)},vo=function(e,t,n){return go(e,t,Zr(n))},bo=function(e,t){return go(e,t,Jr)},yo=function(e,t){return go(e,t,Qr)},xo=function(e,t,n){return zr(e,e,Yn(t),Ar(n))},wo=function(e,t){return Ir(e,t)},Co=function(component,e){return rn(component.element(),e.event().target())},So=function(e){if(!Ee(e,"can")&&!Ee(e,"abort")&&!Ee(e,"run"))throw new Error("EventHandler defined by: "+xr(e,null,2)+" does not have can, abort, or run!");return Wr("Extracting event.handler",_r([mo("can",r(!0)),mo("abort",r(!1)),mo("run",t)]),e)},ko=function(e){var t=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return H(e,function(e,r){return e&&t(r).apply(void 0,n)},!0)}}(e,function(e){return e.can}),n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return H(e,function(e,r){return e||t(r).apply(void 0,n)},!1)}}(e,function(e){return e.abort});return So({can:t,abort:n,run:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];P(e,function(e){e.run.apply(void 0,t)})}})},Oo=function(component,e){_o(component,component.element(),e,{})},To=function(component,e,t){_o(component,component.element(),e,t)},Eo=function(component){Oo(component,wt())},No=function(component,e,t){_o(component,e,t,{})},_o=function(component,e,t,n){var data=Wn({target:e},n);component.getSystem().triggerEvent(t,e,re(data,r))},Ao=function(component,e,t,n){component.getSystem().triggerEvent(t,e,n.event())};function Do(e,t,n,a,r){return e(n,a)?k.some(n):A(r)&&r(n)?k.none():t(n,a,r)}var Ro=function(element){var e=Sn(element)?element.dom().parentNode:element.dom();return null!=e&&e.ownerDocument.body.contains(e)},body=Ge(function(){return Bo(Vt.fromDom(e.document))}),Bo=function(e){var b=e.dom().body;if(null==b)throw new Error("Body is not available yet");return Vt.fromDom(b)},Mo=function(e,t,n){for(var element=e.dom(),o=A(n)?n:r(!1);element.parentNode;){element=element.parentNode;var c=Vt.fromDom(element);if(t(c))return k.some(c);if(o(c))break}return k.none()},Io=function(e,t,n){return Do(function(s){return t(s)},Mo,e,t,n)},zo=function(e,t){var n=function(e){for(var i=0;i<e.childNodes.length;i++){if(t(Vt.fromDom(e.childNodes[i])))return k.some(Vt.fromDom(e.childNodes[i]));var r=n(e.childNodes[i]);if(r.isSome())return r}return k.none()};return n(e.dom())},Po=function(e,t,n){return Io(e,function(e){return t(e).isSome()},n).bind(t)},Lo=function(e){return Oe(e)},Ho=function(e,t){return{key:e,value:So({abort:t})}},Fo=function(e){return{key:e,value:So({run:function(component,e){e.event().prevent()}})}},Vo=function(e,t){return{key:e,value:So({run:t})}},jo=function(e,t,n){return{key:e,value:So({run:function(component){t.apply(void 0,[component].concat(n))}})}},Uo=function(e){return function(t){return{key:e,value:So({run:function(component,e){Co(component,e)&&t(component,e)}})}}},Wo=function(e,t,n){return function(e,t){return Vo(e,function(component,n){component.getSystem().getByUid(t).each(function(t){Ao(t,t.element(),e,n)})})}(e,t.partUids[n])},$o=function(e,t){return Vo(e,function(component,e){var n=e.event(),o=component.getSystem().getByDom(n.target()).fold(function(){return Po(n.target(),function(e){return component.getSystem().getByDom(e).toOption()},r(!1)).getOr(component)},function(e){return e});t(component,o,e)})},qo=function(e){return Vo(e,function(component,e){e.cut()})},Go=function(e){return Vo(e,function(component,e){e.stop()})},Yo=function(e,t){return Uo(e)(t)},Xo=Uo(Dt()),Ko=Uo(Rt()),Jo=Uo(Nt()),Qo=function(e){return function(t){return Vo(e,t)}}(wt()),Zo=Lo([function(e,t){return{key:e,value:So({can:t})}}(vt(),function(component,t){var n=t.event().originator(),r=t.event().target();return!function(component,e,t){return rn(e,component.element())&&!rn(e,t)}(component,n,r)||(e.console.warn(vt()+" did not get interpreted by the desired target. \nOriginator: "+element(n)+"\nTarget: "+element(r)+"\nCheck the "+vt()+" event handlers"),!1)})]),ei=Object.freeze({events:Zo}),ti=r("alloy-id-"),ni=r("data-alloy-id"),ri=ti(),oi=ni(),ii=function(label,e){var t=jn(ri+label);return ai(e,t),t},ai=function(e,t){Object.defineProperty(e.dom(),oi,{value:t,writable:!0})},ui=function(e){var t=Cn(e)?e.dom()[oi]:null;return k.from(t)},ci=function(e){return jn(e)},si=o,fi=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+element(e().element())+" is not in context.")}};return{debugInfo:r("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:r(!1)}},di=fi(),mi=function(e){return map(e,function(p){return function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t}(e=p,t="/*",e.length-t.length)?p.substring(0,p.length-"/*".length):p;var e,t})},gi=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),c=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:mi(c)}},e},hi=jn("alloy-premade"),pi=function(e){return ke(hi,e)},vi=function(e){return function(e,t){var n=t.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),c=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:mi(c.slice(1))}},e}(function(component){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.apply(void 0,[component.getApis()].concat([component].concat(t)))},e)},bi={init:function(){return yi({readState:function(){return"No State required"}})}},yi=function(e){return e},xi=function(data,e){var t={};return ne(data,function(n,r){ne(n,function(n,o){var c=Ce(o,[])(t);t[o]=c.concat([e(r,n)])})}),t},wi=function(s){return{classes:void 0!==s.classes?s.classes:[],attributes:void 0!==s.attributes?s.attributes:{},styles:void 0!==s.styles?s.styles:{}}},Ci=function(e,t){return n=c.apply(void 0,[e.handler].concat(t)),o=e.purpose(),{cHandler:n,purpose:r(o)};var n,o},Si=function(e){return e.cHandler},ki=function(e,t){return{name:r(e),handler:r(t)}},Oi=function(e,t,base){var n=Wn({},base,function(e,t){var n={};return P(e,function(e){n[e.name()]=e.handlers(t)}),n}(t,e));return xi(n,ki)},Ti=function(e){var t=function(e){return A(e)?{can:r(!0),abort:r(!1),run:e}:e}(e);return function(component,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[component,e].concat(n);t.abort.apply(void 0,o)?e.stop():t.can.apply(void 0,o)&&t.run.apply(void 0,o)}},Ei=function(e,t,n){var r=t[n];return r?function(label,e,t,n){var r=t.slice(0);try{var o=r.sort(function(a,b){var t=a[e](),r=b[e](),o=n.indexOf(t),c=n.indexOf(r);if(-1===o)throw new Error("The ordering for "+label+" does not have an entry for "+t+".\nOrder specified: "+xr(n,null,2));if(-1===c)throw new Error("The ordering for "+label+" does not have an entry for "+r+".\nOrder specified: "+xr(n,null,2));return o<c?-1:c<o?1:0});return ge.value(o)}catch(e){return ge.error([e])}}("Event: "+n,"name",e,r).map(function(e){var t=map(e,function(e){return e.handler()});return ko(t)}):function(e,t){return ge.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+xr(map(t,function(e){return e.name()}),null,2)])}(n,e)},Ni=function(e,t){var n=ie(e,function(e,n){return(1===e.length?ge.value(e[0].handler()):Ei(e,t,n)).map(function(o){var c=Ti(o),l=e.length>1?filter(t,function(t){return M(e,function(e){return e.name()===t})}).join(" > "):e[0].name();return ke(n,function(e,t){return{handler:e,purpose:r(t)}}(c,l))})});return Te(n,{})},_i=function(e){return e.events},Ai=function(element,e){var t=Nn(element,e);return void 0===t||""===t?[]:t.split(" ")},Di=function(element){return void 0!==element.dom().classList},Ri=function(element,e){return function(element,e,t){var n=Ai(element,e).concat([t]);return Tn(element,e,n.join(" ")),!0}(element,"class",e)},Bi=function(element,e){return function(element,e,t){var n=filter(Ai(element,e),function(e){return e!==t});return n.length>0?Tn(element,e,n.join(" ")):An(element,e),!1}(element,"class",e)},Mi=function(element,e){Di(element)?element.dom().classList.add(e):Ri(element,e)},Ii=function(element){0===(Di(element)?element.dom().classList:function(element){return Ai(element,"class")}(element)).length&&An(element,"class")},zi=function(element,e){Di(element)?element.dom().classList.remove(e):Bi(element,e),Ii(element)},Pi=function(element,e){return Di(element)&&element.dom().classList.contains(e)},Li=function(element,e){P(e,function(e){Mi(element,e)})},Hi=function(element,e){P(e,function(e){zi(element,e)})},Fi=function(e){return void 0!==e.style},Vi=function(t,n,r){if(!T(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);Fi(t)&&t.style.setProperty(n,r)},ji=function(e,t){Fi(e)&&e.style.removeProperty(t)},Ui=function(element,e,t){var n=element.dom();Vi(n,e,t)},Wi=function(element,e){var t=element.dom();ne(e,function(e,n){Vi(t,n,e)})},$i=function(element,t){var n=element.dom(),r=e.window.getComputedStyle(n).getPropertyValue(t),o=""!==r||Ro(element)?r:qi(n,t);return null===o?void 0:o},qi=function(e,t){return Fi(e)?e.style.getPropertyValue(t):""},Gi=function(element,e){var t=element.dom(),n=qi(t,e);return k.from(n).filter(function(e){return e.length>0})},Yi=function(e,t,n){var element=Vt.fromTag(e);return Ui(element,t,n),Gi(element,t).isSome()},Xi=function(element,e){var t=element.dom();ji(t,e),_n(element,"style")&&""===Nn(element,"style").replace(/^\s+|\s+$/g,"")&&An(element,"style")},Ki=function(e){return e.dom().offsetWidth},Ji=function(element){return element.dom().value},Qi=function(element,e){if(void 0===e)throw new Error("Value.set was undefined");element.dom().value=e},Zi=function(e,t){return function(e,t){var n=map(t,function(a){return fo(a.name(),[eo("config"),mo("state",bi)])}),r=jr("component.behaviours",Ar(n),e.behaviours).fold(function(t){throw new Error($r(t)+"\nComplete spec:\n"+xr(e,null,2))},function(e){return e});return{list:t,data:re(r,function(e){var output=e.map(function(e){return{config:e.config,state:e.state.init(e.config)}});return function(){return output}})}}(e,t)},ea=function(e){var t=function(e){var t=Ce("behaviours",{})(e),n=filter(ee(t),function(e){return void 0!==t[e]});return map(n,function(e){return t[e].me})}(e);return Zi(e,t)},ta=function(e,t,n){var r,o,c,l=Wn({},(r=e).dom,{uid:r.uid,domChildren:map(r.components,function(e){return e.element()})}),f=function(e){return e.domModification.fold(function(){return wi({})},wi)}(e),d={"alloy.base.modification":f},m=t.length>0?function(e,t,n,base){var r=Wn({},t);P(n,function(t){r[t.name()]=t.exhibit(e,base)});var o=xi(r,function(e,t){return{name:e,modification:t}}),c=function(e){return L(e,function(b,a){return Wn({},a.modification,b)},{})},l=L(o.classes,function(b,a){return a.modification.concat(b)},[]),f=c(o.attributes),d=c(o.styles);return wi({classes:l,attributes:f,styles:d})}(n,d,t,l):f;return c=m,Wn({},o=l,{attributes:Wn({},o.attributes,c.attributes),styles:Wn({},o.styles,c.styles),classes:o.classes.concat(c.classes)})},na=function(e,t,n){var r={"alloy.base.behaviour":_i(e)};return function(e,t,n,base){var r=Oi(e,n,base);return Ni(r,t)}(n,e.eventOrder,t,r).getOrDie()},ra=function(e){var t=function(){return v},n=Ne(di),o=Ur(function(e){return jr("custom.definition",Ar([zr("dom","dom",Xn(),Ar([eo("tag"),mo("styles",{}),mo("classes",[]),mo("attributes",{}),option("value"),option("innerHtml")])),eo("components"),eo("uid"),mo("events",{}),mo("apis",{}),zr("eventOrder","eventOrder",(base={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]},Gn.mergeWithThunk(r(base))),Gr()),option("domModification")]),e);var base}(e)),c=ea(e),l=function(e){return e.list}(c),f=function(e){return e.data}(c),d=function(e){var t=Vt.fromTag(e.tag);En(t,e.attributes),Li(t,e.classes),Wi(t,e.styles),e.innerHtml.each(function(html){return yn(t,html)});var n=e.domChildren;return hn(t,n),e.value.each(function(e){Qi(t,e)}),e.uid,ai(t,e.uid),t}(ta(o,l,f)),m=na(o,l,f),h=Ne(o.components),v={getSystem:n.get,config:function(t){var b=f;return(A(b[t.name()])?b[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+xr(e,null,2))})()},hasConfigured:function(e){return A(f[e.name()])},spec:r(e),readState:function(e){return f[e]().map(function(b){return b.state.readState()}).getOr("not enabled")},getApis:function(){return o.apis},connect:function(e){n.set(e)},disconnect:function(){n.set(fi(t))},element:r(d),syncComponents:function(){var e=sn(d),t=$(e,function(e){return n.get().getByDom(e).fold(function(){return[]},function(e){return[e]})});h.set(t)},components:h.get,events:r(m)};return v},oa=function(e){var t=si(e),n=t.events,r=$n(t,["events"]),o=function(e){var t=Ce("components",[])(e);return map(t,ua)}(r),c=Wn({},r,{events:Wn({},ei,n),components:o});return ge.value(ra(c))},text=function(e){var element=Vt.fromText(e);return ia({element:element})},ia=function(e){var n=Wr("external.component",_r([eo("element"),option("uid")]),e),o=Ne(fi());n.uid.each(function(e){ai(n.element,e)});var c={getSystem:o.get,config:k.none,hasConfigured:r(!1),connect:function(e){o.set(e)},disconnect:function(){o.set(fi(function(){return c}))},getApis:function(){return{}},element:r(n.element),spec:r(e),readState:r("No state"),syncComponents:t,components:r([]),events:r({})};return pi(c)},aa=ci,ua=function(e){return function(e){return Se(e,hi)}(e).fold(function(){var t=e.hasOwnProperty("uid")?e:Wn({uid:aa("")},e);return oa(t).getOrDie()},function(e){return e})},ca=pi,sa=function(e,t,n){return Mo(e,function(e){return en(e,t)},n)},la=function(t,n){return function(t,n){var base=void 0===n?e.document:n.dom();return tn(base)?k.none():k.from(base.querySelector(t)).map(Vt.fromDom)}(n,t)},fa=function(e,t,n){return Do(en,sa,e,t,n)},da=function(component,e){return function(e){return Io(e,function(e){if(!Cn(e))return!1;var t=Nn(e,"id");return void 0!==t&&t.indexOf("aria-owns")>-1}).bind(function(e){var t=Nn(e,"id"),n=on(e);return la(n,'[aria-owns="'+t+'"]')})}(e).exists(function(e){return ma(component,e)})},ma=function(component,e){return t=e,n=function(e){return rn(e,component.element())},o=r(!1),Io(t,n,o).isSome()||da(component,e);var t,n,o},ga=r([eo("menu"),eo("selectedMenu")]),ha=r([eo("item"),eo("selectedItem")]),pa=(r(Ar(ha().concat(ga()))),r(Ar(ha()))),va=io("initSize",[eo("numColumns"),eo("numRows")]),ba=function(){return io("markers",[eo("backgroundMenu")].concat(ga()).concat(ha()))},ya=function(e){return io("markers",map(e,eo))},xa=function(label,e,t){return function(){var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");F(t,function(line){return line.indexOf("alloy")>0&&!I(zn,function(p){return line.indexOf(p)>-1})}).getOr("unknown")}}(),zr(e,e,t,Fr(function(e){return ge.value(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)})}))},wa=function(e){return xa(0,e,Yn(t))},Ca=function(e){return xa(0,e,Yn(k.none))},Sa=function(e){return xa(0,e,Xn())},ka=function(e){return xa(0,e,Xn())},output=function(e,t){return wo(e,r(t))},Oa=function(e){return wo(e,o)},Ta=r(va),Ea=function(e,t,n){return Jo(function(component,r){n(component,e,t)})},Na=function(e,t,n){return function(e,t,n){var r=n.toString(),o=r.indexOf(")")+1,c=r.indexOf("("),l=r.substring(c+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:mi(l.slice(0,1).concat(l.slice(3)))}},e}(function(component){for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var l=[component].concat(o);return component.config({name:r(e)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)},function(e){var n=Array.prototype.slice.call(l,1);return t.apply(void 0,[component,e.config,e.state].concat(n))})},n,t)},_a=function(e){return{key:e,value:void 0}},Aa=function(e,t,n,r,o,l,f){var d=function(e){return Ee(e,n)?e[n]():k.none()},m=re(o,function(e,t){return Na(n,e,t)}),h=re(l,function(e,t){return gi(e,t)}),v=Wn({},h,m,{revoke:c(_a,n),config:function(t){var r=Wr(n+"-config",e,t);return{key:n,value:{config:r,me:v,configAsRaw:Ge(function(){return Wr(n+"-config",e,t)}),initialConfig:t,state:f}}},schema:function(){return t},exhibit:function(e,base){return d(e).bind(function(e){return Se(r,"exhibit").map(function(t){return t(base,e.config,e.state)})}).getOr(wi({}))},name:function(){return n},handlers:function(e){return d(e).map(function(e){return Ce("events",function(a,b){return{}})(r)(e.config,e.state)}).getOr({})}});return v},Da=function(e){return Oe(e)},Ra=_r([eo("fields"),eo("name"),mo("active",{}),mo("apis",{}),mo("state",bi),mo("extra",{})]),Ba=function(data){var e,t,n,r,o,c,l,f,d,m,h=Wr("Creating behaviour: "+data.name,Ra,data);return e=h.fields,t=h.name,n=h.active,r=h.apis,o=h.extra,c=h.state,d=_r(e),m=fo(t,[(l="config",f=e,zr(l,l,Kn(),_r(f)))]),Aa(d,m,t,n,r,o,c)},Ma=_r([eo("branchKey"),eo("branches"),eo("name"),mo("active",{}),mo("apis",{}),mo("state",bi),mo("extra",{})]),Ia=function(data){var e,t,n,r,o,c,l,f,d=Wr("Creating behaviour: "+data.name,Ma,data);return e=qr(d.branchKey,d.branches),t=d.name,n=d.active,r=d.apis,o=d.extra,c=d.state,l=e,f=fo(t,[co("config",e)]),Aa(l,f,t,n,r,o,c)},za=r(void 0),Pa=Object.freeze({events:function(e){return Lo([Vo(xt(),function(component,t){var n=e.channels,r=function(e,t){return t.universal()?e:filter(e,function(e){return M(t.channels(),e)})}(ee(n),t);P(r,function(e){var r=n[e],o=r.schema,data=Wr("channel["+e+"] data\nReceiver: "+element(component.element()),o,t.data());r.onReceive(component,data)})})])}}),La=[to("channels",Vr(ge.value,_r([Sa("onReceive"),mo("schema",Gr())])))],Ha=Ba({fields:La,name:"receiving",active:Pa}),Fa=Object.freeze({exhibit:function(base,e){return wi({classes:[],styles:e.useFixed?{}:{position:"relative"}})}}),Va=function(e,t){return{left:r(e),top:r(t),translate:function(n,r){return Va(e+n,t+r)}}},ja=Va,Ua=function(a,b){return void 0!==a?a:void 0!==b?b:0},Wa=function(element){var t=element.dom().ownerDocument,body=t.body,n=function(element){var t=element.dom();return t===t.window&&element instanceof e.Window?element:kn(element)?t.defaultView||t.parentWindow:null}(Vt.fromDom(t)),html=t.documentElement,r=Ua(n.pageYOffset,html.scrollTop),o=Ua(n.pageXOffset,html.scrollLeft),c=Ua(html.clientTop,body.clientTop),l=Ua(html.clientLeft,body.clientLeft);return $a(element).translate(o-l,r-c)},$a=function(element){var t=element.dom(),n=t.ownerDocument,body=n.body,html=Vt.fromDom(n.documentElement);return body===t?ja(body.offsetLeft,body.offsetTop):function(element,t){var n=t||Vt.fromDom(e.document.documentElement);return Mo(element,c(rn,n)).isSome()}(element,html)?function(e){var t=e.getBoundingClientRect();return ja(t.left,t.top)}(t):ja(0,0)},qa=(ht.detect().browser.isSafari(),function(t){var n=void 0!==t?t.dom():e.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return ja(r,o)});function Ga(e,t){var n=function(element){var n=t(element);if(n<=0||null===n){var r=$i(element,e);return parseFloat(r)||0}return n},r=function(element,e){return H(e,function(e,t){var n=$i(element,t),r=void 0===n?0:parseInt(n,10);return isNaN(r)?e:e+r},0)};return{set:function(element,t){if(!D(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);var n=element.dom();Fi(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:r,max:function(element,e,t){var n=r(element,t);return e>n?e-n:0}}}var Ya,Xa=Ga("width",function(element){return element.dom().offsetWidth}),Ka=function(element){return Xa.get(element)},Ja=function(element){return Xa.getOuter(element)},Qa=Ga("height",function(element){var e=element.dom();return Ro(element)?e.getBoundingClientRect().height:e.offsetHeight}),Za=function(element){return Qa.get(element)},eu=function(element){return Qa.getOuter(element)},tu=$t(["x","y","width","height","maxHeight","direction","classes","label","candidateYforTest"],[]),nu=jt("position","left","top","right","bottom"),ru=he([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ou=ru.southeast,iu=ru.southwest,au=ru.northeast,uu=ru.northwest,cu=ru.south,su=ru.north,lu=ru.east,fu=ru.west,du=jt("point","width","height"),rect=jt("x","y","width","height"),mu=function(e,t,n,o){return{x:r(e),y:r(t),width:r(n),height:r(o),right:r(e+n),bottom:r(t+o)}},gu=function(element){var e=Wa(element),t=Ja(element),n=eu(element);return mu(e.left(),e.top(),t,n)},hu=function(e,t){return e.view(t).fold(r([]),function(t){var n=e.owner(t),r=hu(e,n);return[t].concat(r)})},pu=Object.freeze({view:function(t){return(t.dom()===e.document?k.none():k.from(t.dom().defaultView.frameElement)).map(Vt.fromDom)},owner:function(element){return on(element)}}),vu=function(element){var t=Vt.fromDom(e.document),n=qa(t);return function(element,e){var t=e.owner(element),n=hu(e,t);return k.some(n)}(element,pu).fold(c(Wa,element),function(e){var t=$a(element),r=L(e,function(b,a){var e=$a(a);return{left:b.left+e.left(),top:b.top+e.top()}},{left:0,top:0});return ja(r.left+t.left()+n.left(),r.top+t.top()+n.top())})},bu=function(){var t=e.window.innerWidth,n=e.window.innerHeight,r=Vt.fromDom(e.document),o=qa(r);return mu(o.left(),o.top(),t,n)},yu=he([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),xu=function(e,t,n,r,o,c){var l,f,d,m,h,v,y,x,w,C=t.x()-n,S=t.y()-r,O=o-(C+t.width()),T=c-(S+t.height()),E=k.some(C),N=k.some(S),_=k.some(O),A=k.some(T),D=k.none();return l=t.direction(),f=function(){return nu(e,E,N,D,D)},d=function(){return nu(e,D,N,_,D)},m=function(){return nu(e,E,D,D,A)},h=function(){return nu(e,D,D,_,A)},v=function(){return nu(e,E,N,D,D)},y=function(){return nu(e,E,D,D,A)},x=function(){return nu(e,E,N,D,D)},w=function(){return nu(e,D,N,_,D)},l.fold(f,d,m,h,v,y,x,w)},wu=function(e,element){var t=c(vu,element),n=e.fold(t,t,function(){var e=qa();return vu(element).translate(-e.left(),-e.top())}),r=Ja(element),o=eu(element);return mu(n.left(),n.top(),r,o)},Cu=function(e,t){return t.fold(function(){return e.fold(bu,bu,mu)},function(b){return e.fold(b,b,mu)})},Su=yu.relative,ku=yu.fixed,Ou=jt("anchorBox","origin"),Tu=function(e,t){return Ou(e,t)},Eu=he([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Nu=function(e,t,n,l,f){var d=n.width(),m=n.height(),h=function(e,o,c,h){return function(e,t,n,o){var c,l,f,d,m=e.x(),h=e.y(),v=e.bubble().offset().left(),y=e.bubble().offset().top(),x=o.x(),w=o.y(),C=o.width(),S=o.height(),k=m+v,O=h+y,T=k>=x,E=O>=w,N=T&&E,_=k+t<=x+C&&O+n<=w+S,A=T?Math.min(t,x+C-k):Math.abs(x-(k+t)),D=E?Math.min(n,w+S-O):Math.abs(w-(O+n)),R=o.x()+o.width(),B=Math.max(o.x(),k),M=Math.min(B,R),I=E?O:O+(n-D),z=r(I+D-w),P=r(w+S-I),L=(c=e.direction(),l=P,f=P,d=z,c.fold(l,l,d,d,l,d,f,f)),H=tu({x:M,y:I,width:A,height:D,maxHeight:L,direction:e.direction(),classes:{on:e.bubble().classesOn(),off:e.bubble().classesOff()},label:e.label(),candidateYforTest:O});return N&&_?Eu.fit(H):Eu.nofit(H,A,D)}(e(t,n,l),d,m,f).fold(Eu.fit,function(e,t,n){return n>h||t>c?Eu.nofit(e,t,n):Eu.nofit(o,c,h)})};return H(e,function(b,a){var e=c(h,a);return b.fold(Eu.fit,e)},Eu.nofit(tu({x:t.x(),y:t.y(),width:n.width(),height:n.height(),maxHeight:n.height(),direction:ou(),classes:[],label:"none",candidateYforTest:t.y()}),-1,-1)).fold(o,o)},_u=function(e,element,t,n){Xi(element,"max-height");var p,o={width:r(Ja(p=element)),height:r(eu(p))};return Nu(n.preference(),e,o,t,n.bounds())},Au=function(element,e,t){var n=function(e){return e+"px"},r=function(e,t){return e.fold(function(){return nu("absolute",k.some(t.x()),k.some(t.y()),k.none(),k.none())},function(e,n,r,o){return xu("absolute",t,e,n,r,o)},function(e,n,r,o){return xu("fixed",t,e,n,r,o)})}(t.origin(),e);!function(element,e){var t=element.dom();ne(e,function(e,n){e.fold(function(){ji(t,n)},function(e){Vi(t,n,e)})})}(element,{position:k.some(r.position()),left:r.left().map(n),top:r.top().map(n),right:r.right().map(n),bottom:r.bottom().map(n)})},Du=function(element,e){!function(element,e){var t=Qa.max(element,e,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Ui(element,"max-height",t+"px")}(element,Math.floor(e))},Ru=r(function(element,e){Du(element,e),Wi(element,{"overflow-x":"hidden","overflow-y":"auto"})}),Bu=r(function(element,e){Du(element,e)}),Mu=$t(["bounds","origin","preference","maxHeightFunction"],[]),Iu=function(e,element,t,n){var r=_u(e,element,t,n);Au(element,r,n),function(element,e){var t=e.classes();Hi(element,t.off),Li(element,t.on)}(element,r),function(element,e,t){t.maxHeightFunction()(element,e.maxHeight())}(element,r,n)},zu=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Pu=function(e,t,n){var r=function(e){return Se(n,e).getOr([])},o=function(e,t,n){var o=K(zu,n);return{offset:function(){return ja(e,t)},classesOn:function(){return $(n,r)},classesOff:function(){return $(o,r)}}};return{southeast:function(){return o(-e,t,["top","alignLeft"])},southwest:function(){return o(e,t,["top","alignRight"])},south:function(){return o(-e/2,t,["top","alignCentre"])},northeast:function(){return o(-e,-t,["bottom","alignLeft"])},northwest:function(){return o(e,-t,["bottom","alignRight"])},north:function(){return o(-e/2,-t,["bottom","alignCentre"])},east:function(){return o(e,-t/2,["valignCentre","left"])},west:function(){return o(-e,-t/2,["valignCentre","right"])}}},Lu=function(){return Pu(0,0,{})},Hu=jt("x","y","bubble","direction","label"),Fu=function(e){return e.x()},Vu=function(e,element){return e.x()+e.width()/2-element.width()/2},ju=function(e,element){return e.x()+e.width()-element.width()},Uu=function(e,element){return e.y()-element.height()},Wu=function(e){return e.y()+e.height()},$u=function(e,element){return e.y()+e.height()/2-element.height()/2},qu=function(e,element,t){return Hu(Fu(e),Wu(e),t.southeast(),ou(),"layout-se")},Gu=function(e,element,t){return Hu(ju(e,element),Wu(e),t.southwest(),iu(),"layout-sw")},Yu=function(e,element,t){return Hu(Fu(e),Uu(e,element),t.northeast(),au(),"layout-ne")},Xu=function(e,element,t){return Hu(ju(e,element),Uu(e,element),t.northwest(),uu(),"layout-nw")},Ku=function(e,element,t){return Hu(Vu(e,element),Uu(e,element),t.north(),su(),"layout-n")},Ju=function(e,element,t){return Hu(Vu(e,element),Wu(e),t.south(),cu(),"layout-s")},Qu=function(e,element,t){return Hu(function(e){return e.x()+e.width()}(e),$u(e,element),t.east(),lu(),"layout-e")},Zu=function(e,element,t){return Hu(function(e,element){return e.x()-element.width()}(e,element),$u(e,element),t.west(),fu(),"layout-w")},ec=function(){return[qu,Gu,Yu,Xu,Ju,Ku,Qu,Zu]},tc=function(){return[Gu,qu,Xu,Yu,Ju,Ku,Qu,Zu]},nc=function(e){return e},rc=function(e,t){return function(element){return"rtl"===oc(element)?t:e}},oc=function(element){return"rtl"===$i(element,"direction")?"rtl":"ltr"},ic=function(){return fo("layouts",[eo("onLtr"),eo("onRtl")])},ac=function(e,t,n,r){var o=t.layouts.map(function(t){return t.onLtr(e)}).getOr(n),c=t.layouts.map(function(t){return t.onRtl(e)}).getOr(r);return rc(o,c)(e)},uc=[eo("hotspot"),option("bubble"),ic(),output("placement",function(component,e,t){var n=e.hotspot,r=wu(t,n.element()),o=ac(component.element(),e,ec(),tc());return k.some(nc({anchorBox:r,bubble:e.bubble.getOr(Lu()),overrides:{},layouts:o,placer:k.none()}))})],cc=[eo("x"),eo("y"),mo("height",0),mo("width",0),mo("bubble",Lu()),ic(),output("placement",function(component,e,t){var n=mu(e.x,e.y,e.width,e.height),r=ac(component.element(),e,ec(),tc());return k.some(nc({anchorBox:n,bubble:e.bubble,overrides:{},layouts:r,placer:k.none()}))})],sc=(he([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),he([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),lc=jt("start","soffset","finish","foffset"),fc=(sc.domRange,sc.relative,sc.exact),dc=function(e,t,n,r){var o=function(e,t,n,r){var o=on(e).dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o}(e,t,n,r),c=rn(e,n)&&t===r;return o.collapsed&&!c},mc=function(e,t,n){var r,o=e.document.createRange();return r=o,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})}(o,n),o},gc=function(e,t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},hc=function(rect){return{left:r(rect.left),top:r(rect.top),right:r(rect.right),bottom:r(rect.bottom),width:r(rect.width),height:r(rect.height)}},pc=he([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vc=function(e,t,n){return t(Vt.fromDom(n.startContainer),n.startOffset,Vt.fromDom(n.endContainer),n.endOffset)},bc=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return pc.rtl(Vt.fromDom(e.endContainer),e.endOffset,Vt.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return vc(0,pc.ltr,n)}):vc(0,pc.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:r(e),rtl:k.none}},relative:function(t,n){return{ltr:Ge(function(){return mc(e,t,n)}),rtl:Ge(function(){return k.some(mc(e,n,t))})}},exact:function(t,n,r,o){return{ltr:Ge(function(){return gc(e,t,n,r,o)}),rtl:Ge(function(){return k.some(gc(e,r,o,t,n))})}}})}(e,t))},yc=function(e,t){var n=function(element){return e(element)?k.from(element.dom().nodeValue):k.none()},r=ht.detect().browser,o=r.isIE()&&10===r.version.major?function(element){try{return n(element)}catch(e){return k.none()}}:n;return{get:function(element){if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return o(element).getOr("")},getOption:o,set:function(element,n){if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom().nodeValue=n}}}(Sn,"text"),xc=function(element){return yc.get(element)},wc=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(e,t){return nn(t,e)}),Cc=function(e){var t=Vt.fromDom(e.anchorNode),n=Vt.fromDom(e.focusNode);return dc(t,e.anchorOffset,n,e.focusOffset)?k.some(lc(t,e.anchorOffset,n,e.focusOffset)):function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return k.some(lc(Vt.fromDom(t.startContainer),t.startOffset,Vt.fromDom(n.endContainer),n.endOffset))}return k.none()}(e)},Sc=function(e,t){return function(e){var t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?k.some(rect).map(hc):k.none()}(function(e,t){return bc(e,t).match({ltr:function(t,n,r,o){var c=e.document.createRange();return c.setStart(t.dom(),n),c.setEnd(r.dom(),o),c},rtl:function(t,n,r,o){var c=e.document.createRange();return c.setStart(r.dom(),o),c.setEnd(t.dom(),n),c}})}(e,t))},kc=jt("element","offset"),Oc=he([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Tc=function(e){return e.fold(function(e){return e},function(e,t,n){return e.translate(-t,-n)})},Ec=function(e){return e.fold(function(e){return e},function(e,t,n){return e})},Nc=function(e){return H(e,function(b,a){return b.translate(a.left(),a.top())},ja(0,0))},_c=function(e){var t=map(e,Ec);return Nc(t)},Ac=Oc.screen,Dc=Oc.absolute,Rc=function(component,e,t){var n=on(component.element()),r=qa(n),o=function(component,e,t){var n=an(t.root).dom();return k.from(n.frameElement).map(Vt.fromDom).filter(function(e){var t=on(e),n=on(component.element());return rn(t,n)}).map(Wa)}(component,0,t).getOr(r);return Dc(o,r.left(),r.top())},Bc=function(e,t,n,r){var o=e,c=t,l=n,f=r;e<0&&(o=0,l=n+e),t<0&&(c=0,f=r+t);var d=Ac(ja(o,c));return k.some(du(d,l,f))},Mc=function(e,t,n,r,o){return e.map(function(e){var c,l,f,d=[t,e.point()],m=(c=function(){return _c(d)},l=function(){return _c(d)},f=function(){return function(e){var t=map(e,Tc);return Nc(t)}(d)},r.fold(c,l,f)),h=rect(m.left(),m.top(),e.width(),e.height()),v=ac(o,n,n.showAbove?[Yu,Xu,qu,Gu,Ku,Ju]:[qu,Gu,Yu,Xu,Ju,Ju],n.showAbove?[Xu,Yu,Gu,qu,Ku,Ju]:[Gu,qu,Xu,Yu,Ju,Ku]);return nc({anchorBox:h,bubble:n.bubble.getOr(Lu()),overrides:n.overrides,layouts:v,placer:k.none()})})},Ic=jt("element","offset"),zc=function(element,e){return Sn(element)?Ic(element,e):function(element,e){var t=sn(element);if(0===t.length)return kc(element,e);if(e<t.length)return kc(t[e],0);var n=t[t.length-1],r=Sn(n)?xc(n).length:sn(n).length;return kc(n,r)}(element,e)},Pc=function(e,t){return t.getSelection.getOrThunk(function(){return function(){return function(e){return k.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(Cc)}(e)}})().map(function(e){var t=zc(e.start(),e.soffset()),n=zc(e.finish(),e.foffset());return lc(t.element(),t.offset(),n.element(),n.offset())})},Lc=[option("getSelection"),eo("root"),option("bubble"),ic(),mo("overrides",{}),mo("showAbove",!1),output("placement",function(component,e,t){var n=an(e.root).dom(),r=Rc(component,0,e),o=Pc(n,e).bind(function(e){var t;return Sc(n,(t=e,sc.exact(t.start(),t.soffset(),t.finish(),t.foffset()))).orThunk(function(){var t=Vt.fromText("\ufeff");return fn(e.start(),t),Sc(n,fc(t,0,t,1)).map(function(rect){return vn(t),rect})}).bind(function(e){return Bc(e.left(),e.top(),e.width(),e.height())})}),c=Pc(n,e).bind(function(e){return Cn(e.start())?k.some(e.start()):un(e.start())}).getOr(component.element());return Mc(o,r,e,t,c)})],Hc=[eo("node"),eo("root"),option("bubble"),ic(),mo("overrides",{}),mo("showAbove",!1),output("placement",function(component,e,t){var n=Rc(component,0,e);return e.node.bind(function(r){var rect=r.dom().getBoundingClientRect(),o=Bc(rect.left,rect.top,rect.width,rect.height),c=e.node.getOr(component.element());return Mc(o,n,e,t,c)})})],Fc=function(e){return e.x()+e.width()},Vc=function(e,element){return e.x()-element.width()},jc=function(e,element){return e.y()-element.height()+e.height()},Uc=function(e){return e.y()},Wc=function(e,element,t){return Hu(Fc(e),Uc(e),t.southeast(),ou(),"link-layout-se")},$c=function(e,element,t){return Hu(Vc(e,element),Uc(e),t.southwest(),iu(),"link-layout-sw")},qc=function(e,element,t){return Hu(Fc(e),jc(e,element),t.northeast(),au(),"link-layout-ne")},Gc=function(e,element,t){return Hu(Vc(e,element),jc(e,element),t.northwest(),uu(),"link-layout-nw")},Yc=[eo("item"),ic(),output("placement",function(component,e,t){var n=wu(t,e.item.element()),r=ac(component.element(),e,[Wc,$c,qc,Gc],[$c,Wc,Gc,qc]);return k.some(nc({anchorBox:n,bubble:Lu(),overrides:{},layouts:r,placer:k.none()}))})],Xc=qr("anchor",{selection:Lc,node:Hc,hotspot:uc,submenu:Yc,makeshift:cc}),Kc=function(component,e,t,n,r){!function(e,element,t,n,r,o){var c=function(e,t,n){return void 0===e[t]?n:e[t]}(o,"maxHeightFunction",Ru()),l=e.anchorBox(),f=e.origin(),d=Mu({bounds:Cu(f,r),origin:f,preference:n,maxHeightFunction:c});Iu(l,element,t,d)}(Tu(t.anchorBox,e),r.element(),t.bubble,t.layouts,n,t.overrides)},Jc=function(component,t,n,r,o,c){var l=Wr("positioning anchor.info",Xc,r);Ui(o.element(),"position","fixed");var f=Gi(o.element(),"visibility");Ui(o.element(),"visibility","hidden");var d=t.useFixed?ku(0,0,e.window.innerWidth,e.window.innerHeight):function(component){var e=Wa(component.element()),t=component.element().dom().getBoundingClientRect();return Su(e.left(),e.top(),t.width,t.height)}(component),m=l.placement,h=c.map(function(e){return function(){return gu(e)}}).or(t.getBounds);m(component,l,d).each(function(e){e.placer.getOr(Kc)(component,d,e,h,o)}),f.fold(function(){Xi(o.element(),"visibility")},function(e){Ui(o.element(),"visibility",e)}),Gi(o.element(),"left").isNone()&&Gi(o.element(),"top").isNone()&&Gi(o.element(),"right").isNone()&&Gi(o.element(),"bottom").isNone()&&Gi(o.element(),"position").is("fixed")&&Xi(o.element(),"position")},Qc=Object.freeze({position:function(component,e,t,n,r){var o=k.none();Jc(component,e,t,n,r,o)},positionWithin:Jc,getMode:function(component,e,t){return e.useFixed?"fixed":"absolute"}}),Zc=[mo("useFixed",!1),option("getBounds")],es=Ba({fields:Zc,name:"positioning",active:Fa,apis:Qc}),ts=function(component){Oo(component,Rt());var e=component.components();P(e,ts)},ns=function(component){var e=component.components();P(e,ns),Oo(component,Dt())},rs=function(e,t){os(e,t,gn)},os=function(e,t,n){e.getSystem().addToWorld(t),n(e.element(),t.element()),Ro(e.element())&&ns(t),e.syncComponents()},is=function(component){ts(component),vn(component.element()),component.getSystem().removeFromWorld(component)},as=function(component){var e=un(component.element()).bind(function(p){return component.getSystem().getByDom(p).fold(k.none,k.some)});is(component),e.each(function(p){p.syncComponents()})},us=function(component){var e=component.components();P(e,is),pn(component.element()),component.syncComponents()},cs=function(element,e){ss(element,e,gn)},ss=function(element,e,t){t(element,e.element());var n=sn(e.element());P(n,function(t){e.getByDom(t).each(ns)})},ls=function(e){var t=sn(e.element());P(t,function(t){e.getByDom(t).each(ts)}),vn(e.element())},fs=function(e,t,n,data){var r=function(e,t,n,data){n.get().each(function(data){us(e)});var r=t.getAttachPoint(e);rs(r,e);var o=e.getSystem().build(data);return rs(e,o),n.set(o),o}(e,t,n,data);return t.onOpen(e,r),r},ds=function(e,t,n){n.get().each(function(data){us(e),as(e),t.onClose(e,data),n.clear()})},ms=function(e,t,n){return n.isOpen()},gs=function(e,t,n){var r=t.getAttachPoint(e);Ui(e.element(),"position",es.getMode(r)),function(e,t,n,r){Gi(e.element(),t).fold(function(){An(e.element(),n)},function(t){Tn(e.element(),n,t)}),Ui(e.element(),t,r)}(e,"visibility",t.cloakVisibilityAttr,"hidden")},hs=function(e,t,n){var element;element=e.element(),I(["top","left","right","bottom"],function(e){return Gi(element,e).isSome()})||Xi(e.element(),"position"),function(e,t,n){if(_n(e.element(),n)){var r=Nn(e.element(),n);Ui(e.element(),t,r)}else Xi(e.element(),t)}(e,"visibility",t.cloakVisibilityAttr)},ps=Object.freeze({cloak:gs,decloak:hs,open:fs,openWhileCloaked:function(e,t,n,data,r){gs(e,t,n),fs(e,t,n,data),r(),hs(e,t,n)},close:ds,isOpen:ms,isPartOf:function(e,t,n,r){return ms(0,0,n)&&n.get().exists(function(data){return t.isPartOf(e,data,r)})},getState:function(e,t,n){return n.get()}}),vs=Object.freeze({events:function(e,t){return Lo([Vo(Tt(),function(n,r){ds(n,e,t)})])}}),bs=[wa("onOpen"),wa("onClose"),eo("isPartOf"),eo("getAttachPoint"),mo("cloakVisibilityAttr","data-precloak-visibility")],ys=Ba({fields:bs,name:"sandboxing",active:vs,apis:ps,state:Object.freeze({init:function(){var e=Ne(k.none()),t=r("not-implemented");return yi({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(k.none())},set:function(t){e.set(k.some(t))},get:function(t){return e.get()}})}})}),xs=r("dismiss.popups"),ws=r("mouse.released"),Cs=_r([mo("isExtraPart",r(!1)),fo("fireEventInstead",[mo("event",Bt())])]),Ss=function(e){var t=ks(e);return Ha.config(t)},ks=function(e){var t=Wr("Dismissal",Cs,e);return{channels:ke(xs(),{schema:_r([eo("target")]),onReceive:function(e,data){ys.isOpen(e)&&(ys.isPartOf(e,data.target)||t.isExtraPart(e,data.target)||t.fireEventInstead.fold(function(){return ys.close(e)},function(t){return Oo(e,t.event)}))}})}},Os=function(e,t){return xo(e,{},map(t,function(t){return n=t.name(),r="Cannot configure "+t.name()+" for "+e,zr(n,n,Kn(),Er(function(e){return ur("The field: "+n+" is forbidden. "+r)}));var n,r}).concat([wo("dump",o)]))},Ts=function(data){return data.dump},Es=function(data,e){return Wn({},data.dump,Da(e))},Ns=Os,_s=Es,As=he([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Ds=function(e,t,n,o){return"placeholder"===n.uiType?function(e,t,n,o){return e.exists(function(e){return e!==n.owner})?As.single(!0,r(n)):Se(o,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+ee(o)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+xr(n,null,2))},function(e){return e.replace()})}(e,0,n,o):As.single(!1,r(n))},Rs=function(e,t,n,r){return Ds(e,0,n,r).fold(function(o,c){var l=c(t,n.config,n.validated),f=Se(l,"components").getOr([]),d=$(f,function(n){return Rs(e,t,n,r)});return[Wn({},l,{components:d})]},function(e,r){var c=r(t,n.config,n.validated);return n.validated.preprocess.getOr(o)(c)})},Bs=function(e,t,n,o){var c=re(o,function(e,t){return n=e,o=!1,{name:r(label=t),required:function(){return n.fold(function(e,t){return e},function(e,t){return e})},used:function(){return o},replace:function(){if(!0===o)throw new Error("Trying to use the same placeholder more than once: "+label);return o=!0,n}};var label,n,o}),l=function(e,t,n,r){return $(n,function(n){return Rs(e,t,n,r)})}(e,t,n,c);return ne(c,function(p){if(!1===p.used()&&p.required())throw new Error("Placeholder: "+p.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+xr(t.components,null,2))}),l},Ms=As.single,Is=As.multiple,zs=r("placeholder"),Ps=he([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ls=mo("factory",{sketch:o}),Hs=mo("schema",[]),Fs=eo("name"),Vs=zr("pname","pname",Jn(function(e){return"<alloy."+jn(e.name)+">"}),Gr()),js=wo("schema",function(){return[option("preprocess")]}),Us=mo("defaults",r({})),Ws=mo("overrides",r({})),$s=Ar([Ls,Hs,Fs,Vs,Us,Ws]),qs=Ar([Ls,Hs,Fs,Us,Ws]),Gs=Ar([Ls,Hs,Fs,Vs,Us,Ws]),Ys=Ar([Ls,js,Fs,eo("unit"),Vs,Us,Ws]),Xs=function(e){return e.fold(k.some,k.none,k.some,k.some)},Ks=function(e){var t=function(data){return data.name};return e.fold(t,t,t,t)},Js=function(e,t){return function(n){var data=Wr("Converting part type",t,n);return e(data)}},Qs=Js(Ps.required,$s),Zs=Js(Ps.external,qs),el=Js(Ps.optional,Gs),tl=Js(Ps.group,Ys),nl=r("entirety"),rl=Object.freeze({required:Qs,external:Zs,optional:el,group:tl,asNamedPart:Xs,name:Ks,asCommon:function(e){return e.fold(o,o,o,o)},original:nl}),il=function(e,data,t,n){return be(data.defaults(e,t,n),t,{uid:e.partUids[data.name]},data.overrides(e,t,n))},al=function(e,t){var n={};return P(t,function(t){Xs(t).each(function(t){var g=cl(e,t.pname);n[t.name]=function(n){var r=Wr("Part: "+t.name+" in "+e,Ar(t.schema),n);return Wn({},g,{config:n,validated:r})}})}),n},cl=function(e,t){return{uiType:zs(),owner:e,name:t}},sl=function(e,t,n){return{uiType:zs(),owner:e,name:t,config:n,validated:{}}},ll=function(e){return $(e,function(e){return e.fold(k.none,k.some,k.none,k.none).map(function(data){return io(data.name,data.schema.concat([Oa(nl())]))}).toArray()})},fl=function(e){return map(e,Ks)},ml=function(e,t,n){return function(e,t,n){var o={},c={};return P(n,function(e){e.fold(function(data){o[data.pname]=Ms(!0,function(e,t,n){return data.factory.sketch(il(e,data,t,n))})},function(data){var e=t.parts[data.name];c[data.name]=r(data.factory.sketch(il(t,data,e[nl()]),e))},function(data){o[data.pname]=Ms(!1,function(e,t,n){return data.factory.sketch(il(e,data,t,n))})},function(data){o[data.pname]=Is(!0,function(e,t,n){var r=e[data.name];return map(r,function(u){return data.factory.sketch(be(data.defaults(e,u,n),u,data.overrides(e,u)))})})})}),{internals:r(o),externals:r(c)}}(0,t,n)},gl=function(e,t,n){return Bs(k.some(e),t,t.components,n)},hl=function(component,e,t){var n=e.partUids[t];return component.getSystem().getByUid(n).toOption()},pl=function(component,e,t){return hl(component,e,t).getOrDie("Could not find part: "+t)},vl=function(component,e,t){var n={},o=e.partUids,c=component.getSystem();return P(t,function(e){n[e]=c.getByUid(o[e])}),re(n,r)},bl=function(component,e){var t=component.getSystem();return re(e.partUids,function(e,n){return r(t.getByUid(e))})},yl=function(e){return ee(e.partUids)},xl=function(component,e,t){var n={},o=e.partUids,c=component.getSystem();return P(t,function(e){n[e]=c.getByUid(o[e]).getOrDie()}),re(n,r)},wl=function(e,t){var n=fl(t);return Oe(map(n,function(t){return{key:t,value:e+"-"+t}}))},Cl=function(e){return zr("partUids","partUids",Qn(function(t){return wl(t.uid,e)}),Gr())},Sl=Object.freeze({generate:al,generateOne:sl,schemas:ll,names:fl,substitutes:ml,components:gl,defaultUids:wl,defaultUidsSchema:Cl,getAllParts:bl,getAllPartNames:yl,getPart:hl,getPartOrDie:pl,getParts:vl,getPartsOrDie:xl}),kl=function(label,e,t,n,r){var o=function(label,e,t,n){return(e.length>0?[io("parts",e)]:[]).concat([eo("uid"),mo("dom",{}),mo("components",[]),Oa("originalSpec"),mo("debug.sketcher",{})]).concat(t)}(0,n,r);return Wr(label+" [SpecSchema]",_r(o.concat(e)),t)},Ol=function(e,t,n,r,o){var c=Tl(o),l=ll(n),f=Cl(n),d=kl(e,t,c,l,[f]),m=ml(0,d,n);return r(d,gl(e,d,m.internals()),c,m.externals())},Tl=function(e){return e.hasOwnProperty("uid")?e:Wn({},e,{uid:ci("uid")})},El=_r([eo("name"),eo("factory"),eo("configFields"),mo("apis",{}),mo("extraApis",{})]),Nl=_r([eo("name"),eo("factory"),eo("configFields"),eo("partFields"),mo("apis",{}),mo("extraApis",{})]),_l=function(e){var t=Wr("Sketcher for "+e.name,El,e),n=re(t.apis,vi),o=re(t.extraApis,function(e,t){return gi(e,t)});return Wn({name:r(t.name),partFields:r([]),configFields:r(t.configFields),sketch:function(e){return function(e,t,n,r){var o=Tl(r);return n(kl(e,t,o,[],[]),o)}(t.name,t.configFields,t.factory,e)}},n,o)},Al=function(e){var t=Wr("Sketcher for "+e.name,Nl,e),n=al(t.name,t.partFields),o=re(t.apis,vi),c=re(t.extraApis,function(e,t){return gi(e,t)});return Wn({name:r(t.name),partFields:r(t.partFields),configFields:r(t.configFields),sketch:function(e){return Ol(t.name,t.configFields,t.partFields,t.factory,e)},parts:r(n)},o,c)},Dl=function(e){return"input"===xn(e)&&"radio"!==Nn(e,"type")||"textarea"===xn(e)},Rl=Object.freeze({getCurrent:function(component,e,t){return e.find(component)}}),Bl=[eo("find")],Ml=Ba({fields:Bl,name:"composing",apis:Rl}),Il=function(e,t,n,r){var o=e+t;return o>r?n:o<n?r:o},zl=function(e,t,n){return e<=t?t:e>=n?n:e},Pl=function(component,e,t,n){var r=wc(component.element(),"."+e.highlightClass);P(r,function(t){I(n,function(e){return e.element()===t})||(zi(t,e.highlightClass),component.getSystem().getByDom(t).each(function(t){e.onDehighlight(component,t),Oo(t,Ht())}))})},Ll=function(component,e,t,n){Pl(component,e,0,[n]),Hl(component,e,t,n)||(Mi(n.element(),e.highlightClass),e.onHighlight(component,n),Oo(n,Lt()))},Hl=function(component,e,t,n){return Pi(n.element(),e.highlightClass)},Fl=function(component,e,t,n){var r=wc(component.element(),"."+e.itemClass);return k.from(r[n]).fold(function(){return ge.error("No element found with index "+n)},component.getSystem().getByDom)},Vl=function(component,e,t){return la(component.element(),"."+e.itemClass).bind(function(e){return component.getSystem().getByDom(e).toOption()})},jl=function(component,e,t){var n=wc(component.element(),"."+e.itemClass);return(n.length>0?k.some(n[n.length-1]):k.none()).bind(function(e){return component.getSystem().getByDom(e).toOption()})},Ul=function(component,e,t,n){var r=wc(component.element(),"."+e.itemClass);return V(r,function(t){return Pi(t,e.highlightClass)}).bind(function(e){var t=Il(e,n,0,r.length-1);return component.getSystem().getByDom(r[t]).toOption()})},Wl=function(component,e,t){var n=wc(component.element(),"."+e.itemClass);return _e(map(n,function(i){return component.getSystem().getByDom(i).toOption()}))},$l=Object.freeze({dehighlightAll:function(component,e,t){return Pl(component,e,0,[])},dehighlight:function(component,e,t,n){Hl(component,e,t,n)&&(zi(n.element(),e.highlightClass),e.onDehighlight(component,n),Oo(n,Ht()))},highlight:Ll,highlightFirst:function(component,e,t){Vl(component,e,t).each(function(n){Ll(component,e,t,n)})},highlightLast:function(component,e,t){jl(component,e,t).each(function(n){Ll(component,e,t,n)})},highlightAt:function(component,e,t,n){Fl(component,e,t,n).fold(function(e){throw new Error(e)},function(n){Ll(component,e,t,n)})},highlightBy:function(component,e,t,n){var r=Wl(component,e,t);F(r,n).each(function(n){Ll(component,e,t,n)})},isHighlighted:Hl,getHighlighted:function(component,e,t){return la(component.element(),"."+e.highlightClass).bind(function(e){return component.getSystem().getByDom(e).toOption()})},getFirst:Vl,getLast:jl,getPrevious:function(component,e,t){return Ul(component,e,0,-1)},getNext:function(component,e,t){return Ul(component,e,0,1)},getCandidates:Wl}),ql=[eo("highlightClass"),eo("itemClass"),wa("onHighlight"),wa("onDehighlight")],Gl=Ba({fields:ql,name:"highlighting",apis:$l}),Yl=function(e,t,n){var r=X(e.slice(0,t)),o=X(e.slice(t+1));return F(r.concat(o),n)},Xl=function(e,t,n){var r=X(e.slice(0,t));return F(r,n)},Kl=function(e,t,n){var r=e.slice(0,t),o=e.slice(t+1);return F(o.concat(r),n)},Jl=function(e,t,n){var r=e.slice(t+1);return F(r,n)},Ql=function(e){return function(t){var n=t.raw();return M(e,n.which)}},Zl=function(e){return function(t){return G(e,function(e){return e(t)})}},ef=function(e){return!0===e.raw().shiftKey},tf=function(e){return!0===e.raw().ctrlKey},nf=d(ef),rf=function(e,t){return{matches:e,classification:t}},of=function(element){element.dom().focus()},af=function(t){var n=void 0!==t?t.dom():e.document;return k.from(n.activeElement).map(Vt.fromDom)},uf=function(element){return af(on(element)).filter(function(e){return element.dom().contains(e.dom())})},cf=function(component,e,t){e.exists(function(p){return t.exists(function(e){return rn(e,p)})})||To(component,Mt(),{prevFocus:e,newFocus:t})},sf=function(){var e=function(component){return uf(component.element())};return{get:e,set:function(component,t){var n=e(component);component.getSystem().triggerFocus(t,component.element());var r=e(component);cf(component,n,r)}}},lf=function(){var e=function(component){return Gl.getHighlighted(component).map(function(e){return e.element()})};return{get:e,set:function(component,element){var n=e(component);component.getSystem().getByDom(element).fold(t,function(e){Gl.highlight(component,e)});var r=e(component);cf(component,n,r)}}};!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Ya||(Ya={}));var ff=function(e,t,n,r,o){var c=function(component,e,t,n,r){var o,c,l=t(component,e,n,r);return(o=l,c=e.event(),F(o,function(e){return e.matches(c)}).map(function(e){return e.classification})).bind(function(t){return t(component,e,n,r)})},l={schema:function(){return e.concat([mo("focusManager",sf()),go("focusInside","onFocus",Fr(function(e){return M(["onFocus","onEnterOrSpace","onApi"],e)?ge.value(e):ge.error("Invalid value for focusInside")})),output("handler",l),output("state",t),output("sendFocusIn",o)])},processKey:c,toEvents:function(e,t){var l=e.focusInside!==Ya.OnFocusMode?k.none():o(e).map(function(n){return Vo(vt(),function(component,r){n(component,e,t),r.stop()})});return Lo(l.toArray().concat([Vo(Ve(),function(component,r){c(component,r,n,e,t).fold(function(){!function(component,n){var r=Ql([32].concat([13]))(n.event());e.focusInside===Ya.OnEnterOrSpaceMode&&r&&Co(component,n)&&o(e).each(function(r){r(component,e,t),n.stop()})}(component,r)},function(e){r.stop()})}),Vo(je(),function(component,n){c(component,n,r,e,t).each(function(e){n.stop()})})]))}};return l},df=function(e){var t=[option("onEscape"),option("onEnter"),mo("selector",'[data-alloy-tabstop="true"]'),mo("firstTabstop",0),mo("useTabstopAt",r(!0)),option("visibilitySelector")].concat([e]),n=function(e,element){var t=e.visibilitySelector.bind(function(e){return fa(element,e)}).getOr(element);return Za(t)>0},o=function(component,e){(function(component,e){var t=wc(component.element(),e.selector),r=filter(t,function(t){return n(e,t)});return k.from(r[e.firstTabstop])})(component,e).each(function(t){e.focusManager.set(component,t)})},l=function(component,e,t,r,o){return o(e,t,function(e){return function(e,element){return n(e,element)&&e.useTabstopAt(element)}(r,e)}).fold(function(){return r.cyclic?k.some(!0):k.none()},function(e){return r.focusManager.set(component,e),k.some(!0)})},f=function(component,e,t,n){var r=wc(component.element(),t.selector);return function(component,e){return e.focusManager.get(component).bind(function(t){return fa(t,e.selector)})}(component,t).bind(function(e){return V(r,c(rn,e)).bind(function(e){return l(component,r,e,t,n)})})},d=r([rf(Zl([ef,Ql([9])]),function(component,e,t,n){var r=t.cyclic?Yl:Xl;return f(component,0,t,r)}),rf(Ql([9]),function(component,e,t,n){var r=t.cyclic?Kl:Jl;return f(component,0,t,r)}),rf(Ql([27]),function(component,e,t,n){return t.onEscape.bind(function(t){return t(component,e)})}),rf(Zl([nf,Ql([13])]),function(component,e,t,n){return t.onEnter.bind(function(t){return t(component,e)})})]),m=r([]);return ff(t,bi.init,d,m,function(){return k.some(o)})},mf=df(wo("cyclic",r(!1))),gf=df(wo("cyclic",r(!0))),hf=function(component,e,t){return Dl(t)&&Ql([32])(e.event())?k.none():function(component,e,t){return No(component,t,wt()),k.some(!0)}(component,0,t)},pf=function(component,e){return k.some(!0)},vf=[mo("execute",hf),mo("useSpace",!1),mo("useEnter",!0),mo("useControlEnter",!1),mo("useDown",!1)],bf=function(component,e,t){return t.execute(component,e,component.element())},yf=ff(vf,bi.init,function(component,e,t,n){var r=t.useSpace&&!Dl(component.element())?[32]:[],o=t.useEnter?[13]:[],c=t.useDown?[40]:[],l=r.concat(o).concat(c);return[rf(Ql(l),bf)].concat(t.useControlEnter?[rf(Zl([tf,Ql([13])]),bf)]:[])},function(component,e,t,n){return t.useSpace&&!Dl(component.element())?[rf(Ql([32]),pf)]:[]},function(){return k.none()}),xf=function(e){var t=Ne(k.none());return yi({readState:function(){return t.get().map(function(e){return{numRows:e.numRows(),numColumns:e.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(k.some({numRows:r(e),numColumns:r(n)}))},getNumRows:function(){return t.get().map(function(e){return e.numRows()})},getNumColumns:function(){return t.get().map(function(e){return e.numColumns()})}})},wf=Object.freeze({flatgrid:xf,init:function(e){return e.state(e)}}),Cf=function(e){return function(component,t,n,r){var o=e(component.element());return use(o,component,t,n,r)}},Sf=function(e,t){var n=rc(e,t);return Cf(n)},kf=function(e,t){var n=rc(t,e);return Cf(n)},Of=function(e){return function(component,t,n,r){return use(e,component,t,n,r)}},use=function(e,component,t,n,r){return n.focusManager.get(component).bind(function(t){return e(component.element(),t,n,r)}).map(function(e){return n.focusManager.set(component,e),!0})},Tf=Of,Ef=Of,Nf=Of,_f=function(element){return!function(e){return e.offsetWidth<=0&&e.offsetHeight<=0}(element.dom())},Af=$t(["index","candidates"],[]),Df=function(e,t,n){return Rf(e,t,n,_f)},Rf=function(e,t,n,r){var o=c(rn,t),l=wc(e,n);return function(e,t){return V(e,t).map(function(t){return Af({index:t,candidates:e})})}(filter(l,_f),o)},Bf=function(e,t){return V(e,function(e){return rn(t,e)})},Mf=function(e,t,n,r){return r(Math.floor(t/n),t%n).bind(function(address){var t=address.row()*n+address.column();return t>=0&&t<e.length?k.some(e[t]):k.none()})},If=function(e,t,n,o,c){return Mf(e,t,o,function(t,l){var f=t===n-1?e.length-t*o:o,d=Il(l,c,0,f-1);return k.some({row:r(t),column:r(d)})})},zf=function(e,t,n,o,c){return Mf(e,t,o,function(t,l){var f=Il(t,c,0,n-1),d=f===n-1?e.length-f*o:o,m=zl(l,0,d-1);return k.some({row:r(f),column:r(m)})})},Pf=[eo("selector"),mo("execute",hf),Ca("onEscape"),mo("captureTab",!1),Ta()],Lf=function(component,e,t){la(component.element(),e.selector).each(function(t){e.focusManager.set(component,t)})},Hf=function(e){return function(element,t,n,r){return Df(element,t,n.selector).bind(function(t){return e(t.candidates(),t.index(),r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns))})}},Ff=function(component,e,t,n){return t.captureTab?k.some(!0):k.none()},Vf=Hf(function(e,t,n,r){return If(e,t,n,r,-1)}),jf=Hf(function(e,t,n,r){return If(e,t,n,r,1)}),Uf=Hf(function(e,t,n,r){return zf(e,t,n,r,-1)}),Wf=Hf(function(e,t,n,r){return zf(e,t,n,r,1)}),$f=r([rf(Ql([37]),Sf(Vf,jf)),rf(Ql([39]),kf(Vf,jf)),rf(Ql([38]),Tf(Uf)),rf(Ql([40]),Ef(Wf)),rf(Zl([ef,Ql([9])]),Ff),rf(Zl([nf,Ql([9])]),Ff),rf(Ql([27]),function(component,e,t,n){return t.onEscape(component,e)}),rf(Ql([32].concat([13])),function(component,e,t,n){return function(component,e){return e.focusManager.get(component).bind(function(t){return fa(t,e.selector)})}(component,t).bind(function(n){return t.execute(component,e,n)})})]),qf=r([rf(Ql([32]),pf)]),Gf=ff(Pf,xf,$f,qf,function(){return k.some(Lf)}),Yf=function(e,t,n,r){var o=function(e,t,n){var c,l=Il(t,r,0,n.length-1);return l===e?k.none():(c=n[l],"button"===xn(c)&&"disabled"===Nn(c,"disabled")?o(e,l,n):k.from(n[l]))};return Df(e,n,t).bind(function(e){var t=e.index(),n=e.candidates();return o(t,t,n)})},Xf=[eo("selector"),mo("getInitial",k.none),mo("execute",hf),Ca("onEscape"),mo("executeOnMove",!1),mo("allowVertical",!0)],Kf=function(component,e,t){return function(component,e){return e.focusManager.get(component).bind(function(t){return fa(t,e.selector)})}(component,t).bind(function(n){return t.execute(component,e,n)})},Jf=function(component,e){e.getInitial(component).orThunk(function(){return la(component.element(),e.selector)}).each(function(t){e.focusManager.set(component,t)})},Qf=function(element,e,t){return Yf(element,t.selector,e,-1)},Zf=function(element,e,t){return Yf(element,t.selector,e,1)},ed=function(e){return function(component,t,n){return e(component,t,n).bind(function(){return n.executeOnMove?Kf(component,t,n):k.some(!0)})}},nd=function(component,e,t,n){return t.onEscape(component,e)},rd=r([rf(Ql([32]),pf)]),od=ff(Xf,bi.init,function(e,t,n,r){var o=[37].concat(n.allowVertical?[38]:[]),c=[39].concat(n.allowVertical?[40]:[]);return[rf(Ql(o),ed(Sf(Qf,Zf))),rf(Ql(c),ed(kf(Qf,Zf))),rf(Ql([13]),Kf),rf(Ql([32]),Kf),rf(Ql([27]),nd)]},rd,function(){return k.some(Jf)}),id=$t(["rowIndex","columnIndex","cell"],[]),ad=function(e,t,n){return k.from(e[t]).bind(function(e){return k.from(e[n]).map(function(e){return id({rowIndex:t,columnIndex:n,cell:e})})})},ud=function(e,t,n,r){var o=e[t].length,c=Il(n,r,0,o-1);return ad(e,t,c)},cd=function(e,t,n,r){var o=Il(n,r,0,e.length-1),c=e[o].length,l=zl(t,0,c-1);return ad(e,o,l)},sd=function(e,t,n,r){var o=e[t].length,c=zl(n+r,0,o-1);return ad(e,t,c)},ld=function(e,t,n,r){var o=zl(n+r,0,e.length-1),c=e[o].length,l=zl(t,0,c-1);return ad(e,o,l)},fd=[io("selectors",[eo("row"),eo("cell")]),mo("cycles",!0),mo("previousSelector",k.none),mo("execute",hf)],md=function(component,e){e.previousSelector(component).orThunk(function(){var t=e.selectors;return la(component.element(),t.cell)}).each(function(t){e.focusManager.set(component,t)})},gd=function(e,t){return function(element,n,r){var o=r.cycles?e:t;return fa(n,r.selectors.row).bind(function(e){var t=wc(e,r.selectors.cell);return Bf(t,n).bind(function(t){var n=wc(element,r.selectors.row);return Bf(n,e).bind(function(e){var c=function(e,t){return map(e,function(e){return wc(e,t.selectors.cell)})}(n,r);return o(c,e,t).map(function(e){return e.cell()})})})})}},hd=gd(function(e,t,n){return ud(e,t,n,-1)},function(e,t,n){return sd(e,t,n,-1)}),pd=gd(function(e,t,n){return ud(e,t,n,1)},function(e,t,n){return sd(e,t,n,1)}),vd=gd(function(e,t,n){return cd(e,n,t,-1)},function(e,t,n){return ld(e,n,t,-1)}),bd=gd(function(e,t,n){return cd(e,n,t,1)},function(e,t,n){return ld(e,n,t,1)}),yd=r([rf(Ql([37]),Sf(hd,pd)),rf(Ql([39]),kf(hd,pd)),rf(Ql([38]),Tf(vd)),rf(Ql([40]),Ef(bd)),rf(Ql([32].concat([13])),function(component,e,t){return uf(component.element()).bind(function(n){return t.execute(component,e,n)})})]),xd=r([rf(Ql([32]),pf)]),wd=ff(fd,bi.init,yd,xd,function(){return k.some(md)}),Cd=[eo("selector"),mo("execute",hf),mo("moveOnTab",!1)],Sd=function(component,e,t){return t.focusManager.get(component).bind(function(n){return t.execute(component,e,n)})},kd=function(component,e){la(component.element(),e.selector).each(function(t){e.focusManager.set(component,t)})},Od=function(element,e,t){return Yf(element,t.selector,e,-1)},Td=function(element,e,t){return Yf(element,t.selector,e,1)},Ed=r([rf(Ql([38]),Nf(Od)),rf(Ql([40]),Nf(Td)),rf(Zl([ef,Ql([9])]),function(component,e,t){return t.moveOnTab?Nf(Od)(component,e,t):k.none()}),rf(Zl([nf,Ql([9])]),function(component,e,t){return t.moveOnTab?Nf(Td)(component,e,t):k.none()}),rf(Ql([13]),Sd),rf(Ql([32]),Sd)]),Nd=r([rf(Ql([32]),pf)]),_d=ff(Cd,bi.init,Ed,Nd,function(){return k.some(kd)}),Ad=[Ca("onSpace"),Ca("onEnter"),Ca("onShiftEnter"),Ca("onLeft"),Ca("onRight"),Ca("onTab"),Ca("onShiftTab"),Ca("onUp"),Ca("onDown"),Ca("onEscape"),mo("stopSpaceKeyup",!1),option("focusIn")],Dd=ff(Ad,bi.init,function(component,e,t){return[rf(Ql([32]),t.onSpace),rf(Zl([nf,Ql([13])]),t.onEnter),rf(Zl([ef,Ql([13])]),t.onShiftEnter),rf(Zl([ef,Ql([9])]),t.onShiftTab),rf(Zl([nf,Ql([9])]),t.onTab),rf(Ql([38]),t.onUp),rf(Ql([40]),t.onDown),rf(Ql([37]),t.onLeft),rf(Ql([39]),t.onRight),rf(Ql([32]),t.onSpace),rf(Ql([27]),t.onEscape)]},function(component,e,t){return t.stopSpaceKeyup?[rf(Ql([32]),pf)]:[]},function(e){return e.focusIn}),Rd=mf.schema(),Bd=gf.schema(),Md=od.schema(),Id=Gf.schema(),zd=wd.schema(),Pd=yf.schema(),menu=_d.schema(),Ld=Dd.schema(),Hd=Ia({branchKey:"mode",branches:Object.freeze({acyclic:Rd,cyclic:Bd,flow:Md,flatgrid:Id,matrix:zd,execution:Pd,menu:menu,special:Ld}),name:"keying",active:{events:function(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function(component,e,t){e.sendFocusIn(e).fold(function(){component.getSystem().triggerFocus(component.element(),component.element())},function(n){n(component,e,t)})},setGridSize:function(component,t,n,r,o){Ee(n,"setGridSize")?n.setGridSize(r,o):e.console.error("Layout does not support setGridSize")}},state:wf}),Fd=function(component,e,t,n){var r=component.getSystem().build(n);os(component,r,t)},Vd=function(component,e,t,n){var r=jd(component,e);F(r,function(e){return rn(n.element(),e.element())}).each(as)},jd=function(component,e){return component.components()},Ud=function(component,e,t,n,r){var o=jd(component,e);return k.from(o[n]).map(function(t){return Vd(component,e,0,t),r.each(function(e){Fd(component,0,function(p,e){var t,element;element=e,ln(t=p,n).fold(function(){gn(t,element)},function(e){fn(e,element)})},e)}),t})},Wd=Ba({fields:[],name:"replacing",apis:Object.freeze({append:function(component,e,t,n){Fd(component,0,gn,n)},prepend:function(component,e,t,n){Fd(component,0,mn,n)},remove:Vd,replaceAt:Ud,replaceBy:function(component,e,t,n,r){var o=jd(component,e);return V(o,n).bind(function(t){return Ud(component,e,0,t,r)})},set:function(component,e,n,data){var r,o,c,l;us(component),r=function(){var e=map(data,component.getSystem().build);P(e,function(e){rs(component,e)})},o=component.element(),c=on(o),l=af(c).bind(function(e){var t=function(t){return rn(e,t)};return t(o)?k.some(o):zo(o,t)}),r(o),l.each(function(e){af(c).filter(function(t){return rn(t,e)}).fold(function(){of(e)},t)})},contents:jd})}),$d=function(component,e,t){e.store.manager.onLoad(component,e,t)},qd=function(component,e,t){e.store.manager.onUnload(component,e,t)},Gd=Object.freeze({onLoad:$d,onUnload:qd,setValue:function(component,e,t,data){e.store.manager.setValue(component,e,t,data)},getValue:function(component,e,t){return e.store.manager.getValue(component,e,t)},getState:function(component,e,t){return t}}),Yd=Object.freeze({events:function(e,t){var n=e.resetOnDom?[Xo(function(n,r){$d(n,e,t)}),Ko(function(n,r){qd(n,e,t)})]:[Ea(e,t,$d)];return Lo(n)}}),Xd=function(){var data=Ne(null);return yi({set:data.set,get:data.get,isNotSet:function(){return null===data.get()},clear:function(){data.set(null)},readState:function(){return{mode:"memory",value:data.get()}}})},Kd=function(){var e=Ne({}),t=Ne({});return yi({readState:function(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},lookup:function(n){return Se(e.get(),n).orThunk(function(){return Se(t.get(),n)})},update:function(n){var r=e.get(),o=t.get(),c={},l={};P(n,function(e){c[e.value]=e,Se(e,"meta").each(function(meta){Se(meta,"text").each(function(text){l[text]=e})})}),e.set(Wn({},r,c)),t.set(Wn({},o,l))},clear:function(){e.set({}),t.set({})}})},Jd=Object.freeze({memory:Xd,dataset:Kd,manual:function(){return yi({readState:function(){}})},init:function(e){return e.store.manager.state(e)}}),Qd=function(component,e,t,data){var n=e.store;t.update([data]),n.setValue(component,data),e.onSetValue(component,data)},Zd=[option("initialValue"),eo("getFallbackEntry"),eo("getDataKey"),eo("setValue"),output("manager",{setValue:Qd,getValue:function(component,e,t){var n=e.store,r=n.getDataKey(component);return t.lookup(r).fold(function(){return n.getFallbackEntry(r)},function(data){return data})},onLoad:function(component,e,t){e.store.initialValue.each(function(data){Qd(component,e,t,data)})},onUnload:function(component,e,t){t.clear()},state:Kd})],tm=[eo("getValue"),mo("setValue",t),option("initialValue"),output("manager",{setValue:function(component,e,t,data){e.store.setValue(component,data),e.onSetValue(component,data)},getValue:function(component,e,t){return e.store.getValue(component)},onLoad:function(component,e,t){e.store.initialValue.each(function(data){e.store.setValue(component,data)})},onUnload:t,state:bi.init})],nm=[option("initialValue"),output("manager",{setValue:function(component,e,t,data){t.set(data),e.onSetValue(component,data)},getValue:function(component,e,t){return t.get()},onLoad:function(component,e,t){e.store.initialValue.each(function(e){t.isNotSet()&&t.set(e)})},onUnload:function(component,e,t){t.clear()},state:Xd})],rm=[go("store",{mode:"memory"},qr("mode",{memory:nm,manual:tm,dataset:Zd})),wa("onSetValue"),mo("resetOnDom",!1)],om=Ba({fields:rm,name:"representing",active:Yd,apis:Gd,extra:{setValueFrom:function(component,source){var e=om.getValue(source);om.setValue(component,e)}},state:Jd}),im=function(component,e){e.ignore||(of(component.element()),e.onFocus(component))},am=Object.freeze({focus:im,blur:function(component,e){e.ignore||component.element().dom().blur()},isFocused:function(component){return element=component.element(),e=on(element).dom(),element.dom()===e.activeElement;var element,e}}),um=Object.freeze({exhibit:function(base,e){var t=e.ignore?{}:{attributes:{tabindex:"-1"}};return wi(t)},events:function(e){return Lo([Vo(vt(),function(component,t){im(component,e),t.stop()})].concat(e.stopMousedown?[Vo(Me(),function(e,t){t.event().prevent()})]:[]))}}),cm=[wa("onFocus"),mo("stopMousedown",!1),mo("ignore",!1)],sm=Ba({fields:cm,name:"focusing",active:um,apis:am}),lm=function(component,e,t){var n=e.aria;n.update(component,n,t.get())},fm=function(component,e,t){e.toggleClass.each(function(e){t.get()?Mi(component.element(),e):zi(component.element(),e)})},dm=function(component,e,t){hm(component,e,t,!t.get())},mm=function(component,e,t){t.set(!0),fm(component,e,t),lm(component,e,t)},gm=function(component,e,t){t.set(!1),fm(component,e,t),lm(component,e,t)},hm=function(component,e,t,n){(n?mm:gm)(component,e,t)},pm=function(component,e,t){hm(component,e,t,e.selected)},vm=Object.freeze({onLoad:pm,toggle:dm,isOn:function(component,e,t){return t.get()},on:mm,off:gm,set:hm}),bm=Object.freeze({exhibit:function(base,e,t){return wi({})},events:function(e,t){var n,r,o,c=(n=e,r=t,o=dm,Qo(function(component){o(component,n,r)})),l=Ea(e,t,pm);return Lo(W([e.toggleOnExecute?[c]:[],[l]]))}}),ym=Object.freeze({init:function(e){var t=Ne(!1);return{readState:function(){return t.get()},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(!1)}}}}),xm=function(component,e,t){Tn(component.element(),"aria-expanded",t)},wm=[mo("selected",!1),option("toggleClass"),mo("toggleOnExecute",!0),go("aria",{mode:"none"},qr("mode",{pressed:[mo("syncWithExpanded",!1),output("update",function(component,e,t){Tn(component.element(),"aria-pressed",t),e.syncWithExpanded&&xm(component,e,t)})],checked:[output("update",function(component,e,t){Tn(component.element(),"aria-checked",t)})],expanded:[output("update",xm)],selected:[output("update",function(component,e,t){Tn(component.element(),"aria-selected",t)})],none:[output("update",t)]}))],Cm=Ba({fields:wm,name:"toggling",active:bm,apis:vm,state:ym}),Sm=function(e){(uf(e.element()).isNone()||sm.isFocused(e))&&(sm.isFocused(e)||sm.focus(e),To(e,"alloy.item-hover",{item:e}))},km=function(e){To(e,"alloy.item-focus",{item:e})},Om=r("alloy.item-hover"),Tm=r("alloy.item-focus"),Em=function(e,t){return{key:e,value:{config:{},me:function(e,t){var n=Lo(t);return Ba({fields:[eo("enabled")],name:e,active:{events:r(n)}})}(e,t),configAsRaw:r({}),initialConfig:{},state:bi}}},Nm=[eo("data"),eo("components"),eo("dom"),mo("hasSubmenu",!1),option("toggling"),Ns("itemBehaviours",[Cm,sm,Hd,om]),mo("ignoreFocus",!1),mo("domModification",{}),output("builder",function(e){return{dom:e.dom,domModification:Wn({},e.domModification,{attributes:Wn({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes,{"aria-haspopup":e.hasSubmenu},e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:_s(e.itemBehaviours,[e.toggling.fold(Cm.revoke,function(e){return Cm.config(Wn({aria:{mode:"checked"}},e))}),sm.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(component){km(component)}}),Hd.config({mode:"execution"}),om.config({store:{mode:"memory",initialValue:e.data}}),Em("item-type-events",[Vo(kt(),Eo),qo(Me()),Vo(Le(),Sm),Vo(Ct(),sm.focus)])]),components:e.components,eventOrder:e.eventOrder}}),mo("eventOrder",{})],_m=[eo("dom"),eo("components"),output("builder",function(e){return{dom:e.dom,components:e.components,events:Lo([Go(Ct())])}})],Am=r([Qs({name:"widget",overrides:function(e){return{behaviours:Da([om.config({store:{mode:"manual",getValue:function(component){return e.data},setValue:function(){}}})])}}})]),Dm=[eo("uid"),eo("data"),eo("components"),eo("dom"),mo("autofocus",!1),mo("ignoreFocus",!1),Ns("widgetBehaviours",[om,sm,Hd]),mo("domModification",{}),Cl(Am()),output("builder",function(e){var t=ml(0,e,Am()),n=gl("item-widget",e,t.internals()),r=function(component){return hl(component,e,"widget").map(function(e){return Hd.focusIn(e),e})},o=function(component,t){return Dl(t.event().target())?k.none():e.autofocus?(t.setSource(component.element()),k.none()):k.none()};return{dom:e.dom,components:n,domModification:e.domModification,events:Lo([Qo(function(component,e){r(component).each(function(t){e.stop()})}),Vo(Le(),Sm),Vo(Ct(),function(component,t){e.autofocus?r(component):sm.focus(component)})]),behaviours:_s(e.widgetBehaviours,[om.config({store:{mode:"memory",initialValue:e.data}}),sm.config({ignore:e.ignoreFocus,onFocus:function(component){km(component)}}),Hd.config({mode:"special",focusIn:e.autofocus?function(component){r(component)}:za(),onLeft:o,onRight:o,onEscape:function(component,t){return sm.isFocused(component)||e.autofocus?e.autofocus?(t.setSource(component.element()),k.none()):k.none():(sm.focus(component),k.some(!0))}})])}})],Rm=qr("type",{widget:Dm,item:Nm,separator:_m}),Bm=r([tl({factory:{sketch:function(e){var t=Wr("menu.spec item",Rm,e);return t.builder(t)}},name:"items",unit:"item",defaults:function(e,u){return u.hasOwnProperty("uid")?u:Wn({},u,{uid:ci("item")})},overrides:function(e,u){return{type:u.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),Mm=r([eo("value"),eo("items"),eo("dom"),eo("components"),mo("eventOrder",{}),Os("menuBehaviours",[Gl,om,Ml,Hd]),go("movement",{mode:"menu",moveOnTab:!0},qr("mode",{grid:[Ta(),output("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}})],matrix:[output("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}}),eo("rowSelector")],menu:[mo("moveOnTab",!0),output("config",function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}})]})),to("markers",pa()),mo("fakeFocus",!1),mo("focusManager",sf()),wa("onHighlight")]),Im=r("alloy.menu-focus"),zm=Al({name:"Menu",configFields:Mm(),partFields:Bm(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Es(e.menuBehaviours,[Gl.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),om.config({store:{mode:"memory",initialValue:e.value}}),Ml.config({find:k.some}),Hd.config(e.movement.config(e,e.movement))]),events:Lo([Vo(Tm(),function(menu,e){var t=e.event();menu.getSystem().getByDom(t.target()).each(function(t){Gl.highlight(menu,t),e.stop(),To(menu,Im(),{menu:menu,item:t})})}),Vo(Om(),function(menu,e){var t=e.event().item();Gl.highlight(menu,t)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Pm=function(e,t,n,r){return Se(n,r).bind(function(r){return Se(e,r).bind(function(r){var o=Pm(e,t,n,r);return k.some([r].concat(o))})}).getOr([])},Lm=function(e,t){var n={};ne(e,function(e,menu){P(e,function(e){n[e]=menu})});var r=t,o=oe(t,function(e,t){return{k:e,v:t}}),c=re(o,function(e,t){return[t].concat(Pm(n,r,o,t))});return re(n,function(menu){return Se(c,menu).getOr([menu])})},Hm=function(){var e=Ne({}),t=Ne({}),n=Ne({}),r=Ne(k.none()),o=Ne({}),c=function(e){return Se(t.get(),e)};return{setMenuBuilt:function(e,n){var r;t.set(Wn({},t.get(),((r={})[e]={type:"prepared",menu:n},r)))},setContents:function(c,l,f,d){r.set(k.some(c)),e.set(f),t.set(l),o.set(d);var m=Lm(d,f);n.set(m)},expand:function(t){return Se(e.get(),t).map(function(menu){var e=Se(n.get(),t).getOr([]);return[menu].concat(e)})},refresh:function(e){return Se(n.get(),e)},collapse:function(e){return Se(n.get(),e).bind(function(path){return path.length>1?k.some(path.slice(1)):k.none()})},lookupMenu:c,otherMenus:function(path){var e=o.get();return K(ee(e),path)},getPrimary:function(){return r.get().bind(function(e){return c(e).bind(function(e){return"prepared"===e.type?k.some(e.menu):k.none()})})},getMenus:function(){return t.get()},clear:function(){e.set({}),t.set({}),n.set({}),r.set(k.none())},isClear:function(){return r.get().isNone()}}},Fm=r("collapse-item"),Vm=_l({name:"TieredMenu",configFields:[ka("onExecute"),ka("onEscape"),Sa("onOpenMenu"),Sa("onOpenSubmenu"),wa("onCollapseMenu"),mo("highlightImmediately",!0),io("data",[eo("primary"),eo("menus"),eo("expansions")]),mo("fakeFocus",!1),wa("onHighlight"),wa("onHover"),ba(),eo("dom"),mo("navigateOnHover",!0),mo("stayInDom",!1),Os("tmenuBehaviours",[Hd,Gl,Ml,Wd]),mo("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)}},factory:function(e,t){var n,r=Ne(k.none()),o=Hm(),c=function(t){var n=function(t,n,r){return re(r,function(r,o){var c=function(){return zm.sketch(Wn({dom:r.dom},r,{value:o,items:r.items,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?lf():sf()}))};return o===n?{type:"prepared",menu:t.getSystem().build(c())}:{type:"notbuilt",nbMenu:c}})}(t,e.data.primary,e.data.menus),r=f(t);return o.setContents(e.data.primary,n,e.data.expansions,r),o.getPrimary()},l=function(e){return om.getValue(e).value},f=function(t){return re(e.data.menus,function(data,e){return $(data.items,function(e){return"separator"===e.type?[]:[e.data.value]})})},d=function(e,menu){Gl.highlight(e,menu),Gl.getHighlighted(menu).orThunk(function(){return Gl.getFirst(menu)}).each(function(t){No(e,t.element(),Ct())})},m=function(e,t){return _e(map(t,function(t){return e.lookupMenu(t).bind(function(e){return"prepared"===e.type?k.some(e.menu):k.none()})}))},h=function(t,n,path){var r=m(n,n.otherMenus(path));P(r,function(n){Hi(n.element(),[e.markers.backgroundMenu]),e.stayInDom||Wd.remove(t,n)})},v=function(t,path){var n=function(t){return r.get().getOrThunk(function(){var n={},o=wc(t.element(),"."+e.markers.item),c=filter(o,function(i){return"true"===Nn(i,"aria-haspopup")});return P(c,function(i){t.getSystem().getByDom(i).each(function(e){var t=l(e);n[t]=e})}),r.set(k.some(n)),n})}(t);ne(n,function(e,t){var n=M(path,t);Tn(e.element(),"aria-expanded",n)})},y=function(t,n,path){return k.from(path[0]).bind(function(r){return n.lookupMenu(r).bind(function(r){if("notbuilt"===r.type)return k.none();var o=r.menu,c=m(n,path.slice(1));return P(c,function(t){Mi(t.element(),e.markers.backgroundMenu)}),Ro(o.element())||Wd.append(t,ca(o)),Hi(o.element(),[e.markers.backgroundMenu]),d(t,o),h(t,n,path),k.some(o)})})};!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(n||(n={}));var x=function(t,r,c){void 0===c&&(c=n.HighlightSubmenu);var f=l(r);return o.expand(f).bind(function(path){return v(t,path),k.from(path[0]).bind(function(l){return o.lookupMenu(l).bind(function(f){var d=function(e,t,n){if("notbuilt"===n.type){var menu=e.getSystem().build(n.nbMenu());return o.setMenuBuilt(t,menu),menu}return n.menu}(t,l,f);return Ro(d.element())||Wd.append(t,ca(d)),e.onOpenSubmenu(t,r,d),c===n.HighlightSubmenu?(Gl.highlightFirst(d),y(t,o,path)):(Gl.dehighlightAll(d),k.some(r))})})})},w=function(t,n){var r=l(n);return o.collapse(r).bind(function(path){return v(t,path),y(t,o,path).map(function(r){return e.onCollapseMenu(t,n,r),r})})},C=function(t){return function(n,r){return fa(r.getSource(),"."+e.markers.item).bind(function(e){return n.getSystem().getByDom(e).toOption().bind(function(e){return t(n,e).map(function(){return!0})})})}},S=Lo([Vo(Im(),function(e,t){var menu=t.event().menu();Gl.highlight(e,menu);var n=l(t.event().item());o.refresh(n).each(function(path){return h(e,o,path)})}),Qo(function(component,t){var r=t.event().target();component.getSystem().getByDom(r).each(function(t){0===l(t).indexOf("collapse-item")&&w(component,t),x(component,t,n.HighlightSubmenu).fold(function(){e.onExecute(component,t)},function(){})})}),Xo(function(t,n){c(t).each(function(n){Wd.append(t,ca(n)),e.onOpenMenu(t,n),e.highlightImmediately&&d(t,n)})})].concat(e.navigateOnHover?[Vo(Om(),function(t,r){var c=r.event().item();!function(e,t){var n=l(t);o.refresh(n).bind(function(path){return v(e,path),y(e,o,path)})}(t,c),x(t,c,n.HighlightParent),e.onHover(t,c)})]:[])),O={collapseMenu:function(e){Gl.getHighlighted(e).each(function(t){Gl.getHighlighted(t).each(function(t){w(e,t)})})},highlightPrimary:function(e){o.getPrimary().each(function(t){d(e,t)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Es(e.tmenuBehaviours,[Hd.config({mode:"special",onRight:C(function(e,t){return Dl(t.element())?k.none():x(e,t,n.HighlightSubmenu)}),onLeft:C(function(e,t){return Dl(t.element())?k.none():w(e,t)}),onEscape:C(function(t,n){return w(t,n).orThunk(function(){return e.onEscape(t,n).map(function(){return t})})}),focusIn:function(e,t){o.getPrimary().each(function(t){No(e,t.element(),Ct())})}}),Gl.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Ml.config({find:function(e){return Gl.getHighlighted(e)}}),Wd.config({})]),eventOrder:e.eventOrder,apis:O,events:S}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,menu){return{primary:e,menus:ke(e,menu),expansions:{}}},collapseItem:function(text){return{value:jn(Fm()),meta:{text:text}}}}}),jm=_l({name:"InlineView",configFields:[eo("lazySink"),wa("onShow"),wa("onHide"),lo("onEscape"),Os("inlineBehaviours",[ys,Ha]),fo("fireDismissalEventInstead",[mo("event",Bt())]),mo("getRelated",k.none),mo("eventOrder",k.none)],factory:function(e,t){var n=function(t,n,r,o){var c=e.lazySink(t).getOrDie();ys.openWhileCloaked(t,r,function(){return es.positionWithin(c,n,t,o)}),e.onShow(t)},o={setContent:function(e,t){ys.open(e,t)},showAt:function(e,t,r){var o=k.none();n(e,t,r,o)},showWithin:n,showMenuAt:function(t,n,r){var menu=function(e,t,n,r){var o=function(){return e.lazySink(t)};return Vm.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,onEscape:function(){return ys.close(t),e.onEscape.map(function(e){return e(t)}),k.some(!0)},onExecute:function(){return k.some(!0)},onOpenMenu:function(e,menu){es.position(o().getOrDie(),n,menu)},onOpenSubmenu:function(e,t,n){var r=o().getOrDie();es.position(r,{anchor:"submenu",item:t},n)}})}(e,t,n,r);ys.open(t,menu),e.onShow(t)},hide:function(t){ys.close(t),e.onHide(t)},getContent:function(e){return ys.getState(e)},isOpen:ys.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Es(e.inlineBehaviours,[ys.config({isPartOf:function(t,data,n){return ma(data,n)||function(t,n){return e.getRelated(t).exists(function(e){return ma(e,n)})}(t,n)},getAttachPoint:function(t){return e.lazySink(t).getOrDie()}}),Ss(Wn({isExtraPart:r(!1)},e.fireDismissalEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})))]),eventOrder:e.eventOrder,apis:o}},apis:{showAt:function(e,component,t,n){e.showAt(component,t,n)},showWithin:function(e,component,t,n,r){e.showWithin(component,t,n,r)},showMenuAt:function(e,component,t,n){e.showMenuAt(component,t,n)},hide:function(e,component){e.hide(component)},isOpen:function(e,component){return e.isOpen(component)},getContent:function(e,component){return e.getContent(component)},setContent:function(e,component,t){e.setContent(component,t)}}}),Um=function(e){var t=function(component,e){e.stop(),Eo(component)},n=ht.detect().deviceType.isTouch()?[Vo(St(),t)]:[Vo(We(),t),Vo(Me(),function(component,e){e.cut()})];return Lo(W([e.map(function(e){return Vo(wt(),function(component,t){e(component),t.stop()})}).toArray(),n]))},Wm=_l({name:"Button",factory:function(e){var t=Um(e.action),n=e.dom.tag,r=function(t){return Se(e.dom,"attributes").bind(function(e){return Se(e,t)})};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:_s(e.buttonBehaviours,[sm.config({}),Hd.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===n){var e=r("type").getOr("button"),t=r("role").map(function(e){return{role:e}}).getOr({});return Wn({type:e},t)}return{role:r("role").getOr("button")}}()},eventOrder:e.eventOrder}},configFields:[mo("uid",void 0),eo("dom"),mo("components",[]),Ns("buttonBehaviours",[sm,Hd]),option("action"),option("role"),mo("eventOrder",{})]}),$m=function(e){var t=function(e){return void 0!==e.uid}(e)&&Ee(e,"uid")?e.uid:ci("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).fold(k.none,k.some)},asSpec:function(){return Wn({},e,{uid:t})}}},qm=function(e){return k.from(e()["temporary-placeholder"]).getOr("!not found!")},Gm=function(e,t){return k.from(t()[e]).getOrThunk(function(){return qm(t)})},Ym={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Xm=_l({name:"Notification",factory:function(e){var t,n,r=$m({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Da([Wd.config({})])}),o=function(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}},c=function(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}},l=$m({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},c(0)],behaviours:Da([Wd.config({})])}),f={updateProgress:function(e,t){e.getSystem().isConnected()&&l.getOpt(e).each(function(progress){Wd.set(progress,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(t)]},c(t)])})},updateText:function(e,t){if(e.getSystem().isConnected()){var n=r.get(e);Wd.set(n,[text(t)])}}},d=W([e.icon.toArray(),e.level.toArray(),e.level.bind(function(e){return k.from(Ym[e])}).toArray()]);return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=d,n=e.iconProvider,Ae(t,function(e){return k.from(n()[e])}).getOrThunk(function(){return qm(n)}))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Da([Wd.config({})])}].concat(e.progress?[l.asSpec()]:[]).concat(Wm.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Gm("close",e.iconProvider),attributes:{"aria-label":e.translationProvider("Close")}}}],action:function(t){e.onAction(t)}})),apis:f}},configFields:[option("level"),eo("progress"),eo("icon"),eo("onAction"),eo("text"),eo("iconProvider"),eo("translationProvider")],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,text){e.updateText(t,text)}}}),Km=tinymce.util.Tools.resolve("tinymce.util.Delay");function Jm(e,t,n){var r=t.backstage;return{open:function(e,o){var c=function(){o(),jm.hide(f)},l=ua(Xm.sketch({text:e.text,level:M(["success","error","warning","info"],e.type)?e.type:void 0,progress:!0===e.progressBar,icon:k.from(e.icon),onAction:c,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),f=ua(jm.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:t.backstage.shared.getSink,fireDismissalEventInstead:{}}));return n.add(f),e.timeout&&Km.setTimeout(function(){c()},e.timeout),{close:c,moveTo:function(e,t){jm.showAt(f,{anchor:"makeshift",x:e,y:t},ca(l))},moveRel:function(element,e){jm.showAt(f,t.backstage.shared.anchors.banner(),ca(l))},text:function(e){Xm.updateText(l,e)},settings:e,getEl:function(){},progressBar:{value:function(e){Xm.updateProgress(l,e)}}}},close:function(e){e.close()},reposition:function(t){!function(e){P(e,function(e){e.moveTo(0,0)})}(t),function(t){if(t.length>0){var n=t.slice(0,1)[0],r=function(e){return e.inline?e.getElement():e.getContentAreaContainer()}(e);n.moveRel(r,"tc-tc"),P(t,function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")})}}(t)},getArgs:function(e){return e.settings}}}var Qm,Zm=function(t,n){var r=null;return{cancel:function(){null!==r&&(e.clearTimeout(r),r=null)},throttle:function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];null!==r&&e.clearTimeout(r),r=e.setTimeout(function(){t.apply(null,o),r=null},n)}}},eg=/[\u00a0 \t\r\n]/,tg=function(e,t,text,n,r){return void 0===r&&(r=0),(o=e).collapsed&&3===o.startContainer.nodeType?function(text,e,t,n){var i;for(i=e-1;i>=0;i--){if(eg.test(text.charAt(i)))return k.none();if(text.charAt(i)===t)break}return-1===i||e-i<n?k.none():k.some(text.substring(i+1,e))}(text,n,t,r).map(function(t){var n=e.cloneRange();return n.setStart(e.startContainer,e.startOffset-t.length-1),n.setEnd(e.startContainer,e.startOffset),{text:t,rng:n}}):k.none();var o},ng=function(e,t){t.on("keypress",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel);var n=function(e,t){To(e,Ve(),{raw:t})};t.on("keydown",function(t){var r=function(){return e.getView().bind(Gl.getHighlighted)};8===t.which&&e.onKeypress.throttle(t),e.isActive()&&(27===t.which?e.closeIfNecessary():32===t.which?e.closeIfNecessary():13===t.which?(r().each(Eo),t.preventDefault()):40===t.which?(r().fold(function(){e.getView().each(Gl.highlightFirst)},function(e){n(e,t)}),t.preventDefault()):37!==t.which&&38!==t.which&&39!==t.which||r().each(function(e){n(e,t),t.preventDefault()}))})},rg=tinymce.util.Tools.resolve("tinymce.util.Promise"),og=function(e,text){return 0===e.startOffset||/\s/.test(text.charAt(e.startOffset-1))},ig=function(e,t){var n=t(),r=e.selection.getRng(),o=r.startContainer.nodeValue;return function(e,t,n){return Ae(n.triggerChars,function(n){return tg(e,n,t,e.startOffset).map(function(e){return{range:e.rng,text:e.text,triggerChar:n}})})}(r,o,n).map(function(e){var t=filter(n.lookupByChar(e.triggerChar),function(t){return e.text.length>=t.minChars&&t.matches.getOr(og)(e.range,o,e.text)});return{lookupData:rg.all(map(t,function(t){return t.fetch(e.text,t.maxResults).then(function(e){return{items:e,columns:t.columns,onAction:t.onAction}})})),triggerChar:e.triggerChar,range:e.range}})},ag=Ar([wo("type",function(){return"autocompleteitem"}),wo("active",function(){return!1}),wo("disabled",function(){return!1}),mo("meta",{}),no("value"),so("text"),so("icon")]),ug=Ar([no("type"),no("ch"),ho("minChars",1),mo("columns",1),ho("maxResults",10),lo("matches"),oo("fetch"),oo("onAction")]),cg=function(e){var a,t,n=e.ui.registry.getAll().popups,r=re(n,function(e){return(t=e,jr("Autocompleter",ug,t)).fold(function(e){throw new Error($r(e))},function(e){return e});var t}),o=(a=ie(r,function(e){return e.ch}),t={},P(a,function(e){t[e]={}}),ee(t)),c=ae(r);return{dataset:r,triggerChars:o,lookupByChar:function(e){return filter(c,function(t){return t.ch===e})}}},sg=[bo("disabled",!1),so("text"),so("shortcut"),zr("value","value",Jn(function(){return jn("menuitem-value")}),Gr()),mo("meta",{})],lg=Ar([no("type"),yo("onSetup",function(){return t}),yo("onAction",t),so("icon")].concat(sg)),fg=Ar([no("type"),oo("getSubmenuItems"),yo("onSetup",function(){return t}),so("icon")].concat(sg)),dg=Ar([no("type"),bo("active",!1),yo("onSetup",function(){return t}),oo("onAction")].concat(sg)),mg=Ar([no("type"),bo("active",!1),so("icon")].concat(sg)),gg=Ar([no("type"),so("text")]),hg=Ar([no("type"),ro("fancytype",["inserttable"]),yo("onAction",t)]),pg=function(e,t,n){var r=wc(e.element(),"."+n);if(r.length>0){var o=V(r,function(e){var n=e.dom().getBoundingClientRect().top,o=r[0].dom().getBoundingClientRect().top;return Math.abs(n-o)>t}).getOr(r.length);return k.some({numColumns:o,numRows:Math.ceil(r.length/o)})}return k.none()},vg=function(e,t){return Da([Em(e,t)])},bg=function(e){return vg(jn("unnamed-events"),e)},yg=[eo("lazySink"),eo("tooltipDom"),mo("exclusive",!0),mo("tooltipComponents",[]),mo("delay",300),vo("mode","normal",["normal","follow-highlight"]),mo("anchor",function(e){return{anchor:"hotspot",hotspot:e,layouts:{onLtr:r([Ju,Ku,qu,Yu,Gu,Xu]),onRtl:r([Ju,Ku,qu,Yu,Gu,Xu])}}}),wa("onHide"),wa("onShow")],xg=Object.freeze({init:function(){var t=Ne(k.none()),n=Ne(k.none()),o=function(){t.get().each(function(t){e.clearTimeout(t)})},c=r("not-implemented");return yi({getTooltip:function(){return n.get()},isShowing:function(){return n.get().isSome()},setTooltip:function(s){n.set(k.some(s))},clearTooltip:function(){n.set(k.none())},clearTimer:o,resetTimer:function(n,r){o(),t.set(k.some(e.setTimeout(function(){n()},r)))},readState:c})}}),wg=jn("tooltip.exclusive"),Cg=jn("tooltip.show"),Sg=jn("tooltip.hide"),kg=function(component,e,t){component.getSystem().broadcastOn([wg],{})},Og=Object.freeze({hideAllExclusive:kg,setComponents:function(component,e,t,n){t.getTooltip().each(function(e){e.getSystem().isConnected()&&Wd.set(e,n)})}}),Tg=Ba({fields:yg,name:"tooltipping",active:Object.freeze({events:function(e,t){var n=function(n){t.getTooltip().each(function(p){as(p),e.onHide(n,p),t.clearTooltip()}),t.clearTimer()};return Lo(W([[Vo(Cg,function(n){t.resetTimer(function(){!function(n){if(!t.isShowing()){kg(n);var r=e.lazySink(n).getOrDie(),o=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Lo("normal"===e.mode?[Vo(Le(),function(e){Oo(n,Cg)}),Vo(ze(),function(e){Oo(n,Sg)})]:[]),behaviours:Da([Wd.config({})])});t.setTooltip(o),rs(r,o),e.onShow(n,o),es.position(r,e.anchor(n),o)}}(n)},e.delay)}),Vo(Sg,function(r){t.resetTimer(function(){n(r)},e.delay)}),Vo(xt(),function(e,t){M(t.channels(),wg)&&n(e)}),Ko(function(e){n(e)})],"normal"===e.mode?[Vo(He(),function(e){Oo(e,Cg)}),Vo(bt(),function(e){Oo(e,Sg)}),Vo(Le(),function(e){Oo(e,Cg)}),Vo(ze(),function(e){Oo(e,Sg)})]:[Vo(Lt(),function(e,t){Oo(e,Cg)}),Vo(Ht(),function(e){Oo(e,Sg)})]]))}}),state:xg,apis:Og}),Eg=function(html){var e=Vt.fromHtml(html),t=sn(e),n=function(e){var t=void 0!==e.dom().attributes?e.dom().attributes:[];return H(t,function(b,e){var t;return"class"===e.name?b:Wn({},b,((t={})[e.name]=e.value,t))},{})}(e),r=function(e){return Array.prototype.slice.call(e.dom().classList,0)}(e),o=0===t.length?{}:{innerHtml:bn(e)};return Wn({tag:xn(e),classes:r,attributes:n},o)},Ng=tinymce.util.Tools.resolve("tinymce.util.I18n"),_g="tox-menu-nav__js",Ag={normal:_g,color:"tox-swatch"},Dg="tox-collection__item--active",Rg=function(e){return Se(Ag,e).getOr(_g)},Bg=tinymce.util.Tools.resolve("tinymce.Env"),Mg=function(source){var e=Bg.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},t=source.split("+"),n=map(t,function(t){var n=t.toLowerCase().trim();return ce(e,n)?e[n]:t});return Bg.mac?n.join(""):n.join("+")},Ig=function(e){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:e}}},zg=function(e){return{dom:{tag:"div",classes:["tox-collection__item-label"]},components:[text(Ng.translate(e))]}},Pg=function(style,e){return{dom:{tag:"div",classes:["tox-collection__item-label"]},components:[{dom:{tag:style.tag,attributes:{style:style.styleAttr}},components:[text(Ng.translate(e))]}]}},Lg=function(e){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:Mg(e)}}},Hg=function(e){return{dom:{tag:"div",classes:["tox-collection__item-icon","tox-collection__item-checkmark"],innerHtml:Gm("checkmark",e)}}},Fg=function(e,t,n,r){void 0===r&&(r=k.none());var o=e.iconContent.map(function(e){return n=e,o=t.icons,c=r,k.from(o()[n]).or(c).getOrThunk(function(){return qm(o)});var n,o,c}),l=k.from(e.meta).fold(function(){return zg},function(meta){return ce(meta,"style")?c(Pg,meta.style):zg});return"color"===e.presets?function(e,t,n){var r,title;return{dom:(r=n.getOr(""),title=e.map(function(text){return' title="'+text+'"'}).getOr(""),Eg("custom"===t?'<button class="tox-swatch tox-swatches__picker-btn"'+title+">"+r+"</button>":"remove"===t?'<div class="tox-swatch tox-swatch--remove"'+title+">"+r+"</div>":'<div class="tox-swatch" style="background-color: '+t+'" data-mce-color="'+t+'"'+title+"></div>")),optComponents:[]}}(e.ariaLabel,e.value,o):function(e,t,n,r){var o=n?e.checkMark.orThunk(function(){return t.or(k.some("")).map(Ig)}):k.none(),c=e.ariaLabel.map(function(label){return{attributes:{title:Ng.translate(label)}}}).getOr({});return{dom:ye({tag:"div",classes:[_g,"tox-collection__item"]},c),optComponents:[o,e.textContent.map(r),e.shortcutContent.map(Lg),e.caret]}}(e,o,n,l)},Vg=["input","button","textarea"],jg=function(component,e,t){e.disabled&&Yg(component,e,t)},Ug=function(component){return M(Vg,xn(component.element()))},Wg=function(component){Tn(component.element(),"disabled","disabled")},$g=function(component){An(component.element(),"disabled")},qg=function(component){Tn(component.element(),"aria-disabled","true")},Gg=function(component){Tn(component.element(),"aria-disabled","false")},Yg=function(component,e,t){e.disableClass.each(function(e){Mi(component.element(),e)}),(Ug(component)?Wg:qg)(component)},Xg=function(component){return Ug(component)?function(component){return _n(component.element(),"disabled")}(component):function(component){return"true"===Nn(component.element(),"aria-disabled")}(component)},Kg=Object.freeze({enable:function(component,e,t){e.disableClass.each(function(e){zi(component.element(),e)}),(Ug(component)?$g:Gg)(component)},disable:Yg,isDisabled:Xg,onLoad:jg}),Jg=Object.freeze({exhibit:function(base,e,t){return wi({classes:e.disabled?e.disableClass.map(J).getOr([]):[]})},events:function(e,t){return Lo([Ho(wt(),function(component,e){return Xg(component)}),Ea(e,t,jg)])}}),Qg=[mo("disabled",!1),option("disableClass")],Zg=Ba({fields:Qg,name:"disabling",active:Jg,apis:Kg}),eh=function(e){return Zg.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},nh=function(e){return Zg.config({disabled:e})},rh=function(e){return Zg.config({disabled:e,disableClass:"tox-tbtn--disabled"})},oh=function(e,t){var n=e.getApi(t);return function(e){e(n)}},ih=function(e,t){return Xo(function(n){oh(e,n)(function(n){var r=e.onSetup(n);null!=r&&t.set(r)})})},ah=function(e,t){return Ko(function(n){return oh(e,n)(t.get())})};!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Qm||(Qm={}));var uh,ch=Qm,sh=function(e,t){return Qo(function(n,r){oh(e,n)(e.onAction),e.triggersSubmenu||t!==ch.CLOSE_ON_EXECUTE||(Oo(n,Tt()),r.stop())})},lh={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},fh=function(e){return $(e,function(e){return e.toArray()})},dh=function(e,n,r){var o=Ne(t);return{type:"item",dom:n.dom,components:fh(n.optComponents),data:e.data,eventOrder:lh,hasSubmenu:e.triggersSubmenu,itemBehaviours:Da([Em("item-events",[sh(e,r),ih(e,o),ah(e,o)]),eh(e.disabled),Wd.config({})].concat(e.itemBehaviours))}},mh=function(source){return{value:source.value,meta:ye({text:source.text.getOr("")},source.meta)}},gh=function(meta,e){return ue(meta,"tooltipWorker").map(function(t){return[Tg.config({lazySink:e.getSink,tooltipDom:{tag:"div"},tooltipComponents:[],anchor:function(e){return{anchor:"submenu",item:e}},mode:"follow-highlight",onShow:function(component,e){t(function(e){Tg.setComponents(component,[ia({element:Vt.fromDom(e)})])})}})]}).getOr([])},hh=r(al("item-widget",Am())),ph=jn("cell-over"),vh=jn("cell-execute"),bh=function(e,col,t){var n,r=function(t){return To(t,vh,{row:e,col:col})};return ua({dom:{tag:"div",attributes:(n={role:"button"},n["aria-labelledby"]=t,n)},behaviours:Da([Em("insert-table-picker-cell",[Vo(Le(),sm.focus),Vo(wt(),r),Vo(kt(),r)]),Cm.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),sm.config({onFocus:function(t){return To(t,ph,{row:e,col:col})}})])})},yh=function(e,t,n){for(var r=[],i=0;i<t;i++){for(var o=[],c=0;c<n;c++)o.push(bh(i,c,e));r.push(o)}return r},xh=function(e,t,n,r,o){for(var i=0;i<r;i++)for(var c=0;c<o;c++)Cm.set(e[i][c],i<=t&&c<=n)},wh=function(e){return $(e,function(e){return map(e,ca)})},Ch=function(e,col){return text(col+1+"x"+(e+1))},Sh={inserttable:function(e){var t=jn("size-label"),n=yh(t,10,10),r=$m({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[text("0x0")],behaviours:Da([Wd.config({})])});return{type:"widget",data:{value:jn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hh().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:wh(n).concat(r.asSpec()),behaviours:Da([Em("insert-table-picker",[$o(ph,function(e,t,o){var c=o.event().row(),col=o.event().col();xh(n,c,col,10,10),Wd.set(r.get(e),[Ch(c,col)])}),$o(vh,function(t,n,r){e.onAction({numRows:r.event().row()+1,numColumns:r.event().col()+1}),Oo(t,Tt())})]),Hd.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}}},kh=function(e,t,n,r,o,c,l){var f=Fg({presets:n,textContent:t?e.text:k.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:k.none(),checkMark:t?k.some(Hg(l.icons)):k.none(),caret:k.none(),value:e.value},l,!0);return be(dh({data:mh(e),disabled:e.disabled,getApi:function(component){return{setActive:function(e){Cm.set(component,e)},isActive:function(){return Cm.isOn(component)},isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},onAction:function(t){return r(e.value)},onSetup:function(e){return e.setActive(o),function(){}},triggersSubmenu:!1,itemBehaviours:[]},f,c),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:e.active}})},Oh=function(e,t,n,r,o,c,l){void 0===l&&(l=!0);var f=Fg({presets:n,textContent:t?e.text:k.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:e.value},c.providers,l,e.icon);return dh({data:mh(e),disabled:e.disabled,getApi:function(){return{}},onAction:function(t){return r(e.value,e.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:gh(e.meta,c)},f,o)},Th=function(e){var t=e.text.fold(function(){return{}},function(text){return{innerHtml:text}});return{type:"separator",dom:Wn({tag:"div",classes:["tox-collection__item","tox-collection__group-heading"]},t),components:[]}},Eh=function(e,t,n,r){void 0===r&&(r=!0);var o=Fg({presets:"normal",iconContent:e.icon,textContent:e.text,ariaLabel:e.text,caret:k.none(),checkMark:k.none(),shortcutContent:e.shortcut},n,r);return dh({data:mh(e),getApi:function(component){return{isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t)},Nh=function(e,n,r,o){void 0===o&&(o=!0);var c,l=(c=r.icons,{dom:{tag:"div",classes:["tox-collection__item-caret"],innerHtml:Gm("chevron-right",c)}}),f=Fg({presets:"normal",iconContent:e.icon,textContent:e.text,ariaLabel:e.text,caret:k.some(l),checkMark:k.none(),shortcutContent:e.shortcut},r,o);return dh({data:mh(e),getApi:function(component){return{isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},disabled:e.disabled,onAction:t,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},f,n)},_h=function(e,t,n){var r=Fg({iconContent:k.none(),textContent:e.text,ariaLabel:e.text,checkMark:k.some(Hg(n.icons)),caret:k.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,!0);return be(dh({data:mh(e),disabled:e.disabled,getApi:function(component){return{setActive:function(e){Cm.set(component,e)},isActive:function(){return Cm.isOn(component)},isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:e.active}})},Ah=function(e){return(t=Sh,n=e.fancytype,Object.prototype.hasOwnProperty.call(t,n)?k.some(t[n]):k.none()).map(function(t){return t(e)});var t,n},Dh=function(e){return"color"===e?"tox-swatches":"tox-menu"},Rh=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Dh(e),tieredMenu:"tox-tiered-menu"}},Bh=function(e){var t=Rh(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Rg(e)}},Mh=function(e,t,n){var r=Rh(n);return{tag:"div",classes:W([[r.menu,"tox-menu-"+t+"-column"],e?[r.hasIcons]:[]])}},Ih=[zm.parts().items({})],zh=function(e,t,n){var r=Rh(n);return{dom:{tag:"div",classes:W([[r.tieredMenu]])},markers:Bh(n)}},Ph=function(e,t){var n=Bh(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},Lh=function(e,t){return function(n){var r=z(n,t);return map(r,function(t){return{dom:e,components:t}})}},Hh=function(e,t,n){return void 0===n&&(n=!0),{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[zm.parts().items({preprocess:function(n){return"auto"!==e&&e>1?Lh({tag:"div",classes:["tox-collection__group"]},e)(n):function(e,t){var n=[],r=[];return P(e,function(e,i){t(e,i)?(r.length>0&&n.push(r),r=[],ce(e.dom,"innerHtml")&&r.push(e)):r.push(e)}),r.length>0&&n.push(r),map(n,function(s){return{dom:{tag:"div",classes:["tox-collection__group"]},components:s}})}(n,function(e,i){return"separator"===t[i].type})}})]}};!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(uh||(uh={}));var Fh=function(t){return e.console.error($r(t)),e.console.log(t),k.none()},Vh=function(e){return void 0!==e.icon||"togglemenuitem"===e.type||"choicemenuitem"===e.type},jh=function(e){return I(e,Vh)},Uh=function(t,n,r,o){switch(void 0===o&&(o=!0),t.type){case"menuitem":return(c=t,jr("menuitem",lg,c)).fold(Fh,function(e){return k.some(Eh(e,n,r,o))});case"nestedmenuitem":return function(e){return jr("nestedmenuitem",fg,e)}(t).fold(Fh,function(e){return k.some(Nh(e,n,r,o))});case"togglemenuitem":return function(e){return jr("togglemenuitem",dg,e)}(t).fold(Fh,function(e){return k.some(_h(e,n,r))});case"separator":return function(e){return jr("separatormenuitem",gg,e)}(t).fold(Fh,function(e){return k.some(Th(e))});case"fancymenuitem":return function(e){return jr("fancymenuitem",hg,e)}(t).fold(Fh,function(e){return Ah(e)});default:return e.console.error("Unknown item in general menu",t),k.none()}var c},Wh=function(e,t,n,r,c){var l;return"color"===c?{value:e,dom:(l=function(e){return{dom:{tag:"div",classes:["tox-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[zm.parts().items({preprocess:"auto"!==e?Lh({tag:"div",classes:["tox-swatches__row"]},e):o})]}]}}(r)).dom,components:l.components,items:n}:"normal"===c&&"auto"===r?{value:e,dom:(l=Hh(r,n)).dom,components:l.components,items:n}:"normal"===c&&1===r?{value:e,dom:(l=Hh(1,n)).dom,components:l.components,items:n}:"normal"===c?{value:e,dom:(l=Hh(r,n)).dom,components:l.components,items:n}:"listpreview"===c&&"auto"!==r?{value:e,dom:(l=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[zm.parts().items({preprocess:Lh({tag:"div",classes:["tox-collection__group"]},e)})]}}(r)).dom,components:l.components,items:n}:{value:e,dom:Mh(t,r,c),components:Ih,items:n}},$h=function(e,t,n,r,o,select,c){return _e(map(e,function(e){return"choiceitem"===e.type?(l=e,jr("choicemenuitem",mg,l)).fold(Fh,function(l){return k.some(kh(l,1===n,r,t,select(e.value),o,c))}):k.none();var l}))},qh=function(e,t,n,r,o){var c=1===n,l=!c||jh(e);return _e(map(e,function(e){return(n=e,jr("Autocompleter.Item",ag,n)).fold(Fh,function(e){return k.some(Oh(e,c,"normal",t,r,o,l))});var n}))},Gh=function(e,t,n,r,o,c,select,l){var f=jh(t),d=$h(t,n,r,"color"!==o?"normal":"color",c,select,l);return Wh(e,f,d,r,o)},Yh=function(e,t,n,r){var o=jh(t),c=_e(map(t,function(e){var t=function(i){return Uh(i,n,r,o)};return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(ye(e,{disabled:!0})):t(e)}));return Wh(e,o,c,1,"normal")},Xh=function(e){return Vm.singleData(e.value,e)},Kh=function(t,n){var r=ua(jm.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],lazySink:n.getSink})),o=function(){return jm.isOpen(r)},c=function(){o()&&jm.hide(r)},l=Ge(function(){return cg(t)}),f=Zm(function(o){(" "===o.key?k.none():ig(t,l)).fold(c,function(o){o.lookupData.then(function(l){var f=function(r,o){var l=Ae(o,function(e){return k.from(e.columns)}).getOr(1);return $(o,function(o){var f=o.items;return qh(f,function(n,l){var f=t.selection.getRng(),d=f.startContainer;tg(f,r,d.data,f.startOffset).fold(function(){return e.console.error("Lost context. Cursor probably moved")},function(e){var t=e.rng,r={hide:c};o.onAction(r,t,n,l)})},l,ch.BUBBLE_TO_SANDBOX,n)})}(o.triggerChar,l);if(f.length>0){var d=Ae(l,function(e){return k.from(e.columns)}).getOr(1);jm.showAt(r,{anchor:"selection",root:Vt.fromDom(t.getBody()),getSelection:function(){return k.some({start:function(){return Vt.fromDom(o.range.startContainer)},soffset:function(){return o.range.startOffset},finish:function(){return Vt.fromDom(o.range.endContainer)},foffset:function(){return o.range.endOffset}})}},zm.sketch(function(e,t,n,r){var o=n===uh.ContentFocus?lf():sf(),c=Ph(t,r),l=Bh(r);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:c,fakeFocus:n===uh.ContentFocus,focusManager:o,menuBehaviours:bg("auto"!==t?[]:[Xo(function(e,t){pg(e,4,l.item).each(function(t){var n=t.numColumns,r=t.numRows;Hd.setGridSize(e,r,n)})})])}}(Wh("autocompleter-value",!0,f,d,"normal"),d,uh.ContentFocus,"normal"))),jm.getContent(r).each(Gl.highlightFirst)}else c()})})},50);ng({onKeypress:f,closeIfNecessary:c,isActive:o,getView:function(){return jm.getContent(r)}},t)},Jh=function(filter,e){return function(t){if(filter(t)){var o=Vt.fromDom(t.target),c=function(){t.stopPropagation()},l=function(){t.preventDefault()},f=n(l,c),d=function(e,t,n,o,c,l,f){return{target:r(e),x:r(t),y:r(n),stop:o,prevent:c,kill:l,raw:r(f)}}(o,t.clientX,t.clientY,c,l,f,t);e(d)}}},Qh=function(element,e,filter,t,n){var r=Jh(filter,t);return element.dom().addEventListener(e,r,n),{unbind:c(Zh,element,e,r,n)}},Zh=function(element,e,t,n){element.dom().removeEventListener(e,t,n)},ep=r(!0),tp=function(element,e,t){return function(element,e,filter,t){return Qh(element,e,filter,t,!1)}(element,e,ep,t)},np=function(element,e,t){return function(element,e,filter,t){return Qh(element,e,filter,t,!0)}(element,e,ep,t)},op=function(e,t,n){return fa(e,t,n).isSome()};function ip(t,n){var r=null;return{cancel:function(){null!==r&&(e.clearTimeout(r),r=null)},schedule:function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];r=e.setTimeout(function(){t.apply(null,o),r=null},n)}}}var ap=function(e){var t=e.raw();return void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0])},up=function(e){var t=Ne(k.none()),n=ip(function(n){t.set(k.none()),e.triggerEvent(Ot(),n)},400),o=Oe([{key:De(),value:function(e){return ap(e).each(function(o){n.cancel();var data={x:r(o.clientX),y:r(o.clientY),target:e.target};n.schedule(e),t.set(k.some(data))}),k.none()}},{key:Re(),value:function(e){return n.cancel(),ap(e).each(function(e){t.get().each(function(data){(function(e,data){var t=Math.abs(e.clientX-data.x()),n=Math.abs(e.clientY-data.y());return t>5||n>5})(e,data)&&t.set(k.none())})}),k.none()}},{key:Be(),value:function(r){return n.cancel(),t.get().filter(function(data){return rn(data.target(),r.target())}).map(function(data){return e.triggerEvent(St(),r)})}}]);return{fireIfReady:function(e,t){return Se(o,t).bind(function(t){return t(e)})}}},cp=ht.detect().browser.isFirefox(),sp=_r([oo("triggerEvent"),mo("stopBackspace",!0)]),lp=function(t,n){var r=Wr("Getting GUI events settings",sp,n),o=ht.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=up(r),l=map(o.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return tp(t,e,function(t){c.fireIfReady(t,e).each(function(e){e&&t.kill()}),r.triggerEvent(e,t)&&t.kill()})}),f=Ne(k.none()),d=tp(t,"paste",function(t){c.fireIfReady(t,"paste").each(function(e){e&&t.kill()}),r.triggerEvent("paste",t)&&t.kill(),f.set(k.some(e.setTimeout(function(){r.triggerEvent(yt(),t)},0)))}),m=tp(t,"keydown",function(e){r.triggerEvent("keydown",e)?e.kill():!0===r.stopBackspace&&function(e){return 8===e.raw().which&&!M(["input","textarea"],xn(e.target()))&&!op(e.target(),'[contenteditable="true"]')}(e)&&e.prevent()}),h=function(e,t){return cp?np(e,"focus",t):tp(e,"focusin",t)}(t,function(e){r.triggerEvent("focusin",e)&&e.kill()}),v=Ne(k.none()),y=function(e,t){return cp?np(e,"blur",t):tp(e,"focusout",t)}(t,function(t){r.triggerEvent("focusout",t)&&t.kill(),v.set(k.some(e.setTimeout(function(){r.triggerEvent(bt(),t)},0)))});return{unbind:function(){P(l,function(e){e.unbind()}),m.unbind(),h.unbind(),y.unbind(),d.unbind(),f.get().each(e.clearTimeout),v.get().each(e.clearTimeout)}}},fp=function(e,t){var source=Se(e,"target").map(function(e){return e()}).getOr(t);return Ne(source)},dp=he([{stopped:[]},{resume:["element"]},{complete:[]}]),mp=function(e,t,n,o,source,c){var l=e(t,o),f=function(e,source){var t=Ne(!1),n=Ne(!1);return{stop:function(){t.set(!0)},cut:function(){n.set(!0)},isStopped:t.get,isCut:n.get,event:r(e),setSource:source.set,getSource:source.get}}(n,source);return l.fold(function(){return c.logEventNoHandlers(t,o),dp.complete()},function(e){var n=e.descHandler();return Si(n)(f),f.isStopped()?(c.logEventStopped(t,e.element(),n.purpose()),dp.stopped()):f.isCut()?(c.logEventCut(t,e.element(),n.purpose()),dp.complete()):un(e.element()).fold(function(){return c.logNoParent(t,e.element(),n.purpose()),dp.complete()},function(r){return c.logEventResponse(t,e.element(),n.purpose()),dp.resume(r)})})},gp=function(e,t,n,r,source,o){return mp(e,t,n,r,source,o).fold(function(){return!0},function(r){return gp(e,t,n,r,source,o)},function(){return!1})},hp=function(e,n,o){var c,l,f=(c=n,l=Ne(!1),{stop:function(){l.set(!0)},cut:t,isStopped:l.get,isCut:r(!1),event:r(c),setSource:m("Cannot set source of a broadcasted event"),getSource:m("Cannot get source of a broadcasted event")});return P(e,function(e){var t=e.descHandler();Si(t)(f)}),f.isStopped()},pp=function(e,t,n,r,o){var source=fp(n,r);return gp(e,t,n,r,source,o)},vp=jt("element","descHandler"),bp=function(e,t){return{id:r(e),descHandler:r(t)}};function yp(){var e={};return{registerId:function(t,n,r){ne(r,function(r,o){var c=void 0!==e[o]?e[o]:{};c[n]=Ci(r,t),e[o]=c})},unregisterId:function(t){ne(e,function(e,n){e.hasOwnProperty(t)&&delete e[t]})},filterByType:function(t){return Se(e,t).map(function(e){return ie(e,function(e,t){return bp(t,e)})}).getOr([])},find:function(t,n,r){var o=we(n)(e);return Po(r,function(e){return function(e,t){return ui(t).fold(function(){return k.none()},function(n){var r=we(n);return e.bind(r).map(function(e){return vp(t,e)})})}(o,e)},t)}}}function xp(){var e=yp(),t={},n=function(component){ui(component.element()).each(function(n){delete t[n],e.unregisterId(n)})};return{find:function(t,n,r){return e.find(t,n,r)},filter:function(t){return e.filterByType(t)},register:function(component){var r=function(component){var e=component.element();return ui(e).fold(function(){return ii("uid-",component.element())},function(e){return e})}(component);Ee(t,r)&&function(component,e){var r=t[e];if(r!==component)throw new Error('The tagId "'+e+'" is already used by: '+element(r.element())+"\nCannot use it for: "+element(component.element())+"\nThe conflicting element is"+(Ro(r.element())?" ":" not ")+"already in the DOM");n(component)}(component,r);var o=[component];e.registerId(o,r,component.events()),t[r]=component},unregister:n,getById:function(e){return we(e)(t)}}}var wp,Cp=_l({name:"Container",factory:function(e){var t=e.dom,n=t.attributes,r=$n(t,["attributes"]);return{uid:e.uid,dom:Wn({tag:"div",attributes:Wn({role:"presentation"},n)},r),components:e.components,behaviours:Ts(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[mo("components",[]),Os("containerBehaviours",[]),mo("events",{}),mo("domModification",{}),mo("eventOrder",{})]}),Sp=function(e){var n=function(t){return un(e.element()).fold(function(){return!0},function(e){return rn(t,e)})},o=xp(),c=function(e,t){return o.find(n,e,t)},l=lp(e.element(),{triggerEvent:function(e,t){return Pn(e,t.target(),function(n){return function(e,t,n,r){var o=n.target();return pp(e,t,n,o,r)}(c,e,t,n)})}}),f={debugInfo:r("real"),triggerEvent:function(e,t,data){Pn(e,t,function(n){pp(c,e,data,t,n)})},triggerFocus:function(e,n){ui(e).fold(function(){of(e)},function(o){Pn(vt(),e,function(o){!function(e,t,n,r,o){var source=fp(n,r);mp(e,t,n,r,source,o)}(c,vt(),{originator:r(n),kill:t,prevent:t,target:r(e)},e,o)})})},triggerEscape:function(e,t){f.triggerEvent("keydown",e.element(),t.event())},getByUid:function(e){return S(e)},getByDom:function(e){return k(e)},build:ua,addToGui:function(e){h(e)},removeFromGui:function(e){v(e)},addToWorld:function(e){d(e)},removeFromWorld:function(e){m(e)},broadcast:function(e){x(e)},broadcastOn:function(e,t){w(e,t)},broadcastEvent:function(e,t){C(e,t)},isConnected:r(!0)},d=function(component){component.connect(f),Sn(component.element())||(o.register(component),P(component.components(),d),f.triggerEvent(Nt(),component.element(),{target:r(component.element())}))},m=function(component){Sn(component.element())||(P(component.components(),m),o.unregister(component)),component.disconnect()},h=function(component){rs(e,component)},v=function(component){as(component)},y=function(data){var e=o.filter(xt());P(e,function(e){var t=e.descHandler();Si(t)(data)})},x=function(e){y({universal:r(!0),data:r(e)})},w=function(e,t){y({universal:r(!1),channels:r(e),data:r(t)})},C=function(e,t){var n=o.filter(e);return hp(n,t)},S=function(e){return o.getById(e).fold(function(){return ge.error(new Error('Could not find component with uid: "'+e+'" in system.'))},ge.value)},k=function(e){var t=ui(e).getOr("not found");return S(t)};return d(e),{root:r(e),element:e.element,destroy:function(){l.unbind(),vn(e.element())},add:h,remove:v,getByUid:S,getByDom:k,addToWorld:d,removeFromWorld:m,broadcast:x,broadcastOn:w,broadcastEvent:C}},kp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Op=tinymce.util.Tools.resolve("tinymce.EditorManager"),Tp=function(e){return k.from(e.settings.min_width).filter(D)},Ep=function(e){return k.from(e.settings.min_height).filter(D)},Np=function(e){var t=ee(e.settings),n=filter(t,function(e){return/^toolbar([1-9])$/.test(e)}),r=map(n,function(t){return e.getParam(t,!1,"string")}),o=filter(r,function(e){return"string"==typeof e});return o.length>0?k.some(o):k.none()};!function(e){e.default="",e.floating="floating",e.sliding="sliding"}(wp||(wp={}));var _p,Ap=function(e){return e.getParam("toolbar_drawer","","string")},Dp=function(e){var t=function(e){return e.getParam("fixed_toolbar_container","","string")}(e),n=e.getParam("inline",!1,"boolean");return t.length>0&&n?la(body(),t):k.none()},Rp=function(e){return e.getParam("inline",!1,"boolean")&&Dp(e).isSome()},Bp=jn("form-component-change"),Mp=jn("form-close"),Ip=jn("form-cancel"),zp=jn("form-action"),Pp=jn("form-submit"),Lp=jn("form-block"),Hp=jn("form-unblock"),Fp=jn("form-tabchange"),Vp=jn("form-resize"),jp=r([mo("prefix","form-field"),Os("fieldBehaviours",[Ml,om])]),Up=r([el({schema:[eo("dom")],name:"label"}),el({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[eo("text")],name:"aria-descriptor"}),Qs({factory:{sketch:function(e){var t=xe(e,["factory"]);return e.factory.sketch(t)}},schema:[eo("factory")],name:"field"})]),Wp=Al({name:"FormField",configFields:jp(),partFields:Up(),factory:function(e,t,n,r){var o=Es(e.fieldBehaviours,[Ml.config({find:function(t){return hl(t,e,"field")}}),om.config({store:{mode:"manual",getValue:function(e){return Ml.getCurrent(e).bind(om.getValue)},setValue:function(e,t){Ml.getCurrent(e).each(function(e){om.setValue(e,t)})}}})]),c=Lo([Xo(function(component,t){var n=vl(component,e,["label","field","aria-descriptor"]);n.field().each(function(t){var r=jn(e.prefix);n.label().each(function(label){Tn(label.element(),"for",r),Tn(t.element(),"id",r)}),n["aria-descriptor"]().each(function(n){var r=jn(e.prefix);Tn(n.element(),"id",r),Tn(t.element(),"aria-describedby",r)})})})]),l={getField:function(t){return hl(t,e,"field")},getLabel:function(t){return hl(t,e,"label")}};return{uid:e.uid,dom:e.dom,components:t,behaviours:o,events:c,apis:l}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),$p=Object.freeze({getCoupled:function(component,e,t,n){return t.getOrCreate(component,e,n)}}),qp=[to("others",Vr(ge.value,Gr()))],Gp=Ba({fields:qp,name:"coupling",apis:$p,state:Object.freeze({init:function(e){var t={},n=r({});return yi({readState:n,getOrCreate:function(component,e,n){var r=ee(e.others);if(r)return Se(t,n).getOrThunk(function(){var r=Se(e.others,n).getOrDie("No information found for coupled component: "+n)(component),o=component.getSystem().build(r);return t[n]=o,o});throw new Error("Cannot find coupled component: "+n+". Known coupled components: "+xr(r,null,2))}})}})}),Yp=Object.freeze({events:function(e,t){var n=e.stream.streams.setup(e,t);return Lo([Vo(e.event,n),Ko(function(){return t.cancel()})].concat(e.cancelEvent.map(function(e){return[Vo(e,function(){return t.cancel()})]}).getOr([])))}}),Xp=function(e){var t=Ne(null);return yi({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})},Kp=Object.freeze({throttle:Xp,init:function(e){return e.stream.streams.state(e)}}),Jp=[to("stream",qr("mode",{throttle:[eo("delay"),mo("stopEvent",!0),output("streams",{setup:function(e,t){var n=e.stream,r=Zm(e.onStream,n.delay);return t.setTimer(r),function(component,e){r.throttle(component,e),n.stopEvent&&e.stop()}},state:Xp})]})),mo("event","input"),option("cancelEvent"),Sa("onStream")],Qp=Ba({fields:Jp,name:"streaming",active:Yp,state:Kp}),Zp=function(t){var data=k.none(),n=[],r=function(e){o()?l(e):n.push(e)},o=function(){return data.isSome()},c=function(e){P(e,l)},l=function(t){data.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){data=k.some(e),c(n),n=[]}),{get:r,map:function(e){return Zp(function(t){r(function(data){t(e(data))})})},isReady:o}},ev={nu:Zp,pure:function(a){return Zp(function(e){e(a)})}},tv=function(t){var n=function(n){var r;t((r=n,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this;e.setTimeout(function(){r.apply(o,t)},0)}))},r=function(){return ev.nu(n)};return{map:function(e){return tv(function(t){n(function(a){var n=e(a);t(n)})})},bind:function(e){return tv(function(t){n(function(a){e(a).get(t)})})},anonBind:function(e){return tv(function(t){n(function(a){e.get(t)})})},toLazy:r,toCached:function(){var e=null;return tv(function(t){null===e&&(e=r()),e.get(t)})},get:n}},nv={nu:tv,pure:function(a){return tv(function(e){e(a)})}},rv=r("sink"),ov=r(el({name:rv(),overrides:r({dom:{tag:"div"},behaviours:Da([es.config({useFixed:!0})]),events:Lo([qo(Ve()),qo(Me()),qo(We())])})}));!function(e){e[e.HighlightFirst=0]="HighlightFirst",e[e.HighlightNone=1]="HighlightNone"}(_p||(_p={}));var iv=function(e,component){var t=e.getHotspot(component).getOr(component);return e.layouts.fold(function(){return{anchor:"hotspot",hotspot:t}},function(e){return{anchor:"hotspot",hotspot:t,layouts:e}})},av=function(e,t,n,r,o,c,l){return function(e,t,n,component,r,o,c){var l=function(e,t,component){return(0,e.fetch)(component).map(t)}(e,t,component),f=lv(component,e);return l.map(function(e){return e.bind(function(data){return k.from(Vm.sketch(Wn({},o.menu(),{uid:ci(""),data:data,highlightImmediately:c===_p.HighlightFirst,onOpenMenu:function(e,menu){var t=f().getOrDie();es.position(t,n,menu),ys.decloak(r)},onOpenSubmenu:function(e,t,n){var o=f().getOrDie();es.position(o,{anchor:"submenu",item:t},n),ys.decloak(r)},onEscape:function(){return sm.focus(component),ys.close(r),k.some(!0)}})))})})}(e,t,iv(e,n),n,r,o,l).map(function(e){return e.fold(function(){ys.isOpen(r)&&ys.close(r)},function(data){ys.cloak(r),ys.open(r,data),c(r)}),r})},uv=function(e,t,component,n,r,o,c){return ys.close(n),nv.pure(n)},cv=function(e,t,n,r,o,c){var l=Gp.getCoupled(n,"sandbox");return(ys.isOpen(l)?uv:av)(e,t,n,l,r,o,c)},sv=function(e,t,n){var element,r,menu=Ml.getCurrent(t).getOr(t),o=Ka(e.element());n?Ui(menu.element(),"min-width",o+"px"):(element=menu.element(),r=o,Xa.set(element,r))},lv=function(e,t){return e.getSystem().getByUid(t.uid+"-"+rv()).map(function(e){return function(){return ge.value(e)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return ge.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(e)}})})},fv=function(e,t,n){var o,c=(o=jn("aria-owns"),{id:r(o),link:function(e){Tn(e,"aria-owns",o)},unlink:function(e){An(e,"aria-owns")}}),l=lv(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:c.id()}},behaviours:_s(e.sandboxBehaviours,[om.config({store:{mode:"memory",initialValue:t}}),ys.config({onOpen:function(component,menu){var r=iv(e,t);c.link(t.element()),e.matchWidth&&sv(r.hotspot,menu,e.useMinWidth),e.onOpen(r,component,menu),void 0!==n&&void 0!==n.onOpen&&n.onOpen(component,menu)},onClose:function(component,menu){c.unlink(t.element()),void 0!==n&&void 0!==n.onClose&&n.onClose(component,menu)},isPartOf:function(e,data,n){return ma(data,n)||ma(t,n)},getAttachPoint:function(){return l().getOrDie()}}),Ml.config({find:function(e){return ys.getState(e).bind(function(menu){return Ml.getCurrent(menu)})}}),Ss({isExtraPart:r(!1)})])}},dv=function(e,input,t){var n=om.getValue(t);om.setValue(input,n),gv(input)},mv=function(input,e){var t=input.element(),n=Ji(t),r=t.dom();"number"!==Nn(t,"type")&&e(r,n)},gv=function(input){mv(input,function(e,t){return e.setSelectionRange(t.length,t.length)})},hv=function(e,input,t){if(e.selectsOver){var n=om.getValue(input),r=e.getDisplayText(n),o=om.getValue(t);return 0===e.getDisplayText(o).indexOf(r)?k.some(function(){dv(0,input,t),function(input,e){mv(input,function(t,n){return t.setSelectionRange(e,n.length)})}(input,r.length)}):k.none()}return k.none()},pv=r([option("data"),mo("inputAttributes",{}),mo("inputStyles",{}),mo("tag","input"),mo("inputClasses",[]),wa("onSetValue"),mo("styles",{}),mo("eventOrder",{}),Os("inputBehaviours",[om,sm]),mo("selectOnFocus",!0)]),vv=function(e){return Da([sm.config({onFocus:!1===e.selectOnFocus?t:function(component){var input=component.element(),e=Ji(input);input.dom().setSelectionRange(0,e.length)}})])},bv=function(e){return Wn({},vv(e),Es(e.inputBehaviours,[om.config({store:{mode:"manual",initialValue:e.data.getOr(void 0),getValue:function(input){return Ji(input.element())},setValue:function(input,data){Ji(input.element())!==data&&Qi(input.element(),data)}},onSetValue:e.onSetValue})]))},yv=function(e){return{tag:e.tag,attributes:Wn({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}},xv=r("alloy.typeahead.itemexecute"),wv=function(){return[mo("sandboxClasses",[]),Ns("sandboxBehaviours",[Ml,Ha,ys,om])]},Cv=r([option("lazySink"),eo("fetch"),mo("minChars",5),mo("responseTime",1e3),wa("onOpen"),mo("getHotspot",k.some),mo("layouts",k.none()),mo("eventOrder",{}),xo("model",{},[mo("getDisplayText",function(e){return void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value}),mo("selectsOver",!0),mo("populateFromBrowse",!0)]),wa("onSetValue"),Ca("onExecute"),wa("onItemExecute"),mo("inputClasses",[]),mo("inputAttributes",{}),mo("inputStyles",{}),mo("matchWidth",!0),mo("useMinWidth",!1),mo("dismissOnBlur",!0),ya(["openClass"]),option("initialData"),Os("typeaheadBehaviours",[sm,om,Qp,Hd,Cm,Gp]),wo("previewing",function(){return Ne(!0)})].concat(pv()).concat(wv())),Sv=r([Zs({schema:[ba()],name:"menu",overrides:function(e){return{fakeFocus:!0,onHighlight:function(menu,t){e.previewing.get()?menu.getSystem().getByUid(e.uid).each(function(input){hv(e.model,input,t).fold(function(){return Gl.dehighlight(menu,t)},function(e){return e()})}):menu.getSystem().getByUid(e.uid).each(function(input){e.model.populateFromBrowse&&dv(e.model,input,t)}),e.previewing.set(!1)},onExecute:function(menu,t){return menu.getSystem().getByUid(e.uid).toOption().map(function(e){return To(e,xv(),{item:t}),!0})},onHover:function(menu,t){e.previewing.set(!1),menu.getSystem().getByUid(e.uid).each(function(input){e.model.populateFromBrowse&&dv(e.model,input,t)})}}}})]),kv=Al({name:"Typeahead",configFields:Cv(),partFields:Sv(),factory:function(e,n,r,c){var l=function(n,r,o){e.previewing.set(!1);var l=Gp.getCoupled(n,"sandbox");ys.isOpen(l)?Ml.getCurrent(l).each(function(menu){Gl.getHighlighted(menu).fold(function(){o(menu)},function(){Ao(l,menu.element(),"keydown",r)})}):av(e,d(n),n,l,c,function(e){Ml.getCurrent(e).each(o)},_p.HighlightFirst).get(t)},f=vv(e),d=function(e){return function(t){return t.map(function(data){var t=ae(data.menus),n=$(t,function(menu){return filter(menu.items,function(e){return"item"===e.type})});return om.getState(e).update(map(n,function(e){return e.data})),data})}},m=[sm.config({}),om.config({onSetValue:e.onSetValue,store:Wn({mode:"dataset",getDataKey:function(e){return Ji(e.element())},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(t,data){Qi(t.element(),e.model.getDisplayText(data))}},e.initialData.map(function(e){return ke("initialValue",e)}).getOr({}))}),Qp.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:function(component,n){var r=Gp.getCoupled(component,"sandbox");if(sm.isFocused(component)&&Ji(component.element()).length>=e.minChars){var o=Ml.getCurrent(r).bind(function(menu){return Gl.getHighlighted(menu).map(om.getValue)});e.previewing.set(!0),av(e,d(component),component,r,c,function(t){Ml.getCurrent(r).each(function(menu){o.fold(function(){e.model.selectsOver&&Gl.highlightFirst(menu)},function(e){Gl.highlightBy(menu,function(t){return om.getValue(t).value===e.value}),Gl.getHighlighted(menu).orThunk(function(){return Gl.highlightFirst(menu),k.none()})})})},_p.HighlightFirst).get(t)}},cancelEvent:Et()}),Hd.config({mode:"special",onDown:function(e,t){return l(e,t,Gl.highlightFirst),k.some(!0)},onEscape:function(e){var t=Gp.getCoupled(e,"sandbox");return ys.isOpen(t)?(ys.close(t),k.some(!0)):k.none()},onUp:function(e,t){return l(e,t,Gl.highlightLast),k.some(!0)},onEnter:function(t){var n=Gp.getCoupled(t,"sandbox"),r=ys.isOpen(n);if(r&&!e.previewing.get())return Ml.getCurrent(n).bind(function(menu){return Gl.getHighlighted(menu)}).map(function(e){return To(t,xv(),{item:e}),!0});var o=om.getValue(t);return Oo(t,Et()),e.onExecute(n,t,o),r&&ys.close(n),k.some(!0)}}),Cm.config({toggleClass:e.markers.openClass,aria:{mode:"pressed",syncWithExpanded:!0}}),Gp.config({others:{sandbox:function(t){return fv(e,t,{onOpen:o,onClose:o})}}}),Em("typeaheadevents",[Qo(function(n){var r=t;cv(e,d(n),n,c,r,_p.HighlightFirst).get(t)}),Vo(xv(),function(t,n){var r=Gp.getCoupled(t,"sandbox");dv(e.model,t,n.event().item()),Oo(t,Et()),e.onItemExecute(t,r,n.event().item(),om.getValue(t)),ys.close(r),gv(t)})].concat(e.dismissOnBlur?[Vo(bt(),function(e){var t=Gp.getCoupled(e,"sandbox");uf(t.element()).isNone()&&ys.close(t)})]:[]))];return{uid:e.uid,dom:yv(e),behaviours:Wn({},f,Es(e.typeaheadBehaviours,m)),eventOrder:e.eventOrder}}}),Ov=function(e,t,n){var r=Ev(e,t,n);return Wp.sketch(r)},Tv=function(e,t){return Ov(e,t,[])},Ev=function(e,t,n){return{dom:Nv(n),components:e.toArray().concat([t])}},Nv=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},_v=function(label,e){return Wp.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(label)}})},Av=function(e){return"separator"===e.type},Dv={type:"separator"},Rv=function(e,t){var n=H(e,function(e,n){return function(e){return T(e)}(n)?""===n?e:"|"===n?e.length>0&&!Av(e[e.length-1])?e.concat([Dv]):e:ce(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])},[]);return n.length>0&&Av(n[n.length-1])&&n.pop(),n},Bv=function(e,t){return function(e){return ce(e,"getSubmenuItems")}(e)?function(e,t){var n=e.getSubmenuItems(),r=Mv(n,t);return{item:e,menus:be(r.menus,ke(e.value,r.items)),expansions:be(r.expansions,ke(e.value,e.value))}}(e,t):{item:e,menus:{},expansions:{}}},Mv=function(e,t){var n=Rv(T(e)?e.split(" "):e,t);return L(n,function(e,n){var r=function(e){if(Av(e))return e;var t=Se(e,"value").getOrThunk(function(){return jn("generated-menu-item")});return be({value:t},e)}(n),o=Bv(r,t);return{menus:be(e.menus,o.menus),items:[o.item].concat(e.items),expansions:be(e.expansions,o.expansions)}},{menus:{},expansions:{},items:[]})},Iv=function(e,t,n){var r=jn("primary-menu"),data=Mv(e,n.menuItems());if(0===data.items.length)return k.none();var o=Yh(r,data.items,t,n),c=re(data.menus,function(e,r){return Yh(r,e,t,n)}),l=be(c,ke(r,o));return k.from(Vm.tieredData(r,l,data.expansions))},zv=_l({name:"Input",configFields:pv(),factory:function(e,t){return{uid:e.uid,dom:yv(e),components:[],behaviours:bv(e),eventOrder:e.eventOrder}}}),Pv=ht.detect().browser.isFirefox(),Lv={position:"absolute",left:"-9999px"},Hv=function(t,n,text){var r=function(e,text){var span=Vt.fromTag("span",e.dom());Tn(span,"role","presentation");var t=Vt.fromText(text,e.dom());return gn(span,t),span}(on(n),text);Pv&&function(e,t){var n=jn("ephox-alloy-aria-voice");Tn(t,"id",n),Tn(e,"aria-describedby",n)}(n,r),En(r,t(text)),Wi(r,Lv),gn(n,r),e.setTimeout(function(){An(r,"aria-live"),vn(r)},1e3)},Fv=function(e){return{"aria-live":"assertive","aria-atomic":"true",role:"alert"}},Vv=["input","textarea"],jv=function(e){var t=xn(e);return M(Vv,t)},Uv=function(component,e){var t=e.getRoot(component).getOr(component.element());zi(t,e.invalidClass),e.notify.each(function(e){jv(component.element())&&An(t,"title"),e.getContainer(component).each(function(t){yn(t,e.validHtml)}),e.onValid(component)})},Wv=function(component,e,t,text){var n=e.getRoot(component).getOr(component.element());Mi(n,e.invalidClass),e.notify.each(function(e){jv(component.element())&&Tn(component.element(),"title",text),function(e,text){Hv(Fv,e,text)}(body(),text),e.getContainer(component).each(function(e){yn(e,text)}),e.onInvalid(component,text)})},$v=function(component,e,t){return e.validator.fold(function(){return nv.pure(ge.value(!0))},function(e){return e.validate(component)})},qv=function(component,e,t){return e.notify.each(function(e){e.onValidate(component)}),$v(component,e).map(function(t){return component.getSystem().isConnected()?t.fold(function(t){return Wv(component,e,0,t),ge.error(t)},function(t){return Uv(component,e),ge.value(t)}):ge.error("No longer in system")})},Gv=Object.freeze({markValid:Uv,markInvalid:Wv,query:$v,run:qv,isInvalid:function(component,e){var t=e.getRoot(component).getOr(component.element());return Pi(t,e.invalidClass)}}),Yv=Object.freeze({events:function(e,n){return e.validator.map(function(n){return Lo([Vo(n.onEvent,function(component){qv(component,e).get(o)})].concat(n.validateOnLoad?[Xo(function(component){qv(component,e).get(t)})]:[]))}).getOr({})}}),Xv=[eo("invalidClass"),mo("getRoot",k.none),fo("notify",[mo("aria","alert"),mo("getContainer",k.none),mo("validHtml",""),wa("onValid"),wa("onInvalid"),wa("onValidate")]),fo("validator",[eo("validate"),mo("onEvent","input"),mo("validateOnLoad",!0)])],Kv=Ba({fields:Xv,name:"invalidating",active:Yv,apis:Gv,extra:{validation:function(e){return function(component){var t=om.getValue(component);return nv.pure(e(t))}}}}),Jv=Object.freeze({exhibit:function(base,e){return wi({attributes:Oe([{key:e.tabAttr,value:"true"}])})}}),Qv=[mo("tabAttr","data-alloy-tabstop")],Zv=Ba({fields:Qv,name:"tabstopping",active:Jv}),eb=function(e){return{value:r(e)}},tb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rb=function(e){return tb.test(e)||nb.test(e)},ob=function(e){var t=function(e){var t=e.value().replace(tb,function(e,t,g,b){return t+t+g+g+b+b});return{value:r(t)}}(e);return nb.exec(t.value())},ib=function(component){var e=component.toString(16);return 1==e.length?"0"+e:e},ab=function(e){var t=ib(e.red())+ib(e.green())+ib(e.blue());return eb(t)},ub=Math.min,cb=Math.max,sb=Math.round,lb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,db=function(e,t,n,o){return{red:r(e),green:r(t),blue:r(n),alpha:r(o)}},mb=function(e){var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},gb=function(e){var t,n,r,o,c,l,f,d,g,b;if(c=(e.hue()||0)%360,l=e.saturation()/100,f=e.value()/100,l=cb(0,ub(l,1)),f=cb(0,ub(f,1)),0===l)return d=g=b=sb(255*f),db(d,g,b,1);switch(t=c/60,r=(n=f*l)*(1-Math.abs(t%2-1)),o=f-n,Math.floor(t)){case 0:d=n,g=r,b=0;break;case 1:d=r,g=n,b=0;break;case 2:d=0,g=n,b=r;break;case 3:d=0,g=r,b=n;break;case 4:d=r,g=0,b=n;break;case 5:d=n,g=0,b=r;break;default:d=g=b=0}return d=sb(255*(d+o)),g=sb(255*(g+o)),b=sb(255*(b+o)),db(d,g,b,1)},hb=function(e){var t=ob(e),n=parseInt(t[1],16),r=parseInt(t[2],16),o=parseInt(t[3],16);return db(n,r,o,1)},pb=function(e,t,n,r){var o=parseInt(e,10),g=parseInt(t,10),b=parseInt(n,10),a=parseFloat(r);return db(o,g,b,a)},vb=function(e){return"rgba("+e.red()+","+e.green()+","+e.blue()+","+e.alpha()+")"},bb=r(db(255,0,0,1)),yb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),xb="tinymce-custom-colors",wb="choiceitem",Cb=[{type:wb,text:"Turquoise",value:"#18BC9B"},{type:wb,text:"Green",value:"#2FCC71"},{type:wb,text:"Blue",value:"#3598DB"},{type:wb,text:"Purple",value:"#9B59B6"},{type:wb,text:"Navy Blue",value:"#34495E"},{type:wb,text:"Dark Turquoise",value:"#18A085"},{type:wb,text:"Dark Green",value:"#27AE60"},{type:wb,text:"Medium Blue",value:"#2880B9"},{type:wb,text:"Medium Purple",value:"#8E44AD"},{type:wb,text:"Midnight Blue",value:"#2B3E50"},{type:wb,text:"Yellow",value:"#F1C40F"},{type:wb,text:"Orange",value:"#E67E23"},{type:wb,text:"Red",value:"#E74C3C"},{type:wb,text:"Light Gray",value:"#ECF0F1"},{type:wb,text:"Gray",value:"#95A5A6"},{type:wb,text:"Dark Yellow",value:"#F29D12"},{type:wb,text:"Dark Orange",value:"#D35400"},{type:wb,text:"Dark Red",value:"#E74C3C"},{type:wb,text:"Medium Gray",value:"#BDC3C7"},{type:wb,text:"Dark Gray",value:"#7E8C8D"},{type:wb,text:"Black",value:"#000000"},{type:wb,text:"White",value:"#ffffff"}],Sb=function(e){void 0===e&&(e=10);var t,n=yb.getItem(xb),r=T(n)?JSON.parse(n):[],o=e-(t=r).length<0?t.slice(0,e):t,c=function(e){o.splice(e,1)};return{add:function(t){B(o,t).each(c),o.unshift(t),o.length>e&&o.pop(),yb.setItem(xb,JSON.stringify(o))},state:function(){return o.slice(0)}}}(10),kb=function(e){var i,t=[];for(i=0;i<e.length;i+=2)t.push({text:e[i+1],value:"#"+e[i],type:"choiceitem"});return t},Ob=function(e){return e.getParam("color_map")},Tb=function(e,t){return e.getParam("color_cols",t,"number")},Eb=function(e){return!1!==e.getParam("custom_colors")},Nb=function(e){var t=Ob(e);return void 0!==t?kb(t):Cb},_b=function(){return map(Sb.state(),function(e){return{type:wb,text:e,value:e}})},Ab=function(e){Sb.add(e)},Db=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)}),n},Rb=function(e){return Math.max(5,Math.ceil(Math.sqrt(e)))},Bb=function(e){var t=Nb(e),n=Rb(t.length);return Tb(e,n)},Mb=function(e,t,n,r){"custom"===n?Lb(e)(function(n){n.each(function(n){Ab(n),e.execCommand("mceApplyTextcolor",t,n),r(n)})},"#000000"):"remove"===n?(r(""),e.execCommand("mceRemoveTextcolor",t)):(r(n),e.execCommand("mceApplyTextcolor",t,n))},Ib=function(e,t){return function(n){n(e.concat(_b().concat(function(e){var t={type:"choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[t,{type:"choiceitem",text:"Custom color",icon:"color-picker",value:"custom"}]:[t]}(t))))}},zb=function(e,t,n){var r,o;r="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",o=n,e.setIconFill(r,o),e.setIconStroke(r,o)},Pb=function(e,t,n,r,o){e.ui.registry.addSplitButton(t,{tooltip:r,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:function(t){return k.from(Db(e,n)).bind(function(e){return function(e){if("transparent"===e)return k.some(db(0,0,0,0));if(lb.test(e)){var t=lb.exec(e);return k.some(pb(t[1],t[2],t[3],"1"))}if(fb.test(e)){var n=lb.exec(e);return k.some(pb(n[1],n[2],n[3],n[4]))}return k.none()}(e).map(function(e){var n=ab(e).value();return ut(t.toLowerCase(),n)})}).getOr(!1)},columns:Bb(e),fetch:Ib(Nb(e),Eb(e)),onAction:function(t){null!==o.get()&&Mb(e,n,o.get(),function(){})},onItemAction:function(r,c){Mb(e,n,c,function(e){o.set(e),zb(r,t,e)})},onSetup:function(e){return null!==o.get()&&zb(e,t,o.get()),function(){}}})},Lb=function(e){return function(t,n){var r={colorpicker:n},o=function(e){return function(t){var data=t.getData();e(k.from(data.colorpicker)),t.close()}}(t);e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:function(e,details){"hex-valid"===details.name&&(details.value?e.enable("ok"):e.disable("ok"))},onSubmit:o,onClose:function(){},onCancel:function(){t(k.none())}})}},Hb={register:function(e){!function(e){e.addCommand("mceApplyTextcolor",function(t,n){!function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})}(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){!function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}(e,t)})}(e);var t=Ne(null),n=Ne(null);Pb(e,"forecolor","forecolor","Text color",t),Pb(e,"backcolor","hilitecolor","Background color",n)},getFetch:Ib,colorPickerDialog:Lb,getCurrentColor:Db,getColorCols:Bb,calcCols:Rb},Fb=r([eo("dom"),eo("fetch"),wa("onOpen"),Ca("onExecute"),mo("getHotspot",k.some),mo("layouts",k.none()),Os("dropdownBehaviours",[Cm,Gp,Hd,sm]),eo("toggleClass"),mo("eventOrder",{}),option("lazySink"),mo("matchWidth",!1),mo("useMinWidth",!1),option("role")].concat(wv())),Vb=r([Zs({schema:[ba()],name:"menu",defaults:function(e){return{onExecute:e.onExecute}}}),ov()]),jb=Al({name:"Dropdown",configFields:Fb(),partFields:Vb(),factory:function(e,n,r,o){var c,l,f=function(e){ys.getState(e).each(function(e){Vm.highlightPrimary(e)})},d={expand:function(n){Cm.isOn(n)||cv(e,function(e){return e},n,o,t,_p.HighlightNone).get(t)},open:function(n){Cm.isOn(n)||cv(e,function(e){return e},n,o,t,_p.HighlightFirst).get(t)},isOpen:Cm.isOn,close:function(n){Cm.isOn(n)&&cv(e,function(e){return e},n,o,t,_p.HighlightFirst).get(t)}},m=function(e,t){return Eo(e),k.some(!0)};return{uid:e.uid,dom:e.dom,components:n,behaviours:Es(e.dropdownBehaviours,[Cm.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Gp.config({others:{sandbox:function(t){return fv(e,t,{onOpen:function(){Cm.on(t)},onClose:function(){Cm.off(t)}})}}}),Hd.config({mode:"special",onSpace:m,onEnter:m,onDown:function(e,t){if(jb.isOpen(e)){var n=Gp.getCoupled(e,"sandbox");f(n)}else jb.open(e);return k.some(!0)},onEscape:function(e,t){return jb.isOpen(e)?(jb.close(e),k.some(!0)):k.none()}}),sm.config({})]),events:Um(k.some(function(component){cv(e,function(e){return e},component,o,f,_p.HighlightFirst).get(t)})),eventOrder:Wn({},e.eventOrder,(c={},c[wt()]=["disabling","toggling","alloy.base.behaviour"],c)),apis:d,domModification:{attributes:Wn({"aria-haspopup":"true"},e.role.fold(function(){return{}},function(e){return{role:e}}),"button"===e.dom.tag?{type:(l="type",Se(e.dom,"attributes").bind(function(e){return Se(e,l)})).getOr("button")}:{})}}},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)}}}),Ub=Object.freeze({events:function(e){return Lo([Ho(qe(),r(!0))])},exhibit:function(base,e){return wi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),Wb=Ba({fields:[],name:"unselecting",active:Ub}),$b=jn("color-input-change"),qb=jn("color-swatch-change"),Gb=jn("color-picker-cancel"),Yb=function(e,t,n){var r=Wp.parts().field({factory:zv,inputClasses:["tox-textfield"],onSetValue:function(e){return Kv.run(e).get(function(){})},inputBehaviours:Da([Zv.config({}),Kv.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return un(e.element())},notify:{onValid:function(e){var t=om.getValue(e);To(e,$b,{color:t})}},validator:{validateOnLoad:!1,validate:function(input){var e=om.getValue(input);if(0===e.length)return nv.pure(ge.value(!0));var span=Vt.fromTag("span");Ui(span,"background-color",e);var t=Gi(span,"background-color").fold(function(){return ge.error("blah")},function(t){return ge.value(e)});return nv.pure(t)}}})]),selectOnFocus:!1}),o=e.label.map(function(label){return _v(label,t.providers)}),c=function(e,t){To(e,qb,{value:t})},l=$m(function(e,t){return jb.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Da([Wb.config({}),Zv.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function(){return nv.nu(function(t){return e.fetch(t)}).map(function(n){return k.from(Xh(be(Gh(jn("menu-value"),n,function(t){e.onItemAction(t)},5,"color",ch.CLOSE_ON_EXECUTE,function(){return!1},t.providers),{movement:Ph(5,"color")})))})},parts:{menu:zh(0,0,"color")}})}({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:k.some({onRtl:function(){return[qu]},onLtr:function(){return[Gu]}}),components:[],fetch:Hb.getFetch(n.getColors(),n.hasCustomColors()),onItemAction:function(e){t.getSink().each(function(t){l.getOpt(t).each(function(t){"custom"===e?n.colorPicker(function(e){e.fold(function(){return Oo(t,Gb)},function(e){c(t,e),Ab(e)})},"#ffffff"):c(t,"remove"===e?"":e)})})}},t));return Wp.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:o.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,l.asSpec()]}]),fieldBehaviours:Da([Em("form-field-events",[Vo($b,function(e,t){l.getOpt(e).each(function(e){Ui(e.element(),"background-color",t.event().color())})}),Vo(qb,function(e,t){Wp.getField(e).each(function(n){om.setValue(n,t.event().value()),Ml.getCurrent(e).each(sm.focus)})}),Vo(Gb,function(e,t){Wp.getField(e).each(function(t){Ml.getCurrent(e).each(sm.focus)})})])])})},Xb=ht.detect(),Kb=Xb.deviceType.isTouch(),Jb=el({schema:[eo("dom")],name:"label"}),Qb=function(e){return el({name:e+"-edge",overrides:function(t){return t.model.manager.edgeActions[e].fold(function(){return{}},function(a){var e=Lo([jo(De(),a,[t])]),n=Lo([jo(Me(),a,[t]),jo(Ie(),function(e,t){t.mouseIsDown.get()&&a(e,t)},[t])]);return{events:Kb?e:n}})}})},Zb=Qb("top-left"),ey=Qb("top"),ty=Qb("top-right"),ny=Qb("right"),ry=Qb("bottom-right"),oy=Qb("bottom"),iy=Qb("bottom-left"),ay=[Jb,Qb("left"),ny,ey,oy,Zb,ty,iy,ry,Qs({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:Lo([Wo(De(),e,"spectrum"),Wo(Re(),e,"spectrum"),Wo(Be(),e,"spectrum"),Wo(Me(),e,"spectrum"),Wo(Ie(),e,"spectrum"),Wo(Pe(),e,"spectrum")])}}}),Qs({schema:[wo("mouseIsDown",function(){return Ne(!1)})],name:"spectrum",overrides:function(e){var t=e.model.manager,n=function(component,n){return t.getValueFromEvent(n).map(function(n){return t.setValueFrom(component,e,n)})},r=Lo([Vo(De(),n),Vo(Re(),n)]),o=Lo([Vo(Me(),n),Vo(Ie(),function(t,r){e.mouseIsDown.get()&&n(t,r)})]);return{behaviours:Da(Kb?[]:[Hd.config({mode:"special",onLeft:function(n){return t.onLeft(n,e)},onRight:function(n){return t.onRight(n,e)},onUp:function(n){return t.onUp(n,e)},onDown:function(n){return t.onDown(n,e)}}),sm.config({})]),events:Kb?r:o}}})],uy=ht.detect().deviceType.isTouch(),cy=r("slider.change.value"),sy=function(e){var t=e.event().raw();if(uy){var n=t;return void 0!==n.touches&&1===n.touches.length?k.some(n.touches[0]).map(function(e){return ja(e.clientX,e.clientY)}):k.none()}var r=t;return void 0!==r.clientX?k.some(r).map(function(e){return ja(e.clientX,e.clientY)}):k.none()},ly=function(e,t,n,r){return e<t?e:e>n?n:e===t?t-1:Math.max(t,e-r)},fy=function(e,t,n,r){return e>n?e:e<t?t:e===n?n+1:Math.min(n,e+r)},dy=function(e,t,n){return Math.max(t,Math.min(n,e))},my=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,c=e.step,l=e.snap,f=e.snapStart,d=e.rounded,m=e.hasMinEdge,h=e.hasMaxEdge,v=e.minBound,y=e.maxBound,x=e.screenRange,w=m?t-1:t,C=h?n+1:n;if(o<v)return w;if(o>y)return C;var S=function(e,t,n){return Math.min(n,Math.max(e,t))-t}(o,v,y),k=dy(S/x*r+t,w,C);return l&&k>=t&&k<=n?function(e,t,n,r,o){return o.fold(function(){var o=e-t,c=Math.round(o/r)*r;return dy(t+c,t-1,n+1)},function(t){var o=(e-t)%r,c=Math.round(o/r),l=Math.floor((e-t)/r),f=Math.floor((n-t)/r),d=t+Math.min(f,l+c)*r;return Math.max(t,d)})}(k,t,n,c,f):d?Math.round(k):k},gy=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,c=e.hasMinEdge,l=e.hasMaxEdge,f=e.maxBound,d=e.maxOffset,m=e.centerMinEdge,h=e.centerMaxEdge;return o<t?c?0:m:o>n?l?f:h:(o-t)/r*d},hy=function(e){return e.model.minX},py=function(e){return e.model.minY},vy=function(e){return e.model.minX-1},by=function(e){return e.model.minY-1},yy=function(e){return e.model.maxX},xy=function(e){return e.model.maxY},wy=function(e){return e.model.maxX+1},Cy=function(e){return e.model.maxY+1},Sy=function(e,t,n){return t(e)-n(e)},ky=function(e){return Sy(e,yy,hy)},Oy=function(e){return Sy(e,xy,py)},Ty=function(e){return ky(e)/2},Ey=function(e){return Oy(e)/2},Ny=function(e){return e.stepSize},_y=function(e){return e.snapToGrid},Ay=function(e){return e.snapStart},Dy=function(e){return e.rounded},Ry=function(e,t){return void 0!==e[t+"-edge"]},By=function(e){return Ry(e,"left")},My=function(e){return Ry(e,"right")},Iy=function(e){return Ry(e,"top")},zy=function(e){return Ry(e,"bottom")},Py=function(e){return e.model.value.get()},Ly=function(e){return{x:r(e)}},Hy=function(e){return{y:r(e)}},Fy=function(e,t){return{x:r(e),y:r(t)}},Vy=function(component,e){To(component,cy(),{value:e})},jy=function(component){return component.element().dom().getBoundingClientRect()},Uy=function(e,t){return e[t]},Wy=function(component){var e=jy(component);return Uy(e,"left")},$y=function(component){var e=jy(component);return Uy(e,"right")},qy=function(component){var e=jy(component);return Uy(e,"top")},Gy=function(component){var e=jy(component);return Uy(e,"bottom")},Yy=function(component){var e=jy(component);return Uy(e,"width")},Xy=function(component){var e=jy(component);return Uy(e,"height")},Ky=function(e,t,n){return(e+t)/2-n},Jy=function(component,e){var t=jy(component),n=jy(e),r=Uy(t,"left"),o=Uy(t,"right"),c=Uy(n,"left");return Ky(r,o,c)},Qy=function(component,e){var t=jy(component),n=jy(e),r=Uy(t,"top"),o=Uy(t,"bottom"),c=Uy(n,"top");return Ky(r,o,c)},Zy=function(e,t){To(e,cy(),{value:t})},ex=function(e){return{x:r(e)}},tx=function(e,t,n){var r={min:hy(t),max:yy(t),range:ky(t),value:n,step:Ny(t),snap:_y(t),snapStart:Ay(t),rounded:Dy(t),hasMinEdge:By(t),hasMaxEdge:My(t),minBound:Wy(e),maxBound:$y(e),screenRange:Yy(e)};return my(r)},nx=function(e){return function(t,n){return function(e,t,n){var r=(e>0?fy:ly)(Py(n).x(),hy(n),yy(n),Ny(n));return Zy(t,ex(r)),k.some(r)}(e,t,n).map(function(){return!0})}},rx=function(e,t,n,r,o,c){var l=function(e,t,n,r,o){var c=Yy(e),l=r.bind(function(t){return k.some(Jy(t,e))}).getOr(0),f=o.bind(function(t){return k.some(Jy(t,e))}).getOr(c),d={min:hy(t),max:yy(t),range:ky(t),value:n,hasMinEdge:By(t),hasMaxEdge:My(t),minBound:Wy(e),minOffset:0,maxBound:$y(e),maxOffset:c,centerMinEdge:l,centerMaxEdge:f};return gy(d)}(t,c,n,r,o);return Wy(t)-Wy(e)+l},ox=nx(-1),ix=nx(1),ax=k.none,ux=k.none,cx={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(function(e,t){Vy(e,Ly(wy(t)))}),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(function(e,t){Vy(e,Ly(vy(t)))})},sx=Object.freeze({setValueFrom:function(e,t,n){var r=tx(e,t,n),o=ex(r);return Zy(e,o),r},setToMin:function(e,t){var n=hy(t);Zy(e,ex(n))},setToMax:function(e,t){var n=yy(t);Zy(e,ex(n))},findValueOfOffset:tx,getValueFromEvent:function(e){return sy(e).map(function(p){return p.left()})},findPositionOfValue:rx,setPositionFromValue:function(e,t,n,r){var o=Py(n),c=rx(e,r.getSpectrum(e),o.x(),r.getLeftEdge(e),r.getRightEdge(e),n),l=Ka(t.element())/2;Ui(t.element(),"left",c-l+"px")},onLeft:ox,onRight:ix,onUp:ax,onDown:ux,edgeActions:cx}),lx=function(e,t){To(e,cy(),{value:t})},fx=function(e){return{y:r(e)}},dx=function(e,t,n){var r={min:py(t),max:xy(t),range:Oy(t),value:n,step:Ny(t),snap:_y(t),snapStart:Ay(t),rounded:Dy(t),hasMinEdge:Iy(t),hasMaxEdge:zy(t),minBound:qy(e),maxBound:Gy(e),screenRange:Xy(e)};return my(r)},mx=function(e){return function(t,n){return function(e,t,n){var r=(e>0?fy:ly)(Py(n).y(),py(n),xy(n),Ny(n));return lx(t,fx(r)),k.some(r)}(e,t,n).map(function(){return!0})}},gx=function(e,t,n,r,o,c){var l=function(e,t,n,r,o){var c=Xy(e),l=r.bind(function(t){return k.some(Qy(t,e))}).getOr(0),f=o.bind(function(t){return k.some(Qy(t,e))}).getOr(c),d={min:py(t),max:xy(t),range:Oy(t),value:n,hasMinEdge:Iy(t),hasMaxEdge:zy(t),minBound:qy(e),minOffset:0,maxBound:Gy(e),maxOffset:c,centerMinEdge:l,centerMaxEdge:f};return gy(d)}(t,c,n,r,o);return qy(t)-qy(e)+l},hx=k.none,px=k.none,vx=mx(-1),bx=mx(1),yx={"top-left":k.none(),top:k.some(function(e,t){Vy(e,Hy(by(t)))}),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(function(e,t){Vy(e,Hy(Cy(t)))}),"bottom-left":k.none(),left:k.none()},xx=Object.freeze({setValueFrom:function(e,t,n){var r=dx(e,t,n),o=fx(r);return lx(e,o),r},setToMin:function(e,t){var n=py(t);lx(e,fx(n))},setToMax:function(e,t){var n=xy(t);lx(e,fx(n))},findValueOfOffset:dx,getValueFromEvent:function(e){return sy(e).map(function(p){return p.top()})},findPositionOfValue:gx,setPositionFromValue:function(e,t,n,r){var o=Py(n),c=gx(e,r.getSpectrum(e),o.y(),r.getTopEdge(e),r.getBottomEdge(e),n),l=Za(t.element())/2;Ui(t.element(),"top",c-l+"px")},onLeft:hx,onRight:px,onUp:vx,onDown:bx,edgeActions:yx}),wx=function(e,t){To(e,cy(),{value:t})},Cx=function(e,t){return{x:r(e),y:r(t)}},Sx=function(e,t){return function(n,r){return function(e,t,n,r){var o=e>0?fy:ly,c=t?Py(r).x():o(Py(r).x(),hy(r),yy(r),Ny(r)),l=t?o(Py(r).y(),py(r),xy(r),Ny(r)):Py(r).y();return wx(n,Cx(c,l)),k.some(c)}(e,t,n,r).map(function(){return!0})}},kx=Sx(-1,!1),Ox=Sx(1,!1),Tx=Sx(-1,!0),Ex=Sx(1,!0),Nx={"top-left":k.some(function(e,t){Vy(e,Fy(vy(t),by(t)))}),top:k.some(function(e,t){Vy(e,Fy(Ty(t),by(t)))}),"top-right":k.some(function(e,t){Vy(e,Fy(wy(t),by(t)))}),right:k.some(function(e,t){Vy(e,Fy(wy(t),Ey(t)))}),"bottom-right":k.some(function(e,t){Vy(e,Fy(wy(t),Cy(t)))}),bottom:k.some(function(e,t){Vy(e,Fy(Ty(t),Cy(t)))}),"bottom-left":k.some(function(e,t){Vy(e,Fy(vy(t),Cy(t)))}),left:k.some(function(e,t){Vy(e,Fy(vy(t),Ey(t)))})},_x=Object.freeze({setValueFrom:function(e,t,n){var r=tx(e,t,n.left()),o=dx(e,t,n.top()),c=Cx(r,o);return wx(e,c),c},setToMin:function(e,t){var n=hy(t),r=py(t);wx(e,Cx(n,r))},setToMax:function(e,t){var n=yy(t),r=xy(t);wx(e,Cx(n,r))},getValueFromEvent:function(e){return sy(e)},setPositionFromValue:function(e,t,n,r){var o=Py(n),c=rx(e,r.getSpectrum(e),o.x(),r.getLeftEdge(e),r.getRightEdge(e),n),l=gx(e,r.getSpectrum(e),o.y(),r.getTopEdge(e),r.getBottomEdge(e),n),f=Ka(t.element())/2,d=Za(t.element())/2;Ui(t.element(),"left",c-f+"px"),Ui(t.element(),"top",l-d+"px")},onLeft:kx,onRight:Ox,onUp:Tx,onDown:Ex,edgeActions:Nx}),Ax=ht.detect().deviceType.isTouch(),Dx=[mo("stepSize",1),mo("onChange",t),mo("onChoose",t),mo("onInit",t),mo("onDragStart",t),mo("onDragEnd",t),mo("snapToGrid",!1),mo("rounded",!0),option("snapStart"),to("model",qr("mode",{x:[mo("minX",0),mo("maxX",100),wo("value",function(e){return Ne(e.mode.minX)}),eo("getInitialValue"),output("manager",sx)],y:[mo("minY",0),mo("maxY",100),wo("value",function(e){return Ne(e.mode.minY)}),eo("getInitialValue"),output("manager",xx)],xy:[mo("minX",0),mo("maxX",100),mo("minY",0),mo("maxY",100),wo("value",function(e){return Ne({x:r(e.mode.minX),y:r(e.mode.minY)})}),eo("getInitialValue"),output("manager",_x)]})),Os("sliderBehaviours",[Hd,om])].concat(Ax?[]:[wo("mouseIsDown",function(){return Ne(!1)})]),Rx=ht.detect().deviceType.isTouch(),Bx=Al({name:"Slider",configFields:Dx,partFields:ay,factory:function(e,t,n,o){var c=function(component){return pl(component,e,"thumb")},l=function(component){return pl(component,e,"spectrum")},f=function(component){return hl(component,e,"left-edge")},d=function(component){return hl(component,e,"right-edge")},m=function(component){return hl(component,e,"top-edge")},h=function(component){return hl(component,e,"bottom-edge")},v=e.model,y=v.manager,x=function(t,n){y.setPositionFromValue(t,n,e,{getLeftEdge:f,getRightEdge:d,getTopEdge:m,getBottomEdge:h,getSpectrum:l})},w=function(t,n){v.value.set(n);var r=c(t);return x(t,r),e.onChange(t,r,n),k.some(!0)},C=[Vo(De(),function(t,n){e.onDragStart(t,c(t))}),Vo(Be(),function(t,n){e.onDragEnd(t,c(t))})],S=[Vo(Me(),function(t,n){n.stop(),e.onDragStart(t,c(t)),e.mouseIsDown.set(!0)}),Vo(Pe(),function(t,n){e.onDragEnd(t,c(t))})],O=Rx?C:S;return{uid:e.uid,dom:e.dom,components:t,behaviours:Es(e.sliderBehaviours,W([Rx?[]:[Hd.config({mode:"special",focusIn:function(t){return hl(t,e,"spectrum").map(Hd.focusIn).map(r(!0))}})],[om.config({store:{mode:"manual",getValue:function(e){return v.value.get()}}}),Ha.config({channels:{"mouse.released":{onReceive:function(t,n){var r=e.mouseIsDown.get();e.mouseIsDown.set(!1),r&&hl(t,e,"thumb").each(function(n){var r=v.value.get();e.onChoose(t,n,r)})}}}})]])),events:Lo([Vo(cy(),function(e,t){w(e,t.event().value())}),Xo(function(t,n){var r=v.getInitialValue();v.value.set(r);var o=c(t);x(t,o);var f=l(t);e.onInit(t,o,f,v.value.get())})].concat(O)),apis:{resetToMin:function(t){y.setToMin(t,e)},resetToMax:function(t){y.setToMax(t,e)},changeValue:w,refresh:x},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),Mx=r(jn("rgb-hex-update")),Ix=r(jn("slider-update")),zx=r(jn("palette-update")),Px=function(e,t){var n=Bx.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),o=Bx.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class="+t("sv-palette-inner-thumb")+' role="presentation"></div>'}}),c=function(canvas,e){var t=canvas.width,n=canvas.height,r=canvas.getContext("2d");r.fillStyle=e,r.fillRect(0,0,t,n);var o=r.createLinearGradient(0,0,t,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=o,r.fillRect(0,0,t,n);var c=r.createLinearGradient(0,0,0,n);c.addColorStop(0,"rgba(0,0,0,0)"),c.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=c,r.fillRect(0,0,t,n)};return _l({factory:function(e){var l=r({x:r(0),y:r(0)}),f=Da([Ml.config({find:k.some}),sm.config({})]);return Bx.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:l},rounded:!1,components:[n,o],onChange:function(e,t,n){To(e,zx(),{value:n})},onInit:function(e,t,n,r){c(n.element().dom(),vb(bb()))},sliderBehaviours:f})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(e,t,n){!function(e,t){var canvas=e.components()[0].element().dom();c(canvas,vb(t))}(t,n)}},extraApis:{}})},Lx=function(e,t){var n=Bx.parts().spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=Bx.parts().thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return Bx.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:r(0)})},components:[n,o],sliderBehaviours:Da([sm.config({})]),onChange:function(e,t,n){To(e,Ix(),{value:n})}})},Hx=[Os("formBehaviours",[om])],Fx=function(e){return"<alloy.field."+e+">"},Vx=function(e,t,n){return{uid:e.uid,dom:e.dom,components:t,behaviours:Es(e.formBehaviours,[om.config({store:{mode:"manual",getValue:function(form){var t=bl(form,e);return re(t,function(e,t){return e().bind(function(e){var t,n=Ml.getCurrent(e);return t="missing current",n.fold(function(){return ge.error(t)},ge.value)}).map(om.getValue)})},setValue:function(form,t){ne(t,function(t,n){hl(form,e,n).each(function(e){Ml.getCurrent(e).each(function(e){om.setValue(e,t)})})})}}})]),apis:{getField:function(form,t){return hl(form,e,t).bind(Ml.getCurrent)}}}},jx={getField:vi(function(e,component,t){return e.getField(component,t)}),sketch:function(e){var t,n=(t=[],{field:function(e,n){return t.push(e),sl("form",Fx(e),n)},record:function(){return t}}),r=e(n),o=n.record(),c=map(o,function(e){return Qs({name:e,pname:Fx(e)})});return Ol("form",Hx,c,Vx,r)}},Ux=jn("valid-input"),Wx=jn("invalid-input"),$x=jn("validating-input"),qx=function(e,n,o,c){var l=function(label,t){return Kv.config({invalidClass:n("invalid"),notify:{onValidate:function(e){To(e,$x,{type:label})},onValid:function(e){To(e,Ux,{type:label,value:om.getValue(e)})},onInvalid:function(e){To(e,Wx,{type:label,value:om.getValue(e)})}},validator:{validate:function(n){var r=om.getValue(n),o=t(r)?ge.value(!0):ge.error(e("aria.input.invalid"));return nv.pure(o)},validateOnLoad:!1}})},f=function(r,o,label,c,data){var f=e("colorcustom.rgb.range"),d=[Wp.parts().label({dom:{tag:"label",innerHtml:label,attributes:{"aria-label":c}}}),Wp.parts().field({data:data,factory:zv,inputAttributes:Wn({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[n("textfield")],inputBehaviours:Da([l(o,r),Zv.config({})]),onSetValue:function(input){Kv.isInvalid(input)&&Kv.run(input).get(t)}})],m="hex"!==o?[Wp.parts()["aria-descriptor"]({text:f})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:d.concat(m)}},d=function(form,e){var t=e.red(),n=e.green(),r=e.blue();om.setValue(form,{red:t,green:n,blue:r})},m=$m({dom:{tag:"div",classes:[n("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),h=function(e,t){m.getOpt(e).each(function(e){Ui(e.element(),"background-color","#"+t.value())})};return _l({factory:function(t){var l={red:r(Ne(k.some(255))),green:r(Ne(k.some(255))),blue:r(Ne(k.some(255))),hex:r(Ne(k.some("ffffff")))},v=function(e){return l[e]().get()},y=function(e,t){l[e]().set(t)},x=function(e){var t=e.red(),n=e.green(),r=e.blue();y("red",k.some(t)),y("green",k.some(n)),y("blue",k.some(r))},w=function(form,e){var data=e.event();"hex"!==data.type()?y(data.type(),k.none()):c(form)},C=function(form,e,t){var n=parseInt(t,10);y(e,k.some(n)),v("red").bind(function(e){return v("green").bind(function(t){return v("blue").map(function(n){return db(e,t,n,1)})})}).each(function(e){var t=function(form,e){var t=ab(e);return jx.getField(form,"hex").each(function(e){sm.isFocused(e)||om.setValue(form,{hex:t.value()})}),t}(form,e);h(form,t)})},S=function(form,e){var data=e.event();"hex"===data.type()?function(form,e){o(form);var t=eb(e);y("hex",k.some(e));var n=hb(t);d(form,n),x(n),To(form,Mx(),{hex:t}),h(form,t)}(form,data.value()):C(form,data.type(),data.value())},O=function(t){return{label:e("colorcustom.rgb."+t+".label"),description:e("colorcustom.rgb."+t+".description")}},T=O("red"),E=O("green"),N=O("blue"),_=O("hex");return be(jx.sketch(function(t){return{dom:{tag:"form",classes:[n("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[t.field("red",Wp.sketch(f(mb,"red",T.label,T.description,255))),t.field("green",Wp.sketch(f(mb,"green",E.label,E.description,255))),t.field("blue",Wp.sketch(f(mb,"blue",N.label,N.description,255))),t.field("hex",Wp.sketch(f(rb,"hex",_.label,_.description,"ffffff"))),m.asSpec()],formBehaviours:Da([Kv.config({invalidClass:n("form-invalid")}),Em("rgb-form-events",[Vo(Ux,S),Vo(Wx,w),Vo($x,w)])])}}),{apis:{updateHex:function(form,e){om.setValue(form,{hex:e.value()}),function(form,e){var t=hb(e);d(form,t),x(t)}(form,e),h(form,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,form,t){e.updateHex(form,t)}},extraApis:{}})},Gx=function(e,t,n){return{hue:r(e),saturation:r(t),value:r(n)}},Yx=function(e,n){return _l({name:"ColourPicker",configFields:[mo("onValidHex",t),mo("onInvalidHex",t),so("formChangeEvent")],factory:function(t){var o,c=qx(e,n,t.onValidHex,t.onInvalidHex),l=Px(e,n),f={paletteRgba:r(Ne(bb()))},d=$m(l.sketch({})),m=$m(c.sketch({})),h=function(e,t){d.getOpt(e).each(function(e){var n=hb(t);f.paletteRgba().set(n),l.setRgba(e,n)})},v=function(e,t){m.getOpt(e).each(function(form){c.updateHex(form,t)})},y=function(e,t,n){P(n,function(n){n(e,t)})};return{uid:t.uid,dom:t.dom,components:[d.asSpec(),Lx(e,n),m.asSpec()],behaviours:Da([Em("colour-picker-events",[Vo(zx(),(o=[v],function(form,e){var t,n,g,b,r,s,c,l,d,m=e.event().value(),h=f.paletteRgba().get(),v=(r=0,c=0,n=(t=h).red()/255,g=t.green()/255,b=t.blue()/255,(l=Math.min(n,Math.min(g,b)))===(d=Math.max(n,Math.max(g,b)))?Gx(0,0,100*(c=l)):(r=60*((r=n===l?3:b===l?1:5)-(n===l?g-b:b===l?n-g:b-n)/(d-l)),s=(d-l)/d,c=d,Gx(Math.round(r),Math.round(100*s),Math.round(100*c)))),x=Gx(v.hue(),m.x(),100-m.y()),w=gb(x),C=ab(w);y(form,C,o)})),Vo(Ix(),function(){var e=[h,v];return function(form,t){var n=function(e){var t=Gx(360*(100-e/100),100,100),n=gb(t);return ab(n)}(t.event().value().y());y(form,n,e)}}())]),Ml.config({find:function(e){return m.getOpt(e)}}),Hd.config({mode:"acyclic"})])}}})},Xx=function(){return Ml.config({find:k.some})},Kx=function(e){return Ml.config({find:e.getOpt})},Jx=function(e){return Ml.config({find:function(t){return ln(t.element(),e).bind(function(element){return t.getSystem().getByDom(element).toOption()})}})},Qx={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Zx=function(e){return function(e){return Qx[e]}(e)},ew=Ar([mo("preprocess",o),mo("postprocess",o)]),tw=function(e,t,n){return om.config(be({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(e){return{store:{initialValue:e}}}).getOr({})))},nw=function(e,t,n){return tw(e,function(e){return t(e.element())},function(e,t){return n(e.element(),t)})},rw=function(e,t){var n=Wr("RepresentingConfigs.memento processors",ew,t);return om.config({store:{mode:"manual",getValue:function(t){var r=e.get(t),o=om.getValue(r);return n.postprocess(o)},setValue:function(t,r){var o=n.preprocess(r),c=e.get(t);om.setValue(c,o)}}})},ow=tw,iw=function(e){return nw(e,bn,yn)},aw=function(e){return om.config({store:{mode:"memory",initialValue:e}})},uw=function(e,t){var n=function(e,t){t.stop()},r=function(e){return function(t,n){P(e,function(a){a(t,n)})}},o=function(e,t){if(!Zg.isDisabled(e)){var n=t.event().raw();l(e,n.dataTransfer.files)}},c=function(component,e){var t=e.event().raw().target.files;l(component,t)},l=function(component,t){om.setValue(component,function(e){var t=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i");return filter(Z(e),function(e){return t.test(e.name)})}(t)),To(component,Bp,{name:e.name})},f=$m({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Da([Em("input-file-events",[qo(kt())])])}),d=e.label.map(function(label){return _v(label,t)}),m=Wp.parts().field({factory:{sketch:function(s){return{uid:s.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Da([aw([]),Xx(),Zg.config({}),Cm.config({toggleClass:"dragenter",toggleOnExecute:!1}),Em("dropzone-events",[Vo("dragenter",r([n,Cm.toggle])),Vo("dragleave",r([n,Cm.toggle])),Vo("dragover",n),Vo("drop",r([n,o])),Vo(Ue(),c)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},Wm.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[f.asSpec()],action:function(e){f.get(e).element().dom().click()},buttonBehaviours:Da([Zv.config({})])})]}]}}}});return Ov(d,m,["tox-form__group--stretched"])},cw=jn("alloy-fake-before-tabstop"),sw=jn("alloy-fake-after-tabstop"),lw=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Da([sm.config({ignore:!0}),Zv.config({})])}},fw=function(e,t){To(e,Ve(),{raw:{which:9,shiftKey:t}})},dw=function(element){return op(element,["."+cw,"."+sw].join(","),r(!1))},mw=function(e,t){var n=t.element();Pi(n,cw)?fw(e,!0):Pi(n,sw)&&fw(e,!1)},gw=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[lw([cw]),e,lw([sw])],behaviours:Da([Jx(1)])}},hw=!(ht.detect().browser.isIE()||ht.detect().browser.isEdge()),pw=function(e,t){var n=hw&&e.sandboxed,r=Wn({},e.label.map(function(title){return{title:title}}).getOr({}),n?{sandbox:"allow-scripts allow-same-origin"}:{}),o=function(e){var t=Ne("");return{getValue:function(e){return t.get()},setValue:function(n,html){if(e)Tn(n.element(),"src","data:text/html;charset=utf-8,"+encodeURIComponent(html));else{Tn(n.element(),"src","javascript:''");var r=n.element().dom().contentWindow.document;r.open(),r.write(html),r.close()}t.set(html)}}}(n),c=e.label.map(function(label){return _v(label,t)}),l=Wp.parts().field({factory:{sketch:function(e){return gw({uid:e.uid,dom:{tag:"iframe",attributes:r},behaviours:Da([Zv.config({}),sm.config({}),ow(k.none(),o.getValue,o.setValue)])})}}});return Ov(c,l,["tox-form__group--stretched"])};function vw(t,n){return yw(e.document.createElement("canvas"),t,n)}function bw(canvas){return canvas.getContext("2d")}function yw(canvas,e,t){return canvas.width=e,canvas.height=t,canvas}var xw={create:vw,clone:function(canvas){var e;return bw(e=vw(canvas.width,canvas.height)).drawImage(canvas,0,0),e},resize:yw,get2dContext:bw,get3dContext:function(canvas){var e=null;try{e=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){}return e||(e=null),e}},ww={getWidth:function(image){return image.naturalWidth||image.width},getHeight:function(image){return image.naturalHeight||image.height}},Cw=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(e,r(l,this),r(f,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(e){var t=this;null!==this._state?n(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function l(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void h(r(t,e),r(l,this),r(f,this))}this._state=!0,this._value=e,d.call(this)}catch(e){f.call(this,e)}}function f(e){this._state=!1,this._value=e,d.call(this)}function d(){for(var i=0,e=this._deferreds.length;i<e;i++)c.call(this,this._deferreds[i]);this._deferreds=null}function m(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function h(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,o){c.call(r,new m(e,n,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new t(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var l=c.then;if("function"==typeof l)return void l.call(c,function(e){o(i,e)},n)}e[i]=c,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},t}();function Sw(){return new(Yt.getOrDie("FileReader"))}var kw={atob:function(e){return Yt.getOrDie("atob")(e)},requestAnimationFrame:function(e){Yt.getOrDie("requestAnimationFrame")(e)}};function Ow(t){return new Cw(function(n,r){var o=e.URL.createObjectURL(t),image=new e.Image,c=function(){image.removeEventListener("load",l),image.removeEventListener("error",f)};function l(){c(),n(image)}function f(){c(),r("Unable to load data of type "+t.type+": "+o)}image.addEventListener("load",l),image.addEventListener("error",f),image.src=o,image.complete&&l()})}function Tw(t){return new Cw(function(n,r){var o=new e.XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200==this.status&&n(this.response)},o.onerror=function(){var e,t=this;r(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},o.send()})}function Ew(e){var data=e.split(","),t=/data:([^;]+)/.exec(data[0]);if(!t)return k.none();for(var n,r,o,c=t[1],l=data[1],f=kw.atob(l),d=f.length,m=Math.ceil(d/1024),h=new Array(m),v=0;v<m;++v){for(var y=1024*v,x=Math.min(y+1024,d),w=new Array(x-y),C=y,i=0;C<x;++i,++C)w[i]=f[C].charCodeAt(0);h[v]=(n=w,new(Yt.getOrDie("Uint8Array"))(n))}return k.some((r=h,o={type:c},new(Yt.getOrDie("Blob"))(r,o)))}function Nw(e){return new Cw(function(t,n){Ew(e).fold(function(){n("uri is not base64: "+e)},t)})}function _w(e){return new Cw(function(t){var n=Sw();n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}var Aw={blobToImage:Ow,imageToBlob:function(image){var e=image.src;return 0===e.indexOf("data:")?Nw(e):Tw(e)},blobToArrayBuffer:function(e){return new Cw(function(t){var n=Sw();n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})},blobToDataUri:_w,blobToBase64:function(e){return _w(e).then(function(e){return e.split(",")[1]})},dataUriToBlobSync:Ew,canvasToBlob:function(canvas,t,n){return t=t||"image/png",e.HTMLCanvasElement.prototype.toBlob?new Cw(function(e){canvas.toBlob(function(t){e(t)},t,n)}):Nw(canvas.toDataURL(t,n))},canvasToDataURL:function(e,t,n){return t=t||"image/png",e.then(function(canvas){return canvas.toDataURL(t,n)})},blobToCanvas:function(t){return Ow(t).then(function(image){var canvas;return function(image){e.URL.revokeObjectURL(image.src)}(image),canvas=xw.create(ww.getWidth(image),ww.getHeight(image)),xw.get2dContext(canvas).drawImage(image,0,0),canvas})},uriToBlob:function(e){return 0===e.indexOf("blob:")?Tw(e):0===e.indexOf("data:")?Nw(e):null}};function Dw(e,t,n){var o=t.type;function c(t,n){return e.then(function(canvas){return Aw.canvasToDataURL(canvas,t,n)})}return{getType:r(o),toBlob:function(){return Cw.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(canvas){return Aw.canvasToBlob(canvas,t,n)})},toAdjustedDataURL:c,toAdjustedBase64:function(e,t){return c(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(xw.clone)}}}function Rw(e){return Aw.blobToDataUri(e).then(function(t){return Dw(Aw.blobToCanvas(e),e,t)})}var Bw={fromBlob:Rw,fromCanvas:function(canvas,e){return Aw.canvasToBlob(canvas,e).then(function(e){return Dw(Cw.resolve(canvas),e,canvas.toDataURL())})},fromImage:function(image){return Aw.imageToBlob(image).then(function(e){return Rw(e)})},fromBlobAndUrlSync:function(e,t){return Dw(Aw.blobToCanvas(e),e,t)}},Mw=function(e){return Bw.fromBlob(e)};function Iw(e,t,n){return(e=parseFloat(e))>n?e=n:e<t&&(e=t),e}var zw=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function Pw(e,t){var i,n,r,o,col=[],c=new Array(10);for(i=0;i<5;i++){for(n=0;n<5;n++)col[n]=t[n+5*i];for(n=0;n<5;n++){for(o=0,r=0;r<5;r++)o+=e[n+5*r]*col[r];c[n+5*i]=o}}return c}function Lw(e,t){return t=Iw(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,Iw(e,0,1)})}var Hw={identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:Lw,multiply:Pw,adjustContrast:function(e,t){var n;return t=Iw(t,-1,1),Pw(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?zw[t]:zw[Math.floor(t)]*(1-n)+zw[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(e,t){return Pw(e,[1,0,0,0,t=Iw(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(e,t){var n;return Pw(e,[.3086*(1-(n=1+((t=Iw(t,-1,1))>0?3*t:t)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(e,t){var n,r;return t=Iw(t,-180,180)/180*Math.PI,Pw(e,[.213+.787*(n=Math.cos(t))+-.213*(r=Math.sin(t)),.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(e,t,n,r){return Pw(e,[t=Iw(t,0,2),0,0,0,0,0,n=Iw(n,0,2),0,0,0,0,0,r=Iw(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(e,t){return Pw(e,Lw([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=Iw(t,0,1)))},adjustGrayscale:function(e,t){return Pw(e,Lw([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=Iw(t,0,1)))}};function Fw(e,t){return e.toCanvas().then(function(canvas){return function(canvas,e,t){var n,r=xw.get2dContext(canvas);return n=function(e,t){var n,g,b,a,i,r=e.data,o=t[0],c=t[1],l=t[2],f=t[3],d=t[4],m=t[5],h=t[6],v=t[7],y=t[8],x=t[9],w=t[10],C=t[11],S=t[12],k=t[13],O=t[14],T=t[15],E=t[16],N=t[17],_=t[18],A=t[19];for(i=0;i<r.length;i+=4)n=r[i],g=r[i+1],b=r[i+2],a=r[i+3],r[i]=n*o+g*c+b*l+a*f+d,r[i+1]=n*m+g*h+b*v+a*y+x,r[i+2]=n*w+g*C+b*S+a*k+O,r[i+3]=n*T+g*E+b*N+a*_+A;return e}(r.getImageData(0,0,canvas.width,canvas.height),t),r.putImageData(n,0,0),Bw.fromCanvas(canvas,e)}(canvas,e.getType(),t)})}function Vw(e,t){return e.toCanvas().then(function(canvas){return function(canvas,e,t){var n,r,o=xw.get2dContext(canvas);return n=o.getImageData(0,0,canvas.width,canvas.height),r=o.getImageData(0,0,canvas.width,canvas.height),r=function(e,t,n){var r,o,c,l,f,d,m,g,b,h,v,y,x,w,C,S,k;function O(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(c=Math.round(Math.sqrt(n.length)),l=Math.floor(c/2),r=e.data,o=t.data,S=e.width,k=e.height,d=0;d<k;d++)for(f=0;f<S;f++){for(m=g=b=0,v=0;v<c;v++)for(h=0;h<c;h++)y=O(f+h-l,0,S-1),x=O(d+v-l,0,k-1),w=4*(x*S+y),C=n[v*c+h],m+=r[w]*C,g+=r[w+1]*C,b+=r[w+2]*C;o[w=4*(d*S+f)]=O(m,0,255),o[w+1]=O(g,0,255),o[w+2]=O(b,0,255)}return t}(n,r,t),o.putImageData(r,0,0),Bw.fromCanvas(canvas,e)}(canvas,e.getType(),t)})}function jw(e){return function(t,n){return t.toCanvas().then(function(canvas){return function(canvas,t,n){var r,i,o=xw.get2dContext(canvas),c=new Array(256);for(i=0;i<c.length;i++)c[i]=e(i,n);return r=function(e,t){var i,n=e.data;for(i=0;i<n.length;i+=4)n[i]=t[n[i]],n[i+1]=t[n[i+1]],n[i+2]=t[n[i+2]];return e}(o.getImageData(0,0,canvas.width,canvas.height),c),o.putImageData(r,0,0),Bw.fromCanvas(canvas,t)}(canvas,t.getType(),n)})}}function Uw(e){return function(t,n){return Fw(t,e(Hw.identity(),n))}}function Ww(e){return function(t){return Vw(t,e)}}var $w={invert:function(e){return function(t){return Fw(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:Uw(Hw.adjustBrightness),hue:Uw(Hw.adjustHue),saturate:Uw(Hw.adjustSaturation),contrast:Uw(Hw.adjustContrast),grayscale:Uw(Hw.adjustGrayscale),sepia:Uw(Hw.adjustSepia),colorize:function(e,t,n,r){return Fw(e,Hw.adjustColors(Hw.identity(),t,n,r))},sharpen:Ww([0,-1,0,-1,5,-1,0,-1,0]),emboss:Ww([-2,-1,0,-1,1,1,0,1,2]),gamma:jw(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:jw(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:Fw,convoluteFilter:Vw},qw={scale:function e(image,t,n){var r=ww.getWidth(image),o=ww.getHeight(image),c=t/r,l=n/o,f=!1;(c<.5||c>2)&&(c=c<.5?.5:2,f=!0),(l<.5||l>2)&&(l=l<.5?.5:2,f=!0);var d=function(image,e,t){return new Cw(function(n){var r=ww.getWidth(image),o=ww.getHeight(image),c=Math.floor(r*e),l=Math.floor(o*t),canvas=xw.create(c,l),f=xw.get2dContext(canvas);f.drawImage(image,0,0,r,o,0,0,c,l),n(canvas)})}(image,c,l);return f?d.then(function(r){return e(r,t,n)}):d}},Gw={rotate:function(e,t){return e.toCanvas().then(function(canvas){return function(image,e,t){var canvas=xw.create(image.width,image.height),n=xw.get2dContext(canvas),r=0,o=0;return 90!=(t=t<0?360+t:t)&&270!=t||xw.resize(canvas,canvas.height,canvas.width),90!=t&&180!=t||(r=canvas.width),270!=t&&180!=t||(o=canvas.height),n.translate(r,o),n.rotate(t*Math.PI/180),n.drawImage(image,0,0),Bw.fromCanvas(canvas,e)}(canvas,e.getType(),t)})},flip:function(e,t){return e.toCanvas().then(function(canvas){return function(image,e,t){var canvas=xw.create(image.width,image.height),n=xw.get2dContext(canvas);return"v"==t?(n.scale(1,-1),n.drawImage(image,0,-canvas.height)):(n.scale(-1,1),n.drawImage(image,-canvas.width,0)),Bw.fromCanvas(canvas,e)}(canvas,e.getType(),t)})},crop:function(e,t,n,r,o){return e.toCanvas().then(function(canvas){return function(image,e,t,n,r,o){var canvas=xw.create(r,o);return xw.get2dContext(canvas).drawImage(image,-t,-n),Bw.fromCanvas(canvas,e)}(canvas,e.getType(),t,n,r,o)})},resize:function(e,t,n){return e.toCanvas().then(function(canvas){return qw.scale(canvas,t,n).then(function(t){return Bw.fromCanvas(t,e.getType())})})}},Yw=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),i=0,r=0;i<t;i++)r|=this.readByteAt(e+i)<<Math.abs(n+8*i);return r},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),Xw={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},Kw={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},Jw=(function(){function e(e){if(this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={},this._reader=new Yw(e),this._idx=this._offsets.tiffHeader,65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(this._reader.littleEndian=18761==this.SHORT(this._idx),42!==this.SHORT(this._idx+=2))throw new Error("Invalid Exif data.");this._offsets.IFD0=this._offsets.tiffHeader+this.LONG(this._idx+=2),this._tiffTags=this.extractTags(this._offsets.IFD0,Xw.tiff),"ExifIFDPointer"in this._tiffTags&&(this._offsets.exifIFD=this._offsets.tiffHeader+this._tiffTags.ExifIFDPointer,delete this._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in this._tiffTags&&(this._offsets.gpsIFD=this._offsets.tiffHeader+this._tiffTags.GPSInfoIFDPointer,delete this._tiffTags.GPSInfoIFDPointer);var t=this.LONG(this._offsets.IFD0+12*this.SHORT(this._offsets.IFD0)+2);t&&(this._offsets.IFD1=this._offsets.tiffHeader+t)}e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=null;if(this._offsets.exifIFD){try{e=this.extractTags(this._offsets.exifIFD,Xw.exif)}catch(e){return null}if(e.ExifVersion&&Array.isArray(e.ExifVersion)){for(var i=0,t="";i<e.ExifVersion.length;i++)t+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=t}}return e},e.prototype.GPS=function(){var e=null;if(this._offsets.gpsIFD){try{e=this.extractTags(this._offsets.gpsIFD,Xw.gps)}catch(e){return null}e.GPSVersionID&&Array.isArray(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join("."))}return e},e.prototype.thumb=function(){if(this._offsets.IFD1)try{var e=this.extractTags(this._offsets.IFD1,Xw.thumb);if("JPEGInterchangeFormat"in e)return this.SEGMENT(this._offsets.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,t){var n,i,r,o,c,l,f,d,m=[],h={},v={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},y={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(n=this.SHORT(e),i=0;i<n;i++)if(m=[],f=e+2+12*i,void 0!==(r=t[this.SHORT(f)])){if(o=v[this.SHORT(f+=2)],c=this.LONG(f+=2),!(l=y[o]))throw new Error("Invalid Exif data.");if(f+=4,l*c>4&&(f=this.LONG(f)+this._offsets.tiffHeader),f+l*c>=this.length())throw new Error("Invalid Exif data.");"ASCII"!==o?(m=this.asArray(o,f,c),d=1==c?m[0]:m,Kw.hasOwnProperty(r)&&"object"!=typeof d?h[r]=Kw[r][d]:h[r]=d):h[r]=this.STRING(f,c).replace(/\0$/,"").trim()}return h}}(),function(e,t){return Gw.rotate(e,t)}),Qw=function(e){return $w.invert(e)},Zw=function(e){return $w.sharpen(e)},eC=function(e,t){return $w.brightness(e,t)},tC=function(e,t){return $w.contrast(e,t)},nC=function(e,t,n,r){return $w.colorize(e,t,n,r)},rC=function(e,t){return $w.gamma(e,t)},oC=function(e,t){return Gw.flip(e,t)},iC=function(e,t,n,r,o){return Gw.crop(e,t,n,r,o)},aC=function(e,t,n){return Gw.resize(e,t,n)},uC=Jw,cC=function(e,t){return Wn({dom:{tag:"span",innerHtml:e,classes:["tox-icon","tox-tbtn__icon-wrap"]}},t)},sC=function(e,t){return cC(Gm(e,t),{})},lC=function(e,t){return cC(Gm(e,t),{behaviours:Da([Wd.config({})])})},fC=function(text,e,t){return{dom:{tag:"span",innerHtml:t.translate(text),classes:[e+"__select-label"]},behaviours:Da([Wd.config({})])}},dC=function(e,t,n,r,o){void 0===n&&(n=[]);var c=t.fold(function(){return{}},function(e){return{action:e}}),l=Wn({buttonBehaviours:Da([nh(e.disabled),Zv.config({}),Em("button press",[Fo("click"),Fo("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},c),f=be(l,{dom:r});return be(f,{components:o})},mC=function(e,t,n,r){void 0===r&&(r=[]);var o={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(function(e){return{"aria-label":n.translate(e),title:n.translate(e)}}).getOr({})},c=e.icon.map(function(e){return sC(e,n.icons)}),l=fh([c]);return dC(e,t,r,o,l)},gC=function(e,t,n,r){void 0===r&&(r=[]);var o=mC(e,k.some(t),n,r);return Wm.sketch(o)},hC=function(e,t,n,r){void 0===r&&(r=[]);var o=n.translate(e.text),c=e.icon?e.icon.map(function(e){return sC(e,n.icons)}):k.none(),l=c.isSome()?fh([c]):[],f=c.isSome()?{}:{innerHtml:o},d=(e.primary?["tox-button"]:["tox-button","tox-button--secondary"]).concat(c.isSome()?["tox-button--icon"]:[]);return function(e,t,n,r,o){void 0===n&&(n=[]);var c=dC(e,k.some(t),n,r,o);return Wm.sketch(c)}(e,t,r,Wn({tag:"button",classes:d},f,{attributes:{title:o}}),l)},pC=function(t,n){return function(r){"custom"===n?To(r,zp,{name:t,value:{}}):"submit"===n?Oo(r,Pp):"cancel"===n?Oo(r,Ip):e.console.error("Unknown button type: ",n)}},vC=function(e,t,n){var r=pC(e.name,t);return hC(e,r,n,[])},bC=r([mo("field1Name","field1"),mo("field2Name","field2"),Sa("onLockedChange"),ya(["lockClass"]),mo("locked",!1),Ns("coupledFieldBehaviours",[Ml,om])]),yC=function(e,t){return Qs({factory:Wp,name:e,overrides:function(e){return{fieldBehaviours:Da([Em("coupled-input-behaviour",[Vo(input(),function(n){(function(e,t,n){return hl(e,t,n).bind(Ml.getCurrent)})(n,e,t).each(function(t){hl(n,e,"lock").each(function(r){Cm.isOn(r)&&e.onLockedChange(n,t,r)})})})])])}}})},xC=r([yC("field1","field2"),yC("field2","field1"),Qs({factory:Wm,schema:[eo("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:Da([Cm.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),wC=Al({name:"FormCoupledInputs",configFields:bC(),partFields:xC(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:_s(e.coupledFieldBehaviours,[Ml.config({find:k.some}),om.config({store:{mode:"manual",getValue:function(t){var n,r=xl(t,e,["field1","field2"]);return(n={})[e.field1Name]=om.getValue(r.field1()),n[e.field2Name]=om.getValue(r.field2()),n},setValue:function(t,n){var r=xl(t,e,["field1","field2"]);Ee(n,e.field1Name)&&om.setValue(r.field1(),n[e.field1Name]),Ee(n,e.field2Name)&&om.setValue(r.field2(),n[e.field2Name])}}})]),apis:{getField1:function(component){return hl(component,e,"field1")},getField2:function(component){return hl(component,e,"field2")},getLock:function(component){return hl(component,e,"lock")}}}},apis:{getField1:function(e,component){return e.getField1(component)},getField2:function(e,component){return e.getField2(component)},getLock:function(e,component){return e.getLock(component)}}}),CC=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){var n=parseFloat(t[1]),r=t[2];return ge.value({value:n,unit:r})}return ge.error(e)},SC=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=function(u){return Object.prototype.hasOwnProperty.call(n,u)};return e.unit===t?k.some(e.value):r(e.unit)&&r(t)?n[e.unit]===n[t]?k.some(e.value):k.some(e.value/n[e.unit]*n[t]):k.none()},kC=function(input){return k.none()},OC=function(e,t){return function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(!r.isSome())return k.none();n.push(r.getOrDie())}return k.some(t.apply(null,n))}([CC(e).toOption(),CC(t).toOption()],function(e,t){return SC(e,t.unit).map(function(e){return t.value/e}).map(function(e){return n=e,r=t.unit,function(e){return SC(e,r).map(function(e){return{value:e*n,unit:r}})};var n,r}).getOr(kC)}).getOr(kC)},TC=function(e,t){var n=kC,r=jn("ratio-event"),o=wC.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:Gm("lock",t.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:Gm("unlock",t.icons)}}],buttonBehaviours:Da([Zv.config({})])}),c=function(e){return{dom:{tag:"div",classes:["tox-form__group"]},components:e}},l=function(t){return Wp.parts().field({factory:zv,inputClasses:["tox-textfield"],inputBehaviours:Da([Zv.config({}),Em("size-input-events",[Vo(He(),function(component,e){To(component,r,{isField1:t})}),Vo(Ue(),function(component,t){To(component,Bp,{name:e.name})})])]),selectOnFocus:!1})},f=function(label){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(label)}}},d=wC.parts().field1(c([Wp.parts().label(f("Width")),l(!0)])),m=wC.parts().field2(c([Wp.parts().label(f("Height")),l(!1)]));return wC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[d,m,c([f("&nbsp;"),o])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,t,r){CC(om.getValue(e)).each(function(e){n(e).each(function(e){var n,r,o,c;om.setValue(t,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(c=(n=e).value.toFixed((r=n.unit)in o?o[r]:1)).indexOf(".")&&(c=c.replace(/\.?0*$/,"")),c+n.unit))})})},coupledFieldBehaviours:Da([Zg.config({}),Em("size-input-events2",[Vo(r,function(component,e){var t=e.event().isField1(),r=t?wC.getField1(component):wC.getField2(component),o=t?wC.getField2(component):wC.getField1(component),c=r.map(om.getValue).getOr(""),l=o.map(om.getValue).getOr("");n=OC(c,l)})])])})},EC={undo:r(jn("undo")),redo:r(jn("redo")),zoom:r(jn("zoom")),back:r(jn("back")),apply:r(jn("apply")),swap:r(jn("swap")),transform:r(jn("transform")),tempTransform:r(jn("temp-transform")),transformApply:r(jn("transform-apply"))},NC=r("save-state"),_C=r("disable"),AC=r("enable"),DC={formActionEvent:zp,saveState:NC,disable:_C,enable:AC},RC=function(e,n){var o=function(text,e,t,r){return $m(hC({name:text,text:text,disabled:t,primary:r},e,n))},c=function(e,t,r,o){return $m(gC({name:e,icon:k.some(e),tooltip:k.some(t),disabled:o},r,n))},l=function(e,t){e.map(function(e){var component=e.get(t);component.hasConfigured(Zg)&&Zg.disable(component)})},f=function(e,t){e.map(function(e){var component=e.get(t);component.hasConfigured(Zg)&&Zg.enable(component)})},d={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},m=k.none(),h=t,v=function(e,t,data){To(e,t,data)},y=function(component){return Oo(component,DC.disable())},x=function(component){return Oo(component,DC.enable())},w=function(e,t){y(e),v(e,EC.transform(),{transform:t}),x(e)},C=function(e){return function(){ce.getOpt(e).each(function(e){Wd.set(e,[ae])})}},S=function(e,t){y(e),v(e,EC.transformApply(),{transform:t,swap:C(e)}),x(e)},O=function(){return o("Back",function(button){return v(button,EC.back(),{swap:C(button)})},!1,!1)},T=function(){return $m({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Da([Zg.config({})])})},E=function(){return o("Apply",function(button){return v(button,EC.apply(),{swap:C(button)})},!0,!0)},N=[O(),T(),o("Apply",function(button){S(button,function(t){var rect=e.getRect();return iC(t,rect.x,rect.y,rect.w,rect.h)}),e.hideCrop()},!1,!0)],_=Cp.sketch({dom:d,components:N.map(function(e){return e.asSpec()}),containerBehaviours:Da([Em("image-tools-crop-buttons-events",[Vo(DC.disable(),function(e,t){l(N,e)}),Vo(DC.enable(),function(e,t){f(N,e)})])])}),A=$m(TC({name:"size",label:m,type:"sizeinput",constrain:!0},n)),D=[O(),T(),A,T(),o("Apply",function(button){A.getOpt(button).each(function(e){var t=om.getValue(e),n=function(e,t){return function(n){return aC(n,e,t)}}(parseInt(t.width,10),parseInt(t.height,10));S(button,n)})},!1,!0)],R=Cp.sketch({dom:d,components:D.map(function(e){return e.asSpec()}),containerBehaviours:Da([Em("image-tools-resize-buttons-events",[Vo(DC.disable(),function(e,t){l(D,e)}),Vo(DC.enable(),function(e,t){f(D,e)})])])}),B=function(e,t){return function(n){return e(n,t)}},M=B(oC,"h"),I=B(oC,"v"),z=B(uC,-90),P=B(uC,90),L=function(e,t){!function(e,t){y(e),v(e,EC.tempTransform(),{transform:t}),x(e)}(e,t)},H=[O(),T(),c("flip-horizontally","Flip horizontally",function(button){L(button,M)},!1),c("flip-vertically","Flip vertically",function(button){L(button,I)},!1),c("rotate-left","Rotate counterclockwise",function(button){L(button,z)},!1),c("rotate-right","Rotate clockwise",function(button){L(button,P)},!1),T(),E()],F=Cp.sketch({dom:d,components:H.map(function(e){return e.asSpec()}),containerBehaviours:Da([Em("image-tools-fliprotate-buttons-events",[Vo(DC.disable(),function(e,t){l(H,e)}),Vo(DC.enable(),function(e,t){f(H,e)})])])}),V=function(label,e,t,o,c){var l=Bx.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(label)}}),f=Bx.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),d=Bx.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return $m(Bx.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t,maxX:c,getInitialValue:r({x:r(o)})},components:[l,f,d],sliderBehaviours:Da([sm.config({})]),onChoose:e}))},j=function(label,e,t,n,r){return V(label,function(t,n,r){var o=B(e,r.x()/100);w(t,o)},t,n,r)},U=function(label,e,t,n,r){var o=function(label,e,t,n,r){return[O(),j(label,e,t,n,r),E()]}(label,e,t,n,r);return Cp.sketch({dom:d,components:o.map(function(e){return e.asSpec()}),containerBehaviours:Da([Em("image-tools-filter-panel-buttons-events",[Vo(DC.disable(),function(e,t){l(o,e)}),Vo(DC.enable(),function(e,t){f(o,e)})])])})},W=[O(),T(),E()],$=Cp.sketch({dom:d,components:W.map(function(e){return e.asSpec()})}),G=U("Brightness",eC,-100,0,100),Y=U("Contrast",tC,-100,0,100),X=U("Gamma",rC,-100,0,100),K=function(label){return V(label,function(e,t,n){var r=J.getOpt(e),o=Z.getOpt(e),c=Q.getOpt(e);r.each(function(t){o.each(function(n){c.each(function(r){var o=function(e,t,n){return function(r){return nC(r,e,t,n)}}(om.getValue(t).x()/100,om.getValue(r).x()/100,om.getValue(n).x()/100);w(e,o)})})})},0,100,200)},J=K("R"),Q=K("G"),Z=K("B"),ee=[O(),J,Q,Z,E()],te=Cp.sketch({dom:d,components:ee.map(function(e){return e.asSpec()})}),ne=function(e,t,n){return function(button){v(button,EC.swap(),{transform:t,swap:function(){ce.getOpt(button).each(function(t){Wd.set(t,[e]),n(t)})}})}},re=k.some(Zw),oe=k.some(Qw),ie=[c("crop","Crop",ne(_,m,function(t){e.showCrop()}),!1),c("resize","Resize",ne(R,m,function(t){A.getOpt(t).each(function(t){var n=e.getMeasurements(),r=n.width,o=n.height;om.setValue(t,{width:r,height:o})})}),!1),c("orientation","Orientation",ne(F,m,h),!1),c("brightness","Brightness",ne(G,m,h),!1),c("sharpen","Sharpen",ne($,re,h),!1),c("contrast","Contrast",ne(Y,m,h),!1),c("color-levels","Color levels",ne(te,m,h),!1),c("gamma","Gamma",ne(X,m,h),!1),c("invert","Invert",ne($,oe,h),!1)],ae=Cp.sketch({dom:d,components:ie.map(function(e){return e.asSpec()})}),ue=Cp.sketch({dom:{tag:"div"},components:[ae],containerBehaviours:Da([Wd.config({})])}),ce=$m(ue);return{memContainer:ce,getApplyButton:function(e){return ce.getOpt(e).map(function(e){var t=e.components()[0];return t.components()[t.components().length-1]})}}},BC=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),MC=tinymce.util.Tools.resolve("tinymce.geom.Rect"),IC=tinymce.util.Tools.resolve("tinymce.util.Observable"),zC=tinymce.util.Tools.resolve("tinymce.util.Tools"),PC=tinymce.util.Tools.resolve("tinymce.util.VK");function LC(e){var t,i;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),i=0;i<t.length;i++)e[t[i]]=e.changedTouches[0][t[i]]}function HC(t,n){var r,o,c,l,f,d,m,h=n.document||e.document;n=n||{};var v=h.getElementById(n.handle||t);c=function(t){var c,cursor,y=function(e){var t,body,n,r,o,c,l,f=Math.max;return t=e.documentElement,body=e.body,n=f(t.scrollWidth,body.scrollWidth),r=f(t.clientWidth,body.clientWidth),o=f(t.offsetWidth,body.offsetWidth),c=f(t.scrollHeight,body.scrollHeight),l=f(t.clientHeight,body.clientHeight),{width:n<o?r:n,height:c<f(t.offsetHeight,body.offsetHeight)?l:c}}(h);LC(t),t.preventDefault(),o=t.button,c=v,d=t.screenX,m=t.screenY,cursor=e.window.getComputedStyle?e.window.getComputedStyle(c,null).getPropertyValue("cursor"):c.runtimeStyle.cursor,r=BC("<div></div>").css({position:"absolute",top:0,left:0,width:y.width,height:y.height,zIndex:2147483647,opacity:1e-4,cursor:cursor}).appendTo(h.body),BC(h).on("mousemove touchmove",f).on("mouseup touchend",l),n.start(t)},f=function(e){if(LC(e),e.button!==o)return l(e);e.deltaX=e.screenX-d,e.deltaY=e.screenY-m,e.preventDefault(),n.drag(e)},l=function(e){LC(e),BC(h).off("mousemove touchmove",f).off("mouseup touchend",l),r.remove(),n.stop&&n.stop(e)},this.destroy=function(){BC(v).off()},BC(v).on("mousedown touchstart",c)}var FC,VC=0,jC=function(e){var t=$m({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=Ne(1),r=Ne(k.none()),o=Ne({x:0,y:0,w:1,h:1}),c=Ne({x:0,y:0,w:1,h:1}),l=function(e,img){m.getOpt(e).each(function(e){var c=n.get(),l=Ka(e.element()),f=Za(e.element()),d=img.dom().naturalWidth*c,m=img.dom().naturalHeight*c,h=Math.max(0,l/2-d/2),v=Math.max(0,f/2-m/2),y={left:h.toString()+"px",top:v.toString()+"px",width:d.toString()+"px",height:m.toString()+"px",position:"absolute"};Wi(img,y),t.getOpt(e).each(function(e){Wi(e.element(),y)}),r.get().each(function(e){var rect=o.get();e.setRect({x:rect.x*c+h,y:rect.y*c+v,w:rect.w*c,h:rect.h*c}),e.setClampRect({x:h,y:v,w:d,h:m}),e.setViewPortRect({x:0,y:0,w:l,h:f})})})},f=function(e,t){var image,img=Vt.fromTag("img");return Tn(img,"src",t),(image=img.dom(),new rg(function(e){var t=function(){image.removeEventListener("load",t),e(image)};image.complete?e(image):image.addEventListener("load",t)})).then(function(){return m.getOpt(e).map(function(e){var t=ia({element:img});Wd.replaceAt(e,1,k.some(t));var r=c.get(),f={x:0,y:0,w:img.dom().naturalWidth,h:img.dom().naturalHeight};c.set(f);var rect=MC.inflate(f,-20,-20);return o.set(rect),r.w===f.w&&r.h===f.h||function(e,img){m.getOpt(e).each(function(e){var t=Ka(e.element()),r=Za(e.element()),o=img.dom().naturalWidth,c=img.dom().naturalHeight,l=Math.min(t/o,r/c);l>=1?n.set(1):n.set(l)})}(e,img),l(e,img),img})})},d=Cp.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[t.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:Da([Em("image-panel-crop-events",[Xo(function(e){m.getOpt(e).each(function(e){var t=function(e,t,n,r,o){var c,l,f,d,m="tox-",h=m+"crid-"+VC++;function v(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function y(t,r,o,l){var f,d,m,h,rect;f=r.x,d=r.y,m=r.w,h=r.h,f+=o*t.deltaX,d+=l*t.deltaY,(m+=o*t.deltaW)<20&&(m=20),(h+=l*t.deltaH)<20&&(h=20),rect=e=MC.clamp({x:f,y:d,w:m,h:h},n,"move"===t.name),rect=v(n,rect),c.fire("updateRect",{rect:rect}),C(rect)}function x(rect){function e(e,rect){rect.h<0&&(rect.h=0),rect.w<0&&(rect.w=0),BC("#"+h+"-"+e,r).css({left:rect.x,top:rect.y,width:rect.w,height:rect.h})}zC.each(l,function(e){BC("#"+h+"-"+e.name,r).css({left:rect.w*e.xMul+rect.x,top:rect.h*e.yMul+rect.y})}),e("top",{x:t.x,y:t.y,w:t.w,h:rect.y-t.y}),e("right",{x:rect.x+rect.w,y:rect.y,w:t.w-rect.x-rect.w+t.x,h:rect.h}),e("bottom",{x:t.x,y:rect.y+rect.h,w:t.w,h:t.h-rect.y-rect.h+t.y}),e("left",{x:t.x,y:rect.y,w:rect.x-t.x,h:rect.h}),e("move",rect)}function w(rect){x(e=rect)}function C(rect){var e,t;w((e=n,{x:(t=rect).x+e.x,y:t.y+e.y,w:t.w,h:t.h}))}return l=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],d=["top","right","bottom","left"],BC('<div id="'+h+'" class="'+m+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),zC.each(d,function(e){BC("#"+h,r).append('<div id="'+h+"-"+e+'"class="'+m+'croprect-block" style="display: none" data-mce-bogus="all">')}),zC.each(l,function(e){BC("#"+h,r).append('<div id="'+h+"-"+e.name+'" class="'+m+"croprect-handle "+m+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false" title="'+e.label+'">')}),f=zC.map(l,function(t){var n;return new HC(h,{document:r.ownerDocument,handle:h+"-"+t.name,start:function(){n=e},drag:function(e){y(t,n,e.deltaX,e.deltaY)}})}),x(e),BC(r).on("focusin focusout",function(e){BC(e.target).attr("aria-grabbed","focus"===e.type)}),BC(r).on("keydown",function(t){var n;function r(e,t,r,o,c){e.stopPropagation(),e.preventDefault(),y(n,r,o,c)}switch(zC.each(l,function(e){if(t.target.id===h+"-"+e.name)return n=e,!1}),t.keyCode){case PC.LEFT:r(t,0,e,-10,0);break;case PC.RIGHT:r(t,0,e,10,0);break;case PC.UP:r(t,0,e,0,-10);break;case PC.DOWN:r(t,0,e,0,10);break;case PC.ENTER:case PC.SPACEBAR:t.preventDefault(),o()}}),c=zC.extend({toggleVisibility:function(e){var t;t=zC.map(l,function(e){return"#"+h+"-"+e.name}).concat(zC.map(d,function(e){return"#"+h+"-"+e})).join(","),e?BC(t,r).show():BC(t,r).hide()},setClampRect:function(rect){n=rect,x(e)},setRect:w,getInnerRect:function(){return v(n,e)},setInnerRect:C,setViewPortRect:function(rect){t=rect,x(e)},destroy:function(){zC.each(f,function(e){e.destroy()}),f=[]}},IC)}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e.element().dom(),function(){});t.toggleVisibility(!1),t.on("updateRect",function(e){var rect=e.rect,t=n.get(),r={x:Math.round(rect.x/t),y:Math.round(rect.y/t),w:Math.round(rect.w/t),h:Math.round(rect.h/t)};o.set(r)}),r.set(k.some(t))})})])])}],containerBehaviours:Da([Wd.config({}),Em("image-panel-events",[Xo(function(t){f(t,e)})])])}),m=$m(d);return{memContainer:m,updateSrc:f,zoom:function(e,t){var r=n.get(),o=t>0?Math.min(2,r+.1):Math.max(.1,r-.1);n.set(o),m.getOpt(e).each(function(e){var img=e.components()[1].element();l(e,img)})},showCrop:function(){r.get().each(function(e){e.toggleVisibility(!0)})},hideCrop:function(){r.get().each(function(e){e.toggleVisibility(!1)})},getRect:function(){return o.get()},getMeasurements:function(){var e=c.get();return{width:e.w,height:e.h}}}},UC=function(e,t,n,r,o){return gC({name:e,icon:k.some(t),disabled:n,tooltip:k.some(e)},r,o)},WC=function(button,e){e?Zg.enable(button):Zg.disable(button)},$C=function(){return Yt.getOrDie("URL")},qC=function(e){return $C().createObjectURL(e)},GC=function(u){$C().revokeObjectURL(u)},YC=function(e){var t=Ne(e),n=Ne(k.none()),r=function(){var data=[],e=-1;function t(){return e>0}function n(){return-1!==e&&e<data.length-1}return{data:data,add:function(t){var n;return n=data.splice(++e),data.push(t),{state:t,removed:n}},undo:function(){if(t())return data[--e]},redo:function(){if(n())return data[++e]},canUndo:t,canRedo:n}}();r.add(e);var o=function(e){t.set(e)},c=function(e){return{blob:e,url:qC(e)}},l=function(e){GC(e.url)},f=function(){n.get().each(l),n.set(k.none())},d=function(e){var t=c(e);o(t);var n,f=r.add(t).removed;return n=f,zC.each(n,l),t.url};return{getBlobState:function(){return t.get()},setBlobState:o,addBlobState:d,getTempState:function(){return n.get().fold(function(){return t.get()},function(e){return e})},updateTempState:function(e){var t=c(e);return f(),n.set(k.some(t)),t.url},addTempState:function(e){var t=c(e);return n.set(k.some(t)),t.url},applyTempState:function(e){return n.get().fold(function(){},function(t){d(t.blob),e()})},destroyTempState:f,undo:function(){var e=r.undo();return o(e),e.url},redo:function(){var e=r.redo();return o(e),e.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},XC=function(n,r){var o=YC(n.currentState),c=function(e){var t=o.getHistoryStates();w.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),To(e,DC.formActionEvent,{name:DC.saveState(),value:t.undoEnabled})},l=function(e){return e.toBlob()},f=function(e){To(e,DC.formActionEvent,{name:DC.disable(),value:{}})},d=function(e){C.getApplyButton(e).each(function(e){Zg.enable(e)}),To(e,DC.formActionEvent,{name:DC.enable(),value:{}})},m=function(e,t){return f(e),x.updateSrc(e,t)},h=function(t,n,filter,r,o){return f(t),Mw(n).then(filter).then(l).then(r).then(function(e){return m(t,e).then(function(e){return c(t),o(),d(t),e})}).catch(function(n){e.console.log(n),d(t)})},v=function(e,filter,t){var n=o.getBlobState().blob;h(e,n,filter,function(e){return o.updateTempState(e)},t)},y=function(e){var t=o.getBlobState().url;return o.destroyTempState(),c(e),t},x=jC(n.currentState.url),w=function(e){var t=$m(UC("Undo","undo",!0,function(button){To(button,EC.undo(),{direction:1})},e)),n=$m(UC("Redo","redo",!0,function(button){To(button,EC.redo(),{direction:1})},e));return{container:Cp.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[t.asSpec(),n.asSpec(),UC("Zoom in","zoom-in",!1,function(button){To(button,EC.zoom(),{direction:1})},e),UC("Zoom out","zoom-out",!1,function(button){To(button,EC.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(e,r,o){t.getOpt(e).each(function(e){WC(e,r)}),n.getOpt(e).each(function(e){WC(e,o)})}}}(r),C=RC(x,r);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[C.memContainer.asSpec(),x.memContainer.asSpec(),w.container],behaviours:Da([om.config({store:{mode:"manual",getValue:function(){return o.getBlobState()}}}),Em("image-tools-events",[Vo(EC.undo(),function(e,t){var n=o.undo();m(e,n).then(function(t){d(e),c(e)})}),Vo(EC.redo(),function(e,t){var n=o.redo();m(e,n).then(function(t){d(e),c(e)})}),Vo(EC.zoom(),function(e,t){var n=t.event().direction();x.zoom(e,n)}),Vo(EC.back(),function(e,t){!function(e){var t=y(e);m(e,t).then(function(t){d(e)})}(e),t.event().swap()(),x.hideCrop()}),Vo(EC.apply(),function(e,t){o.applyTempState(function(){y(e),t.event().swap()()})}),Vo(EC.transform(),function(e,n){return v(e,n.event().transform(),t)}),Vo(EC.tempTransform(),function(e,n){return function(e,filter){var n=o.getTempState().blob;h(e,n,filter,function(e){return o.addTempState(e)},t)}(e,n.event().transform())}),Vo(EC.transformApply(),function(e,t){return function(e,filter,t){var n=o.getBlobState().blob;h(e,n,filter,function(t){var n=o.addBlobState(t);return y(e),n},t)}(e,t.event().transform(),t.event().swap())}),Vo(EC.swap(),function(e,t){!function(e){w.updateButtonUndoStates(e,!1,!1)}(e);var n=t.event().transform(),r=t.event().swap();n.fold(function(){r()},function(t){v(e,t,r)})})]),Xx()])}},KC=_l({name:"HtmlSelect",configFields:[eo("options"),Os("selectBehaviours",[sm,om]),mo("selectClasses",[]),mo("selectAttributes",{}),option("data")],factory:function(e,t){var n=map(e.options,function(option){return{dom:{tag:"option",value:option.value,innerHtml:option.text}}}),r=e.data.map(function(e){return ke("initialValue",e)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Es(e.selectBehaviours,[sm.config({}),om.config({store:Wn({mode:"manual",getValue:function(select){return Ji(select.element())},setValue:function(select,t){F(e.options,function(e){return e.value===t}).isSome()&&Qi(select.element(),t)}},r)})])}}}),JC=function(e,t){var n=e.label.map(function(label){return _v(label,t)}),r=[Hd.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:function(e){return Oo(e,Pp),k.some(!0)}}),Em("textfield-change",[Vo(input(),function(component,t){To(component,Bp,{name:e.name})}),Vo(yt(),function(component,t){To(component,Bp,{name:e.name})})]),Zv.config({})],o=e.validation.map(function(e){return Kv.config({getRoot:function(input){return un(input.element())},invalidClass:"tox-invalid",validator:{validate:function(input){var t=om.getValue(input),n=e.validator(t);return nv.pure(!0===n?ge.value(t):ge.error(n))},validateOnLoad:e.validateOnLoad}})}).toArray(),c=Wp.parts().field({tag:!0===e.multiline?"textarea":"input",inputAttributes:e.placeholder.fold(function(){},function(e){return{placeholder:t.translate(e)}}),inputClasses:[e.classname],inputBehaviours:Da(W([r,o])),selectOnFocus:!1,factory:zv}),l=e.flex?["tox-form__group--stretched"]:[];return Ov(n,c,l)},QC=function(t){return Wn({},t,{toCached:function(){return QC(t.toCached())},bindFuture:function(e){return QC(t.bind(function(t){return t.fold(function(e){return nv.pure(ge.error(e))},function(a){return e(a)})}))},bindResult:function(e){return QC(t.map(function(t){return t.bind(e)}))},mapResult:function(e){return QC(t.map(function(t){return t.map(e)}))},mapError:function(e){return QC(t.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return t.map(function(t){return t.fold(e,n)})},withTimeout:function(n,r){return QC(nv.nu(function(o){var c=!1,l=e.setTimeout(function(){c=!0,o(ge.error(r()))},n);t.get(function(t){c||(e.clearTimeout(l),o(t))})}))}})},ZC=function(e){return QC(nv.nu(e))},eS=ZC,tS={type:"separator"},nS=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:function(){}}},rS=function(title,e){return{type:"menuitem",value:e,text:title,meta:{attach:void 0},onAction:function(){}}},oS=function(e,t){return function(e){return map(e,nS)}(function(e,t){return filter(t,function(t){return t.type===e})}(e,t))},iS=function(e){return oS("header",e.targets)},aS=function(e){return oS("anchor",e.targets)},uS=function(e){return k.from(e.anchorTop).map(function(e){return rS("<top>",e)}).toArray()},cS=function(e){return k.from(e.anchorBottom).map(function(e){return rS("<bottom>",e)}).toArray()},sS=function(e,t){var n=e.toLowerCase();return filter(t,function(e){var text=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return ut(text.toLowerCase(),n)||ut(e.value.toLowerCase(),n)})},lS=function(e,input,t){var n=om.getValue(input),r=void 0!==n.meta.text?n.meta.text:n.value;return t.getLinkInformation().fold(function(){return[]},function(n){var o,c=sS(r,function(e){return map(e,function(e){return rS(e,e)})}(t.getHistory(e)));return"file"===e?(o=[c,sS(r,iS(n)),sS(r,W([uS(n),aS(n),cS(n)]))],H(o,function(a,b){return 0===a.length||0===b.length?a.concat(b):a.concat(tS,b)},[])):c})},fS=function(e,n,r){var o,c=function(component){var t=om.getValue(component);r.addToHistory(t.value,e.filetype)},l=Wp.parts().field({factory:kv,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],minChars:0,responseTime:0,fetch:function(input){var t=lS(e.filetype,input,r),o=Iv(t,ch.BUBBLE_TO_SANDBOX,n.providers);return nv.pure(o)},getHotspot:function(e){return y.getOpt(e)},onSetValue:function(e,n){e.hasConfigured(Kv)&&Kv.run(e).get(t)},typeaheadBehaviours:Da(W([r.getValidationHandler().map(function(t){return Kv.config({getRoot:function(e){return un(e.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{},validator:{validate:function(input){var n=om.getValue(input);return eS(function(r){t({type:e.filetype,url:n.value},function(e){y.getOpt(input).each(function(t){var n=function(component,e,b){(b?Mi:zi)(component.element(),e)};n(t,"tox-control-wrap--status-valid","valid"===e.status),n(t,"tox-control-wrap--status-unknown","unknown"===e.status)}),r(("invalid"===e.status?ge.error:ge.value)(e.message))})})},validateOnLoad:!1}})}).toArray(),[Zv.config({}),Em("urlinput-events",W(["file"===e.filetype?[Vo(input(),function(t){To(t,Bp,{name:e.name})})]:[],[Vo(Ue(),function(t){To(t,Bp,{name:e.name}),c(t)}),Vo(yt(),function(t){To(t,Bp,{name:e.name}),c(t)})]]))]])),eventOrder:(o={},o[input()]=["streaming","urlinput-events","invalidating"],o),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"dog"},lazySink:n.getSink,parts:{menu:zh(0,0,"normal")},onExecute:function(e,component,t){To(component,Pp,{})},onItemExecute:function(t,n,r,o){c(t),To(t,Bp,{name:e.name})}}),f=e.label.map(function(label){return _v(label,n.providers)}),d=function(e,t,label){return void 0===t&&(t=e),void 0===label&&(label=e),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],innerHtml:Gm(t,n.providers.icons),attributes:{title:n.providers.translate(label)}}}},m=$m({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d("valid","checkmark","valid"),d("unknown","warning"),d("invalid","warning")]}),h=r.getUrlPicker(e.filetype),v=jn("browser.url.event"),y=$m({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()]});return Wp.sketch({dom:Nv([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:W([[y.asSpec()],h.map(function(){return label=e.label,t=v,r="tox-browse-url",o="browse",c=n.providers,Wm.sketch({dom:{tag:"button",classes:["tox-tbtn",r],innerHtml:Gm(o,c.icons),attributes:{title:c.translate(label.getOr(""))}},buttonBehaviours:Da([Zv.config({})]),action:function(component){Oo(component,t)}});var label,t,r,o,c}).toArray()])}]),fieldBehaviours:Da([Em("url-input-events",[Vo(v,function(t){Ml.getCurrent(t).each(function(n){var r=om.getValue(n);h.each(function(o){o(r).get(function(r){om.setValue(n,r),To(t,Bp,{name:e.name})})})})})])])})},dS=function(e,t){var n,r,c=e.label.map(function(label){return _v(label,t)}),l=function(e){return function(t,n){fa(n.event().target(),"[data-collection-item-value]").each(function(n){e(t,n,Nn(n,"data-collection-item-value"))})}},f=[Vo(Le(),l(function(e,t){of(t)})),Vo(kt(),l(function(t,n,r){To(t,zp,{name:e.name,value:r})})),Vo(He(),l(function(e,t,n){la(e.element(),"."+Dg).each(function(e){zi(e,Dg)}),Mi(t,Dg)})),Vo(Fe(),l(function(e,t,n){la(e.element(),"."+Dg).each(function(e){zi(e,Dg)})})),Qo(l(function(t,n,r){To(t,zp,{name:e.name,value:r})}))],d=Wp.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:o},behaviours:Da([Wd.config({}),om.config({store:{mode:"memory",initialValue:[]},onSetValue:function(t,n){!function(t,n){var r=map(n,function(t){var n,r=1===e.columns?'<div class="tox-collection__item-label">'+t.text+"</div>":"",o='<div class="tox-collection__item-icon">'+t.icon+"</div>",c={_:" "," - ":" ","-":" "},l=t.text.replace(/\_| \- |\-/g,function(e){return c[e]});return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(n=t.value)?"&quot;":n)+'" title="'+l+'" aria-label="'+l+'">'+o+r+"</div>"}),o=e.columns>1&&"auto"!==e.columns?z(r,e.columns):[r],html=map(o,function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"});yn(t.element(),html.join(""))}(t,n),"auto"===e.columns&&pg(t,5,"tox-collection__item").each(function(e){var n=e.numRows,r=e.numColumns;Hd.setGridSize(t,n,r)}),Oo(t,Vp)}}),Zv.config({}),Hd.config((n=e.columns,r="normal",1===n?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===n?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?".tox-swatch":".tox-collection__item"}})),Em("collection-events",f)])});return Ov(c,d,["tox-form__group--collection"])},mS=function(e){return function(t,n,r){return Se(n,"name").fold(function(){return e(n,r)},function(o){return t.field(o,e(n,r))})}},gS={bar:mS(function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-bar"]},components:map(e.items,t.interpreter)}}(e,t.shared)}),collection:mS(function(e,t){return dS(e,t.shared.providers)}),alloy:mS(o),alertbanner:mS(function(e,t){return function(e,t){return Cp.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Wm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Gm(e.icon,t.icons),attributes:{title:t.translate(e.actionLabel)}},action:function(t){To(t,zp,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})}(e,t.shared.providers)}),input:mS(function(e,t){return function(e,t){return JC({name:e.name,multiline:!1,label:e.label,placeholder:e.placeholder,flex:!1,classname:"tox-textfield",validation:k.none()},t)}(e,t.shared.providers)}),textarea:mS(function(e,t){return function(e,t){return JC({name:e.name,multiline:!0,label:e.label,placeholder:e.placeholder,flex:!0,classname:"tox-textarea",validation:k.none()},t)}(e,t.shared.providers)}),listbox:mS(function(e,t){return function(e,t){var n=_v(e.label,t),r=Wp.parts().field({factory:KC,dom:{classes:["mce-select-field"]},selectBehaviours:Da([Zv.config({})]),options:e.values,data:e.initialValue.getOr(void 0)});return Tv(k.some(n),r)}(e,t.shared.providers)}),label:mS(function(e,t){return function(e,t){var label={dom:{tag:"label",innerHtml:t.providers.translate(e.label),classes:["tox-label"]}},n=map(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[label].concat(n),behaviours:Da([Xx(),Wd.config({}),iw(k.none()),Hd.config({mode:"acyclic"})])}}(e,t.shared)}),iframe:function(e){return function(t,n,r){var o=be(n,{source:"dynamic"});return mS(e)(t,o,r)}}(function(e,t){return pw(e,t.shared.providers)}),autocomplete:mS(function(e,t){return function(e,t){var n=_v(e.label.getOr("?"),t.providers),r=Wp.parts().field({factory:kv,dismissOnBlur:!1,inputClasses:["tox-textfield"],minChars:1,fetch:function(input){var n=om.getValue(input),r=e.getItems(n),o=Iv(r,ch.BUBBLE_TO_SANDBOX,t.providers);return nv.pure(o)},markers:{openClass:"dog"},lazySink:t.getSink,parts:{menu:zh(0,0,"normal")}});return Tv(k.some(n),r)}(e,t.shared)}),button:mS(function(e,t){return function(e,t){var n=pC(e.name,"custom");return hC(e,n,t,[aw(""),Xx()])}(e,t.shared.providers)}),checkbox:mS(function(e,t){return function(e,t){var n=om.config({store:{mode:"manual",getValue:function(e){return e.element().dom().checked},setValue:function(e,t){e.element().dom().checked=t}}}),r=function(e){return e.element().dom().click(),k.some(!0)},c=Wp.parts().field({factory:{sketch:o},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Da([Xx(),Zv.config({}),sm.config({}),n,Hd.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),Em("checkbox-events",[Vo(Ue(),function(component,t){To(component,Bp,{name:e.name})})])])}),l=Wp.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(e.label)},behaviours:Da([Wb.config({})])}),f=function(e){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e],innerHtml:Gm("checked"===e?"selected":"unselected",t.icons)}}},d=$m({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[f("checked"),f("unchecked")]});return Wp.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[c,d.asSpec(),l]})}(e,t.shared.providers)}),colorinput:mS(function(e,t){return Yb(e,t.shared,t.colorinput)}),colorpicker:mS(function(t){var n=function(e){return"tox-"+e},r=Yx(Zx,n),o=$m(r.sketch({dom:{tag:"div",classes:[n("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(form){To(form,zp,{name:"hex-valid",value:!0})},onInvalidHex:function(form){To(form,zp,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:Da([om.config({store:{mode:"manual",getValue:function(e){var t=o.get(e);return Ml.getCurrent(t).bind(function(e){return om.getValue(e).hex}).map(function(e){return"#"+e}).getOr("")},setValue:function(t,n){var r=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),c=o.get(t);Ml.getCurrent(c).fold(function(){e.console.log("Can not find form")},function(e){om.setValue(e,{hex:k.from(r[1]).getOr("")}),jx.getField(e,"hex").each(function(e){Oo(e,input())})})}}}),Xx()])}}),dropzone:mS(function(e,t){return uw(e,t.shared.providers)}),grid:mS(function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:map(e.items,t.interpreter)}}(e,t.shared)}),selectbox:mS(function(e,t){return function(e,t){var n=e.label.map(function(label){return _v(label,t)}),r=Wp.parts().field({dom:{},selectAttributes:{size:e.size},options:e.items,factory:KC,selectBehaviours:Da([Zv.config({}),Em("selectbox-change",[Vo(Ue(),function(component,t){To(component,Bp,{name:e.name})})])])}),o=e.size>1?k.none():k.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:Gm("chevron-down",t.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:W([[r],o.toArray()])};return Wp.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:W([n.toArray(),[c]])})}(e,t.shared.providers)}),sizeinput:mS(function(e,t){return TC(e,t.shared.providers)}),urlinput:mS(function(e,t){return fS(e,t.shared,t.urlinput)}),customeditor:mS(function(e){var t=Ne(k.none()),n=$m({dom:{tag:e.tag}}),r=Ne(k.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Da([Em("editor-foo-events",[Xo(function(component){n.getOpt(component).each(function(n){e.init(n.element().dom()).then(function(e){r.get().each(function(t){e.setValue(t)}),r.set(k.none()),t.set(k.some(e))})})})]),om.config({store:{mode:"manual",getValue:function(){return t.get().fold(function(){return r.get().getOr("")},function(e){return e.getValue()})},setValue:function(component,e){t.get().fold(function(){r.set(k.some(e))},function(t){return t.setValue(e)})}}}),Xx()]),components:[n.asSpec()]}}),htmlpanel:mS(function(e){return"presentation"===e.presets?Cp.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Cp.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Da([Zv.config({}),sm.config({})])})}),imagetools:mS(function(e,t){return XC(e,t.shared.providers)}),table:mS(function(e,t){return function(e,t){var n,header,r=function(text){return{dom:{tag:"th",innerHtml:t.translate(text)}}},o=function(text){return{dom:{tag:"td",innerHtml:t.translate(text)}}},c=function(e){return{dom:{tag:"tr"},components:map(e,o)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(header=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:map(header,r)}]}),(n=e.cells,{dom:{tag:"tbody"},components:map(n,c)})],behaviours:Da([Zv.config({}),sm.config({})])}}(e,t.shared.providers)})},hS={field:function(e,t){return t}},pS=function(e,t,n){var r=be(n,{shared:{interpreter:function(t){return vS(e,t,r)}}});return vS(e,t,r)},vS=function(t,n,r){return Se(gS,n.type).fold(function(){return e.console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(e){return e(t,n,r)})},bS=function(e){return e.y()},yS=function(e,element,t){return Hu(function(e){return e.x()}(e),bS(e),t.northeast(),au(),"layout-ne")},xS=function(e,element,t){return Hu(function(e,element){return e.x()+e.width()-element.width()}(e,element),bS(e),t.northwest(),uu(),"layout-nw")},wS=function(e,element,t){return Hu(function(e,element){return e.x()+e.width()/2-element.width()/2}(e,element),bS(e),t.north(),su(),"layout-n")},CS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},SS=function(e,t,n){return n?function(){return{anchor:"node",root:e(),node:k.from(e()),bubble:Pu(-12,-12,CS),layouts:{onRtl:function(){return[yS]},onLtr:function(){return[xS]}}}}:function(){return{anchor:"hotspot",hotspot:t(),bubble:Pu(-12,12,CS),layouts:{onRtl:function(){return[qu]},onLtr:function(){return[Gu]}}}}},kS=function(e,t,n){return n?function(){return{anchor:"node",root:e(),node:k.from(e()),layouts:{onRtl:function(){return[wS]},onLtr:function(){return[wS]}}}}:function(){return{anchor:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[Ju]},onLtr:function(){return[Ju]}}}}},OS=function(e){return function(){return{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[qu]},onLtr:function(){return[Gu]}}}}},TS=function(e,t){return function(){return{anchor:"selection",root:t(),getSelection:function(){var t=e.selection.getRng();return k.some(lc(Vt.fromDom(t.startContainer),t.startOffset,Vt.fromDom(t.endContainer),t.endOffset))}}}},ES=function(e){return function(element){return{anchor:"node",root:e(),node:element}}},NS=function(e,t,n){var r=Rp(e),o=function(){return Vt.fromDom(e.getBody())};return{toolbar:SS(o,t,r),toolbarOverflow:OS(n),banner:kS(o,t,n),cursor:TS(e,o),node:ES(o)}},_S=function(e){return function(t,n){Hb.colorPickerDialog(e)(t,n)}},AS=function(e){return function(){return Eb(e)}},DS=function(e){return function(){return Nb(e)}},RS=function(e){return{colorPicker:_S(e),hasCustomColors:AS(e),getColors:DS(e)}},BS=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],MS=function(e){return H(e,function(e,t){if(ce(t,"items")){var n=MS(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(function(e){return ce(e,"inline")}(t)||function(e){return ce(e,"block")}(t)||function(e){return ce(e,"selector")}(t)){var r="custom-"+t.title.toLowerCase();return{customFormats:e.customFormats.concat([{name:r,format:t}]),formats:e.formats.concat([{title:t.title,format:r,icon:t.icon}])}}return Wn({},e,{formats:e.formats.concat(t)})},{customFormats:[],formats:[]})},IS=function(e){return function(e){return k.from(e.getParam("style_formats")).filter(N)}(e).map(function(t){var n=function(e,t){var n=MS(t),r=function(t){P(t,function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})};return e.formatter?r(n.customFormats):e.on("init",function(){r(n.customFormats)}),n.formats}(e,t);return function(e){return e.getParam("style_formats_merge",!1,"boolean")}(e)?BS.concat(n):n}).getOr(BS)},zS=function(e,t,n){var r={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return be(e,r)},PS=function(e,t,n,o){var c=function(t){return map(t,function(t){var l=ee(t);if(Ee(t,"items")){var f=c(t.items);return be(function(e){var t={type:"submenu",isSelected:r(!1),getStylePreview:function(){return k.none()}};return be(e,t)}(t),{getStyleItems:function(){return f}})}return Ee(t,"format")?function(e){return zS(e,n,o)}(t):1===l.length&&M(l,"title")?be(t,{type:"separator"}):function(t){var r=jn(t.title),c={type:"formatter",format:r,isSelected:n(r),getStylePreview:o(r)},l=be(t,c);return e.formatter.register(r,l),l}(t)})};return c(t)},LS=function(e){var t=function(t){return function(){return e.formatter.match(t)}},n=function(t){return function(){var n=e.formatter.get(t);return void 0!==n?k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styleAttr:e.formatter.getCssText(t)}):k.none()}},r=function(e){var t=e.items;return void 0!==t&&t.length>0?$(t,r):[e.format]},o=Ne([]),c=Ne([]),l=Ne([]),f=Ne([]),d=Ne(!1);return e.on("init",function(){var l=IS(e),f=PS(e,l,t,n);o.set(f),c.set($(f,r))}),e.on("addStyleModifications",function(o){var c=PS(e,o.items,t,n);l.set(c),d.set(o.replace),f.set($(c,r))}),{getData:function(){var e=d.get()?[]:o.get(),t=l.get();return e.concat(t)},getFlattenedKeys:function(){var e=d.get()?[]:c.get(),t=f.get();return e.concat(t)}}},HS=zC.trim,FS=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},VS=FS("true"),jS=FS("false"),US=function(e,title,t,n,r){return{type:e,title:title,url:t,level:n,attach:r}},WS=function(e){return e.innerText||e.textContent},$S=function(e){return function(e){return e&&"A"===e.nodeName&&void 0!==(e.id||e.name)}(e)&&GS(e)},qS=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},GS=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return VS(e)}return!1}(e)&&!jS(e)},YS=function(e){return qS(e)&&GS(e)},XS=function(e){var t=function(e){return e.id?e.id:jn("h")}(e);return US("header",WS(e),"#"+t,function(e){return qS(e)?parseInt(e.nodeName.substr(1),10):0}(e),function(){e.id=t})},KS=function(e){var n=e.id||e.name,r=WS(e);return US("anchor",r||"#"+n,"#"+n,0,t)},JS=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,map(wc(Vt.fromDom(n),t),function(element){return element.dom()})},QS=function(e){return HS(e.title).length>0},ZS=function(e){var t=JS(e);return filter(function(e){return map(filter(e,YS),XS)}(t).concat(function(e){return map(filter(e,$S),KS)}(t)),QS)},ek="tinymce-url-history",tk=function(e){return T(e)&&/^https?/.test(e)},nk=function(e){return E(e)&&function(e,t){for(var n=ee(e),r=0,o=n.length;r<o;r++){var i=n[r],c=e[i];if(t(c,i,e))return k.some(c)}return k.none()}(e,function(e){return!(N(a=e)&&a.length<=5&&G(a,tk));var a}).isNone()},rk=function(){var t,n=e.localStorage.getItem(ek);if(null===n)return{};try{t=JSON.parse(n)}catch(t){if(t instanceof SyntaxError)return e.console.log("Local storage "+ek+" was not valid JSON",t),{};throw t}return nk(t)?t:(e.console.log("Local storage "+ek+" was not valid format",t),{})},ok=function(e){var t=rk();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:[]},ik=function(t,n){if(tk(t)){var r=rk(),o=Object.prototype.hasOwnProperty.call(r,n)?r[n]:[],c=filter(o,function(e){return e!==t});r[n]=[t].concat(c).slice(0,5),function(t){if(!nk(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));e.localStorage.setItem(ek,JSON.stringify(t))}(r)}},ak=Object.prototype.hasOwnProperty,uk=function(e){return!!e},ck=function(e){return re(zC.makeMap(e,/[, ]/),uk)},sk=function(e,t,n){var r,o,c=(r=e,o=t,ak.call(r,o)?k.some(r[o]):k.none()).getOr(n);return T(c)?k.some(c):k.none()},lk=function(e){return k.some(e.file_picker_callback).filter(A)},fk=function(e,t){var n=function(e){var t=k.some(e.file_picker_types).filter(uk),n=k.some(e.file_browser_callback_types).filter(uk),r=t.or(n).map(ck);return lk(e).fold(function(){return!1},function(e){return r.fold(function(){return!0},function(e){return ee(e).length>0&&e})})}(e);return _(n)?n?lk(e):k.none():n[t]?lk(e):k.none()},dk=function(e){return{getHistory:ok,addToHistory:ik,getLinkInformation:function(){return function(e){return!1===e.settings.typeahead_urls?k.none():k.some({targets:ZS(e.getBody()),anchorTop:sk(e.settings,"anchor_top","#top").getOrUndefined(),anchorBottom:sk(e.settings,"anchor_bottom","#bottom").getOrUndefined()})}(e)},getValidationHandler:function(){return function(e){var t=e.settings.filepicker_validator_handler;return A(t)?k.some(t):k.none()}(e)},getUrlPicker:function(t){return function(e,t){return fk(e.settings,t).map(function(n){return function(r){return nv.nu(function(o){var meta=zC.extend({filetype:t},k.from(r.meta).getOr({}));n.call(e,function(e,meta){if(!T(e))throw new Error("Expected value to be string");if(void 0!==meta&&!E(meta))throw new Error("Expected meta to be a object");o({value:e,meta:meta})},r.value,meta)})}})}(e,t)}}},mk=function(e,t,n,r){var o={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:Ng.translate},interpreter:function(s){return function(e,t){return vS(hS,e,t)}(s,o)},anchors:NS(t,n,r),getSink:function(){return ge.value(e)}},urlinput:dk(t),styleselect:LS(t),colorinput:RS(t)};return o},gk=jt("within","extra","withinWidth"),hk=function(e,t,n){var o,c=(o=function(e,t){var o=n(e);return k.some({element:r(e),start:r(t),finish:r(t+o),width:r(o)})},H(e,function(b,a){return o(a,b.len).fold(r(b),function(e){return{len:e.finish(),list:b.list.concat([e])}})},{len:0,list:[]}).list),l=filter(c,function(e){return e.finish()<=t}),f=L(l,function(e,t){return e+t.width()},0),d=c.slice(l.length);return{within:r(l),extra:r(d),withinWidth:r(f)}},pk=function(e){return map(e,function(e){return e.element()})},vk=function(e,t,n,r){var o=function(e,t,n){var r=hk(t,e,n);return 0===r.extra().length?k.some(r):k.none()}(e,t,n).getOrThunk(function(){return hk(t,e-n(r),n)}),c=o.within(),l=o.extra(),f=o.withinWidth();return 1===l.length&&l[0].width()<=n(r)?function(e,t,n){var r=pk(e.concat(t));return gk(r,[],n)}(c,l,f):l.length>=1?function(e,t,n,r){var o=pk(e).concat([n]);return gk(o,pk(t),r)}(c,l,r,f):function(e,t,n){return gk(pk(e),[],n)}(c,0,f)},bk=function(component,e){return e.getAnimationRoot.fold(function(){return component.element()},function(e){return e(component)})},yk=function(e){return e.dimension.property},xk=function(e,t){return e.dimension.getDimension(t)},wk=function(component,e){var t=bk(component,e);Hi(t,[e.shrinkingClass,e.growingClass])},Ck=function(component,e){zi(component.element(),e.openClass),Mi(component.element(),e.closedClass),Ui(component.element(),yk(e),"0px"),Ki(component.element())},Sk=function(component,e){zi(component.element(),e.closedClass),Mi(component.element(),e.openClass),Xi(component.element(),yk(e))},kk=function(component,e,t,n){t.setCollapsed(),Ui(component.element(),yk(e),xk(e,component.element())),Ki(component.element()),wk(component,e),Ck(component,e),e.onStartShrink(component),e.onShrunk(component)},Ok=function(component,e,t,n){var r=n.getOrThunk(function(){return xk(e,component.element())});t.setCollapsed(),Ui(component.element(),yk(e),r),Ki(component.element());var o=bk(component,e);zi(o,e.growingClass),Mi(o,e.shrinkingClass),Ck(component,e),e.onStartShrink(component)},Tk=function(component,e,t){var n=xk(e,component.element());("0px"===n?kk:Ok)(component,e,t,k.some(n))},Ek=function(component,e,t){var n=bk(component,e),r=Pi(n,e.shrinkingClass),o=xk(e,component.element());Sk(component,e);var c=xk(e,component.element());(r?function(){Ui(component.element(),yk(e),o),Ki(component.element())}:function(){Ck(component,e)})(),zi(n,e.shrinkingClass),Mi(n,e.growingClass),Sk(component,e),Ui(component.element(),yk(e),c),t.setExpanded(),e.onStartGrow(component)},Nk=function(component,e,t){var n=bk(component,e);return!0===Pi(n,e.growingClass)},_k=function(component,e,t){var n=bk(component,e);return!0===Pi(n,e.shrinkingClass)},Ak=Object.freeze({refresh:function(component,e,t){if(t.isExpanded()){Xi(component.element(),yk(e));var n=xk(e,component.element());Ui(component.element(),yk(e),n)}},grow:function(component,e,t){t.isExpanded()||Ek(component,e,t)},shrink:function(component,e,t){t.isExpanded()&&Tk(component,e,t)},immediateShrink:function(component,e,t){t.isExpanded()&&kk(component,e,t,k.none())},hasGrown:function(component,e,t){return t.isExpanded()},hasShrunk:function(component,e,t){return t.isCollapsed()},isGrowing:Nk,isShrinking:_k,isTransitioning:function(component,e,t){return!0===Nk(component,e)||!0===_k(component,e)},toggleGrow:function(component,e,t){(t.isExpanded()?Tk:Ek)(component,e,t)},disableTransitions:wk}),Dk=Object.freeze({exhibit:function(base,e){var t=e.expanded;return wi(t?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:ke(e.dimension.property,"0px")})},events:function(e,t){return Lo([Yo($e(),function(component,n){n.event().raw().propertyName===e.dimension.property&&(wk(component,e),t.isExpanded()&&Xi(component.element(),e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(component))})])}}),Rk=[eo("closedClass"),eo("openClass"),eo("shrinkingClass"),eo("growingClass"),option("getAnimationRoot"),wa("onShrunk"),wa("onStartShrink"),wa("onGrown"),wa("onStartGrow"),mo("expanded",!1),to("dimension",qr("property",{width:[output("property","width"),output("getDimension",function(e){return Ka(e)+"px"})],height:[output("property","height"),output("getDimension",function(e){return Za(e)+"px"})]}))],Bk=Ba({fields:Rk,name:"sliding",active:Dk,apis:Ak,state:Object.freeze({init:function(e){var t=Ne(e.expanded);return yi({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:c(t.set,!1),setExpanded:c(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),Mk=r([mo("shell",!0),Os("toolbarBehaviours",[Wd])]),Ik=r([el({name:"groups",overrides:function(e){return{behaviours:Da([Wd.config({})])}}})]),zk=Al({name:"Toolbar",configFields:Mk(),partFields:Ik(),factory:function(t,n,r,o){var c=function(component){return t.shell?k.some(component):hl(component,t,"groups")},l=t.shell?{behaviours:[Wd.config({})],components:[]}:{behaviours:[],components:n};return{uid:t.uid,dom:t.dom,components:l.components,behaviours:Es(t.toolbarBehaviours,l.behaviours),apis:{setGroups:function(t,n){c(t).fold(function(){throw e.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){Wd.set(e,n)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),Pk=r([ya(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Os("splitToolbarBehaviours",[]),wo("builtGroups",function(){return Ne([])}),mo("overflow",function(e){return k.none()}),bo("floating",!1)]),Lk=[eo("dom"),mo("overflow",function(e){return k.none()}),bo("floating",!1)],Hk=r([Qs({factory:zk,schema:Lk,name:"primary"}),el({factory:zk,schema:Lk,name:"overflow",overrides:function(e){return{toolbarBehaviours:Da([Bk.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass}),Hd.config({mode:"acyclic",onEscape:function(t){return hl(t,e,"overflow-button").each(Hd.focusIn),k.some(!0)}})])}}}),Zs({name:"overflow-button",overrides:function(e){return{buttonBehaviours:Da([Cm.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"}})])}}}),Zs({name:"overflow-group"})]),Fk=r([eo("items"),ya(["itemSelector"]),Os("tgroupBehaviours",[Hd])]),Vk=r([tl({name:"items",unit:"item"})]),jk=Al({name:"ToolbarGroup",configFields:Fk(),partFields:Vk(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Es(e.tgroupBehaviours,[Hd.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Uk=function(e,t){var n=map(t,function(g){return ca(g)});zk.setGroups(e,n)},Wk=function(e,t,n,r){var o=pl(e,t,"primary"),c=hl(e,t,"overflow").orThunk(function(){return t.overflow(e)});Ui(o.element(),"visibility","hidden"),c.each(function(e){zk.setGroups(e,[])});var l=t.builtGroups.get(),f=jk.sketch(Wn({},n["overflow-group"](),{items:[Wm.sketch(Wn({},n["overflow-button"](),{action:function(n){!0===t.floating?Oo(e,r):c.each(function(e){Bk.toggleGrow(e)})}}))]})),d=e.getSystem().build(f);Uk(o,l.concat([d]));var m=Ka(o.element()),h=vk(m,l,function(e){return Ka(e.element())},d);0===h.extra().length?(Wd.remove(o,d),c.each(function(e){zk.setGroups(e,[])})):(Uk(o,h.within()),c.each(function(e){Uk(e,h.extra())})),Xi(o.element(),"visibility"),Ki(o.element()),c.each(function(n){t.floating||Bk.refresh(n),hl(e,t,"overflow-button").each(function(e){t.floating?Cm.set(e,n.getSystem().isConnected()):(Cm.set(e,Bk.hasGrown(n)),Hd.focusIn(n))})})},$k=Al({name:"SplitToolbar",configFields:Pk(),partFields:Hk(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Es(e.splitToolbarBehaviours,[]),apis:{setGroups:function(t,n){!function(t,n){var r=map(n,t.getSystem().build);e.builtGroups.set(r)}(t,n),Wk(t,e,r,"alloy.toolbar.toggle")},refresh:function(t){Wk(t,e,r,"alloy.toolbar.toggle")},getMoreButton:function(t){return function(t){return hl(t,e,"overflow-button")}(t)},getOverflow:function(t){return function(t){return hl(t,e,"overflow").orThunk(function(){return e.overflow(t)})}(t)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},getMoreButton:function(e,t){return e.getMoreButton(t)},getOverflow:function(e,t){return e.getOverflow(t)}}}),qk=function(e){var t=e.title.fold(function(){return{}},function(title){return{attributes:{title:title}}});return{dom:Wn({tag:"div",classes:["tox-toolbar__group"]},t),components:[jk.parts().items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Da([Zv.config({}),sm.config({})])}},Gk=function(e){return jk.sketch(qk(e))},Yk=function(e,t,n){var r=Xo(function(component){var t=map(e.initGroups,Gk);zk.setGroups(component,t)}),o=n.fold(function(){return[r]},function(t){return[r,Vo("alloy.toolbar.toggle",function(n,r){e.getSink().toOption().each(function(r){t.getOpt(r).fold(function(){var o=ua(t.asSpec());rs(r,o),es.position(r,e.backstage.shared.anchors.toolbarOverflow(),o),$k.refresh(n),$k.getMoreButton(n).each(sm.focus),Hd.focusIn(o)},function(e){as(e)})})})]});return Da([Hd.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),Em("toolbar-events",o)])},Xk=function(e){var t=e.cyclicKeying?"cyclic":"acyclic",n=$m(zk.sketch({dom:{tag:"div",classes:["tox-toolbar__overflow"]},toolbarBehaviours:Da([Hd.config({mode:"cyclic",onEscape:function(){return Oo(e.moreDrawerData.lazyToolbar(),"alloy.toolbar.toggle"),Hd.focusIn(e.moreDrawerData.lazyMoreButton()),k.some(!0)}})])})),r=$k.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=e.moreDrawerData.floating?[r]:[r,$k.parts().overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}})];return $k.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},floating:e.moreDrawerData.floating,overflow:function(t){return e.getSink().toOption().bind(function(r){return n.getOpt(r).bind(function(n){return $k.getMoreButton(t).bind(function(t){return n.getSystem().isConnected()?(es.position(r,e.backstage.shared.anchors.toolbarOverflow(),n),k.some(n)):k.none()})})})},parts:{"overflow-group":qk({title:k.none(),items:[]}),"overflow-button":mC({name:"more",icon:k.some("more-drawer"),disabled:!1,tooltip:k.some("More...")},k.none(),e.backstage.shared.providers)},components:o,markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},splitToolbarBehaviours:Yk(e,t,k.some(n))})},Kk=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return zk.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"]},components:[zk.parts().groups({})],toolbarBehaviours:Yk(e,t,k.none())})},Jk=[bo("disabled",!1),so("tooltip"),so("icon"),so("text"),yo("onSetup",function(){return t})],Qk=Ar([no("type"),oo("onAction")].concat(Jk)),Zk=function(e){return jr("toolbarbutton",Qk,e)},eO=Ar([no("type"),so("tooltip"),so("icon"),so("text"),oo("fetch"),yo("onSetup",function(){return t})]),tO=Ar([no("type"),so("tooltip"),so("icon"),so("text"),lo("select"),oo("fetch"),yo("onSetup",function(){return t}),vo("presets","normal",["normal","color","listpreview"]),mo("columns",1),oo("onAction"),oo("onItemAction")]),nO=[bo("active",!1)].concat(Jk),rO=Ar(nO.concat([no("type"),oo("onAction")])),oO=function(e){return jr("ToggleButton",rO,e)},iO=[yo("predicate",function(){return!1}),vo("scope","node",["node","editor"]),vo("position","selection",["node","selection","line"])],aO=Jk.concat([mo("type","contextformbutton"),mo("primary",!1),oo("onAction"),wo("original",o)]),uO=nO.concat([mo("type","contextformbutton"),mo("primary",!1),oo("onAction"),wo("original",o)]),cO=Jk.concat([mo("type","contextformbutton")]),sO=nO.concat([mo("type","contextformtogglebutton")]),lO=qr("type",{contextformbutton:aO,contextformtogglebutton:uO}),fO=Ar([mo("type","contextform"),yo("initValue",function(){return""}),so("label"),uo("commands",lO),co("launch",qr("type",{contextformbutton:cO,contextformtogglebutton:sO}))].concat(iO)),dO=Ar([mo("type","contexttoolbar"),no("items")].concat(iO)),mO=jn("toolbar.button.execute"),gO={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},hO=Object.freeze({getState:function(component,e,t){return t}}),pO=Object.freeze({events:function(e,t){var n=function(component,data){e.updateState.each(function(e){var n=e(component,data);t.set(n)}),e.renderComponents.each(function(e){var n=e(data,t.get());us(component),P(n,function(e){rs(component,component.getSystem().build(e))})})};return Lo([Vo(xt(),function(component,t){var r=e.channel;M(t.channels(),r)&&n(component,t.data())}),Xo(function(t,r){e.initialData.each(function(e){n(t,e)})})])}}),vO=Object.freeze({init:function(e){var t=Ne(k.none());return{readState:function(){return t.get().getOr("none")},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(k.none())}}}}),bO=[eo("channel"),option("renderComponents"),option("updateState"),option("initialData")],yO=Ba({fields:bO,name:"reflecting",active:pO,apis:hO,state:vO}),xO=r([eo("toggleClass"),eo("fetch"),Sa("onExecute"),mo("getHotspot",k.some),mo("layouts",k.none()),Sa("onItemExecute"),option("lazySink"),eo("dom"),wa("onOpen"),Os("splitDropdownBehaviours",[Gp,Hd,sm]),mo("matchWidth",!1),mo("useMinWidth",!1),mo("eventOrder",{}),option("role")].concat(wv())),wO=Qs({factory:Wm,schema:[eo("dom")],name:"arrow",defaults:function(e){return{buttonBehaviours:Da([sm.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Eo)},buttonBehaviours:Da([Cm.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),CO=Qs({factory:Wm,schema:[eo("dom")],name:"button",defaults:function(e){return{buttonBehaviours:Da([sm.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(function(n){e.onExecute(n,t)})}}}}),SO=r([wO,CO,el({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[eo("text")],name:"aria-descriptor"}),Zs({schema:[ba()],name:"menu",defaults:function(e){return{onExecute:function(t,n){t.getSystem().getByUid(e.uid).each(function(r){e.onItemExecute(r,t,n)})}}}}),ov()]),kO=Al({name:"SplitDropdown",configFields:xO(),partFields:SO(),factory:function(e,n,r,o){var c=function(e){Ml.getCurrent(e).each(function(e){Gl.highlightFirst(e),Hd.focusIn(e)})},l=function(component){cv(e,function(e){return e},component,o,c,_p.HighlightFirst).get(t)},f=function(t){var button=pl(t,e,"button");return Eo(button),k.some(!0)},d=ye(Lo([Xo(function(component,t){hl(component,e,"aria-descriptor").each(function(e){var t=jn("aria");Tn(e.element(),"id",t),Tn(component.element(),"aria-describedby",t)})})]),Um(k.some(l)));return{uid:e.uid,dom:e.dom,components:n,eventOrder:Wn({},e.eventOrder,{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:d,behaviours:Es(e.splitDropdownBehaviours,[Gp.config({others:{sandbox:function(t){var n=pl(t,e,"arrow");return fv(e,t,{onOpen:function(){Cm.on(n),Cm.on(t)},onClose:function(){Cm.off(n),Cm.off(t)}})}}}),Hd.config({mode:"special",onSpace:f,onEnter:f,onDown:function(e){return l(e),k.some(!0)}}),sm.config({}),Cm.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}}}),OO=function(component){return{isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},TO=function(component){return{setActive:function(e){Cm.set(component,e)},isActive:function(){return Cm.isOn(component)},isDisabled:function(){return Zg.isDisabled(component)},setDisabled:function(e){return e?Zg.disable(component):Zg.enable(component)}}},EO=function(e,t){return e.map(function(e){return{"aria-label":t.translate(e),title:t.translate(e)}}).getOr({})},NO=jn("focus-button"),_O=function(e,text,t,n,r,o){var c;return{dom:{tag:"button",classes:["tox-tbtn"].concat(text.isSome()?["tox-tbtn--select"]:[]),attributes:EO(t,o)},components:fh([e.map(function(e){return sC(e,o.icons)}),text.map(function(text){return fC(text,"tox-tbtn",o)})]),eventOrder:(c={},c[Me()]=["focusing","alloy.base.behaviour","common-button-display-events"],c),buttonBehaviours:Da([Em("common-button-display-events",[Vo(Me(),function(button,e){e.event().prevent(),Oo(button,NO)})])].concat(n.map(function(t){return yO.config({channel:t,initialData:{icon:e,text:text},renderComponents:function(data,e){return fh([data.icon.map(function(e){return sC(e,o.icons)}),data.text.map(function(text){return fC(text,"tox-tbtn",o)})])}})}).toArray()).concat(r.getOr([])))}},AO=function(e,n,r){var o,c=Ne(t),l=_O(e.icon,e.text,e.tooltip,k.none(),k.none(),r);return Wm.sketch({dom:l.dom,components:l.components,eventOrder:gO,buttonBehaviours:Da([Em("toolbar-button-events",[(o={onAction:e.onAction,getApi:n.getApi},Qo(function(e,t){oh(o,e)(function(t){To(e,mO,{buttonApi:t}),o.onAction(t)})})),ih(n,c),ah(n,c)]),nh(e.disabled)].concat(n.toolbarButtonBehaviours))})},DO=function(e,t,n){return AO(e,{toolbarButtonBehaviours:[].concat(n.length>0?[Em("toolbarButtonWith",n)]:[]),getApi:OO,onSetup:e.onSetup},t)},RO=function(e,t,n){return be(AO(e,{toolbarButtonBehaviours:[Wd.config({}),Cm.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[Em("toolbarToggleButtonWith",n)]:[]),getApi:TO,onSetup:e.onSetup},t))},BO=function(e,t,n){return function(r){return nv.nu(function(e){return t.fetch(e)}).map(function(o){return k.from(Xh(be(Gh(jn("menu-value"),o,function(n){t.onItemAction(e(r),n)},t.columns,t.presets,ch.CLOSE_ON_EXECUTE,t.select.getOr(function(){return!1}),n),{movement:Ph(t.columns,t.presets),menuBehaviours:bg("auto"!==t.columns?[]:[Xo(function(e,n){pg(e,4,Rg(t.presets)).each(function(t){var n=t.numRows,r=t.numColumns;Hd.setGridSize(e,n,r)})})])})))})}},MO=function(e,t){return Vo(mO,function(n,r){var o=function(input){return{hide:function(){return Oo(input,Tt())},getValue:function(){return om.getValue(input)}}}(e.get(n));t.onAction(o,r.event().buttonApi())})},IO=function(e,button,t){var n={backstage:{shared:{providers:t}}};return"contextformtogglebutton"===button.type?function(e,button,t){var n=button.original,r=(n.primary,$n(n,["primary"])),o=Ur(oO(Wn({},r,{type:"togglebutton",onAction:function(){}})));return RO(o,t.backstage.shared.providers,[MO(e,button)])}(e,button,n):function(e,button,t){var n=button.original,r=(n.primary,$n(n,["primary"])),o=Ur(Zk(Wn({},r,{type:"button",onAction:function(){}})));return DO(o,t.backstage.shared.providers,[MO(e,button)])}(e,button,n)},zO=function(e,t){var n=e.label.fold(function(){return{}},function(label){return{"aria-label":label}}),r=$m(zv.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Da([Hd.config({mode:"special",onEnter:function(input){return o.findPrimary(input).map(function(e){return Eo(e),!0})},onLeft:function(e,t){return t.cut(),k.none()},onRight:function(e,t){return t.cut(),k.none()}})])})),o=function(e,t,n){var r=map(t,function(button){return $m(IO(e,button,n))});return{asSpecs:function(){return map(r,function(e){return e.asSpec()})},findPrimary:function(e){return Ae(t,function(button,i){return button.primary?k.from(r[i]).bind(function(t){return t.getOpt(e)}).filter(d(Zg.isDisabled)):k.none()})}}}(r,e.commands,t.shared.providers);return Kk({uid:jn("context-toolbar"),initGroups:[{title:k.none(),items:[r.asSpec()]},{title:k.none(),items:o.asSpecs()}],onEscape:k.none,cyclicKeying:!0,backstage:t,getSink:function(){return ge.error("")}})},PO=jn("forward-slide"),LO=jn("backward-slide"),HO=jn("change-slide-event"),FO=function(e,t){return Ae(t,function(t){return t.predicate(e.dom())?k.some({toolbarApi:t,elem:e}):k.none()})},VO=function(e,t){var n=function(e){return e.dom()===t.getBody()},o=Vt.fromDom(t.selection.getNode());return FO(o,e.inNodeScope).orThunk(function(){return FO(o,e.inEditorScope).orThunk(function(){return function(e,t,n){for(var element=e.dom(),o=A(n)?n:r(!1);element.parentNode;){element=element.parentNode;var c=Vt.fromDom(element),l=t(c);if(l.isSome())return l;if(o(c))break}return k.none()}(o,function(t){return FO(t,e.inNodeScope)},n)})})},jO=function(e,t){var n={},r=[],o=[],c={},l={},f=function(e,f){var d=Ur(jr("ContextForm",fO,f));n[e]=d,d.launch.map(function(n){c["form:"+e]=Wn({},f.launch,{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){t(d)}})}),"editor"===d.scope?o.push(d):r.push(d),l[e]=d},d=function(e,t){var n;(n=t,jr("ContextToolbar",dO,n)).each(function(n){"editor"===t.scope?o.push(n):r.push(n),l[e]=n})},m=ee(e);return P(m,function(t){var n=e[t];"contextform"===n.type?f(t,n):"contexttoolbar"===n.type&&d(t,n)}),{forms:n,inNodeScope:r,inEditorScope:o,lookupTable:l,formNavigators:c}},UO=jn("update-menu-text"),WO=jn("update-menu-icon"),$O=function(e,t,n){var r=e.text.map(function(text){return $m(fC(text,t,n.providers))}),o=e.icon.map(function(e){return $m(lC(e,n.providers.icons))}),c=function(e,t){var n=om.getValue(e);return sm.focus(n),To(n,"keydown",{raw:t.event().raw()}),jb.close(n),k.some(!0)},l=e.role.fold(function(){return{}},function(e){return{role:e}}),f=e.tooltip.fold(function(){return{}},function(e){var t=n.providers.translate(e);return{title:t,"aria-label":t}});return $m(jb.sketch(Wn({},l,{dom:{tag:"button",classes:[t,t+"--select"].concat(map(e.classes,function(e){return t+"--"+e})),attributes:Wn({},f)},components:fh([o.map(function(e){return e.asSpec()}),r.map(function(e){return e.asSpec()}),k.some({dom:{tag:"div",classes:[t+"__select-chevron"],innerHtml:Gm("chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Da([nh(e.disabled),Wb.config({}),Wd.config({}),Em("menubutton-update-display-text",[Xo(e.onAttach),Ko(e.onDetach),Vo(UO,function(e,t){r.bind(function(t){return t.getOpt(e)}).each(function(e){Wd.set(e,[text(n.providers.translate(t.event().text()))])})}),Vo(WO,function(e,t){o.bind(function(t){return t.getOpt(e)}).each(function(e){Wd.set(e,[lC(t.event().icon(),n.providers.icons)])})})])]),eventOrder:be(gO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Da([Hd.config({mode:"special",onLeft:c,onRight:c})]),lazySink:n.getSink,toggleClass:t+"--active",parts:{menu:zh(0,e.columns,e.presets)},fetch:function(){return nv.nu(e.fetch)}}))).asSpec()},qO=function(e,t){return function(n){var r=Ne(k.none()),o=function(){n.setActive(e.formatter.match(t));var o=e.formatter.formatChanged(t,n.setActive).unbind;r.set(k.some(o))};return e.initialized?o():e.on("init",o),function(){return r.get().each(function(e){return e()})}}},GO=function(e){return function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})}}},YO=function(e,t,n){var r=function(e,r,c){var l=t.shared.providers.translate(e.title);if("separator"===e.type)return k.some({type:"separator",text:l});if("submenu"===e.type){var f=$(e.getStyleItems(),function(e){return o(e,r)});return 0===r&&f.length<=0?k.none():k.some({type:"nestedmenuitem",text:l,disabled:f.length<=0,getSubmenuItems:function(){return $(e.getStyleItems(),function(e){return o(e,r)})}})}return k.some(Wn({type:"togglemenuitem",text:l,active:e.isSelected(),disabled:c,onAction:n.onAction(e)},e.getStylePreview().fold(function(){return{}},function(e){return{meta:{style:e}}})))},o=function(e,t){var o="formatter"===e.type&&n.isInvalid(e);return 0===t?o?[]:r(e,t,!1).toArray():r(e,t,o).toArray()},c=function(e){var t=n.shouldHide?0:1;return $(e,function(e){return o(e,t)})};return{validateItems:c,getFetch:function(e,t){return function(n){var r=t(),o=c(r);n(Iv(o,ch.CLOSE_ON_EXECUTE,e.shared.providers))}}}},XO=function(e,t,n,r){var o="basic"===n.type?function(){return map(n.data,function(e){return zS(e,r.isSelectedFor,r.getPreviewFor)})}:n.getData;return{items:YO(0,t,r),getStyleItems:o}},KO=function(e,n,r,o){var c=XO(0,n,r,o),l=c.items,f=c.getStyleItems,d=Ne(void 0),m=o.nodeChangeHandler.map(function(t){return function(n){var r=t(n);d.set(r),e.on("nodeChange",r)}}).getOr(t),h=o.nodeChangeHandler.map(function(t){return function(t){var n=d.get();void 0!==n&&e.off("nodeChange",n)}}).getOr(t);return $O({text:o.icon.isSome()?k.none():k.some(""),icon:o.icon,tooltip:k.from(o.tooltip),role:k.none(),fetch:l.getFetch(n,f),onAttach:m,onDetach:h,columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"]},"tox-tbtn",n.shared)};!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(FC||(FC={}));var JO,QO=function(e,t,n,r){return{type:"basic",data:function(e){return map(e,function(e){var title=e,t=e,n=e.split("=");return n.length>1&&(title=n[0],t=n[1]),{title:title,format:t}})}(function(e,t){return t===FC.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")}(Se(e.settings,t).getOr(n),r))}},ZO=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],eT=function(e){var t=k.some(function(t){return function(){var n=F(ZO,function(t){return e.formatter.match(t.format)}).fold(function(){return"left"},function(e){return e.title.toLowerCase()});To(t,WO,{icon:"align-"+n})}}),n={type:"basic",data:ZO};return{tooltip:"Align",icon:k.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getPreviewFor:function(e){return function(){return k.none()}},onAction:GO(e),nodeChangeHandler:t,dataset:n,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},tT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],nT=function(e){var t=function(){var t=function(e){return e?e.split(",")[0]:""},n=e.queryCommandValue("FontName"),o=r.data,c=n?n.toLowerCase():"";return F(o,function(e){var n=e.format;return n.toLowerCase()===c||t(n).toLowerCase()===t(c).toLowerCase()}).orThunk(function(){return 0===(e=c).indexOf("-apple-system")&&(t=e.toLowerCase().split(/['"]?\s*,\s*['"]?/),G(tT,function(e){return t.indexOf(e.toLowerCase())>-1}))?k.from({title:"System Font",format:c}):k.none();var e,t})},n=k.some(function(n){return function(){var r=e.queryCommandValue("FontName"),text=t().fold(function(){return r},function(e){return e.title});To(n,UO,{text:text})}}),r=QO(e,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",FC.SemiColon);return{tooltip:"Fonts",icon:k.none(),isSelectedFor:function(e){return function(){return t().exists(function(t){return t.format===e})}},getPreviewFor:function(e){return function(){return k.some({tag:"div",styleAttr:-1===e.indexOf("dings")?"font-family:"+e:""})}},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontName",!1,t.format)})}},nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(){return!1}}},rT=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e},oT=function(e){var t=function(){var t=k.none(),n=r.data,o=e.queryCommandValue("FontSize");if(o)for(var c=function(e){var r=rT(o,e);t=F(n,function(e){return e.format===o||e.format===r})},l=3;t.isNone()&&l>=0;l--)c(l);return{matchOpt:t,px:o}},n=k.some(function(e){return function(){var n=t(),r=n.matchOpt,o=n.px,text=r.fold(function(){return o},function(e){return e.title});To(e,UO,{text:text})}}),r=QO(e,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",FC.Space);return{tooltip:"Font sizes",icon:k.none(),isSelectedFor:function(e){return function(){return t().matchOpt.exists(function(t){return t.format===e})}},getPreviewFor:function(){return function(){return k.none()}},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontSize",!1,t.format)})}},nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(){return!1}}},iT=function(e,t,n){var r=n.parents,o=t();return Ae(r,function(t){return F(o,function(n){return e.formatter.matchNode(t,n.format)})}).orThunk(function(){return e.formatter.match("p")?k.some({title:"Paragraph",format:"p"}):k.none()})},aT=function(e){var t=k.some(function(t){return function(r){var text=iT(e,function(){return n.data},r).fold(function(){return"Paragraph"},function(e){return e.title});To(t,UO,{text:text})}}),n=QO(e,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",FC.SemiColon);return{tooltip:"Blocks",icon:k.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styleAttr:e.formatter.getCssText(t)})}},onAction:GO(e),nodeChangeHandler:t,dataset:n,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},uT=function(e){var t=k.some(function(t){var n=function(e){var t=e.items;return void 0!==t&&t.length>0?$(t,n):[{title:e.title,format:e.format}]},r=$(IS(e),n);return function(n){var text=iT(e,function(){return r},n).fold(function(){return"Paragraph"},function(e){return e.title});To(t,UO,{text:text})}});return{tooltip:"Formats",icon:k.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return void 0!==n?k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styleAttr:e.formatter.getCssText(t)}):k.none()}},onAction:GO(e),nodeChangeHandler:t,shouldHide:e.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!e.formatter.canApply(t.format)}}},cT={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable tableprops deletetable row column cell"},help:{title:"Help",items:"help"}},sT=function(e,t,n,r){return $O({text:e.text,icon:e.icon,tooltip:e.tooltip,role:r,fetch:function(t){e.fetch(function(e){t(Iv(e,ch.CLOSE_ON_EXECUTE,n.providers))})},onAttach:function(){},onDetach:function(){},columns:1,presets:"normal",classes:[]},t,n)},lT=function(e){return"string"==typeof e?e.split(" "):e},fT=function(e,t){var n=ye(cT,t.menus),r=ee(t.menus).length>0,o=void 0===t.menubar||!0===t.menubar?lT("file edit view insert format tools table help"):lT(!1===t.menubar?"":t.menubar),c=filter(o,function(e){return r&&t.menus.hasOwnProperty(e)&&t.menus[e].hasOwnProperty("items")||cT.hasOwnProperty(e)}),l=map(c,function(r){var o=n[r];return function(menu,e,t){var n=function(e){return e.getParam("removed_menuitems","")}(t).split(/[ ,]/);return{text:menu.title,getItems:function(){return $(menu.items,function(i){var t=i.toLowerCase();return 0===t.trim().length?[]:I(n,function(e){return e===t})?[]:"separator"===t||"|"===t?[{type:"separator"}]:e.menuItems[t]?[e.menuItems[t]]:[]})}}}({title:o.title,items:lT(o.items)},t,e)});return filter(l,function(menu){return menu.getItems().length>0&&I(menu.getItems(),function(e){return"separator"!==e.type})})},dT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],mT=function(e,t){return function(r,o){var c=e(r).fold(n(ge.error,$r),ge.value).getOrDie();return t(c,o)}},gT={button:mT(Zk,function(s,e){return t=s,n=e.backstage.shared.providers,DO(t,n,[]);var t,n}),togglebutton:mT(oO,function(s,e){return t=s,n=e.backstage.shared.providers,RO(t,n,[]);var t,n}),menubutton:mT(function(e){return jr("menubutton",eO,e)},function(s,e){return sT(s,"tox-tbtn",e.backstage.shared,k.none())}),splitbutton:mT(function(e){return jr("SplitButton",tO,e)},function(s,e){return n=s,r=e.backstage.shared,c=jn("channel-update-split-dropdown-display"),l=function(e){return{isDisabled:function(){return Zg.isDisabled(e)},setDisabled:function(t){return t?Zg.disable(e):Zg.enable(e)},setIconFill:function(t,n){la(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(e){Tn(e,"fill",n)})},setIconStroke:function(t,n){la(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(e){Tn(e,"stroke",n)})},setActive:function(t){Tn(e.element(),"aria-pressed",t),la(e.element(),"span").each(function(button){e.getSystem().getByDom(button).each(function(e){return Cm.set(e,t)})})},isActive:function(){return la(e.element(),"span").exists(function(button){return e.getSystem().getByDom(button).exists(Cm.isOn)})}}},f=Ne(t),d={getApi:l,onSetup:n.onSetup},kO.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ye({"aria-pressed":!1},EO(n.tooltip,r.providers))},onExecute:function(button){n.onAction(l(button))},onItemExecute:function(a,b,e){},splitDropdownBehaviours:Da([rh(!1),Em("split-dropdown-events",[Vo(NO,sm.focus),ih(d,f),ah(d,f)])]),eventOrder:(o={},o[Dt()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:BO(l,n,r.providers),parts:{menu:zh(0,n.columns,n.presets)},components:[kO.parts().button(_O(n.icon,n.text,k.none(),k.some(c),k.some([Cm.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),kO.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Gm("chevron-down",r.providers.icons)}}),kO.parts()["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]});var n,r,o,c,l,f,d}),styleSelectButton:function(e,t){return function(e,t){var data=t.styleselect;return KO(e,t,data,uT(e))}(e,t.backstage)},fontsizeSelectButton:function(e,t){return function(e,t){var n=oT(e);return KO(e,t,n.dataset,n)}(e,t.backstage)},fontSelectButton:function(e,t){return function(e,t){var n=nT(e);return KO(e,t,n.dataset,n)}(e,t.backstage)},formatButton:function(e,t){return function(e,t){var n=aT(e);return KO(e,t,n.dataset,n)}(e,t.backstage)},alignMenuButton:function(e,t){return function(e,t){var n=eT(e);return KO(e,t,n.dataset,n)}(e,t.backstage)}},hT={styleselect:gT.styleSelectButton,fontsizeselect:gT.fontsizeSelectButton,fontselect:gT.fontSelectButton,formatselect:gT.formatButton,align:gT.alignMenuButton},pT=function(e){var t=e.split("|");return map(t,function(g){return{items:g.trim().split(" ")}})},vT=function(e){return!1===e.toolbar?[]:void 0===e.toolbar||!0===e.toolbar?(t=e.buttons,n=map(dT,function(e){var n=filter(e.items,function(e){return ce(t,e)||ce(hT,e)});return{name:e.name,items:n}}),filter(n,function(e){return e.items.length>0})):T(e.toolbar)?pT(e.toolbar):N(e.toolbar)&&T(e.toolbar[0])?pT(e.toolbar.join(" | ")):e.toolbar;var t,n},bT=function(t,n,r,o,c){return ue(n,r.toLowerCase()).orThunk(function(){return c.bind(function(e){return Ae(e,function(e){return ue(n,e+r.toLowerCase())})})}).fold(function(){return ue(hT,r.toLowerCase()).map(function(e){return e(t,o)}).orThunk(function(){return k.none()})},function(t){return function(t,n){return ue(gT,t.type).fold(function(){return e.console.error("skipping button defined by",t),k.none()},function(e){return k.some(e(t,n))})}(t,o)})},yT=function(e,t,n,r){var o=vT(t),c=map(o,function(o){var c=$(o.items,function(o){return 0===o.trim().length?[]:bT(e,t.buttons,o,n,r).toArray()});return{title:k.from(e.translate(o.name)),items:c}});return filter(c,function(e){return e.items.length>0})},xT=function(e,t,n,r){var o,c,l=ua((o={sink:n,onEscape:function(){return e.focus(),k.some(!0)}},c=Ne([]),jm.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){c.set([]),jm.getContent(e).each(function(e){Xi(e.element(),"visibility")}),zi(e.element(),"tox-pop--resizing"),Xi(e.element(),"width")},inlineBehaviours:Da([Em("context-toolbar-events",[Yo($e(),function(e,t){jm.getContent(e).each(function(e){}),zi(e.element(),"tox-pop--resizing"),Xi(e.element(),"width")}),Vo(HO,function(e,t){Xi(e.element(),"width");var n=Ka(e.element());jm.setContent(e,t.event().contents()),Mi(e.element(),"tox-pop--resizing");var r=Ka(e.element());Ui(e.element(),"width",n+"px"),jm.getContent(e).each(function(n){t.event().focus().bind(function(t){return of(t),uf(e.element())}).orThunk(function(){return Hd.focusIn(n),af()})}),Km.setTimeout(function(){Ui(e.element(),"width",r+"px")},0)}),Vo(PO,function(e,t){jm.getContent(e).each(function(e){c.set(c.get().concat([{bar:e,focus:af()}]))}),To(e,HO,{contents:t.event().forwardContents(),focus:k.none()})}),Vo(LO,function(e,t){Q(c.get()).each(function(t){c.set(c.get().slice(0,c.get().length-1)),To(e,HO,{contents:ca(t.bar),focus:t.focus})})})]),Hd.config({mode:"special",onEscape:function(e){return Q(c.get()).fold(function(){return o.onEscape()},function(t){return Oo(e,LO),k.some(!0)})}})]),lazySink:function(){return ge.value(o.sink)}}))),f=function(){return k.some(Vt.fromDom(e.contentAreaContainer))};e.on("init",function(){var t=e.getBody().ownerDocument.defaultView,r=tp(Vt.fromDom(t),"scroll",function(){d.get().each(function(t){var r=m.get().getOr(e.selection.getNode()).getBoundingClientRect(),o=e.contentAreaContainer.getBoundingClientRect(),c=r.bottom<0,d=r.top>o.height;c||d?Ui(l.element(),"display","none"):(Xi(l.element(),"display"),es.positionWithin(n,t,l,f()))})});e.on("remove",function(){r.unbind()})});var d=Ne(k.none()),m=Ne(k.none()),h=Ne(null),v=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Da([Hd.config({mode:"acyclic"}),Em("pop-dialog-wrap-events",[Xo(function(t){e.shortcuts.add("ctrl+F9","focus statusbar",function(){return Hd.focusIn(t)})}),Ko(function(t){e.shortcuts.remove("ctrl+F9")})])])}},y=Ge(function(){return jO(t,function(e){var t=x(e);To(l,PO,{forwardContents:v(t)})})}),x=function(t){var n,o,c=e.ui.registry.getAll().buttons,l=y();return"contexttoolbar"===t.type?(n=ye(c,l.formNavigators),o=yT(e,{buttons:n,toolbar:t.items},r,k.some(["form:"])),Kk({uid:jn("context-toolbar"),initGroups:o,onEscape:k.none,cyclicKeying:!0,backstage:r.backstage,getSink:function(){return ge.error("")}})):zO(t,r.backstage)};e.on("contexttoolbar-show",function(t){var n=y();Se(n.lookupTable,t.toolbarKey).each(function(n){T(n,t.target===e?k.none():k.some(t)),jm.getContent(l).each(Hd.focusIn)})});var w={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},C={maxHeightFunction:Bu()},S={bubble:Pu(12,0,w),layouts:{onLtr:function(){return[Qu]},onRtl:function(){return[Zu]}},overrides:C},O={bubble:Pu(0,12,w),layouts:{onLtr:function(){return[Ku,Ju,Yu,qu,Xu,Gu]},onRtl:function(){return[Ku,Ju,Xu,Gu,Yu,qu]}},overrides:C},T=function(e,t){N();var n,element,o,c=x(e),h=t.map(Vt.fromDom),y=(n=e.position,element=h,o="node"===n?r.backstage.shared.anchors.node(element):r.backstage.shared.anchors.cursor(),be(o,"line"===n?S:O));d.set(k.some(y)),m.set(t),jm.showWithin(l,y,v(c),f()),Xi(l.element(),"display")},E=function(){var t=y();VO(t,e).fold(function(){d.set(k.none()),jm.hide(l)},function(e){T(e.toolbarApi,k.some(e.elem.dom()))})},N=function(){var e=h.get();null!==e&&(Km.clearTimeout(e),h.set(null))},_=function(e){N(),h.set(e)};e.on("init",function(){e.on("click keyup setContent ObjectResized ResizeEditor",function(t){_(Km.setEditorTimeout(e,E,0))}),e.on("focusout",function(t){Km.setEditorTimeout(e,function(){uf(n.element()).isNone()&&uf(l.element()).isNone()&&(d.set(k.none()),jm.hide(l))},0)}),e.on("nodeChange",function(t){uf(l.element()).fold(function(){_(Km.setEditorTimeout(e,E,0))},function(e){})})})},wT=function(t,n,r){var o=tp(Vt.fromDom(e.document),"mousedown",function(e){P([n,r],function(t){t.broadcastOn([xs()],{target:e.target()})})}),c=tp(Vt.fromDom(e.document),"touchstart",function(e){P([n,r],function(t){t.broadcastOn([xs()],{target:e.target()})})}),l=tp(Vt.fromDom(e.document),"mouseup",function(e){0===e.raw().button&&P([n,r],function(t){t.broadcastOn([ws()],{target:e.target()})})}),f=function(e){P([n,r],function(t){t.broadcastOn([xs()],{target:Vt.fromDom(e.target)})})};t.on("mousedown",f),t.on("touchstart",f);var d=function(e){0===e.button&&P([n,r],function(t){t.broadcastOn([ws()],{target:Vt.fromDom(e.target)})})};t.on("mouseup",d);var m=function(e){P([n,r],function(t){t.broadcastEvent(_t(),e)})};t.on("ScrollWindow",m);var h=function(e){P([n,r],function(t){t.broadcastEvent(At(),e)})};t.on("ResizeWindow",h),t.on("remove",function(){t.off("mousedown",f),t.off("touchstart",f),t.off("mouseup",d),t.off("ResizeWindow",h),t.off("ScrollWindow",m),o.unbind(),c.unbind(),l.unbind()}),t.on("detach",function(){ls(n),ls(r),n.destroy(),r.destroy()})},CT=Sl,ST=rl,kT=_l({factory:function(e,t){var n={focus:Hd.focusIn,setMenus:function(t,n){var r=map(n,function(t){var n={text:k.some(t.text),icon:k.none(),tooltip:k.none(),fetch:function(e){e(t.getItems())}};return sT(n,"tox-mbtn",{getSink:e.getSink,providers:e.providers},k.some("menuitem"))});Wd.set(t,r)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Da([Wd.config({}),Em("menubar-events",[Xo(function(component){e.onSetup(component)}),Vo(Le(),function(e,t){la(e.element(),".tox-mbtn--active").each(function(n){fa(t.event().target(),".tox-mbtn").each(function(t){rn(n,t)||e.getSystem().getByDom(n).each(function(n){e.getSystem().getByDom(t).each(function(e){jb.expand(e),jb.close(n),sm.focus(e)})})})})}),Vo(Mt(),function(e,t){t.event().prevFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(n){t.event().newFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(e){jb.isOpen(n)&&(jb.expand(e),jb.close(n))})})})]),Hd.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return e.onEscape(t),k.some(!0)}}),Zv.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[eo("dom"),eo("uid"),eo("onEscape"),eo("getSink"),eo("providers"),mo("onSetup",t)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),OT=[Os("slotBehaviours",[])],TT=function(e){return"<alloy.field."+e+">"},ET=function(e,t,n){var r,o=function(t){return yl(e)},c=function(t,n){return void 0===n&&(n=void 0),function(r,o){return hl(r,e,o).map(function(slot){return t(slot,o)}).getOr(n)}},l=function(e,t){return"true"!==Nn(e.element(),"aria-hidden")},f=c(l,!1),d=c(function(e,t){if(l(e)){var element=e.element();Ui(element,"display","none"),Tn(element,"aria-hidden","true"),To(e,It(),{name:t,visible:!1})}}),m=(r=d,function(e,t){P(t,function(t){return r(e,t)})}),h=c(function(e,t){if(!l(e)){var element=e.element();Xi(element,"display"),An(element,"aria-hidden"),To(e,It(),{name:t,visible:!0})}}),v={getSlotNames:o,getSlot:function(t,n){return hl(t,e,n)},isShowing:f,hideSlot:d,hideAllSlots:function(e){return m(e,o())},showSlot:h};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ts(e.slotBehaviours),apis:v}},NT=re({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},vi),_T=Wn({},NT,{sketch:function(e){var t,n=(t=[],{slot:function(e,n){return t.push(e),sl("container",TT(e),n)},record:function(){return t}}),r=e(n),o=n.record(),c=map(o,function(e){return Qs({name:e,pname:TT(e)})});return Ol("container",OT,c,ET,r)}}),AT=Ar([so("icon"),so("tooltip"),yo("onShow",t),yo("onHide",t),yo("onSetup",function(){return t})]),DT=function(e){return{element:function(){return e.element().dom()}}},RT=function(e,n){var r=map(ee(n),function(e){var t=n[e],r=Ur(function(e){return jr("sidebar",AT,e)}(t));return{name:e,getApi:DT,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}});return map(r,function(n){var o=Ne(t);return e.slot(n.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:bg([ih(n,o),ah(n,o),Vo(It(),function(e,t){var data=t.event();F(r,function(e){return e.name===data.name()}).each(function(t){(data.visible()?t.onShow:t.onHide)(t.getApi(e))})})])})})},BT=function(e){return _T.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:RT(t,e),slotBehaviours:bg([Xo(function(e){return _T.hideAllSlots(e)})])}})},MT=function(e){return Ml.getCurrent(e).bind(function(e){return Bk.isGrowing(e)||Bk.hasGrown(e)?Ml.getCurrent(e).bind(function(e){return F(_T.getSlotNames(e),function(t){return _T.isShowing(e,t)})}):k.none()})},IT=jn("FixSizeEvent"),zT=jn("AutoSizeEvent"),PT=ST.optional({factory:kT,name:"menubar",schema:[eo("dom"),eo("getSink")]}),LT=ST.optional({factory:{sketch:function(e){return(e.split===wp.sliding||e.split===wp.floating?Xk:Kk)({uid:e.uid,onEscape:function(){return e.onEscape(),k.some(!0)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,backstage:e.backstage,moreDrawerData:{floating:e.split===wp.floating,lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton}})}},name:"toolbar",schema:[eo("dom"),eo("onEscape"),eo("getSink")]}),HT=ST.optional({name:"socket",schema:[eo("dom")]}),FT=ST.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Da([Zv.config({}),sm.config({}),Bk.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){Ml.getCurrent(e).each(_T.hideAllSlots),Oo(e,zT)},onGrown:function(e){Oo(e,zT)},onStartGrow:function(e){To(e,IT,{width:Gi(e.element(),"width").getOr("")})},onStartShrink:function(e){To(e,IT,{width:Ka(e.element())+"px"})}}),Wd.config({}),Ml.config({find:function(e){var t=Wd.contents(e);return head(t)}})])}],behaviours:Da([Jx(0),Em("sidebar-sliding-events",[Vo(IT,function(e,t){Ui(e.element(),"width",t.event().width())}),Vo(zT,function(e,t){Xi(e.element(),"width")})])])}}},name:"sidebar",schema:[eo("dom")]}),VT=Al({name:"OuterContainer",factory:function(e,t,n){var r={getSocket:function(t){return CT.getPart(t,e,"socket")},setSidebar:function(t,n){CT.getPart(t,e,"sidebar").each(function(e){return function(e,t){Ml.getCurrent(e).each(function(e){return Wd.set(e,[BT(t)])})}(e,n)})},toggleSidebar:function(t,n){CT.getPart(t,e,"sidebar").each(function(e){return function(e,t){Ml.getCurrent(e).each(function(e){Ml.getCurrent(e).each(function(n){Bk.hasGrown(e)?_T.isShowing(n,t)?Bk.shrink(e):(_T.hideAllSlots(n),_T.showSlot(n,t)):(_T.hideAllSlots(n),_T.showSlot(n,t),Bk.grow(e))})})}(e,n)})},whichSidebar:function(t){return CT.getPart(t,e,"sidebar").bind(MT).getOrNull()},getToolbar:function(t){return CT.getPart(t,e,"toolbar")},setToolbar:function(t,n){CT.getPart(t,e,"toolbar").each(function(e){zk.setGroups(e,n)})},getMoreButton:function(t){return CT.getPart(t,e,"toolbar").bind(function(e){return $k.getMoreButton(e)})},focusToolbar:function(t){CT.getPart(t,e,"toolbar").each(function(e){Hd.focusIn(e)})},setMenubar:function(t,n){CT.getPart(t,e,"menubar").each(function(e){kT.setMenus(e,n)})},focusMenubar:function(t){CT.getPart(t,e,"menubar").each(function(e){kT.focus(e)})}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},configFields:[eo("dom"),eo("behaviours")],partFields:[PT,LT,HT,FT],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var r=map(n,function(e){return Gk(e)});e.setToolbar(t,r)},getMoreButton:function(e,t){return e.getMoreButton(t)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),jT=function(e){return e.fire("SkinLoaded")},UT=function(e){return e.fire("ResizeEditor")},WT=function(e){return e.fire("ResizeContent")},$T=function(e){var t=function(){e._skinLoaded=!0,jT(e)};return function(){e.initialized?t():e.on("init",t)}},qT=function(e,t){var n,r=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var o=n||"oxide";r=r?e.documentBaseURI.toAbsolute(r):Op.baseURL+"/skins/ui/"+o}return r}(t);r&&(n=r+"/skin.min.css",t.contentCSS.push(r+(e?"/content.inline":"/content")+".min.css")),!1===function(e){return!1===e.getParam("skin")}(t)&&n?kp.DOM.styleSheetLoader.load(n,$T(t)):$T(t)()},iframe=c(qT,!1),GT=c(qT,!0),YT=kp.DOM,XT=function(e){return function(t){var n=e.outerContainer;nn("*",n.element()).forEach(function(e){n.getSystem().getByDom(e).each(function(e){e.hasConfigured(Zg)&&("readonly"===t.mode?Zg.disable(e):Zg.enable(e))})})}},KT={render:function(e,t,n,r,o){var element,c;iframe(e),element=Vt.fromDom(o.targetNode),c=t.mothership,ss(element,c,dn),cs(body(),t.uiMothership),e.on("init",function(){VT.setToolbar(t.outerContainer,yT(e,n,{backstage:r},k.none())),VT.setMenubar(t.outerContainer,fT(e,n)),VT.setSidebar(t.outerContainer,n.sidebar),e.readonly&&XT(t)({mode:"readonly"});var o=Ne(ja(0,0)),c=e.contentWindow,l=function(){var t=o.get();if(t.left()!==c.innerWidth||t.top()!==c.innerHeight){var n=ja(c.innerWidth,c.innerHeight);o.set(n),WT(e)}};YT.bind(c,"resize",l),e.on("remove",function(){YT.unbind(c,"resize",l)})});var l=VT.getSocket(t.outerContainer).getOrDie("Could not find expected socket element");e.on("SwitchMode",XT(t)),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly"),e.addCommand("ToggleSidebar",function(n,r){VT.toggleSidebar(t.outerContainer,r),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return VT.whichSidebar(t.outerContainer)});var f=Ap(e);return f!==wp.sliding&&f!==wp.floating||e.on("ResizeContent",function(){VT.getToolbar(t.outerContainer).each($k.refresh)}),{iframeContainer:l.element().dom(),editorContainer:t.outerContainer.element().dom()}},getBehaviours:function(e){return[]}},JT=function(element,e){return cn(element).orThunk(function(){var marker=Vt.fromTag("span");fn(element,marker);var e=cn(marker);return vn(marker),e}).map(function(t){return Wa(t).translate(-e.left(),-e.top())}).getOrThunk(function(){return ja(0,0)})},QT=he([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ZT=function(e){return function(t){return t.translate(-e.left(),-e.top())}},eE=function(e){return function(t){return t.translate(e.left(),e.top())}},tE=function(e){return function(t,n){return H(e,function(e,t){return t(e)},ja(t,n))}},nE=function(e,t,n){return e.fold(tE([eE(n),ZT(t)]),tE([ZT(t)]),tE([]))},rE=function(e,t,n){return e.fold(tE([eE(n)]),tE([]),tE([eE(t)]))},oE=function(e,t,n){return e.fold(tE([]),tE([ZT(n)]),tE([eE(t),ZT(n)]))},iE=function(e,t,n){return e.fold(function(e,t){return{position:"absolute",left:e+"px",top:t+"px"}},function(e,t){return{position:"absolute",left:e-n.left()+"px",top:t-n.top()+"px"}},function(e,t){return{position:"fixed",left:e+"px",top:t+"px"}})},aE=function(e,t,n,r){var o=function(e,o){return function(c,l){var f=e(t,n,r);return o(c.getOr(f.left()),l.getOr(f.top()))}};return e.fold(o(oE,QT.offset),o(rE,QT.absolute),o(nE,QT.fixed))},uE=QT.offset,cE=QT.absolute,sE=QT.fixed,lE=function(component,e){Mi(component.element(),e.transitionClass),zi(component.element(),e.fadeOutClass),Mi(component.element(),e.fadeInClass)},fE=function(component,e){Mi(component.element(),e.transitionClass),zi(component.element(),e.fadeInClass),Mi(component.element(),e.fadeOutClass)},dE=function(e,t){return e.y()>=t.y()&&e.bottom()<=t.bottom()},mE=function(e,t){return _n(e,t)?k.some(parseInt(Nn(e,t),10)):k.none()},gE=function(component,e,t){return function(component,e){var t=component.element();return mE(t,e.leftAttr).bind(function(n){return mE(t,e.topAttr).map(function(e){var t=Ka(component.element()),r=Za(component.element());return mu(n,e,t,r)})})}(component,e).bind(function(n){return dE(n,t)?(function(component,e){var t=component.element();An(t,e.leftAttr),An(t,e.topAttr)}(component,e),k.some(cE(n.x(),n.y()))):k.none()})},hE=function(component,e,t,n,r){var o=Wa(component.element()),c=mu(o.left(),o.top(),Ka(component.element()),Za(component.element()));if(dE(c,t))return k.none();!function(component,e,t,n){var r=component.element();Tn(r,e.leftAttr,t),Tn(r,e.topAttr,n)}(component,e,o.left(),o.top());var l=cE(o.left(),o.top()),f=nE(l,n,r),d=cE(t.x(),t.y()),m=nE(d,n,r),h=c.y()<=t.y()?m.top():m.top()+t.height()-c.height();return k.some(sE(f.left(),h))},pE=function(component,e,t){var n=e.lazyViewport(component);e.contextual.each(function(e){e.lazyContext(component).each(function(t){(!function(e,t){return e.y()<t.bottom()&&e.bottom()>t.y()}(gu(t),n)?fE:lE)(component,e)})});var r=on(component.element()),o=qa(r),c=JT(component.element(),o);(function(component,e,t,n,r){return Gi(component.element(),"position").is("fixed")?gE(component,e,t):hE(component,e,t,n,r)})(component,e,n,o,c).each(function(e){var t=iE(e,0,c);Wi(component.element(),t)})},vE=Object.freeze({refresh:pE}),bE=Object.freeze({events:function(e,t){return Lo([Vo($e(),function(component,t){e.contextual.each(function(e){rn(component.element(),t.event().target())&&(zi(component.element(),e.transitionClass),t.stop())})}),Vo(_t(),function(component,t){pE(component,e)})])}}),yE=[fo("contextual",[eo("fadeInClass"),eo("fadeOutClass"),eo("transitionClass"),eo("lazyContext")]),mo("lazyViewport",function(t){var n=qa();return mu(n.left(),n.top(),e.window.innerWidth,e.window.innerHeight)}),eo("leftAttr"),eo("topAttr")],xE=Ba({fields:yE,name:"docking",active:bE,apis:vE}),wE={render:function(e,t,n,r,o){var c,l=kp.DOM,f=Rp(e),d=Ap(e),m=d===wp.sliding||d===wp.floating,h=d===wp.floating;GT(e);var v=function(t){var n=m?t.fold(function(){return 0},function(e){return e.components().length>1?Za(e.components()[1].element()):0}):0;Wi(c.element(),function(t){void 0===t&&(t=0);var n=Wa(Vt.fromDom(e.getBody()));return{top:Math.round(n.top()-Za(c.element()))+t+"px",left:Math.round(n.left())+"px"}}(n)),xE.refresh(c)},y=function(){var e=VT.getToolbar(t.outerContainer);m&&e.each($k.refresh),f||v(e)},x=function(){Ui(t.outerContainer.element(),"display","flex"),l.addClass(e.getBody(),"mce-edit-focus"),y(),h&&VT.getToolbar(t.outerContainer).each(function(e){$k.getOverflow(e).each(function(e){zi(e.element(),"tox-toolbar__overflow--closed")})})},w=function(){t.outerContainer&&(Ui(t.outerContainer.element(),"display","none"),l.removeClass(e.getBody(),"mce-edit-focus"),h&&VT.getToolbar(t.outerContainer).each(function(e){$k.getOverflow(e).each(function(e){Mi(e.element(),"tox-toolbar__overflow--closed")})}))},C=function(){if(c)x();else{c=t.outerContainer;var o=function(e){return Dp(e).getOr(body())}(e);cs(o,t.mothership),cs(o,t.uiMothership),VT.setToolbar(t.outerContainer,yT(e,n,{backstage:r},k.none())),VT.setMenubar(t.outerContainer,fT(e,n)),f||Ui(c.element(),"position","absolute"),y(),x(),e.on("nodeChange ResizeWindow",y),e.on("activate",x),e.on("deactivate",w),e.nodeChanged()}};return e.on("focus",C),e.on("blur hide",w),e.on("init",function(){e.hasFocus()&&C()}),{editorContainer:t.outerContainer.element().dom()}},getBehaviours:function(e){return Rp(e)?[]:[xE.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",contextual:{lazyContext:function(t){return k.from(e).map(function(e){return Vt.fromDom(e.getBody())})},fadeInClass:"tox-toolbar-dock-fadein",fadeOutClass:"tox-toolbar-dock-fadeout",transitionClass:"tox-toolbar-dock-transition"}}),sm.config({})]}},CE=function(e,t){return{anchor:"makeshift",x:e,y:t}},SE=function(element,e){var t=kp.DOM.getPos(element);return function(e,t,n){return CE(e.x+t,e.y+n)}(e,t.x,t.y)},kE=function(e,t){return"contextmenu"===t.type?e.inline?function(e){return CE(e.pageX,e.pageY)}(t):SE(e.getContentAreaContainer(),function(e){return CE(e.clientX,e.clientY)}(t)):OE(e)},OE=function(e){return{anchor:"selection",root:Vt.fromDom(e.selection.getNode())}},TE=function(e){return"string"==typeof e?e.split(/[ ,]/):e},EE=function(e){return e.settings.contextmenu_never_use_native||!1},NE=function(e){return function(e,t,n){var r=e.ui.registry.getAll().contextMenus;return ue(e.settings,t).map(TE).getOrThunk(function(){return filter(TE(n),function(e){return ce(r,e)})})}(e,"contextmenu","link image imagetools table spellchecker configurepermanentpen")},_E=function(e){return T(e)?"|"===e:"separator"===e.type},AE={type:"separator"},DE=function(e){if(T(e))return e;switch(e.type){case"separator":return AE;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var t=e.getSubmenuItems();return T(t)?t:map(t,DE)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(t=e.onAction,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t()})}}var t},RE=function(e,t){if(0===t.length)return e;var n=Q(e).filter(function(e){return!_E(e)}).fold(function(){return[]},function(e){return[AE]});return e.concat(n).concat(t).concat([AE])},BE=function(e,t,n){var r=ua(jm.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return e.focus()},fireDismissalEventInstead:{},inlineBehaviours:Da([Em("dismissContextMenu",[Vo(Bt(),function(t,n){ys.close(t),e.focus()})])])}));e.on("init",function(){e.on("contextmenu",function(t){if(!function(e,t){return t.ctrlKey&&!EE(e)}(e,t)){var o=2!==t.button||t.target===e.getBody(),c=o?function(e){return{anchor:"node",node:k.some(Vt.fromDom(e.selection.getNode())),root:Vt.fromDom(e.getBody())}}(e):kE(e,t),l=e.ui.registry.getAll(),f=NE(e),d=o?e.selection.getStart(!0):t.target,m=function(e,t,n){var r=H(t,function(t,r){if(ce(e,r)){var o=e[r].update(n);if(T(o))return RE(t,o.split(" "));if(o.length>0){var c=map(o,DE);return RE(t,c)}return t}return t.concat([r])},[]);return r.length>0&&_E(r[r.length-1])&&r.pop(),r}(l.contextMenus,f,d);Iv(m,ch.CLOSE_ON_EXECUTE,n.providers).map(function(e){t.preventDefault(),jm.showMenuAt(r,c,{menu:{markers:Bh("normal")},data:e})})}})})},ME=function(e){return/^[0-9\.]+(|px)$/i.test(""+e)?k.some(parseInt(e,10)):k.none()},IE=function(e){return D(e)?e+"px":e},zE=function(e,t){e.getSystem().addToGui(t),function(e){un(e.element()).each(function(t){Gi(t,"z-index").each(function(e){Tn(t,"data-initial-z-index",e)}),Ui(t,"z-index",$i(e.element(),"z-index"))})}(t)},PE=function(e){!function(e){un(e.element()).each(function(e){var t=Nn(e,"data-initial-z-index");_n(e,"data-initial-z-index")?Ui(e,"z-index",t):Xi(e,"z-index"),An(e,"data-initial-z-index")})}(e),e.getSystem().removeFromGui(e)},LE=function(component,e,t,n){return function(component,e){var element=component.element(),t=parseInt(Nn(element,e.leftAttr),10),n=parseInt(Nn(element,e.topAttr),10);return isNaN(t)||isNaN(n)?k.none():k.some(ja(t,n))}(component,e).fold(function(){return t},function(e){return sE(e.left()+n.left(),e.top()+n.top())})},HE=function(component,e,t,n,r,o){var c=LE(component,e,t,n),l=VE(component,e,c,r,o),f=nE(c,r,o);return function(component,e,t){var element=component.element();Tn(element,e.leftAttr,t.left()+"px"),Tn(element,e.topAttr,t.top()+"px")}(component,e,f),l.fold(function(){return{coord:sE(f.left(),f.top()),extra:k.none()}},function(e){return{coord:e.output(),extra:e.extra()}})},FE=function(component,e){!function(component,e){var element=component.element();An(element,e.leftAttr),An(element,e.topAttr)}(component,e)},VE=function(component,e,t,n,o){var c=e.getSnapPoints(component);return Ae(c,function(e){var c=e.sensor();return function(e,t,n,r,o,c){var l=rE(e,o,c),f=rE(t,o,c);return Math.abs(l.left()-f.left())<=n&&Math.abs(l.top()-f.top())<=r}(t,c,e.range().left(),e.range().top(),n,o)?k.some({output:r(aE(e.output(),t,n,o)),extra:e.extra}):k.none()})},jE=function(component,e,t,n,r,o){return e.fold(function(){var e,c,l,f=(e=t,c=o.left(),l=o.top(),e.fold(function(e,t){return QT.offset(e+c,t+l)},function(e,t){return QT.absolute(e+c,t+l)},function(e,t){return QT.fixed(e+c,t+l)})),d=nE(f,n,r);return sE(d.left(),d.top())},function(e){var c=HE(component,e,t,o,n,r);return c.extra.each(function(t){e.onSensor(component,t)}),c.coord})},UE=function(component,e,t){var n=e.getTarget(component.element());if(e.repositionTarget){var r=on(component.element()),o=qa(r),c=JT(n,o),l=function(e){return Gi(e,"left").bind(function(t){return Gi(e,"top").bind(function(n){return Gi(e,"position").map(function(e){return("fixed"===e?sE:uE)(parseInt(t,10),parseInt(n,10))})})}).getOrThunk(function(){var t=Wa(e);return cE(t.left(),t.top())})}(n),f=jE(component,e.snaps,l,o,c,t),d=iE(f,0,c);Wi(n,d)}e.onDrag(component,n,t)},WE=fo("snaps",[eo("getSnapPoints"),wa("onSensor"),eo("leftAttr"),eo("topAttr"),mo("lazyViewport",function(){var t=qa();return{x:t.left,y:t.top,width:r(e.window.innerWidth),height:r(e.window.innerHeight),bottom:r(t.top()+e.window.innerHeight),right:r(t.left()+e.window.innerWidth)}})]),$E=function(e){return Lo([Vo(Me(),e.forceDrop),Vo(Pe(),e.drop),Vo(Ie(),function(t,n){e.move(n.event())}),Vo(ze(),e.delayDrop)])},qE=Object.freeze({getData:function(e){return k.from(ja(e.x(),e.y()))},getDelta:function(e,t){return ja(t.left()-e.left(),t.top()-e.top())}}),GE=[mo("useFixed",!1),eo("blockerClass"),mo("getTarget",o),mo("onDrag",t),mo("repositionTarget",!0),wa("onDrop"),WE,output("dragger",{handlers:function(e,t){return Lo([Vo(Me(),function(component,n){if(0===n.event().raw().button){n.stop();var r={drop:function(){c()},delayDrop:function(){l.schedule()},forceDrop:function(){c()},move:function(n){l.cancel(),t.update(qE,n).each(function(t){UE(component,e,t)})}},o=component.getSystem().build(Cp.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e.blockerClass]},events:$E(r)})),c=function(){PE(o),e.snaps.each(function(e){FE(component,e)});var t=e.getTarget(component.element());e.onDrop(component,t)},l=ip(c,200);t.reset(),zE(component,o)}})])}})],YE=Object.freeze({getData:function(e){var t=e.raw().touches;return 1===t.length?function(e){var t=e[0];return k.some(ja(t.clientX,t.clientY))}(t):k.none()},getDelta:function(e,t){return ja(t.left()-e.left(),t.top()-e.top())}}),XE=GE,KE=[mo("useFixed",!1),mo("getTarget",o),mo("onDrag",t),mo("repositionTarget",!0),mo("onDrop",t),WE,output("dragger",{handlers:function(e,t){return Lo([Go(De()),Vo(Re(),function(component,n){n.stop(),t.update(YE,n.event()).each(function(t){UE(component,e,t)})}),Vo(Be(),function(component,n){e.snaps.each(function(e){FE(component,e)});var r=e.getTarget(component.element());t.reset(),e.onDrop(component,r)})])}})],JE=Object.freeze({mouse:XE,touch:KE}),QE=Object.freeze({init:function(){var e=k.none(),t=r({});return yi({readState:t,reset:function(){e=k.none()},update:function(t,n){return t.getData(n).bind(function(n){return function(t,n){var r=e.map(function(e){return t.getDelta(e,n)});return e=k.some(n),r}(t,n)})}})}}),ZE=Ia({branchKey:"mode",branches:JE,name:"dragging",active:{events:function(e,t){return e.dragger.handlers(e,t)}},extra:{snap:$t(["sensor","range","output"],["extra"])},state:QE});!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(JO||(JO={}));var eN,tN,nN=function(e,t,n,r){var o=e+t,c=n.filter(function(e){return o<e}),l=r.filter(function(e){return o>e});return c.or(l).getOr(o)},rN=function(e,t,n,r,o){var c={};return c.height=nN(r,t.top(),Ep(e),function(e){return k.from(e.getParam("max_height")).filter(D)}(e)),n===JO.Both&&(c.width=nN(o,t.left(),Tp(e),function(e){return k.from(e.getParam("max_width")).filter(D)}(e))),c},oN=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},iN=function(e,t){return t.delimiter||(t.delimiter=""),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Da([Hd.config({mode:"flow",selector:"div[role=button]"}),Zv.config({}),Wd.config({}),Em("elementPathEvents",[Xo(function(n,r){e.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Hd.focusIn(n)}),e.on("nodeChange",function(r){var o,c,l=function(t){for(var n=[],i=t.length;i-- >0;){var r=t[i];if(1===r.nodeType&&!oN(r)){var o=e.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(o.isDefaultPrevented()||n.push({name:o.name,element:r}),o.isPropagationStopped())break}}return n}(r.parents);l.length>0&&Wd.set(n,(o=map(l||[],function(t,n){return Wm.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":n,"tab-index":-1,"aria-level":n+1},innerHtml:t.name},action:function(n){e.focus(),e.selection.select(t.element),e.nodeChanged()}})}),c={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+t.delimiter+" "}},H(o.slice(1),function(e,element){var t=e;return t.push(c),t.push(element),t},[o[0]])))})})])]),components:[]}},aN=function(e,t){var n,r,o=function(n){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},innerHtml:Gm("resize-handle",t.icons)},behaviours:Da([ZE.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,r,o){!function(e,t,n){var r=Vt.fromDom(e.getContainer()),o=rN(e,t,n,Za(r),Ka(r));ne(o,function(e,t){return Ui(r,t,IE(e))}),UT(e)}(e,o,n)},blockerClass:"tox-blocker"})])}},c=function(){var label,n=[];return e.getParam("elementpath",!0,"boolean")&&n.push(iN(e,{})),ut(e.settings.plugins,"wordcount")&&n.push(function(e,t){var n,r=function(e,n,r){return Wd.set(e,[text(t.translate(["{0} "+r,n[r]]))])};return Wm.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Da([Zv.config({}),Wd.config({}),om.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Em("wordcount-events",[Vo(kt(),function(e){var t=om.getValue(e),n="words"===t.mode?"characters":"words";om.setValue(e,{mode:n,count:t.count}),r(e,t.count,n)}),Xo(function(t){e.on("wordCountUpdate",function(e){var n=om.getValue(t).mode;om.setValue(t,{mode:n,count:e.wordCount}),r(t,e.wordCount,n)})})])]),eventOrder:(n={},n[kt()]=["wordcount-events","alloy.base.behaviour"],n)})}(e,t)),e.getParam("branding",!0,"boolean")&&n.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(label=Ng.translate(["Powered by {0}","Tiny"]))+'">'+label+"</a>"}}),n.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:n}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(n=c(),r=function(e){var t=!ut(e.settings.plugins,"autoresize"),n=e.getParam("resize",t);return!1===n?JO.None:"both"===n?JO.Both:JO.Vertical}(e),r!==JO.None&&n.push(o(r)),n)}},uN=function(e){var t=e.getParam("inline",!1,"boolean"),n=t?wE:KT,r=k.none(),o=Ng.isRtl()?{attributes:{dir:"rtl"}}:{},c=ua({dom:Wn({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"]},o),behaviours:Da([es.config({useFixed:!1})])}),l=$m({dom:{tag:"div",classes:["tox-anchorbar"]}}),f=function(){return r.bind(function(e){return VT.getMoreButton(e)}).getOrDie("Could not find more button element")},d=mk(c,e,function(){return r.bind(function(e){return l.getOpt(e)}).getOrDie("Could not find a anchor bar element")},f),m=function(){return ge.value(c)},h=VT.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},getSink:m,providers:d.shared.providers,onEscape:function(){e.focus()}}),v=VT.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:m,backstage:d,onEscape:function(){e.focus()},split:Ap(e),lazyToolbar:function(){return r.bind(function(e){return VT.getToolbar(e)}).getOrDie("Could not find more toolbar element")},lazyMoreButton:f}),y=VT.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),x=VT.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),w=e.getParam("statusbar",!0,"boolean")&&!t?k.some(aN(e,d.shared.providers)):k.none(),C={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[y,x]},S=function(e){var t=e.getParam("toolbar");return N(t)?t.length>0:!1!==e.getParam("toolbar",!0,"boolean")}(e)||Np(e).isSome(),O=function(e){return!1!==e.getParam("menubar",!0,"boolean")}(e),T=W([O?[h]:[],S?[v]:[],Rp(e)?[]:[l.asSpec()],t?[]:[C]]),E=W([[{dom:{tag:"div",classes:["tox-editor-container"]},components:T}],t?[]:w.toArray()]),_=Wn({role:"application"},Ng.isRtl()?{dir:"rtl"}:{}),A=ua(VT.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]),styles:{visibility:"hidden"},attributes:_},components:E,behaviours:Da(n.getBehaviours(e).concat([Hd.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})]))}));r=k.some(A),e.shortcuts.add("alt+F9","focus menubar",function(){VT.focusMenubar(A)}),e.shortcuts.add("alt+F10","focus toolbar",function(){VT.focusToolbar(A)});var D=Sp(A),R=Sp(c);wT(e,D,R);var B=function(t){var n=kp.DOM,r=e.getParam("width",n.getStyle(t,"width")),o=function(e){return e.getParam("height",Math.max(e.getElement().offsetHeight,200))}(e),c=Tp(e),l=Ep(e),f=ME(r).bind(function(e){return IE(c.map(function(t){return Math.max(e,t)}))}).getOr(IE(r)),d=ME(o).bind(function(e){return l.map(function(t){return Math.max(e,t)})}).getOr(o),m=IE(f);if(Yi("div","width",m)&&Ui(A.element(),"width",m),!e.inline){var h=IE(d);Yi("div","height",h)?Ui(A.element(),"height",h):Ui(A.element(),"height","200px")}return d};return{mothership:D,uiMothership:R,backstage:d,renderUI:function(){BE(e,m,d.shared),function(e){var t=e.ui.registry.getAll().sidebars;P(ee(t),function(n){var r=t[n],o=function(){return k.from(e.queryCommandValue("ToggleSidebar")).is(n)};e.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:function(t){e.execCommand("ToggleSidebar",!1,n),t.setActive(o())},onSetup:function(t){var n=function(){return t.setActive(o())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})}(e);var t=e.ui.registry.getAll(),r=t.buttons,o=t.menuItems,l=t.contextToolbars,f=t.sidebars,h={menuItems:o,buttons:r,menus:e.settings.menu?re(e.settings.menu,function(menu){return ye(menu,{items:menu.items})}):{},menubar:e.settings.menubar,toolbar:Np(e).getOr(e.getParam("toolbar",!0)),sidebar:f};xT(e,l,c,{backstage:d});var v=e.getElement(),y=B(v),x={mothership:D,uiMothership:R,outerContainer:A},w={targetNode:v,height:y};return n.render(e,x,h,d,w)},getUi:function(){return{channels:{broadcastAll:R.broadcast,broadcastOn:R.broadcastOn,register:function(){}}}}}},cN=function(e){zC.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return e.execCommand(t.cmd)},icon:t.icon,onSetup:qO(e,t.name)})});var t="alignnone",n="No alignment",r="JustifyNone",o="align-none";e.ui.registry.addButton(t,{tooltip:n,onAction:function(){return e.execCommand(r)},icon:o})},sN=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},lN=function(e){!function(e){zC.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:qO(e,t.name),onAction:sN(e,t.name)})});for(var i=1;i<=6;i++){var t="h"+i;e.ui.registry.addToggleButton(t,{text:t.toUpperCase(),tooltip:"Heading "+i,onSetup:qO(e,t),onAction:sN(e,t)})}}(e),function(e){zC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})}(e),function(e){zC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)},onSetup:qO(e,t.name)})})}(e)},fN=function(e){lN(e),function(e){zC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:sN(e,"code")})}(e)},dN=function(e,t,n){var r=function(){return!!t.undoManager&&t.undoManager[n]()},o=function(){e.setDisabled(t.readonly||!r())};return e.setDisabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o)}},mN=function(e){!function(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return dN(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return dN(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e),function(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return dN(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return dN(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e)},gN=function(e){!function(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}})}(e),function(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,e)},onAction:function(){e.execCommand("mceToggleVisualAid")}})}(e)},hN=function(e){!function(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(e,t){e.setDisabled(!t.queryCommandState("outdent"));var n=function(){e.setDisabled(!t.queryCommandState("outdent"))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}(t,e)},onAction:function(){return e.execCommand("outdent")}}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return e.execCommand("indent")}})}(e)},pN=function(e,t){!function(e,t){var n=eT(e),r=XO(0,t,n.dataset,n);e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t),function(e,t){var n=nT(e),r=XO(0,t,n.dataset,n);e.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t),function(e,t){var data=t.styleselect,n=XO(0,t,data,uT(e));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=aT(e),r=XO(0,t,n.dataset,n);e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t),function(e,t){var n=oT(e),r=XO(0,t,n.dataset,n);e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t)},vN=function(e,t){cN(e),fN(e),pN(e,t),mN(e),Hb.register(e),gN(e),hN(e)},bN=function(e,t){var n=k.from(Nn(e,"id")).fold(function(){var e=jn("dialog-label");return Tn(t,"id",e),e},o);Tn(e,"aria-labelledby",n)},yN=r([eo("lazySink"),option("dragBlockClass"),mo("useTabstopAt",r(!0)),mo("eventOrder",{}),Os("modalBehaviours",[Hd]),Ca("onExecute"),ka("onEscape")]),xN={sketch:o},wN=r([el({name:"draghandle",overrides:function(e,t){return{behaviours:Da([ZE.config({mode:"mouse",getTarget:function(e){return sa(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+xr(t,null,2)).message)})])}}}),Qs({schema:[eo("dom")],name:"title"}),Qs({factory:xN,schema:[eo("dom")],name:"close"}),Qs({factory:xN,schema:[eo("dom")],name:"body"}),Qs({factory:xN,schema:[eo("dom")],name:"footer"}),Zs({factory:{sketch:function(e,t){return Wn({},e,{dom:t.dom,components:t.components})}},schema:[mo("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),mo("components",[])],name:"blocker"})]),CN=Al({name:"ModalDialog",configFields:yN(),partFields:wN(),factory:function(e,t,n,r){var c=jn("alloy.dialog.busy"),l=jn("alloy.dialog.idle"),f=Da([Hd.config({mode:"special",onTab:function(){return k.some(!0)},onShiftTab:function(){return k.some(!0)}}),sm.config({})]),d=jn("modal-events"),m=Wn({},e.eventOrder,{"alloy.system.attached":[d].concat(e.eventOrder["alloy.system.attached"]||[])});return{uid:e.uid,dom:e.dom,components:t,apis:{show:function(dialog){var t=e.lazySink(dialog).getOrDie(),n=Ne(k.none()),o=r.blocker(),d=t.getSystem().build(Wn({},o,{components:o.components.concat([ca(dialog)]),behaviours:Da([Em("dialog-blocker-events",[Vo(l,function(e,t){_n(dialog.element(),"aria-busy")&&(An(dialog.element(),"aria-busy"),n.get().each(function(e){return Wd.remove(dialog,e)}))}),Vo(c,function(e,t){Tn(dialog.element(),"aria-busy","true");var r=t.event().getBusySpec();n.get().each(function(e){Wd.remove(dialog,e)});var o=r(dialog,f),c=e.getSystem().build(o);n.set(k.some(c)),Wd.append(dialog,ca(c)),c.hasConfigured(Hd)&&Hd.focusIn(c)})])])}));rs(t,d),Hd.focusIn(dialog)},hide:function(dialog){un(dialog.element()).each(function(e){dialog.getSystem().getByDom(e).each(function(e){as(e)})})},getBody:function(dialog){return pl(dialog,e,"body")},getFooter:function(dialog){return pl(dialog,e,"footer")},setIdle:function(dialog){Oo(dialog,l)},setBusy:function(dialog,e){To(dialog,c,{getBusySpec:e})}},eventOrder:m,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Es(e.modalBehaviours,[Wd.config({}),Hd.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),Em(d,[Xo(function(t){var n,r,c;bN(t.element(),pl(t,e,"title").element()),n=t.element(),r=pl(t,e,"body").element(),c=k.from(Nn(n,"id")).fold(function(){var e=jn("dialog-describe");return Tn(r,"id",e),e},o),Tn(n,"aria-describedby",c)})])])}},apis:{show:function(e,dialog){e.show(dialog)},hide:function(e,dialog){e.hide(dialog)},getBody:function(e,dialog){return e.getBody(dialog)},getFooter:function(e,dialog){return e.getFooter(dialog)},setBusy:function(e,dialog,t){e.setBusy(dialog,t)},setIdle:function(e,dialog){e.setIdle(dialog)}}}),SN=[no("type"),no("text"),ro("level",["info","warn","error","success"]),no("icon"),mo("url","")],kN=[no("type"),no("text"),bo("primary",!1),zr("name","name",Jn(function(){return jn("button-name")}),Kr),so("icon")],ON=[no("type"),no("name"),no("label")],TN=Jr,EN=[no("type"),no("name"),so("label")],NN=EN,_N=Kr,AN=EN,DN=Kr,RN=EN,BN=Dr(Hr),MN=EN.concat([bo("sandboxed",!0)]),IN=Kr,zN=EN.concat([so("placeholder")]),PN=Kr,LN=EN.concat([ao("items",[no("text"),no("value")]),ho("size",1)]),HN=Kr,FN=EN.concat([bo("constrain",!0)]),VN=Ar([no("width"),no("height")]),jN=EN.concat([so("placeholder")]),UN=Kr,WN=EN.concat([vo("filetype","file",["image","media","file"])]),$N=Ar([no("value"),mo("meta",{})]),qN=EN.concat([no("type"),po("tag","textarea"),oo("init")]),GN=Kr,YN=[no("type"),no("html"),vo("presets","presentation",["presentation","document"])],XN=EN.concat([to("currentState",Ar([eo("blob"),no("url")]))]),KN=EN.concat([mo("columns","auto")]),JN=(eN=[no("value"),no("text"),no("icon")],Mr(eN)),QN=[no("type"),uo("header",Kr),uo("cells",Dr(Kr))],ZN=function(e){return zr("items","items",Xn(),Dr(Fr(function(t){return jr("Checking item of "+e,e_,t).fold(function(e){return ge.error($r(e))},function(e){return ge.value(e)})})))},e_=qr("type",{alertbanner:SN,bar:(tN=ZN("bar"),[no("type"),tN]),button:kN,checkbox:ON,colorinput:NN,colorpicker:AN,dropzone:RN,grid:function(e){return[no("type"),(t="columns",to(t,Xr)),e];var t}(ZN("grid")),iframe:MN,input:zN,selectbox:LN,sizeinput:FN,textarea:jN,urlinput:WN,customeditor:qN,htmlpanel:YN,imagetools:XN,collection:KN,label:function(e){return[no("type"),no("label"),e]}(ZN("label")),table:QN}),t_=[no("type"),uo("items",e_)],n_=[no("title"),uo("items",e_)],r_=[no("type"),ao("tabs",n_)],o_=Ar([ro("type",["submit","cancel","custom"]),zr("name","name",Jn(function(){return jn("button-name")}),Kr),no("text"),so("icon"),vo("align","end",["start","end"]),bo("primary",!1),bo("disabled",!1)]),i_=Ar([no("title"),to("body",qr("type",{panel:t_,tabpanel:r_})),po("size","normal"),uo("buttons",o_),mo("initialData",{}),yo("onAction",t),yo("onChange",t),yo("onSubmit",t),yo("onClose",t),yo("onCancel",t),mo("onTabChange",t)]),a_=function(e){return E(e)?[e].concat($(ae(e),a_)):N(e)?$(e,a_):[]},u_=function(e){return T(e.type)&&T(e.name)},c_={checkbox:TN,colorinput:_N,colorpicker:DN,dropzone:BN,input:PN,iframe:IN,sizeinput:VN,selectbox:HN,size:VN,textarea:UN,urlinput:$N,customeditor:GN,collection:JN},s_=function(e){var t=$(function(e){return filter(a_(e),u_)}(e),function(e){return function(e){return k.from(c_[e.type])}(e).fold(function(){return[]},function(t){return[to(e.name,t)]})});return Ar(t)},l_=function(e){return{internalDialog:Ur(jr("dialog",i_,e)),dataValidator:s_(e),initialData:e.initialData}},f_={open:function(e,t){var n=l_(t);return e(n.internalDialog,n.initialData,n.dataValidator)},redial:function(e){return l_(e)}},d_=jn("update-dialog"),m_=jn("update-title"),g_=jn("update-body"),h_=jn("update-footer"),p_=function(e){var t=[],n={};return ne(e,function(e,r){e.fold(function(){t.push(r)},function(e){n[r]=e})}),t.length>0?ge.error(t):ge.value(n)},v_=function(t,n){var r=$m(jx.sketch(function(e){return{dom:{tag:"div",classes:["tox-form"]},components:map(t.items,function(t){return pS(e,t,n)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[r.asSpec()]}],behaviours:Da([Hd.config({mode:"acyclic",useTabstopAt:d(dw)}),Kx(r),rw(r,{postprocess:function(t){return p_(t).fold(function(t){return e.console.error(t),{}},function(e){return e})}})])}},b_=_l({name:"TabButton",configFields:[mo("uid",void 0),eo("value"),zr("dom","dom",Qn(function(e){return{attributes:{role:"tab",id:jn("aria"),"aria-selected":"false"}}}),Gr()),option("action"),mo("domModification",{}),Os("tabButtonBehaviours",[sm,Hd,om]),eo("view")],factory:function(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:Um(e.action),behaviours:Es(e.tabButtonBehaviours,[sm.config({}),Hd.config({mode:"execution",useSpace:!0,useEnter:!0}),om.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}}}),y_=r([eo("tabs"),eo("dom"),mo("clickToDismiss",!1),Os("tabbarBehaviours",[Gl,Hd]),ya(["tabClass","selectedClass"])]),x_=tl({factory:b_,name:"tabs",unit:"tab",overrides:function(e,n){var r=function(e,button){Gl.dehighlight(e,button),To(e,Pt(),{tabbar:e,button:button})},o=function(e,button){Gl.highlight(e,button),To(e,zt(),{tabbar:e,button:button})};return{action:function(button){var n=button.getSystem().getByUid(e.uid).getOrDie(),c=Gl.isHighlighted(n,button);(c&&e.clickToDismiss?r:c?t:o)(n,button)},domModification:{classes:[e.markers.tabClass]}}}}),w_=r([x_]),C_=Al({name:"Tabbar",configFields:y_(),partFields:w_(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Es(e.tabbarBehaviours,[Gl.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function(e,t){Tn(t.element(),"aria-selected","true")},onDehighlight:function(e,t){Tn(t.element(),"aria-selected","false")}}),Hd.config({mode:"flow",getInitial:function(e){return Gl.getHighlighted(e).map(function(e){return e.element()})},selector:"."+e.markers.tabClass,executeOnMove:!0})])}}}),S_=_l({name:"Tabview",configFields:[Os("tabviewBehaviours",[Wd])],factory:function(e,t){return{uid:e.uid,dom:e.dom,behaviours:Es(e.tabviewBehaviours,[Wd.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),k_=r([mo("selectFirst",!0),wa("onChangeTab"),wa("onDismissTab"),mo("tabs",[]),Os("tabSectionBehaviours",[])]),O_=Qs({factory:C_,schema:[eo("dom"),io("markers",[eo("tabClass"),eo("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs}}}),T_=Qs({factory:S_,name:"tabview"}),E_=r([O_,T_]),N_=Al({name:"TabSection",configFields:k_(),partFields:E_(),factory:function(e,t,n,r){var o=function(section,t){hl(section,e,"tabbar").each(function(e){t(e).each(Eo)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ts(e.tabSectionBehaviours),events:Lo(W([e.selectFirst?[Xo(function(section,e){o(section,Gl.getFirst)})]:[],[Vo(zt(),function(section,t){!function(button){var t=om.getValue(button);hl(button,e,"tabview").each(function(n){F(e.tabs,function(e){return e.value===t}).each(function(t){var r=t.view();Tn(n.element(),"aria-labelledby",Nn(button.element(),"id")),Wd.set(n,r),e.onChangeTab(n,button,r)})})}(t.event().button())}),Vo(Pt(),function(section,t){var button=t.event().button();e.onDismissTab(section,button)})]])),apis:{getViewItems:function(section){return hl(section,e,"tabview").map(function(e){return Wd.contents(e)}).getOr([])},showTab:function(section,e){o(section,function(t){var n=Gl.getCandidates(t);return F(n,function(t){return om.getValue(t)===e}).filter(function(e){return!Gl.isHighlighted(t,e)})})}}}},apis:{getViewItems:function(e,component){return e.getViewItems(component)},showTab:function(e,component,t){e.showTab(component,t)}}}),__=function(e){return head((t=e,n=function(a,b){return a>b?-1:a<b?1:0},(r=Y.call(t,0)).sort(n),r));var t,n,r},A_=function(t,n,r){sa(t,'[role="dialog"]').each(function(dialog){r.get().map(function(r){return Ui(n,"height","0"),Math.min(r,function(dialog,t){var n=sa(dialog,".tox-dialog-wrap").getOr(dialog);return("fixed"===$i(n,"position")?Math.max(e.document.documentElement.clientHeight,e.window.innerHeight):Math.max(e.document.documentElement.offsetHeight,e.document.documentElement.scrollHeight))-(dialog.dom().getBoundingClientRect().height-t.dom().getBoundingClientRect().height)}(dialog,t))}).each(function(e){Ui(n,"height",e+"px")})})},D_=function(e){var t;return{smartTabHeight:(t=Ne(k.none()),{extraEvents:[Xo(function(n){la(n.element(),'[role="tabpanel"]').each(function(r){Ui(r,"visibility","hidden"),n.getSystem().getByDom(r).toOption().each(function(n){var o=function(e,t,n){return map(e,function(r,i){Wd.set(n,e[i].view());var rect=t.dom().getBoundingClientRect();return Wd.set(n,[]),rect.height})}(e,r,n),c=__(o);t.set(c)}),A_(n.element(),r,t),Xi(r,"visibility"),function(e,t){head(e).each(function(e){return N_.showTab(t,e.value)})}(e,n),Km.requestAnimationFrame(function(){A_(n.element(),r,t)})})}),Vo(At(),function(e){la(e.element(),'[role="tabpanel"]').each(function(n){A_(e.element(),n,t)})}),Vo(Vp,function(e,n){la(e.element(),'[role="tabpanel"]').each(function(n){var r=af();Ui(n,"visibility","hidden");var o=Gi(n,"height").map(function(e){return parseInt(e,10)});Xi(n,"height");var c=n.dom().getBoundingClientRect().height;o.forall(function(e){return c>e})?(t.set(k.from(c)),A_(e.element(),n,t)):o.each(function(e){Ui(n,"height",e+"px")}),Xi(n,"visibility"),r.each(of)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},R_=function(e,t){var n=Ne({}),r=function(form){var e=om.getValue(form),t=p_(e).getOr({}),r=n.get(),o=be(r,t);n.set(o)},o=function(form){var e=n.get();om.setValue(form,e)},c=Ne(null),l=map(e.tabs,function(e){return{value:e.title,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(e.title)},view:function(){return[jx.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:map(e.items,function(e){return pS(n,e,t)}),formBehaviours:Da([Hd.config({mode:"acyclic",useTabstopAt:d(dw)}),Em("TabView.form.events",[Xo(o),Ko(r)]),Ha.config({channels:Oe([{key:"send-data-to-section",value:{onReceive:r}},{key:"send-data-to-view",value:{onReceive:o}}])})])}})]}}}),f=D_(l).smartTabHeight;return N_.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(section,button,e){var title=om.getValue(button);To(section,Fp,{title:title,oldTitle:c.get()}),c.set(title)},tabs:l,components:[N_.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[C_.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Da([Zv.config({})])}),N_.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:Da([Em("tabpanel",f.extraEvents),Hd.config({mode:"acyclic"}),Ml.config({find:function(e){return head(N_.getViewItems(e))}}),om.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn(["send-data-to-section"],{}),n.get()},setValue:function(e,t){n.set(t),e.getSystem().broadcastOn(["send-data-to-view"],{})}}})])})},B_=function(e,t,n,r){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:Wn({},t.map(function(e){return{id:e}}).getOr({}),r?{"aria-live":"polite"}:{})},components:[],behaviours:Da([Jx(0),yO.config({channel:g_,updateState:function(e,t){return k.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){switch(e.body.type){case"tabpanel":return[R_({tabs:e.body.tabs},n)];default:return[v_({items:e.body.items},n)]}},initialData:e})])}},M_=function(e,t){var n=function(e,t){return Vo(e,function(e,n){r(e,function(r,o){t(r,n.event(),e)})})},r=function(e,t){yO.getState(e).get().each(function(n){t(n.internalDialog,e)})};return[$o(He(),mw),n(Pp,function(t){return t.onSubmit(e())}),n(Bp,function(t,n){t.onChange(e(),{name:n.name()})}),n(zp,function(t,n){t.onAction(e(),{name:n.name(),value:n.value()})}),n(Fp,function(t,n){t.onTabChange(e(),n.title())}),n(Mp,function(e){t.onClose(),e.onClose()}),n(Ip,function(t,n,r){t.onCancel(e()),Oo(r,Mp)}),Ko(function(component){var t=e();om.setValue(component,t.getData())}),Vo(Hp,function(e,n){return t.onUnblock()}),Vo(Lp,function(e,n){return t.onBlock(n.event())})]},I_=function(e,t){var n=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var c=e[i];(t(c,i,e)?n:r).push(c)}return{pass:n,fail:r}}(t.map(function(s){return s.footerButtons}).getOr([]),function(button){return"start"===button.align}),r=function(e,t){return Cp.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:map(t,function(button){return button.memento.asSpec()})})};return[r("start",n.pass),r("end",n.fail)]},z_=function(e,t){return{dom:Eg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Da([yO.config({channel:h_,initialData:e,updateState:function(e,data){var n=map(data.buttons,function(button){var e=$m(function(button,e){return vC(button,button.type,e)}(button,t));return{name:button.name,align:button.align,memento:e}});return k.some({lookupByName:function(e,t){return function(e,t,n){return F(t,function(button){return button.name===n}).bind(function(t){return t.memento.getOpt(e)})}(e,n,t)},footerButtons:n})},renderComponents:I_})])}},P_=function(e){return Wm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(e){Oo(e,Ip)}})},L_=function(e,t,n){var r=function(data){return[text(n.translate(data.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:Wn({},t.map(function(e){return{id:e}}).getOr({}))},components:r(e),behaviours:Da([yO.config({channel:m_,renderComponents:r})])}},H_=function(e,t){if(e.getRoot().getSystem().isConnected()){var n=Ml.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return jx.getField(n,t).fold(function(){var footer=e.getFooter();return yO.getState(footer).get().bind(function(e){return e.lookupByName(n,t)})},function(e){return k.some(e)})}return k.none()},F_=function(e,t){var n=function(t){var n=e.getRoot();n.getSystem().isConnected()&&t(n)},r={getData:function(){var t=e.getRoot(),n=t.getSystem().isConnected()?e.getFormWrapper():t;return om.getValue(n)},setData:function(t){n(function(n){var o=r.getData(),c=ye(o,t),l=function(e,data){var t=e.getRoot();return yO.getState(t).get().map(function(e){return Ur(jr("data",e.dataValidator,data))}).getOr(data)}(e,c),form=e.getFormWrapper();om.setValue(form,l)})},disable:function(t){H_(e,t).each(Zg.disable)},enable:function(t){H_(e,t).each(Zg.enable)},focus:function(t){H_(e,t).each(sm.focus)},block:function(e){if(!T(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");n(function(t){To(t,Lp,{message:e})})},unblock:function(){n(function(e){Oo(e,Hp)})},showTab:function(title){n(function(t){var body=e.getBody();yO.getState(body).get().exists(function(b){return b.isTabPanel()})&&Ml.getCurrent(body).each(function(e){N_.showTab(e,title)})})},redial:function(e){n(function(n){var o=t(e);n.getSystem().broadcastOn([d_],o),n.getSystem().broadcastOn([m_],o.internalDialog),n.getSystem().broadcastOn([g_],o.internalDialog),n.getSystem().broadcastOn([h_],o.internalDialog),r.setData(o.initialData)})},close:function(){n(function(e){Oo(e,Mp)})}};return r},V_=function(e,t,n){var r,o,c,l,f,d,m,header=(o={title:n.shared.providers.translate(e.internalDialog.title),draggable:!0},c=n.shared.providers,l=CN.parts().title(L_(o,k.none(),c)),f=CN.parts().draghandle({dom:Eg('<div class="tox-dialog__draghandle"></div>')}),d=CN.parts().close(P_(c)),m=[l].concat(o.draggable?[f]:[]).concat([d]),Cp.sketch({dom:Eg('<div class="tox-dialog__header"></div>'),components:m})),h=function(e,t){return CN.parts().body(B_(e,k.none(),t,!1))}({body:e.internalDialog.body},n),footer=function(e,t){return CN.parts().footer(z_(e,t))}({buttons:e.internalDialog.buttons},n.shared.providers),v=M_(function(){return x},{onClose:function(){return t.closeWindow()},onBlock:function(e){CN.setBusy(dialog,function(t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:Eg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){CN.setIdle(dialog)}}),y="normal"!==e.internalDialog.size?"large"===e.internalDialog.size?"tox-dialog--width-lg":"tox-dialog--width-md":[],dialog=ua(CN.sketch({lazySink:n.shared.getSink,onEscape:function(e){return Oo(e,Ip),k.some(!0)},useTabstopAt:function(e){return!dw(e)&&("button"!==xn(e)||"disabled"!==Nn(e,"disabled"))},modalBehaviours:Da([yO.config({channel:d_,updateState:function(e,t){return k.some(t)},initialData:e}),sm.config({}),Em("execute-on-form",v.concat([Yo(He(),function(e,t){Hd.focusIn(e)})])),Em("scroll-lock",[Xo(function(){Mi(body(),"tox-dialog__disable-scroll")}),Ko(function(){zi(body(),"tox-dialog__disable-scroll")})]),aw({})]),eventOrder:(r={},r[wt()]=["execute-on-form"],r[Dt()]=["scroll-lock","reflecting","execute-on-form","alloy.base.behaviour"],r[Rt()]=["alloy.base.behaviour","execute-on-form","reflecting","scroll-lock"],r),dom:{tag:"div",classes:["tox-dialog"].concat(y),styles:{position:"relative"}},components:[header,h,footer],dragBlockClass:"tox-dialog-wrap",parts:{blocker:{dom:Eg('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}}})),x=F_({getRoot:function(){return dialog},getBody:function(){return CN.getBody(dialog)},getFooter:function(){return CN.getFooter(dialog)},getFormWrapper:function(){var e=CN.getBody(dialog);return Ml.getCurrent(e).getOr(e)}},t.redial);return{dialog:dialog,instanceApi:x}},j_=function(e,t,n,r){var o,c,l,f,d,m=jn("dialog-label"),h=jn("dialog-content"),v=$m((l={title:e.internalDialog.title,draggable:!0},f=m,d=n.shared.providers,Cp.sketch({dom:Eg('<div class="tox-dialog__header"></div>'),components:[L_(l,k.some(f),d),P_(d)],containerBehaviours:Da([ZE.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return fa(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),y=$m(function(e,t,n,r){return B_(e,k.some(t),n,r)}({body:e.internalDialog.body},h,n,r)),x=$m(function(e,t){return z_(e,t)}({buttons:e.internalDialog.buttons},n.shared.providers)),w=M_(function(){return C},{onBlock:function(){},onUnblock:function(){},onClose:function(){return t.closeWindow()}}),dialog=ua({dom:{tag:"div",classes:["tox-dialog"],attributes:(o={role:"dialog"},o["aria-labelledby"]=m,o["aria-describedby"]=""+h,o)},eventOrder:(c={},c[xt()]=[yO.name(),Ha.name()],c[wt()]=["execute-on-form"],c[Dt()]=["reflecting","execute-on-form"],c),behaviours:Da([Hd.config({mode:"cyclic",onEscape:function(e){return Oo(e,Mp),k.some(!0)},useTabstopAt:function(e){return!dw(e)&&("button"!==xn(e)||"disabled"!==Nn(e,"disabled"))}}),yO.config({channel:d_,updateState:function(e,t){return k.some(t)},initialData:e}),Em("execute-on-form",w),aw({})]),components:[v.asSpec(),y.asSpec(),x.asSpec()]}),C=F_({getRoot:function(){return dialog},getFooter:function(){return x.get(dialog)},getBody:function(){return y.get(dialog)},getFormWrapper:function(){var body=y.get(dialog);return Ml.getCurrent(body).getOr(body)}},t.redial);return{dialog:dialog,instanceApi:C}},U_=function(e,t){return CN.parts().close(Wm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Da([Zv.config({})])}))},W_=function(){return CN.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},$_=function(e,t){return CN.parts().body({dom:{tag:"div",classes:["tox-dialog__body","todo-tox-fit"]},components:[{dom:Eg("<p>"+t.translate(e)+"</p>")}]})},q_=function(e){return CN.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},G_=function(e,t){return[Cp.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Cp.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},Y_=function(e){return CN.sketch({lazySink:e.lazySink,onEscape:function(){return e.onCancel(),k.some(!0)},dom:{tag:"div",classes:["tox-dialog"].concat(e.extraClasses)},components:[{dom:{tag:"div",classes:["tox-dialog__header"]},components:[e.partSpecs.title,e.partSpecs.close]},e.partSpecs.body,e.partSpecs.footer],parts:{blocker:{dom:Eg('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}},modalBehaviours:Da([Em("basic-dialog-events",[Vo(Ip,function(t,n){e.onCancel()}),Vo(Pp,function(t,n){e.onSubmit()})])])})},X_=function(e){var n=function(e){var n=e.backstage.shared;return{open:function(e,r){var o=function(){CN.hide(l),r()},c=$m(vC({name:"close-alert",text:"OK",primary:!0,icon:k.none()},"cancel",n.providers)),l=ua(Y_({lazySink:function(){return n.getSink()},partSpecs:{title:W_(),close:U_(function(){o()},n.providers),body:$_(e,n.providers),footer:q_(G_([],[c.asSpec()]))},onCancel:function(){return o()},onSubmit:t,extraClasses:["tox-alert-dialog"]}));CN.show(l);var f=c.get(l);sm.focus(f)}}}(e),r=function(e){var t=e.backstage.shared;return{open:function(e,n){var r=function(e){CN.hide(l),n(e)},o=$m(vC({name:"yes",text:"Yes",primary:!0,icon:k.none()},"submit",t.providers)),c=vC({name:"no",text:"No",primary:!0,icon:k.none()},"cancel",t.providers),l=ua(Y_({lazySink:function(){return t.getSink()},partSpecs:{title:W_(),close:U_(function(){r(!1)},t.providers),body:$_(e,t.providers),footer:q_(G_([],[c,o.asSpec()]))},onCancel:function(){return r(!1)},onSubmit:function(){return r(!0)},extraClasses:["tox-confirm-dialog"]}));CN.show(l);var f=o.get(l);sm.focus(f)}}}(e),o=function(t,n){return f_.open(function(t,r,o){var c=r,dialog=V_({dataValidator:o,initialData:c,internalDialog:t},{redial:f_.redial,closeWindow:function(){CN.hide(dialog.dialog),n(dialog.instanceApi)}},e.backstage);return CN.show(dialog.dialog),dialog.instanceApi.setData(c),dialog.instanceApi},t)},c=function(t,n,r,o){return f_.open(function(t,c,l){var f=Ur(jr("data",l,c)),d=j_({dataValidator:l,initialData:f,internalDialog:t},{redial:f_.redial,closeWindow:function(){jm.hide(m),r(d.instanceApi)}},e.backstage,o),m=ua(jm.sketch({lazySink:e.backstage.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:Da([Em("window-manager-inline-events",[Vo(Bt(),function(e,t){Oo(d.dialog,Ip)})])])}));return jm.showAt(m,n,ca(d.dialog)),d.instanceApi.setData(f),Hd.focusIn(d.dialog),d.instanceApi},t)};return{open:function(t,n,r){return void 0!==n&&"toolbar"===n.inline?c(t,e.backstage.shared.anchors.toolbar(),r,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?c(t,e.backstage.shared.anchors.cursor(),r,n.ariaAttrs):o(t,r)},alert:function(e,t){n.open(e,function(){t()})},close:function(e){e.close()},confirm:function(e,t){r.open(e,function(e){t(e)})}}};Un.add("silver",function(e){var t=uN(e),n=t.mothership,o=t.uiMothership,c=t.backstage,l=t.renderUI,f=t.getUi;vN(e,c),Hn(jn("silver-demo"),n),Hn(jn("silver-ui-demo"),o),Kh(e,c.shared);var d=X_({backstage:c});return{renderUI:l,getWindowManagerImpl:r(d),getNotificationManagerImpl:function(){return Jm(e,{backstage:c},o)},ui:f()}})}(window)},function(e,t,n){"use strict";n(39),n(45),n(143),n(144),n(145);var r=n(12),o=(n(30),n(31),n(218),n(10)),c=(n(20),n(225),n(16)),l=Object(o.a)(c.a).extend({name:"v-progress-circular",props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},computed:{calculatedSize:function(){return Number(this.size)+(this.button?8:0)},circumference:function(){return 2*Math.PI*this.radius},classes:function(){return{"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue:function(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},radius:function(){return 20},strokeDashArray:function(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset:function(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth:function(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles:function(){return{height:this.calculatedSize+"px",width:this.calculatedSize+"px"}},svgStyles:function(){return{transform:"rotate("+Number(this.rotate)+"deg)"}},viewBoxSize:function(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle:function(e,t,n){return e("circle",{class:"v-progress-circular__"+t,attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":n}})},genSvg:function(e){var t=[this.indeterminate||this.genCircle(e,"underlay",0),this.genCircle(e,"overlay",this.strokeDashOffset)];return e("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:this.viewBoxSize+" "+this.viewBoxSize+" "+2*this.viewBoxSize+" "+2*this.viewBoxSize}},t)}},render:function(e){var t=e("div",{staticClass:"v-progress-circular__info"},this.$slots.default),svg=this.genSvg(e);return e("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,style:this.styles,on:this.$listeners}),[svg,t])}}),f=n(76),d=n(80),m=n(47),h=n(7),v=n(114),y=n(2),x="function"==typeof Symbol&&"symbol"===Object(r.a)(Symbol.iterator)?function(e){return Object(r.a)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Object(r.a)(e)},w=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=Object(o.a)(c.a,m.a,d.a,h.a,Object(f.a)("btnToggle"),Object(v.b)("inputValue"));t.a=S.extend().extend({name:"v-btn",props:{activeClass:{type:String,default:"v-btn--active"},block:Boolean,depressed:Boolean,fab:Boolean,flat:Boolean,icon:Boolean,large:Boolean,loading:Boolean,outline:Boolean,ripple:{type:[Boolean,Object],default:null},round:Boolean,small:Boolean,tag:{type:String,default:"button"},type:{type:String,default:"button"},value:null},computed:{classes:function(){var e;return w((C(e={"v-btn":!0},this.activeClass,this.isActive),C(e,"v-btn--absolute",this.absolute),C(e,"v-btn--block",this.block),C(e,"v-btn--bottom",this.bottom),C(e,"v-btn--disabled",this.disabled),C(e,"v-btn--flat",this.flat),C(e,"v-btn--floating",this.fab),C(e,"v-btn--fixed",this.fixed),C(e,"v-btn--icon",this.icon),C(e,"v-btn--large",this.large),C(e,"v-btn--left",this.left),C(e,"v-btn--loader",this.loading),C(e,"v-btn--outline",this.outline),C(e,"v-btn--depressed",this.depressed&&!this.flat||this.outline),C(e,"v-btn--right",this.right),C(e,"v-btn--round",this.round),C(e,"v-btn--router",this.to),C(e,"v-btn--small",this.small),C(e,"v-btn--top",this.top),e),this.themeClasses)},computedRipple:function(){var e=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!==this.ripple?this.ripple:e)}},watch:{$route:"onRouteChange"},methods:{click:function(e){!this.fab&&e.detail&&this.$el.blur(),this.$emit("click",e),this.btnToggle&&this.toggle()},genContent:function(){return this.$createElement("div",{class:"v-btn__content"},this.$slots.default)},genLoader:function(){return this.$createElement("span",{class:"v-btn__loading"},this.$slots.loader||[this.$createElement(l,{props:{indeterminate:!0,size:23,width:2}})])},onRouteChange:function(){var e=this;if(this.to&&this.$refs.link){var path="_vnode.data.class."+this.activeClass;this.$nextTick(function(){Object(y.g)(e.$refs.link,path)&&e.toggle()})}}},render:function(e){var t=this.outline||this.flat||this.disabled?this.setTextColor:this.setBackgroundColor,n=this.generateRouteLink(this.classes),r=n.tag,data=n.data,o=[this.genContent(),this.loading&&this.genLoader()];return"button"===r&&(data.attrs.type=this.type),data.attrs.value=["string","number"].includes(x(this.value))?this.value:JSON.stringify(this.value),this.btnToggle&&(data.ref="link"),e(r,t(this.color,data),o)}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(2),o=n(104),c=n(105),l=n(106),f=n(107),d=Object(r.c)("spacer","div","v-spacer");o.a,c.a,l.a,f.a},function(e,t,n){"use strict";n(250);var r=n(7),o=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=r.a.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){return e("hr",{class:o({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:this.$attrs,on:this.$listeners})}})},function(e,t,n){"use strict";n(143),n(28);var r=n(76),o=n(47),c=n(7),l=n(2),f=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a={name:"v-tab",mixins:[o.a,Object(r.a)("tabGroup"),c.a],props:{ripple:{type:[Boolean,Object],default:!0}},computed:{classes:function(){return f({"v-tabs__item":!0,"v-tabs__item--disabled":this.disabled},this.groupClasses)},value:function(){var e=this.to||this.href||"";this.$router&&this.to===Object(this.to)&&(e=this.$router.resolve(this.to,this.$route,this.append).href);return e.replace("#","")}},watch:{$route:"onRouteChange"},mounted:function(){this.onRouteChange()},methods:{click:function(e){this.href&&this.href.indexOf("#")>-1&&e.preventDefault(),this.$emit("click",e),this.to||this.toggle()},onRouteChange:function(){var e=this;if(this.to&&this.$refs.link){var path="_vnode.data.class."+this.activeClass;this.$nextTick(function(){Object(l.g)(e.$refs.link,path)&&e.toggle()})}}},render:function(e){var link=this.generateRouteLink(this.classes),data=link.data,t=this.disabled?"div":link.tag;return data.ref="link",e("div",{staticClass:"v-tabs__div"},[e(t,data,this.$slots.default)])}}},function(e,t,n){"use strict";n(23),n(252);var r=n(79),o={computed:{activeTab:function(){if(this.selectedItems.length)return this.selectedItems[0]},containerStyles:function(){return this.height?{height:parseInt(this.height,10)+"px"}:null},hasArrows:function(){return(this.showArrows||!this.isMobile)&&this.isOverflowing},isMobile:function(){return this.$vuetify.breakpoint.width<this.mobileBreakPoint},sliderStyles:function(){return{left:this.sliderLeft+"px",transition:null!=this.sliderLeft?null:"none",width:this.sliderWidth+"px"}}}},c=n(58),l=c.a.extend({name:"v-tabs-items",inject:{registerItems:{default:null},tabProxy:{default:null},unregisterItems:{default:null}},props:{cycle:Boolean},watch:{internalValue:function(e){this.tabProxy&&this.tabProxy(e)}},created:function(){this.registerItems&&this.registerItems(this.changeModel)},beforeDestroy:function(){this.unregisterItems&&this.unregisterItems()},methods:{changeModel:function(e){this.internalValue=e},getValue:function(e,i){return e.id?e.id:c.a.options.methods.getValue.call(this,e,i)},next:function(){(this.cycle||this.internalIndex!==this.items.length-1)&&c.a.options.methods.next.call(this)},prev:function(){(this.cycle||0!==this.internalIndex)&&c.a.options.methods.prev.call(this)}}}),f=n(16),d={name:"v-tabs-slider",mixins:[f.a],render:function(e){return e("div",this.setBackgroundColor(this.color||"accent",{staticClass:"v-tabs__slider"}))}},m=n(117),h={methods:{genBar:function(e){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs__bar",class:this.themeClasses,ref:"bar"}),[this.genTransition("prev"),this.genWrapper(this.genContainer(e)),this.genTransition("next")])},genContainer:function(e){return this.$createElement("div",{staticClass:"v-tabs__container",class:{"v-tabs__container--align-with-title":this.alignWithTitle,"v-tabs__container--centered":this.centered,"v-tabs__container--fixed-tabs":this.fixedTabs,"v-tabs__container--grow":this.grow,"v-tabs__container--icons-and-text":this.iconsAndText,"v-tabs__container--overflow":this.isOverflowing,"v-tabs__container--right":this.right},style:this.containerStyles,ref:"container"},e)},genIcon:function(e){var t=this;return this.hasArrows&&this[e+"IconVisible"]?this.$createElement(m.a,{staticClass:"v-tabs__icon v-tabs__icon--"+e,props:{disabled:!this[e+"IconVisible"]},on:{click:function(){return t.scrollTo(e)}}},this[e+"Icon"]):null},genItems:function(e,t){return e.length>0?e:t.length?this.$createElement(l,t):null},genTransition:function(e){return this.$createElement("transition",{props:{name:"fade-transition"}},[this.genIcon(e)])},genWrapper:function(e){var t=this;return this.$createElement("div",{staticClass:"v-tabs__wrapper",class:{"v-tabs__wrapper--show-arrows":this.hasArrows},ref:"wrapper",directives:[{name:"touch",value:{start:function(e){return t.overflowCheck(e,t.onTouchStart)},move:function(e){return t.overflowCheck(e,t.onTouchMove)},end:function(e){return t.overflowCheck(e,t.onTouchEnd)}}}]},[e])},genSlider:function(e){return e.length||(e=[this.$createElement(d,{props:{color:this.sliderColor}})]),this.$createElement("div",{staticClass:"v-tabs__slider-wrapper",style:this.sliderStyles},e)}}},v=(n(20),{props:{activeClass:{type:String,default:"v-tabs__item--active"},alignWithTitle:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0,validator:function(e){return!isNaN(parseInt(e))}},hideSlider:Boolean,iconsAndText:Boolean,mandatory:{type:Boolean,default:!0},mobileBreakPoint:{type:[Number,String],default:1264,validator:function(e){return!isNaN(parseInt(e))}},nextIcon:{type:String,default:"$vuetify.icons.next"},prevIcon:{type:String,default:"$vuetify.icons.prev"},right:Boolean,showArrows:Boolean,sliderColor:{type:String,default:"accent"},value:[Number,String]}}),y={methods:{newOffset:function(e){var t=this.$refs.wrapper.clientWidth;return"prev"===e?Math.max(this.scrollOffset-t,0):Math.min(this.scrollOffset+t,this.$refs.container.clientWidth-t)},onTouchStart:function(e){this.startX=this.scrollOffset+e.touchstartX,this.$refs.container.style.transition="none",this.$refs.container.style.willChange="transform"},onTouchMove:function(e){this.scrollOffset=this.startX-e.touchmoveX},onTouchEnd:function(){var e=this.$refs.container,t=this.$refs.wrapper,n=e.clientWidth-t.clientWidth;e.style.transition=null,e.style.willChange=null,this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=n&&(this.scrollOffset=n)}}},x=n(82),w=n(7),C=n(83),S=n(78),k=n(5),O=n(147);t.a=r.a.extend({name:"v-tabs",directives:{Resize:C.a,Touch:S.a},mixins:[f.a,x.a,o,v,h,y,{watch:{activeTab:function(e,t){this.setOverflow(),e&&(this.tabItems&&this.tabItems(this.getValue(e,this.items.indexOf(e))),null!=t&&this.updateTabsView())},alignWithTitle:"callSlider",centered:"callSlider",fixedTabs:"callSlider",hasArrows:function(e){e||(this.scrollOffset=0)},internalValue:function(e){this.$listeners.input&&this.$emit("input",e)},lazyValue:"updateTabs",right:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize",scrollOffset:function(e){this.$refs.container.style.transform="translateX("+-e+"px)",this.hasArrows&&(this.prevIconVisible=this.checkPrevIcon(),this.nextIconVisible=this.checkNextIcon())}}},w.a],provide:function(){return{tabGroup:this,tabProxy:this.tabProxy,registerItems:this.registerItems,unregisterItems:this.unregisterItems}},data:function(){return{bar:[],content:[],isOverflowing:!1,nextIconVisible:!1,prevIconVisible:!1,resizeTimeout:null,scrollOffset:0,sliderWidth:null,sliderLeft:null,startX:0,tabItems:null,transitionTime:300,widths:{bar:0,container:0,wrapper:0}}},watch:{items:"onResize",tabs:"onResize"},mounted:function(){this.init()},methods:{checkIcons:function(){this.prevIconVisible=this.checkPrevIcon(),this.nextIconVisible=this.checkNextIcon()},checkPrevIcon:function(){return this.scrollOffset>0},checkNextIcon:function(){return this.widths.container>this.scrollOffset+this.widths.wrapper},callSlider:function(){var e=this;if(this.hideSlider||!this.activeTab)return!1;var t=this.activeTab;this.$nextTick(function(){t&&t.$el&&(e.sliderWidth=t.$el.scrollWidth,e.sliderLeft=t.$el.offsetLeft)})},init:function(){this.$listeners.input&&Object(k.d)("@input","@change",this)},onResize:function(){if(!this._isDestroyed){this.setWidths();var e=this.isBooted?this.transitionTime:0;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.updateTabsView,e)}},overflowCheck:function(e,t){this.isOverflowing&&t(e)},scrollTo:function(e){this.scrollOffset=this.newOffset(e)},setOverflow:function(){this.isOverflowing=this.widths.bar<this.widths.container},setWidths:function(){var e=this.$refs.bar?this.$refs.bar.clientWidth:0,t=this.$refs.container?this.$refs.container.clientWidth:0,n=this.$refs.wrapper?this.$refs.wrapper.clientWidth:0;this.widths={bar:e,container:t,wrapper:n},this.setOverflow()},parseNodes:function(){for(var e=[],t=[],n=[],r=[],o=(this.$slots.default||[]).length,i=0;i<o;i++){var c=this.$slots.default[i];if(c.componentOptions)switch(c.componentOptions.Ctor.options.name){case"v-tabs-slider":n.push(c);break;case"v-tabs-items":t.push(c);break;case"v-tab-item":e.push(c);break;default:r.push(c)}else r.push(c)}return{tab:r,slider:n,items:t,item:e}},registerItems:function(e){this.tabItems=e,e(this.internalValue)},unregisterItems:function(){this.tabItems=null},updateTabsView:function(){this.callSlider(),this.scrollIntoView(),this.checkIcons()},scrollIntoView:function(){if(this.activeTab){if(!this.isOverflowing)return this.scrollOffset=0;var e=this.widths.wrapper+this.scrollOffset,t=this.activeTab.$el,n=t.clientWidth,r=t.offsetLeft,o=n+r,c=.3*n;this.activeTab===this.items[this.items.length-1]&&(c=0),r<this.scrollOffset?this.scrollOffset=Math.max(r-c,0):e<o&&(this.scrollOffset-=e-o-c)}},tabProxy:function(e){this.internalValue=e}},render:function(e){var t=this.parseNodes(),n=t.tab,r=t.slider,o=t.items,c=t.item;return e("div",{staticClass:"v-tabs",directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar([this.hideSlider?null:this.genSlider(r),n]),e(O.a,{props:{dark:this.theme.isDark,light:!this.theme.isDark}},[this.genItems(o,c)])])}})},function(e,t,n){"use strict";n(246),n(32),n(57),n(23),n(15),n(56);var r=n(12),o=(n(30),n(31),n(27),n(98),n(61),n(62),n(5));function c(e){var t=void 0;if("number"==typeof e)t=e;else{if("string"!=typeof e)throw new TypeError("Colors can only be numbers or strings, recieved "+(null==e?e:e.constructor.name)+" instead");var n="#"===e[0]?e.substring(1):e;3===n.length&&(n=n.split("").map(function(e){return e+e}).join("")),6!==n.length&&Object(o.c)("'"+e+"' is not a valid rgb color"),t=parseInt(n,16)}return t<0?(Object(o.c)("Colors cannot be negative: '"+e+"'"),t=0):(t>16777215||isNaN(t))&&(Object(o.c)("'"+e+"' is not a valid rgb color"),t=16777215),t}function l(e){var t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}var f=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],d=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},m=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function v(e){for(var t,n=Array(3),r=d,o=f,i=0;i<3;++i)n[i]=Math.round(255*(t=r(o[i][0]*e[0]+o[i][1]*e[1]+o[i][2]*e[2]),Math.max(0,Math.min(1,t))));return(n[0]<<16)+(n[1]<<8)+(n[2]<<0)}function y(e){for(var t=[0,0,0],n=h,r=m,o=n((e>>16&255)/255),g=n((e>>8&255)/255),b=n((e>>0&255)/255),i=0;i<3;++i)t[i]=r[i][0]*o+r[i][1]*g+r[i][2]*b;return t}n(248);var x=.20689655172413793,w=function(e){return e>Math.pow(x,3)?Math.cbrt(e):e/(3*Math.pow(x,2))+4/29},C=function(e){return e>x?Math.pow(e,3):3*Math.pow(x,2)*(e-4/29)};function S(e){var t=w,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function k(e){var t=C,n=(e[0]+16)/116;return[.95047*t(n+e[1]/500),t(n),1.08883*t(n-e[2]/200)]}var O=function(){return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T="function"==typeof Symbol&&"symbol"===Object(r.a)(Symbol.iterator)?function(e){return Object(r.a)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Object(r.a)(e)};var E=function(e,t){return"\n."+e+" {\n  background-color: "+t+" !important;\n  border-color: "+t+" !important;\n}\n."+e+"--text {\n  color: "+t+" !important;\n  caret-color: "+t+" !important;\n}"},N=function(e,t,n){var r=t.split(/(\d)/,2),o=O(r,2),c=o[0],l=o[1];return"\n."+e+"."+c+"-"+l+" {\n  background-color: "+n+" !important;\n  border-color: "+n+" !important;\n}\n."+e+"--text.text--"+c+"-"+l+" {\n  color: "+n+" !important;\n  caret-color: "+n+" !important;\n}"},_=function(e){return"--v-"+e+"-"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base")},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"var("+_(e,t)+")"};function D(e,t){for(var n={base:l(t)},i=5;i>0;--i)n["lighten"+i]=l(R(t,i));for(var r=1;r<=4;++r)n["darken"+r]=l(B(t,r));return n}function R(e,t){var n=S(y(e));return n[0]=n[0]+10*t,v(k(n))}function B(e,t){var n=S(y(e));return n[0]=n[0]-10*t,v(k(n))}var M={data:function(){return{style:null}},computed:{parsedTheme:function(){return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.keys(t),o={},i=0;i<r.length;++i){var f=r[i],d=t[f];n?("base"===f||f.startsWith("lighten")||f.startsWith("darken"))&&(o[f]=l(c(d))):"object"===(void 0===d?"undefined":T(d))?o[f]=e(d,!0):o[f]=D(0,c(d))}return o}(this.$vuetify.theme)},generatedStyles:function(){var e=this.parsedTheme,t=void 0;return null!=this.$vuetify.options.themeCache&&null!=(t=this.$vuetify.options.themeCache.get(e))?t:(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e);if(!n.length)return"";var r="",o="";o+="a { color: "+(t?A("primary"):e.primary.base)+"; }";for(var i=0;i<n.length;++i){var c=n[i],l=e[c];if("object"===(void 0===l?"undefined":T(l))){o+=E(c,t?A(c):l.base),t&&(r+="  "+_(c)+": "+l.base+";\n");for(var f=Object.keys(l),d=0;d<f.length;++d){var m=f[d],h=l[m];"base"!==m&&(o+=N(c,m,t?A(c,m):h),t&&(r+="  "+_(c,m)+": "+h+";\n"))}}}return t&&(r=":root {\n"+r+"}\n\n"),r+o}(e,this.$vuetify.options.customProperties),null!=this.$vuetify.options.minifyTheme&&(t=this.$vuetify.options.minifyTheme(t)),null!=this.$vuetify.options.themeCache&&this.$vuetify.options.themeCache.set(e,t),t)},vueMeta:function(){if(!1===this.$vuetify.theme)return{};var e={cssText:this.generatedStyles,id:"vuetify-theme-stylesheet",type:"text/css"};return this.$vuetify.options.cspNonce&&(e.nonce=this.$vuetify.options.cspNonce),{style:[e]}}},metaInfo:function(){return this.vueMeta},head:function(){return this.vueMeta},watch:{generatedStyles:function(){!this.meta&&this.applyTheme()}},created:function(){if(!1!==this.$vuetify.theme)if(this.$meta);else if("undefined"==typeof document&&this.$ssrContext){var e=this.$vuetify.options.cspNonce?' nonce="'+this.$vuetify.options.cspNonce+'"':"";this.$ssrContext.head=this.$ssrContext.head||"",this.$ssrContext.head+='<style type="text/css" id="vuetify-theme-stylesheet"'+e+">"+this.generatedStyles+"</style>"}else"undefined"!=typeof document&&(this.genStyle(),this.applyTheme())},methods:{applyTheme:function(){this.style&&(this.style.innerHTML=this.generatedStyles)},genStyle:function(){var style=document.getElementById("vuetify-theme-stylesheet");style||((style=document.createElement("style")).type="text/css",style.id="vuetify-theme-stylesheet",this.$vuetify.options.cspNonce&&style.setAttribute("nonce",this.$vuetify.options.cspNonce),document.head.appendChild(style)),this.style=style}}},I=n(7),z=n(83),P=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a={name:"v-app",directives:{Resize:z.a},mixins:[M,I.a],props:{id:{type:String,default:"app"},dark:Boolean},computed:{classes:function(){return P({"application--is-rtl":this.$vuetify.rtl},this.themeClasses)}},watch:{dark:function(){this.$vuetify.dark=this.dark}},mounted:function(){this.$vuetify.dark=this.dark},render:function(e){var data={staticClass:"application",class:this.classes,attrs:{"data-app":!0},domProps:{id:this.id}},t=e("div",{staticClass:"application--wrap"},this.$slots.default);return e("div",data,[t])}}},function(e,t,n){"use strict";var r=n(2),o=n(108),c=n(161),l=n(5),f=c.a.extend({name:"v-card-media",mounted:function(){Object(l.d)("v-card-media",this.src?"v-img":"v-responsive",this)}}),d=n(103);n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h});var m=Object(r.c)("v-card__actions"),h=Object(r.c)("v-card__text");o.a,d.a},function(e,t,n){"use strict";n(145),n(20),n(235);var r=n(80),o=n(10);var c=n(16),l=n(7),f=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a={name:"v-footer",mixins:[function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(o.a)(Object(r.b)(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty:function(){return e}},watch:{app:function(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty:function(e,t){this.$vuetify.application.unbind(this._uid,t)}},activated:function(){this.callUpdate()},created:function(){for(var i=0,e=t.length;i<e;i++)this.$watch(t[i],this.callUpdate);this.callUpdate()},mounted:function(){this.callUpdate()},deactivated:function(){this.removeApplication()},destroyed:function(){this.removeApplication()},methods:{callUpdate:function(){this.app&&this.$vuetify.application.bind(this._uid,this.applicationProperty,this.updateApplication())},removeApplication:function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.app)&&this.$vuetify.application.unbind(this._uid,this.applicationProperty)},updateApplication:function(){return 0}}})}(null,["height","inset"]),c.a,l.a],props:{height:{default:32,type:[Number,String]},inset:Boolean},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},computedMarginBottom:function(){if(this.app)return this.$vuetify.application.bottom},computedPaddingLeft:function(){return this.app&&this.inset?this.$vuetify.application.left:0},computedPaddingRight:function(){return this.app&&this.inset?this.$vuetify.application.right:0},styles:function(){var e={height:isNaN(this.height)?this.height:this.height+"px"};return this.computedPaddingLeft&&(e.paddingLeft=this.computedPaddingLeft+"px"),this.computedPaddingRight&&(e.paddingRight=this.computedPaddingRight+"px"),this.computedMarginBottom&&(e.marginBottom=this.computedMarginBottom+"px"),e}},methods:{updateApplication:function(){var e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render:function(e){return e("footer",this.setBackgroundColor(this.color,{staticClass:"v-footer",class:f({"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--inset":this.inset},this.themeClasses),style:this.styles,ref:"content"}),this.$slots.default)}}}]]);